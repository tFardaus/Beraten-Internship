/**
 * Kendo UI v2025.3.1002 (http://www.telerik.com/kendo-ui)
 * Copyright 2025 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("kendo.scheduler.view.js"),require("kendo.icons.js")):"function"==typeof define&&define.amd?define(["exports","kendo.scheduler.view.min","kendo.icons.min"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).kendo=e.kendo||{},e.kendo._globals=e.kendo._globals||{},e.kendo._globals.SchedulerTimelineview={}))}(this,(function(e){!function(e,t){var r=window.kendo,i=r.ui,n=r.date.setTime,o=i.SchedulerView,a=r._outerWidth,s=r._outerHeight,l=e.extend,d=r.htmlEncode,u=r.date.getDate,c=r.date.getMilliseconds,v=r.date.MS_PER_DAY,h=r.date.MS_PER_MINUTE,f="k-current-time",_="k-current-time-arrow",p="k-scheduler-header-wrap",g="k-event-inverse",m=.8666,w=".",T=".kendoTimelineView";var y=r.template((({title:e,start:t,end:i})=>`<div><div class="k-event-template k-event-time">${d(r.format("{0:t} - {1:t}",t,i))}</div><div class="k-event-template">${e}</div></div>`)),D=r.template((({date:e})=>`<span class='k-link k-nav-day'>${r.format("{0:m}",e)}</span>`)),k=e=>`<div role="button" aria-label="${d(e.ariaLabel)}" data-${e.ns}uid="${e.uid}" `+(e.resources[0]?`${r.attr("style-background-color")}="${e.resources[0].color}" ${r.attr("style-border-color")}="${e.resources[0].color}" class="k-event">`:'class="k-event">')+'<span class="k-event-actions">'+`${e.tail?r.ui.icon("caret-alt-left"):""}`+`${e.isException()?r.ui.icon("arrows-no-repeat"):e.isRecurring()?r.ui.icon("arrow-rotate-cw"):""}</span>`+`${r.template(e.template)(e)}<span class="k-event-actions">`+(e.showDelete?`<a href="#" class="k-link k-event-delete" title="${e.messages.destroy}" aria-label="${e.messages.destroy}">${r.ui.icon("x")}</a>`:"")+`${e.head?r.ui.icon("caret-alt-right"):""}</span>`+(e.resizable&&!e.tail?'<span class="k-resize-handle k-resize-w"></span>':"")+(e.resizable&&!e.head?'<span class="k-resize-handle k-resize-e"></span>':"")+"</div>";function S(e){var t=new Date(1980,1,1,0,0,0);return n(t,c(e)),t}function C(e){var t=0;if(e.columns){for(var r=0;r<e.columns.length;r++)t+=C(e.columns[r]);return e.colspan=t,t}return e.colspan=1,1}var x=r.Class.extend({init:function(e){this._view=e},_getTimeSlotByPosition:function(e,t,r){return this._view.groups[r].timeSlotByPosition(e,t)},_hideHeaders:function(){var e=this._view;e.timesHeader.find("table tr").last().hide(),e.datesHeader.find("table tr").last().hide()},_setColspan:function(e){C(e)},_createRowsLayout:function(e,t,r){return this._view._createRowsLayout(e,t,r)},_createVerticalColumnsLayout:function(e,t,r,i){return i},_createColumnsLayout:function(e,t,r){return this._view._createColumnsLayout(e,t,r)},_getRowCount:function(){return this._view._groupCount()},_getGroupsCount:function(){return 1},_addContent:function(e,t,i,n,o,a,s,l){var d=this._view;var u="";var c=d.options;var v=function(t){var i="";var n="";var o;var a;return r.date.isToday(e[_])&&(n+="k-today"),(r.date.getMilliseconds(t)<r.date.getMilliseconds(c.workDayStart)||r.date.getMilliseconds(t)>=r.date.getMilliseconds(c.workDayEnd)||!d._isWorkDay(e[_]))&&(n+=" k-nonwork-hour"),i+="<td"+(""!==n?' class="'+n+'"':"")+">",o=r.date.getDate(e[_]),r.date.setTime(o,r.date.getMilliseconds(t)),i+=s({date:o,resources:(a=l?h:f,function(){return d._resourceBySlot({groupIndex:a})})}),i+="</td>"};for(var h=0;h<n;h++){u+="<tr>";for(var f=0;f<i;f++)for(var _=0,p=t;_<p;_++)u+=d._forTimeRange(o,a,v);u+="</tr>"}return u},_addTimeSlotsCollections:function(e,t,r,i,n){var o=this._view;var a=r.length;n&&(a=Math.floor(a/e));for(var s=0;s<e;s++){var l=0;var d=o.groups[s];var u;n&&(l=s);var v=0;n||(v=s);var h=r[l*a].children;var f=h.length/(n?1:e);var _=f/t;for(var p=0;p<t;p++){var g=p*_+f*v;u=c(new Date(+o.startTime()));for(var m=0;m<_;m++)o._addTimeSlotToCollection(d,h,m,g,p,u,i),u+=i}}},_getVerticalGroupCount:function(e){return e},_getVerticalRowCount:function(e,t,r){return this._view._isVerticallyGrouped()?e[t].maxRowCount:r},_renderEvent:function(e,t,r,i,n,o){var a=this._view;var s;(s=a._createEventElement(r.occurrence,t,n.head||r.head,n.tail||r.tail)).appendTo(o).css({top:0,height:a.options.eventHeight});var l={start:r.occurrence._startTime||r.occurrence.start,end:r.occurrence._endTime||r.occurrence.end,element:s,uid:t.uid,slotRange:n,rowIndex:0,offsetTop:0};e.events[t.uid]=l,a._inverseEventColor(s),a.addContinuousEvent(i,n,s,t.isAllDay),a._arrangeRows(l,n,e)},_verticalCountForLevel:function(e){return this._view._rowCountForLevel(e)},_horizontalCountForLevel:function(e){return this._view._columnCountForLevel(e)},_updateCurrentVerticalTimeMarker:function(t,r){var i=this._view;var n="<div class='"+f+"'></div>";var o=i.datesHeader.find(w+p);var s=Math.round(t[0].innerRect(r,new Date(r.getTime()+1),!1).left);var l=e(n).prependTo(o).addClass(_+"-down");l.css({left:i._adjustLeftPosition(s-a(l)*m/2),top:o.find("tr").last().prev().position().top}),e(n).prependTo(i.content).css({left:i._adjustLeftPosition(s),width:"1px",height:i.content[0].scrollHeight-1,top:0})},_changeGroup:function(){return t},_prevGroupSlot:function(e,t,r){return this._view._isVerticallyGrouped()?e:t._collection(0,r).last()},_nextGroupSlot:function(e,t,r){return this._view._isVerticallyGrouped()?e:t._collection(0,r).first()},_verticalSlots:function(e,t){return this._view._changeGroup(e,t)},_verticalMethod:function(e){return e?"leftSlot":"rightSlot"},_normalizeVerticalSelection:function(){return t},_horizontalSlots:function(e,t,r,i,n,o,a){var s=this._view;var l={};return l.startSlot=t[r](i),l.endSlot=t[r](n),o||!s._isHorizontallyGrouped()||l.startSlot&&l.endSlot||(l.startSlot=l.endSlot=s._changeGroup(e,a)),l},_changeVerticalViewPeriod:function(){return!1},_changeHorizontalViewPeriod:function(e,t,r,i){var n=this._view;return!(e.startSlot&&e.endSlot||t||!n._changeViewPeriod(r,i,!1))},_updateDirection:function(e,t,r,i){this._view._updateDirection(e,t,r,i,!0)},_createMoveHint:function(e,t){var r=this._view;var i=e.start;var n=r._createEventElement(t.occurrence,t.occurrence,!1,!1);n.addClass("k-event-drag-hint");var o=e.innerRect(t.occurrence.start,t.occurrence.end,r.options.snap);var a=o.right-o.left;a<0&&(a=0);var s={left:r._adjustLeftPosition(o.left),top:i.offsetTop,height:i.offsetHeight,width:a};n.css(s),t.occurrence.inverseColor&&n.addClass(g),r._appendMoveHint(n)},_adjustLeftPosition:function(e){var t=this._view;return t._isRtl&&(e-=t.content[0].scrollWidth-t.content[0].clientWidth),e}});var V=r.Class.extend({init:function(e){this._view=e},_getTimeSlotByPosition:function(e,t,r){return this._view.groups[r].timeSlotByPosition(e,t,!0)},_hideHeaders:function(){var e=this._view;e._isVerticallyGrouped()?e.times.find(".k-last").hide():(e.timesHeader.find("table tr").eq(2).hide(),e.datesHeader.find("table tr").eq(2).hide())},_setColspan:function(){},_createRowsLayout:function(e,t,r,i){return this._view._createDateLayout(i,null,!0)},_createVerticalColumnsLayout:function(e,t,r){return this._view._createColumnsLayout(e,null,r)},_createColumnsLayout:function(e,t,r,i){return this._view._createColumnsLayout(e,t,r,i,!0)},_getRowCount:function(e){return this._view._rowCountForLevel(e)},_getGroupsCount:function(){return this._view._groupCount()},_addContent:function(e,t,i,o,a,s,l,d){var u=this._view;var c="";var v=u.options;var f=function(t,i,n,o,a,s){var d="";var c="";var h;var f=u._isVerticallyGrouped()?_:T;var p;return r.date.isToday(e[T])&&(c+="k-today"),(r.date.getMilliseconds(t)<r.date.getMilliseconds(v.workDayStart)||r.date.getMilliseconds(t)>=r.date.getMilliseconds(v.workDayEnd)||!u._isWorkDay(e[f]))&&(c+=" k-nonwork-hour"),d+="<td"+(""!==c?' class="'+c+'"':"")+">",h=r.date.getDate(e[T]),r.date.setTime(h,r.date.getMilliseconds(t)),d+=l({date:h,resources:(p=s,function(){return u._resourceBySlot({groupIndex:p})})}),d+="</td>"};var _,p=new Date(a),g=u.options.minorTickCount,m=u.options.majorTick*h/g||1;for(var w=0;w<o;w++){c+="<tr>",w%(o/u._dates.length)==0&&(_=w/(o/u._dates.length),p=new Date(u._dates[_]),r.date.setTime(p,r.date.getMilliseconds(a)));for(var T=0,y=t;T<y;T++)if(c+=u._forTimeRange(p,s,f,d,i),d){n(p,m,!1);break}c+="</tr>"}return c},_addTimeSlotsCollections:function(e,t,r,i,n){var o=this._view;var a=r.length;n&&(a/=t);for(var s=0;s<t;s++){var l=0;var d;n&&(l=s);var u=r[l*a].children;var v=n?a:u.length/(t*e);var h=u.length/t;var f;d=c(new Date(+o.startTime()));for(var _=0;_<v;_++){n?(f=0,u=r[_+v*s].children):f=s*h+e*_;for(var p=0;p<e;p++){var g=o.groups[p];o._addTimeSlotToCollection(g,u,p,f,s,d,i)}d+=i}}},_getVerticalGroupCount:function(){return this._view.content.find("tr").length},_getVerticalRowCount:function(e,t,r){return r},_renderEvent:function(e,t,r,i,n,o,a,s){var l=this._view;var d;var u=[];for(var c=n.start.index;c<=n.end.index;c++){(d=l._createEventElement(r.occurrence,t,c!==s,c!==a)).appendTo(o).css({top:0,height:l.options.eventHeight});var v=i._timeSlotCollections[0]._slots[c];var h=i.timeSlotRanges(v.start,v.end,!1)[0];var f={start:c===a?r.occurrence._startTime||r.occurrence.start:v.start,end:c===s?r.occurrence._endTime||r.occurrence.end:v.end,element:d,uid:t.uid,slotRange:h,rowIndex:0,offsetTop:0};e.events[t.uid]=f,u.push(f),l.addContinuousEvent(i,h,d,t.isAllDay),l._arrangeRows(f,h,e)}e.events[t.uid]=u},_verticalCountForLevel:function(e){return this._view._columnCountForLevel(e)},_horizontalCountForLevel:function(e,t){var r=this._view;return r._columnCountForLevel(t)/r._columnCountForLevel(2)},_updateCurrentVerticalTimeMarker:function(t,r){var i=this._view;var n=i.times.find("tr").first().find("th").first();var o=i.times.find("tr").first().find("th").last();var l="<div class='"+f+"'></div>";var d=e(l).prependTo(i.times);var u=Math.round(t[0].innerRect(r,new Date(r.getTime()+1),!1).top);var c={};this._isRtl?(c.right=n.position().left+s(n)-s(o),d.addClass(_+"-left")):(c.left=o.position().left,d.addClass(_+"-right")),c.top=u-a(d)*m/2,d.css(c),e(l).prependTo(i.content).css({top:u,height:"1px",right:"1px",width:i.content[0].scrollWidth,left:0})},_changeGroup:function(e,t,r){var i=this._view;r||(e.groupIndex=t?i.groups.length-1:0)},_prevGroupSlot:function(e){return e},_nextGroupSlot:function(e){return e},_changeDate:function(e,t,r){var i=this._view.groups[e.groupIndex];var n,o;if(t){if(n=i._getCollections(!1),(o=r.index-1)>=0)return n[0]._slots[o]}else if(n=i._getCollections(!1),o=r.index+1,n[0]&&n[0]._slots[o])return n[0]._slots[o]},_verticalSlots:function(e,t,r){return this._changeDate(e,t,r)},_verticalMethod:function(e,t){return t?e?"upSlot":"downSlot":e?"leftSlot":"rightSlot"},_normalizeVerticalSelection:function(e,r,i,n){var o=this._view;return n?t:o._normalizeVerticalSelection(e,r,i)},_horizontalSlots:function(e,t,r,i,n,o,a){var s=this._view;var l=s._changeGroup(e,a);var d={};return l?d.startSlot=d.endSlot=l:s._isVerticallyGrouped()||(d.startSlot=t[r](i),d.endSlot=t[r](n)),d},_changeVerticalViewPeriod:function(e,t,r,i){var n=this._view;return!(e.startSlot&&e.endSlot||t||!n._changeViewPeriod(r,i,n._isVerticallyGrouped()))},_changeHorizontalViewPeriod:function(e,t,r,i){var n=this._view;return!n._isVerticallyGrouped()&&!(e.startSlot&&e.endSlot||t||!n._changeViewPeriod(r,i,!1))},_updateDirection:function(e,t,r,i){var n=this._view;n._updateDirection(e,t,r,i,!n._isVerticallyGrouped())},_createMoveHint:function(e,t){var r=this._view;var i=e.start;var n=e.end;for(var o=i.index;o<=n.index;o++){var a=e.collection._slots[o];var s=r._createEventElement(t.occurrence,t.occurrence,!1,!1);s.addClass("k-event-drag-hint");var l={left:a.offsetLeft+2,top:a.offsetTop,height:r.options.eventHeight,width:a.offsetWidth};s.css(l),t.occurrence.inverseColor&&s.addClass(g),r._appendMoveHint(s)}},_adjustLeftPosition:function(e){var t=this._view;return t._isRtl&&!t._isVerticallyGrouped()&&(e-=t.content[0].scrollWidth-t.content[0].offsetWidth),e}});r.ui.scheduler.TimelineGroupedView=x,r.ui.scheduler.TimelineGroupedByDateView=V;var b=o.extend({init:function(t,r){var i=this,n=e("<div class='k-event'></div>").appendTo(document.body);o.fn.init.call(i,t,r),i._zeroWidthEventOffset=n.outerWidth(),n.remove(),i._groupedView=i._getGroupedView(),i.title=i.options.title||i.options.name,i._workDays=function(e){if(e.workDays&&e.workDays.length)return e.workDays;var t=[];var r=e.workWeekStart%7;var i=Math.abs(e.workWeekEnd%7);for(t.push(r);i!=r;)r>6?r-=7:r++,t.push(r);return t}(i.options),i._templates(),i._editable(),i.calculateDateRange(),i._groups(),i._currentTime(!0)},name:"timeline",_isVirtualized:function(){return!1},_getGroupedView:function(){return this._isGroupedByDate()?new r.ui.scheduler.TimelineGroupedByDateView(this):new r.ui.scheduler.TimelineGroupedView(this)},_getNextEventIndexBySlot:function(e,t,i){if(this._isVerticallyGrouped())return r.ui.SchedulerView.fn._getNextEventIndexBySlot.call(this,e,t,i);var n=0;for(var o=0;o<t.length;o++)if(e.startDate()>t[o].start.startDate())n++;else{if(!(e.startDate().getTime()===t[o].start.startDate().getTime()&&i>t[o].start.groupIndex))break;n++}return n},_getSelectedSlot:function(e,t,i,n,o,a){return this._isVerticallyGrouped()?r.ui.SchedulerView.fn._getSelectedSlot.call(this,e,t,i,n,o,a):e},_getSortedEvents:function(t){return this._isVerticallyGrouped()?r.ui.SchedulerView.fn._getSortedEvents.call(this,t):t.sort((function(t,r){var i=t.start.startDate().getTime()-r.start.startDate().getTime();return 0===i&&(t.start.isDaySlot&&!r.start.isDaySlot&&(i=-1),!t.start.isDaySlot&&r.start.isDaySlot&&(i=1)),0===i&&(i=t.start.groupIndex-r.start.groupIndex),0===i&&(i=e(t.element).index()-e(r.element).index()),i}))},_currentTimeMarkerUpdater:function(){this._updateCurrentTimeMarker(new Date)},_scrollTo:function(e,t){o.fn._scrollTo.call(this,e,t);var r=e.offsetLeft,i=e.offsetWidth,n=t.scrollLeft,a=t.clientWidth,s=r+i,l=0;l=n>r?r:s>n+a?i<=a?s-a:r:n,t.scrollLeft=l},_updateCurrentTimeMarker:function(t){var i=this.options;if(this.datesHeader.find(w+f).remove(),this.times.find(w+f).remove(),this.content.find(w+f).remove(),this._isInDateSlot({start:t,end:t})){if(!1===i.currentTimeMarker.useLocalTimezone){var n=i.dataSource.options.schema.timezone;if(i.dataSource&&n){var o=r.timezone.offset(t,n);t=r.timezone.convert(t,t.getTimezoneOffset(),o)}}var s=i.group&&"vertical"!=i.group.orientation?this.groups.length:1;for(var l=0;l<s;l++){var d=this.groups[l];if(!d)return;var u=r.date.toUtcTime(t);var c=d.timeSlotRanges(u,u+1);if(0===c.length)return;if(c[0].collection.slotByStartDate(t))if(this._isVerticallyGrouped())this._groupedView._updateCurrentVerticalTimeMarker(c,t);else{var v="<div class='"+f+"'></div>";var h=this.datesHeader.find(w+p);var g=Math.round(c[0].innerRect(t,new Date(t.getTime()+1),!1).left);var T=e(v).prependTo(h).addClass(_+"-down");T.css({left:this._adjustLeftPosition(g-a(T)*m/2),top:h.find("tr").last().prev().position().top}),e(v).prependTo(this.content).css({left:this._adjustLeftPosition(g),width:"1px",height:this.content[0].scrollHeight-1,top:0})}}}},_adjustLeftPosition:function(e){return this._groupedView._adjustLeftPosition(e)},_currentTime:function(e){var r=this;var i=r.options.currentTimeMarker;!1!==i&&i.updateInterval!==t&&(r._currentTimeMarkerUpdater(),e&&(r._currentTimeUpdateTimer=setInterval(this._currentTimeMarkerUpdater.bind(r),i.updateInterval)))},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+T,".k-event a:has(.k-i-x),.k-event a:has(.k-svg-i-x)",(function(i){t.trigger("remove",{uid:e(this).closest(".k-event").attr(r.attr("uid"))}),i.preventDefault()})),!1!==t.options.editable.create&&t.element.on("dblclick"+T,".k-scheduler-content > table td",(function(e){var r=t._slotByPosition(e.pageX,e.pageY);if(r){var i=t._resourceBySlot(r);t.trigger("add",{eventInfo:l({start:r.startDate(),end:r.endDate()},i)})}e.preventDefault()})),!1!==t.options.editable.update&&t.element.on("dblclick"+T,".k-event",(function(i){t.trigger("edit",{uid:e(this).closest(".k-event").attr(r.attr("uid"))}),i.preventDefault()}))},_touchEditable:function(){var i=this;var n=0;r.support.mobileOS.android&&(n=5),!1!==i.options.editable.create&&(i._addUserEvents=new r.UserEvents(i.element,{threshold:n,useClickAsTap:!r.support.browser.edge,filter:".k-scheduler-content td",tap:function(e){if(!i._scrolling){var r=e.x.location!==t?e.x.location:e.x;var n=e.y.location!==t?e.y.location:e.y;var o=i._slotByPosition(r,n);if(o){var a=i._resourceBySlot(o);i.trigger("add",{eventInfo:l({start:o.startDate(),end:o.endDate()},a)})}e.preventDefault()}}})),!1!==i.options.editable.update&&(i._editUserEvents=new r.UserEvents(i.element,{threshold:n,useClickAsTap:!r.support.browser.edge,filter:".k-event",tap:function(t){if(!i._scrolling){var n=e(t.target).closest(".k-event");e(t.touch.initialTouch).is(".k-i-x,.k-svg-i-x")?i.trigger("remove",{uid:n.attr(r.attr("uid"))}):n.hasClass("k-event-active")||i.trigger("edit",{uid:n.attr(r.attr("uid"))}),t.preventDefault()}}}))},_slotByPosition:function(e,t){var i;var n=this.content;var o=n.offset();var a;if(e-=o.left,t-=o.top,this._isRtl){var s=r.support.browser;s.mozilla||s.webkit&&s.version>=85?(e+=n[0].scrollWidth-n[0].offsetWidth,e+=n[0].scrollLeft):s.msie?(e-=r.scrollLeft(n),e+=n[0].scrollWidth-n[0].offsetWidth):s.webkit&&(e+=n[0].scrollLeft)}else e+=n[0].scrollLeft;for(t+=n[0].scrollTop,e=Math.ceil(e),t=Math.ceil(t),a=0;a<this.groups.length;a++)if(i=this._groupedView._getTimeSlotByPosition(e,t,a))return i;return null},options:{name:"TimelineView",title:"Timeline",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",selectedMobileDateFormat:"{0:MMM dd}",date:r.date.today(),startTime:r.date.today(),endTime:r.date.today(),showWorkHours:!1,minorTickCount:2,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,majorTick:60,eventHeight:25,eventMinWidth:0,columnWidth:100,groupHeaderTemplate:({text:e})=>e,majorTimeHeaderTemplate:({date:e})=>r.toString(e,"t"),slotTemplate:()=>"&nbsp;",eventTemplate:y,dateHeaderTemplate:D,footer:{command:"workDay"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},ongoingEvents:{cssClass:null,enabled:!0,updateInterval:6e4},messages:{defaultRowText:"All events",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=l({},r.Template,e.templateSettings);this.eventTemplate=r.template(k),this.majorTimeHeaderTemplate=r.template(e.majorTimeHeaderTemplate,t),this.dateHeaderTemplate=r.template(e.dateHeaderTemplate,t),this.slotTemplate=r.template(e.slotTemplate,t),this.groupHeaderTemplate=r.template(e.groupHeaderTemplate,t)},_render:function(t){var r=this;t=t||[],r._dates=t,r._startDate=t[0],r._endDate=t[t.length-1||0],r._calculateSlotRanges(),r.createLayout(r._layout(t)),r._content(t),r._footer(),r._setContentWidth(),r.refreshLayout(),r.datesHeader.on("click"+T,".k-nav-day",(function(t){var i=e(t.currentTarget).closest("th");var n=r._slotByPosition(i.offset().left,r.content.offset().top);r.trigger("navigate",{view:"timeline",date:n.startDate()})})),r._groupedView._hideHeaders()},_setContentWidth:function(){var e=this.content.width();var t=this.content.find("table");var r=100;var i=t.find("tr").first().children().length*this.options.columnWidth;e<i&&(r=Math.ceil(i/e*100)),t.add(this.datesHeader.find("table")).css("width",r+"%")},_calculateSlotRanges:function(){var e=this._dates;var t=this.startTime();var i=this.endTime();(i=c(i))===(t=c(t))?i+=v-1:i<t&&(i+=v);var o=[];for(var a=0;a<e.length;a++){var s=u(e[a]);n(s,t);var l=u(e[a]);n(l,i),o.push({start:r.date.toUtcTime(s),end:r.date.toUtcTime(l)})}this._slotRanges=o},_forTimeRange:function(e,t,r,i,o){e=S(e),t=S(t);var a,s=c(e),l=c(t),d=this.options.minorTickCount,u=this.options.majorTick*h,f=u/d||1,_=new Date(+e),p=0,g="";for(a=v/f,s!=l&&(s>l&&(l+=v),a=(l-s)/f),a=i?1:Math.round(a),o&&(a*=o);p<a;p++){var m=p%(u/f);var w=0===m;var T=d;if(a%d!=0)w&&a-(p+1)<d&&(T=a%d);g+=r(_,w,m<d-1,m===d-1,T,p%o),i||(o?p%o==o-1&&n(_,f,!1):n(_,f,!1))}return g},_layout:function(e){var t=[];var r=[];var i=this;var n=[{text:i.options.messages.defaultRowText}];var o=i._groupedView;var a=[];for(var s=0;s<i.options.minorTickCount;s++)a.push({text:"&#8203;",minorTicks:!0});this._forTimeRange(i.startTime(),i.endTime(),(function(e,r,n,s,l){var d=i.majorTimeHeaderTemplate;if(r){var u={text:d({date:e}),className:s?"k-slot-cell":"",columns:a.slice(0,l)};o._setColspan(u),t.push(u)}}));for(var l=0;l<e.length;l++)r.push({text:i.dateHeaderTemplate({date:e[l]}),className:"k-slot-cell",columns:t.slice(0)});var d=this.groupedResources;return d.length&&("vertical"===this._groupOrientation()?(n=o._createRowsLayout(d,null,this.groupHeaderTemplate,r),r=o._createVerticalColumnsLayout(d,null,this.groupHeaderTemplate,r)):r=o._createColumnsLayout(d,r,this.groupHeaderTemplate,r)),{columns:r,rows:n}},_footerItems:function(){var e=this,t=[],r=this.options.footer.command;return e._isMobile()&&t.push(e._defaultTools.todayMobile),r&&"workDay"===r&&(e._isMobile()?t.push(e._defaultTools.fulldayMobile):t.push(e._defaultTools.fulldayDesktop)),t},toggleFullDay:function(){var e=this.options;this.trigger("navigate",{view:this.name||e.name,date:e.date,isWorkDay:!e.showWorkHours})},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},_isWorkDay:function(e){var t=e.getDay();var r=this._workDays;for(var i=0;i<r.length;i++)if(r[i]===t)return!0;return!1},_content:function(e){var t=this;var r=t.startTime();var i=this.endTime();var n=1;var o=1;var a=e.length;var s="";var l=this.groupedResources;var d=this.slotTemplate;var u=!1;l.length&&((u="vertical"===t._groupOrientation())?(o=t._groupedView._getRowCount(this.rowLevels.length-1),n=t._groupedView._getGroupsCount()):n=t._groupCount()),s+="<tbody>",s+=t._groupedView._addContent(e,a,n,o,r,i,d,u),s+="</tbody>",this.content.find("table").append(s)},_groups:function(){var e=this._groupCount();var t=this._dates;var i=t.length;this.groups=[];for(var o=0;o<e;o++){var a=this._addResourceView(o);var s=t[0];var l=t[t.length-1||0];var d=c(this.startTime());var v=c(this.endTime());0!==d&&v<=d&&(s=u(s),n(s,d),l=u(l),n(l,v)),a.addTimeSlotCollection(s,r.date.addDays(l,1))}this._timeSlotGroups(e,i)},_isHorizontallyGrouped:function(){return this.groupedResources.length&&"horizontal"===this._groupOrientation()},_timeSlotGroups:function(e,t){var r=this._timeSlotInterval();var i=this._isVerticallyGrouped();var n=this.content.find("tr");this._groupedView._addTimeSlotsCollections(e,t,n,r,i)},_addTimeSlotToCollection:function(e,t,r,i,n,o,a){var s=t[r+i];var l=e.getTimeSlotCollection(0);var d=this._dates[n];var u=Date.UTC(d.getFullYear(),d.getMonth(),d.getDate())+o;var c=u+a;l.addTimeSlot(s,u,c,!0)},startDate:function(){return this._startDate},endDate:function(){return this._endDate},visibleEndDate:function(){var e=c(this.startTime());var t=c(this.endTime());var i=this.endDate();return 0!==e&&t<=e&&(i=r.date.addDays(i,1)),i},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*h},nextDate:function(){return r.date.nextDay(this.endDate())},previousDate:function(){return r.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},render:function(e){this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),e=new r.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var t=[];this._eventsByResource(e,this.groupedResources,t);var i=[];var n=0;for(var o=0;o<t.length;o++){var a={groupIndex:o,maxRowCount:0,events:{}};i.push(a),this._renderEvents(t[o],o,a),n<a.maxRowCount&&(n=a.maxRowCount)}this._setRowsHeight(i,t.length,n),this._positionEvents(i,t.length),this._currentTime(!1),this._ongoingEvents(e),this.trigger("activate")},_positionEvents:function(e,t){for(var r=0;r<t;r++){var i=e[r].events;for(var n in i){var o=i[n];if(Array.isArray(o))for(var a=0;a<o.length;a++)this._positionEvent(o[a]);else this._positionEvent(o)}}},_setRowsHeight:function(t,r,i){var n=this.options.eventHeight;var o=this._getBottomRowOffset();var a=this._groupedView;var s=a._getVerticalGroupCount(r);r=this._isVerticallyGrouped()?s:1;for(var l=0;l<r;l++){var d=a._getVerticalRowCount(t,l,i);var u=(n+2)*(d=d||1)+o;var c=e(this.times.find("tr")[l]);var v=e(this.content.find("tr")[l]);c.height(u),v.height(u)}this._setContentWidth(),this.refreshLayout(),this._refreshSlots()},_getBottomRowOffset:function(){var e=.5*this.options.eventHeight;var t;var r;return this._isMobile()?(t=30,r=60):(t=15,r=30),e>r?e=r:e<t&&(e=t),e},_positionEvent:function(e){var t=this.options.eventHeight;var r=e.slotRange.innerRect(e.start,e.end,!1);var i=this._adjustLeftPosition(r.left);var n=r.right-r.left;if(n<0&&(n=0),n<this.options.eventMinWidth){var o=e.slotRange.collection;var a=o._slots[o._slots.length-1];var s=a.offsetLeft+a.offsetWidth;s<i+(n=this.options.eventMinWidth)&&(n=s-r.left)}e.element.css({top:e.slotRange.start.offsetTop+e.rowIndex*(t+2)+"px",left:i,width:n})},_refreshSlots:function(){for(var e=0;e<this.groups.length;e++)this.groups[e].refresh()},_eventsByResource:function(e,i,n,a){var s=i[0];if(s){var l=s.dataSource.view();l=l.filter((function(e){var i=r.getter(s.dataParentValueField)(e);return null===i||i===t||i===a}));for(var d=0;d<l.length;d++){var u=this._resourceValue(s,l[d]);var c=new r.data.Query(e).filter({field:s.field,operator:o.groupEqFilter(u)}).toArray();i.length>1?this._eventsByResource(c,i.slice(1),n,u):n.push(c)}}else n.push(e)},_isInDateSlot:function(e){var t=e.start;var i=e.end;var n=u(this._startDate);return t<r.date.addDays(u(this.visibleEndDate()),1)&&n<=i},_isInTimeSlot:function(e){var t=e._startTime||r.date.toUtcTime(e.start);var i=e._endTime||r.date.toUtcTime(e.end);var n=this._slotRanges;t===i&&(i+=1);for(var o=0;o<n.length;o++)if(t<n[o].end&&n[o].start<i)return!0;return!1},_adjustEvent:function(e){var t=e.start;var i=e.end;var o=e._time("start");var a=e._time("end");var s=c(this.startTime());var l=c(this.endTime());var d=null;var h=null;var f=!1;var _=!1;return e.isAllDay&&(t=u(t),o=0,i=u(i),a=v,h=r.date.addDays(i,1)),0===l&&(l=v),l<=s?(o<s&&o>=l&&(d=u(t),n(d,s),_=!0),a>l&&a<=s&&(h=u(i),n(h,l),f=!0)):(s>o?(d=u(t),n(d,s),_=!0):l<=o&&(d=u(t),d=r.date.addDays(d,1),n(d,s),_=!0),l<a?(h=u(i),n(h,l),f=!0):s>a&&(h=u(i),h=r.date.addDays(h,-1),n(h,l),f=!0)),{occurrence:e.clone({start:d||t,end:h||i,_startTime:d?r.date.toUtcTime(d):e._startTime,_endTime:h?r.date.toUtcTime(h):e._endTime,isAllDay:!1}),head:f,tail:_}},_renderEvents:function(e,t,r){var i;var n;var o;for(n=0,o=e.length;n<o;n++)if(i=e[n],this._isInDateSlot(i)){var a=i.isAllDay||i.duration()>=v;var s=this.content;if(a||this._isInTimeSlot(i)){var l=this._adjustEvent(i);var d=this.groups[t];if(d._continuousEvents||(d._continuousEvents=[]),this._isInTimeSlot(l.occurrence)){var u=d.slotRanges(l.occurrence,!1)[0];var c=u.start.index;var h=u.end.index;this._groupedView._renderEvent(r,i,l,d,u,s,c,h)}}}},addContinuousEvent:function(e,t,i,n){e._continuousEvents.push({element:i,isAllDay:n,uid:i.attr(r.attr("uid")),start:t.start,end:t.end})},_createEventElement:function(t,i,n,o){var a=this.eventTemplate;var s=this.options.editable;var d=this._isMobile();var u=s&&!1!==s.destroy&&!d;var c=s&&!1!==s.resize;var v=i._time("start");var h=i._time("end");var f=i.start;var _=i.end;var p=this.eventResources(i);i._startTime&&v!==r.date.getMilliseconds(i.start)&&(f=new Date(v),f=r.timezone.apply(f,"Etc/UTC")),i._endTime&&h!==r.date.getMilliseconds(i.end)&&(_=new Date(h),_=r.timezone.apply(_,"Etc/UTC"));var g=l({},{ns:r.ns,resizable:c,showDelete:u,head:n,tail:o,singleDay:1==this._dates.length,resources:p,inverseColor:!1,messages:this.options.messages,ariaLabel:this._formatEventAriaLabel(i.title,f,_,i.isAllDay),template:this.options.eventTemplate},i,{start:f,end:_});var m=e(a(g));return r.applyStylesFromKendoAttributes(m,["background-color","border-color"]),m},_arrangeRows:function(e,t,r){var i=t.start.index;var n=t.end.index;var a=e.slotRange.innerRect(e.start,e.end,!1);var s=a.right+this.options.eventMinWidth;var l=o.collidingEvents(t.events(),a.left,s);t.addEvent({slotIndex:i,slotIndexEnd:n,start:a.left,end:s,zeroWidthEventOffset:this._zeroWidthEventOffset,rectLeft:a.left,rectRight:s,element:e.element,uid:e.uid}),l.push({slotIndex:i,slotIndexEnd:n,start:a.left,end:s,zeroWidthEventOffset:this._zeroWidthEventOffset,uid:e.uid});var d=o.createRows(l);r.maxRowCount<d.length&&(r.maxRowCount=d.length);for(var u=0,c=d.length;u<c;u++){var v=d[u].events;for(var h=0,f=v.length;h<f;h++)r.events[v[h].uid].rowIndex=u}},_groupCount:function(){var e=this.groupedResources;var t=this._groupedView;return e.length?"vertical"===this._groupOrientation()?t._verticalCountForLevel(e.length-1):t._horizontalCountForLevel(e.length-1,this.columnLevels.length-1):1},_updateEventForSelection:function(e){return this._adjustEvent(e.clone()).occurrence},_eventOptionsForMove:function(e){return e.isAllDay?{isAllDay:!1}:{}},_updateEventForResize:function(e){e.isAllDay&&e.set("isAllDay",!1)},_updateMoveHint:function(e,t,r){var i=this.groups[t];var n=e.clone({start:e.start,end:e.end});var o=n.duration();if(n.start=new Date(n.start.getTime()+r),n.end=new Date(+n.start+o),this._removeMoveHint(e.uid),this._isInDateSlot(n)&&(n.isAllDay||n.duration()>=v||this._isInTimeSlot(n))){var a=this._adjustEvent(n);var s=i.slotRanges(a.occurrence,!1);for(var l=0;l<s.length;l++)this._groupedView._createMoveHint(s[l],a)}},_appendMoveHint:function(e){e.appendTo(this.content),this._moveHint=this._moveHint.add(e)},_updateResizeHint:function(e,t,i,n){var a=this.groups[t].ranges(i,n,!1,!1);this._removeResizeHint();for(var s=0;s<a.length;s++){var l=a[s];var d=l.startSlot();var u=l.innerRect(i,n,!1);u.top=d.offsetTop;var c=u.right-u.left;if(c<0)for(var v=0;v<l.events().length;v++)if(l.events()[v].uid===e.uid){c=l.events()[v].rectRight-u.left;break}var h=l.endSlot().offsetTop+d.offsetHeight-u.top;var f=this._adjustLeftPosition(u.left);var _=o.fn._createResizeHint.call(this,f,u.top,c,h);this._resizeHint=this._resizeHint.add(_)}var p=this.content;this._resizeHint.appendTo(p),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(r.toString(r.timezone.toLocalDate(i),"t")),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(r.toString(r.timezone.toLocalDate(n),"t"))},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_updateDirection:function(e,t,r,i,n){var o=t[0].start;var a=t[t.length-1].end;r&&!n&&o.index===a.index&&o.collectionIndex===a.collectionIndex&&(e.backward=i)},_changeGroup:function(e,t){var r=this[t?"prevGroupSlot":"nextGroupSlot"](e.start,e.groupIndex,!1);return r&&(e.groupIndex+=t?-1:1),this._groupedView._changeGroup(e,t,r),r},prevGroupSlot:function(e,t,r){var i=this.groups[t];var n=i.ranges(e,e,r,!1)[0].start;if(!(t<=0))return this._groupedView._prevGroupSlot(n,i,r)},nextGroupSlot:function(e,t,r){var i=this.groups[t];var n=i.ranges(e,e,r,!1)[0].start;if(!(t>=this.groups.length-1))return this._groupedView._nextGroupSlot(n,i,r)},_verticalSlots:function(e,t,r,i){var n=this._groupedView;var o=n._verticalMethod(i,r);var a=t[0].start;var s=t[t.length-1].end;var l=this.groups[e.groupIndex];var d=n._normalizeVerticalSelection(e,t,i,r);return d&&(a=s=d),a=l[o](a),s=l[o](s),r||!this._isVerticallyGrouped()||a&&s||(a=s=n._verticalSlots(e,i,d)),{startSlot:a,endSlot:s}},_horizontalSlots:function(e,t,r,i){var n=i?"upSlot":"downSlot";var o=t[0].start;var a=t[t.length-1].end;var s=this.groups[e.groupIndex];var l={};return r?(l.startSlot=s[n](o),l.endSlot=s[n](a),r||!this._isHorizontallyGrouped()||o&&a||(l.startSlot=l.endSlot=this._changeGroup(e,i))):l=this._groupedView._horizontalSlots(e,s,n,o,a,r,i),l},_changeViewPeriod:function(e,t){var r=t?this.previousDate():this.nextDate();var i=e.start;var o=e.end;var a,s;if(a=new Date(r),s=new Date(r),this._isInRange(a,s))return!1;e.start=a,e.end=s,this._isHorizontallyGrouped()&&(e.groupIndex=t?this.groups.length-1:0);var l=o-i;return t?(o=0===(o=c(this.endTime()))?v:o,n(e.start,o-l),n(e.end,o)):(i=c(this.startTime()),n(e.start,i),n(e.end,i+l)),e.events=[],!0},move:function(e,t,i){var n=!1;var o=this.groups[e.groupIndex];var a=r.keys;var s=this._groupedView;var l=o.ranges(e.start,e.end,!1,!1);var d,u,c,v;if(t===a.DOWN||t===a.UP){if(n=!0,c=t===a.UP,s._updateDirection(e,l,i,c),v=this._verticalSlots(e,l,i,c),s._changeVerticalViewPeriod(v,i,e,c))return n}else if((t===a.LEFT||t===a.RIGHT)&&(n=!0,c=t===a.LEFT,this._updateDirection(e,l,i,c,!1),v=this._horizontalSlots(e,l,i,c),s._changeHorizontalViewPeriod(v,i,e,c)))return n;if(n){if(d=v.startSlot,u=v.endSlot,i){var h=e.backward;h&&d?e.start=d.startDate():!h&&u&&(e.end=u.endDate())}else d&&u&&(e.start=d.startDate(),e.end=u.endDate());e.events=[]}return n},destroy:function(){var e=this;e.element&&e.element.off(T),e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),o.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(!1!==e.options.editable.create&&e._addUserEvents.destroy(),!1!==e.options.editable.update&&e._editUserEvents.destroy())},_resourceBySlot:function(e){var t=this.groupedResources;var r={},i=this.options.group;if(t.length&&"horizontal"===i.orientation&&i.date){var n,a,s,l,d=e.groupIndex,u=this.columnLevels,c=u[u.length-1],v=t[t.length-1],h=c[d];for(this._setResourceValue(h,v,r),s=u.length-2;s>=3;s--)for(c=u[s],v=t[s-3],n=0,l=0;l<c.length;l++){if((a=(h=c[l]).columns.length)>d-n){this._setResourceValue(h,v,r);break}n+=a}return r}return o.fn._resourceBySlot.call(this,e)}});l(!0,i,{TimelineView:b,TimelineWeekView:b.extend({options:{name:"TimelineWeekView",title:"Timeline Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",selectedMobileDateFormat:"{0:MMM dd} - {1:dd}",majorTick:120},name:"timelineWeek",calculateDateRange:function(){var e,t=this.options.date,i=r.date.dayOfWeek(t,this.calendarInfo().firstDay,-1),n=[];for(e=0,7;e<7;e++)n.push(i),i=r.date.nextDay(i);this._render(n)}}),TimelineWorkWeekView:b.extend({options:{name:"TimelineWorkWeekView",title:"Timeline Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",selectedMobileDateFormat:"{0:MMM dd} - {1:dd}",majorTick:120},name:"timelineWorkWeek",nextDate:function(){var e=r.date.dayOfWeek(r.date.nextDay(this.endDate()),this.calendarInfo().firstDay,1);return r.date.addDays(e,this._workDays[0])},previousDate:function(){var e=r.date.dayOfWeek(this.startDate(),this.calendarInfo().firstDay,-1);var t=this._workDays;return r.date.addDays(e,t[t.length-1]-7)},calculateDateRange:function(){var e=this.options,t=e.date,i=r.date.dayOfWeek,n=i(t,this.calendarInfo().firstDay,-1),o=i(n,e.workWeekStart,1),a=i(o,e.workWeekEnd,1),s=[],l=e.workDays&&e.workDays.length?e.workDays.map((function(e){return i(n,e,1).getTime()})):null;for(l&&(a=i(o=n,this.calendarInfo().firstDay+6,1));o<=a;)l&&l.indexOf(o.getTime())>-1?s.push(o):l||s.push(o),o=r.date.nextDay(o);this._render(s)}}),TimelineMonthView:b.extend({options:{name:"TimelineMonthView",title:"Timeline Month",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",workDayStart:new Date(1980,1,1,0,0,0),workDayEnd:new Date(1980,1,1,23,59,59),footer:!1,majorTick:1440,minorTickCount:1},name:"timelineMonth",calculateDateRange:function(){var e,t,i=this.options.date,n=r.date.firstDayOfMonth(i),o=[];for(e=0,t=r.date.lastDayOfMonth(i).getDate();e<t;e++)o.push(n),n=r.date.nextDay(n);this._render(o)}})})}(window.kendo.jQuery);var t=kendo;e.__meta__={id:"scheduler.timelineview",name:"Scheduler Timeline View",category:"web",description:"The Scheduler Timeline View",depends:["scheduler.view","icons"],hidden:!0},e.default=t,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=kendo.scheduler.timelineview.min.js.map
