{"version":3,"sources":["raw-js/kendo.aiprompt.js"],"names":["global","factory","exports","module","require","define","amd","globalThis","self","kendo","_globals","Aiprompt","this","$","messageTypes","AIPromptOutputActionManager","constructor","aiprompt","options","buttonDefinitions","_createButtonDefinitions","getBuiltInActionDefinitions","copy","command","icon","fillMode","themeColor","text","retry","ratePositive","iconButton","rateNegative","stop","processOutputActions","actions","builtInActions","map","action","type","isPresent","flat","that","baseDefinitions","getMessage","view","messages","copyOutput","handler","e","promptOutput","_handleCopyAction","retryGeneration","_handleRetryAction","_handleRatePositiveAction","_handleRateNegativeAction","stopGeneration","_handleStopAction","initializeButtons","container","forEach","selector","_initializeButton","definition","find","kendoButton","rounded","click","outputManager","getOutputFromElement","target","eventArgs","outputId","id","output","prompt","button","sender","element","trigger","hasCopyHandler","_events","outputCopy","length","logToConsole","copyEventArgs","navigator","clipboard","writeText","extractOutputData","retryEventArgs","isRetry","history","role","contents","$type","service","_selectedView","transport","read","outputRating","rateType","ui","negativeButton","siblings","positiveButton","removeClass","addClass","destroy","window","jQuery","CSS_CLASSES","REFS","AIPromptTemplateBuilder","createPromptView","suggestions","promptSuggestionItemTemplate","suggestionsHtml","_createSuggestionsSection","createPromptFooter","generateOutput","createSuggestionItem","suggestion","createOutputCard","showOutputRating","showOutputSubtitleTooltip","encodedPromptOutputs","isStreaming","outputActions","outputTemplate","contentHtml","_generateContentHtml","actionsHtml","_generateActionsHtml","dataIdAttr","skipHeader","_createCardHeader","skipBody","_createCardBody","isLoading","skipActions","createOutputView","promptOutputs","cardsHtml","join","suggestionItems","promptSuggestions","tooltipAttr","htmlEncode","outputTitle","content","_createCustomActions","filteredActions","filter","hasRatingButtons","some","actionsToRender","push","_createActionButton","_getActionText","title","AIPromptSpeechManager","_processSettings","_speechButton","speechToTextConfig","defaultOptions","integrationMode","lang","continuous","interimResults","maxAlternatives","enabled","extend","isEnabled","getTextAreaSuffixOptions","suffixOptions","template","separator","initialize","textareaWidget","speechButton","wrapper","kendoSpeechToTextButton","getKendoSpeechToTextButton","bind","_handleResult","speechToTextButton","isFinal","transcript","alternatives","currentValue","value","newValue","maxLength","maxlength","substring","startRecognition","stopRecognition","abortRecognition","isListening","AIPromptOutputObject","outputData","data","_element","_bodyElement","_aiprompt","_isLoading","wasLoading","showSkeleton","hideSkeleton","applyFinalTemplate","getElement","setElement","updateContent","newContent","bodyElement","contentElement","trim","remove","attr","show","html","showHeaderSkeleton","showBodySkeleton","showActionSkeleton","hideHeaderSkeleton","hideBodySkeleton","hideActionSkeleton","customContent","headerElement","children","hide","skeleton","css","prepend","actionsElement","toggleActionButtons","allActions","actionButtons","AIPromptOutputManager","createOutputObject","getLastOutputObject","lastOutput","outputObjects","get","updatePromptOutputContent","outputObj","stopLoading","objectId","stopAllLoading","closest","clear","Widget","PROMPT_VIEW","PROMPT_EXPANDER","SUGGESTION_GROUP","SUGGESTION","CARD","CARD_LIST","REFERENCE_ATTRIBUTES","AIPromptBaseView","init","fn","call","getKendoAIPrompt","footerElement","buttonText","buttonIcon","name","render","_renderContent","_renderFooter","_renderContentElement","append","_renderFooterElement","footer","_ajaxRequest","_getAjaxData","requestOptions","url","contentType","JSON","stringify","success","response","_ajaxSuccessHandler","headers","progress","ajax","outputGetter","_getResponseMessageText","guid","activeView","addPromptOutput","generateButton","Message","Text","defaultData","concat","Object","keys","isFunction","isPlainObject","Error","off","AIPromptPromptView","speechManager","speechToText","viewTemplate","footerTemplate","setTextAreaValue","getKendoTextArea","val","_focusSuggestion","startSpeechRecognition","stopSpeechRecognition","abortSpeechRecognition","isSpeechListening","initializeComponents","textAreaOptions","resize","placeholder","promptPlaceholder","promptTextArea","kendoTextArea","first","nextExpanderContentId","expanderButton","next","PROMPT_EXPANDER_CONTENT","iconEl","is","toggle","on","keyCode","preventDefault","prev","last","AIPromptOutputView","outputActionManager","startStreaming","_showStopButton","stopStreaming","_hideStopButton","stopGenerationButton","_initStopGenerationButton","renderPromptOutput","cardListContainer","outputsContainer","cardHtml","card","stopFab","kendoFloatingActionButton","_classNames","positionMode","align","getKendoFloatingActionButton","parentElement","cardElement","buttons","_initializeCardButtons","AIPromptCommandsView","promptCommands","commandItems","panelBarEl","kendoPanelBar","animation","dataSource","selectable","select","ev","item","dataItem","hasChildren","promptViewWrapper","EMPTY_TEMPLATE","AIPromptCustomView","PROMPT_RESPONSE","DEFAULT_OUTPUT_ACTIONS_WITHOUT_RATING","FOCUS","cssClasses","defaultViews","commands","custom","AIPrompt","views","Map","Array","isArray","set","_initLayout","_initViews","_initToolbar","AiTransport","_serviceSuccess","requestStart","notify","toolbarItems","popup","promptView","outputView","commandsView","customView","outputRetryTitle","suffixTemplate","events","outputViewIndex","viewsArray","findIndex","v","_initializeView","viewConfig","getter","_unbindView","i","l","isSettings","defaultView","assign","index","getViews","undefined","_activeViewIndex","Number","isInteger","_updateToolbarState","toolItem","toolbar","_getAllItems","_resetTabIndex","unshift","removePromptOutput","removeOutput","el","delete","clearOutput","elements","each","activeToolIndex","elm","header","popupWrapper","_getViewTools","togglable","attributes","items","closeButton","toolbarEl","kendoToolBar","resizable","appendTo","focus","setOptions","originalOptions","newOptions","empty","plugin","kendo$1","__meta__","category","description","depends","default","defineProperty"],"mappings":"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","file":"kendo.aiprompt.min.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('kendo.core.js'), require('kendo.data.js'), require('kendo.icons.js'), require('kendo.textarea.js'), require('kendo.button.js'), require('kendo.toolbar.js'), require('kendo.skeletoncontainer.js'), require('kendo.speechtotextbutton.js'), require('kendo.panelbar.js'), require('kendo.floatingactionbutton.js')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'kendo.core', 'kendo.data', 'kendo.icons', 'kendo.textarea', 'kendo.button', 'kendo.toolbar', 'kendo.skeletoncontainer', 'kendo.speechtotextbutton', 'kendo.panelbar', 'kendo.floatingactionbutton'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.kendo = global.kendo || {}, global.kendo._globals = global.kendo._globals || {}, global.kendo._globals.Aiprompt = {})));\n})(this, (function (exports) {\n    // Button management abstraction for AIPrompt views\n    (function($) {\n        const messageTypes = {\n            \"ai\": \"assistant\",\n            \"system\": \"system\",\n            \"user\": \"user\",\n            \"tool\": \"tool\"\n        };\n\n        class AIPromptOutputActionManager {\n            constructor(aiprompt, options = {}) {\n                this.aiprompt = aiprompt;\n                this.options = options;\n                this.buttonDefinitions = this._createButtonDefinitions();\n            }\n\n            static getBuiltInActionDefinitions() {\n                return {\n                    copy: {\n                        command: \"copy\",\n                        icon: \"copy\",\n                        fillMode: \"flat\",\n                        themeColor: \"primary\",\n                        text: null\n                    },\n                    retry: {\n                        command: \"retry\",\n                        icon: \"arrow-rotate-cw\",\n                        fillMode: \"flat\",\n                        text: null\n                    },\n                    ratePositive: {\n                        command: \"ratePositive\",\n                        icon: \"thumb-up-outline\",\n                        fillMode: \"flat\",\n                        iconButton: true,\n                        text: null\n                    },\n                    rateNegative: {\n                        command: \"rateNegative\",\n                        icon: \"thumb-down-outline\",\n                        fillMode: \"flat\",\n                        iconButton: true,\n                        text: null\n                    },\n                    stop: {\n                        command: \"stop\",\n                        icon: \"stop\",\n                        fillMode: \"flat\",\n                        text: null\n                    }\n                };\n            }\n\n            static processOutputActions(actions) {\n                if (!actions) {\n                    return null;\n                }\n\n                const builtInActions = AIPromptOutputActionManager.getBuiltInActionDefinitions();\n\n                return actions.map(action => {\n                    if (typeof action === \"string\") {\n                        if (action === \"rating\") {\n                            return [builtInActions.ratePositive, builtInActions.rateNegative];\n                        } else if (action === \"spacer\") {\n                            return { type: \"spacer\" };\n                        }\n\n                        return builtInActions[action] || { command: action, type: \"button\" };\n                    }\n                    if (kendo.isPresent(action.command) && action.command == \"rating\") {\n                        return [builtInActions.ratePositive, builtInActions.rateNegative];\n                    }\n                    return action;\n                }).flat();\n            }\n\n            _createButtonDefinitions() {\n                const that = this;\n                const baseDefinitions = AIPromptOutputActionManager.getBuiltInActionDefinitions();\n\n                return {\n                    copy: {\n                        ...baseDefinitions.copy,\n                        getMessage: () => that.view.options.messages.copyOutput,\n                        handler: (e, promptOutput) => that._handleCopyAction(e, promptOutput)\n                    },\n                    retry: {\n                        ...baseDefinitions.retry,\n                        getMessage: () => that.view.options.messages.retryGeneration,\n                        handler: (e, promptOutput) => that._handleRetryAction(e, promptOutput)\n                    },\n                    ratePositive: {\n                        ...baseDefinitions.ratePositive,\n                        getMessage: () => that.view.options.messages.ratePositive,\n                        handler: (e, promptOutput) => that._handleRatePositiveAction(e, promptOutput)\n                    },\n                    rateNegative: {\n                        ...baseDefinitions.rateNegative,\n                        getMessage: () => that.view.options.messages.rateNegative,\n                        handler: (e, promptOutput) => that._handleRateNegativeAction(e, promptOutput)\n                    },\n                    stop: {\n                        ...baseDefinitions.stop,\n                        getMessage: () => that.view.options.messages.stopGeneration,\n                        handler: (e, promptOutput) => that._handleStopAction(e, promptOutput)\n                    }\n                };\n            }\n\n            initializeButtons(container, actions = null) {\n                const that = this;\n\n                if (actions) {\n                    actions.forEach(action => {\n                        if (action.type === 'spacer') {\n                            return;\n                        }\n\n                        const selector = `[data-action-command=\"${action.command}\"]`;\n                        that._initializeButton(container, selector, action);\n                    });\n                }\n            }\n\n            _initializeButton(container, selector, action) {\n                const that = this;\n                const definition = that.buttonDefinitions[action.command];\n\n                container.find(selector).kendoButton({\n                    icon: action.icon || definition?.icon,\n                    fillMode: action.fillMode || definition?.fillMode || \"flat\",\n                    themeColor: action.themeColor || definition?.themeColor || \"base\",\n                    rounded: action.rounded,\n                    click: function(e) {\n                        const promptOutput = that.aiprompt.outputManager.getOutputFromElement(e.target);\n                        const eventArgs = {\n                            command: action.command,\n                            outputId: promptOutput.id,\n                            output: promptOutput.output || promptOutput.text || promptOutput || \"\",\n                            prompt: promptOutput.prompt || \"\",\n                            button: e.sender.element\n                        };\n\n                        if (definition?.handler && !that.aiprompt.trigger(\"outputAction\", eventArgs)) {\n                            definition.handler(e, promptOutput);\n                        } else if (!definition) {\n                            that.aiprompt.trigger(\"outputAction\", eventArgs);\n                        }\n                    }\n                });\n            }\n\n            _handleCopyAction(e, promptOutput) {\n                const hasCopyHandler = this.aiprompt._events && this.aiprompt._events.outputCopy && this.aiprompt._events.outputCopy.length > 0;\n\n                if (hasCopyHandler) {\n                    kendo.logToConsole(\"The outputCopy event is deprecated. Use the outputAction event instead.\", \"warn\");\n                }\n\n                const copyEventArgs = { output: promptOutput };\n                if (hasCopyHandler && this.aiprompt.trigger(\"outputCopy\", copyEventArgs)) {\n                    return;\n                }\n\n                if (navigator.clipboard && typeof navigator.clipboard.writeText === \"function\") {\n                    navigator.clipboard.writeText(promptOutput.output || promptOutput.text || promptOutput || \"\");\n                }\n            }\n\n            _handleRetryAction(e, promptOutput) {\n                const { prompt, output } = this.aiprompt.outputManager.extractOutputData(promptOutput);\n                const that = this;\n                const history = {\n                    role: messageTypes.ai,\n                    contents: [\n                        {\n                            $type: \"text\",\n                            text: output\n                        }\n                    ]\n                };\n                const retryEventArgs = {\n                    prompt: prompt,\n                    output: promptOutput,\n                    isRetry: true,\n                    history: [history]\n                };\n\n                const service = that.aiprompt?._selectedView?.service;\n\n                if (service) {\n                    retryEventArgs.service = service;\n                }\n\n                if (that.aiprompt.trigger(\"promptRequest\", retryEventArgs)) {\n                    return;\n                }\n\n                if (that.aiprompt?.options.service) {\n                    that.aiprompt?.transport?.read({\n                        prompt: prompt,\n                        history: retryEventArgs.history,\n                        isRetry: true,\n                        service: retryEventArgs.service\n                    });\n                }\n            }\n\n            _handleRatePositiveAction(e, promptOutput) {\n                const hasRatingChangeHandler = this.aiprompt._events && this.aiprompt._events.outputRating && this.aiprompt._events.outputRating.length > 0;\n\n                if (hasRatingChangeHandler) {\n                    kendo.logToConsole(\"The outputRating event is deprecated. Use the outputAction event instead.\", \"warn\");\n                }\n\n                this.aiprompt.trigger(\"outputRating\", { rateType: \"positive\", output: promptOutput });\n\n                kendo.ui.icon(e.sender.element.find(\".k-icon\"), \"thumb-up\");\n\n                const negativeButton = $(e.target).siblings(\"[data-action-command='rateNegative'], [ref-rate-negative]\");\n                kendo.ui.icon(negativeButton.find(\".k-icon\"), \"thumb-down-outline\");\n            }\n\n            _handleRateNegativeAction(e, promptOutput) {\n                const hasRatingChangeHandler = this.aiprompt._events && this.aiprompt._events.outputRating && this.aiprompt._events.outputRating.length > 0;\n\n                if (hasRatingChangeHandler) {\n                    kendo.logToConsole(\"The outputRating event is deprecated. Use the outputAction event instead.\", \"warn\");\n                }\n\n                this.aiprompt.trigger(\"outputRating\", { rateType: \"negative\", output: promptOutput });\n\n                kendo.ui.icon(e.sender.element.find(\".k-icon\"), \"thumb-down\");\n\n                const positiveButton = $(e.target).siblings(\"[data-action-command='ratePositive'], [ref-rate-positive]\");\n                kendo.ui.icon(positiveButton.find(\".k-icon\"), \"thumb-up-outline\");\n            }\n\n            _handleStopAction(e, promptOutput) {\n                this.aiprompt.trigger(\"promptRequestCancel\", { output: promptOutput });\n\n                $(e.target).siblings(\".k-hidden\").removeClass(\"k-hidden\");\n                $(e.target).addClass(\"k-hidden\");\n            }\n\n            destroy() {\n                this.aiprompt = null;\n                this.options = null;\n                this.buttonDefinitions = null;\n            }\n        }\n\n        kendo.ui.AIPromptOutputActionManager = AIPromptOutputActionManager;\n\n    })(window.kendo.jQuery);\n\n    // Template management for AIPrompt views\n    (function($) {\n\n        const CSS_CLASSES = {\n            PROMPT_VIEW: \"k-prompt-view\",\n            PROMPT_EXPANDER: \"k-prompt-expander\",\n            SUGGESTION_GROUP: \"k-suggestion-group\",\n            SUGGESTION: \"k-suggestion\",\n            CARD: \"k-card\",\n            CARD_LIST: \"k-card-list\",\n            CARD_HEADER: \"k-card-header\",\n            CARD_TITLE: \"k-card-title\",\n            CARD_SUBTITLE: \"k-card-subtitle\",\n            CARD_BODY: \"k-card-body\",\n            CARD_ACTIONS: \"k-card-actions\",\n            ACTIONS: \"k-actions k-actions-start k-actions-horizontal\",\n            SPACER: \"k-spacer\",\n            HIDDEN: \"k-hidden\"\n        };\n\n        const REFS = {\n            PROMPT_INPUT: \"ref-prompt-input\",\n            SUGGESTIONS_BUTTON: \"ref-prompt-suggestions-button\",\n            GENERATE_BUTTON: \"ref-generate-output-button\",\n            OUTPUT_BODY: \"ref-output-body\",\n            COPY_BUTTON: \"ref-copy-button\",\n            RETRY_BUTTON: \"ref-retry-button\",\n            RATE_POSITIVE: \"ref-rate-positive\",\n            RATE_NEGATIVE: \"ref-rate-negative\",\n            STOP_GENERATION: \"ref-stop-generation\"\n        };\n\n        // Template builder class for consistent template generation\n        class AIPromptTemplateBuilder {\n\n            static createPromptView({ suggestions, promptSuggestionItemTemplate, messages }) {\n                const suggestionsHtml = suggestions?.length ?\n                    AIPromptTemplateBuilder._createSuggestionsSection(suggestions, promptSuggestionItemTemplate, messages) : '';\n\n                return `<div class=\"${CSS_CLASSES.PROMPT_VIEW}\">\n                <textarea ${REFS.PROMPT_INPUT}></textarea>\n                ${suggestionsHtml}\n            </div>`;\n            }\n\n            static createPromptFooter({ messages }) {\n                return `<div class=\"${CSS_CLASSES.ACTIONS} k-prompt-actions\">\n                <button ${REFS.GENERATE_BUTTON}>${messages.generateOutput}</button>\n            </div>`;\n            }\n\n            static createSuggestionItem({ suggestion }) {\n                return `<span role=\"listitem\" class=\"${CSS_CLASSES.SUGGESTION}\">${suggestion}</span>`;\n            }\n\n            static createOutputCard({ output, showOutputRating, messages, showOutputSubtitleTooltip, encodedPromptOutputs, isStreaming, outputActions, outputTemplate }) {\n                const contentHtml = AIPromptTemplateBuilder._generateContentHtml({\n                    output, outputTemplate, encodedPromptOutputs\n                });\n\n                const actionsHtml = AIPromptTemplateBuilder._generateActionsHtml({\n                    outputActions, showOutputRating, messages, isStreaming\n                });\n                const dataIdAttr = output.id ? ` data-id=\"${output.id}\"` : '';\n                return `<div role=\"listitem\" tabindex=\"0\" class=\"${CSS_CLASSES.CARD}\"${dataIdAttr}>\n                ${output.skipHeader ? '' : AIPromptTemplateBuilder._createCardHeader(output, messages, showOutputSubtitleTooltip)}\n                ${output.skipBody ? '' : AIPromptTemplateBuilder._createCardBody(contentHtml, output.isLoading)}\n                ${output.skipActions ? '' : actionsHtml}\n            </div>`;\n            }\n\n            static createOutputView({ promptOutputs, showOutputRating, messages, showOutputSubtitleTooltip, encodedPromptOutputs, outputActions, outputTemplate }) {\n                const cardsHtml = promptOutputs ?\n                    promptOutputs.map(output =>\n                        AIPromptTemplateBuilder.createOutputCard({\n                            output, showOutputRating, messages, showOutputSubtitleTooltip,\n                            encodedPromptOutputs, outputActions, outputTemplate\n                        })\n                    ).join(\"\") : '';\n\n                return `<div class=\"${CSS_CLASSES.PROMPT_VIEW}\">\n                <div role=\"list\" class=\"${CSS_CLASSES.CARD_LIST}\">\n                    ${cardsHtml}\n                </div>\n            </div>`;\n            }\n\n            // Private helper methods\n            static _createSuggestionsSection(suggestions, promptSuggestionItemTemplate, messages) {\n                const suggestionItems = suggestions\n                    .map(suggestion => promptSuggestionItemTemplate({ suggestion }))\n                    .join(\"\");\n\n                return `<div class=\"${CSS_CLASSES.PROMPT_EXPANDER}\">\n                <button ${REFS.SUGGESTIONS_BUTTON} aria-expanded=\"true\">${messages.promptSuggestions}</button>\n                <div class=\"k-prompt-expander-content\" role=\"list\">\n                    <div class=\"${CSS_CLASSES.SUGGESTION_GROUP}\">\n                        ${suggestionItems}\n                    </div>\n                </div>\n            </div>`;\n            }\n\n            static _createCardHeader(output, messages, showOutputSubtitleTooltip) {\n                const tooltipAttr = showOutputSubtitleTooltip ?\n                    `title=\"${kendo.htmlEncode(output.prompt)}\"` : \"\";\n\n                return `<div class=\"${CSS_CLASSES.CARD_HEADER}\">\n                <div class=\"${CSS_CLASSES.CARD_TITLE}\">${messages.outputTitle}</div>\n                <div class=\"${CSS_CLASSES.CARD_SUBTITLE}\" ${tooltipAttr}>${kendo.htmlEncode(output.prompt)}</div>\n            </div>`;\n            }\n\n            static _createCardBody(contentHtml, isLoading) {\n                return `<div class=\"${CSS_CLASSES.CARD_BODY}\" ${REFS.OUTPUT_BODY}>\n                ${contentHtml}\n            </div>`;\n            }\n\n            static _generateContentHtml({ output, outputTemplate, encodedPromptOutputs }) {\n                if (outputTemplate && typeof outputTemplate === 'function' &&\n                    !output.isLoading && output.output) {\n                    return outputTemplate({ output: output, content: output.output });\n                }\n\n                const content = output.output || '';\n                const loadingAttr = output.isLoading ? ' data-loading=\"true\"' : ' data-loading=\"false\"';\n                return `<p ref-output-content${loadingAttr}>${encodedPromptOutputs ? kendo.htmlEncode(content) : content}</p>`;\n            }\n\n            static _generateActionsHtml({ outputActions, showOutputRating, messages, isStreaming }) {\n                // outputActions should always be defined due to component defaults,\n                // but provide fallback for safety\n                if (!outputActions) {\n                    outputActions = showOutputRating ?\n                        [\"copy\", \"retry\", \"spacer\", \"rating\"] :\n                        [\"copy\", \"retry\"];\n                }\n\n                return AIPromptTemplateBuilder._createCustomActions(outputActions, showOutputRating, messages, isStreaming);\n            }\n\n            static _createCustomActions(outputActions, showOutputRating, messages, isStreaming) {\n                const filteredActions = outputActions.filter(action => action.command !== 'stop');\n\n                // Check if rating buttons are already included in the actions\n                const hasRatingButtons = filteredActions.some(action =>\n                    action.command === 'ratePositive' || action.command === 'rateNegative'\n                );\n\n                // If showOutputRating is true and rating buttons aren't already included, add them with a spacer\n                let actionsToRender = [...filteredActions];\n                if (showOutputRating && !hasRatingButtons) {\n                    // Check if there's already a spacer, if not add one\n                    const hasExistingSpacer = actionsToRender.some(action => action.type === 'spacer');\n                    if (!hasExistingSpacer) {\n                        actionsToRender.push({ type: 'spacer' });\n                    }\n\n                    // Add rating buttons\n                    actionsToRender.push(\n                        { command: 'ratePositive', text: messages.ratePositive, type: 'button' },\n                        { command: 'rateNegative', text: messages.rateNegative, type: 'button' }\n                    );\n                }\n\n                const actionsHtml = actionsToRender\n                    .map(action => AIPromptTemplateBuilder._createActionButton(action, messages, isStreaming))\n                    .join('');\n\n                return `<div class=\"${CSS_CLASSES.ACTIONS} ${CSS_CLASSES.CARD_ACTIONS}\">\n                ${actionsHtml}\n            </div>`;\n            }\n\n            static _createActionButton(action, messages, isStreaming) {\n                if (action.type === 'spacer') {\n                    return `<span class=\"${CSS_CLASSES.SPACER}\"></span>`;\n                }\n\n                const text = action.text || AIPromptTemplateBuilder._getActionText(action.command, messages);\n                const title = action.title || text;\n\n                return `<button data-action-command=\"${action.command}\" title=\"${title}\">${action.iconButton ? \"\" : text}</button>`;\n            }\n\n            static _getActionText(command, messages) {\n                const textMap = {\n                    'copy': messages.copyOutput,\n                    'retry': messages.retryGeneration,\n                    'ratePositive': messages.ratePositive,\n                    'rateNegative': messages.rateNegative\n                };\n\n                return textMap[command] || command;\n            }\n        }\n\n        // Expose to kendo namespace\n        kendo.ui.AIPromptTemplateBuilder = AIPromptTemplateBuilder;\n\n    })(window.kendo.jQuery);\n\n    // Speech-to-text management for AIPrompt\n    (function($) {\n\n        class AIPromptSpeechManager {\n            constructor(view, options = {}) {\n                this.view = view;\n                this.aiprompt = view.aiprompt;\n                this.options = this._processSettings(options);\n                this._speechButton = null;\n            }\n\n            _processSettings(speechToTextConfig) {\n                const defaultOptions = {\n                    integrationMode: \"webSpeech\",\n                    lang: 'en-US',\n                    continuous: false,\n                    interimResults: false,\n                    maxAlternatives: 1\n                };\n\n                if (speechToTextConfig === false || speechToTextConfig === null) {\n                    return { enabled: false, options: null };\n                } else if (speechToTextConfig === true) {\n                    return { enabled: true, options: defaultOptions };\n                } else if (typeof speechToTextConfig === 'object') {\n                    return {\n                        enabled: true,\n                        options: $.extend({}, defaultOptions, speechToTextConfig)\n                    };\n                }\n\n                return { enabled: true, options: defaultOptions };\n            }\n\n            isEnabled() {\n                return this.options.enabled;\n            }\n\n            getTextAreaSuffixOptions() {\n                if (!this.isEnabled()) {\n                    return {};\n                }\n\n                return {\n                    suffixOptions: {\n                        template: function() {\n                            return '<button ref-speech-to-text-button title=\"Speech to Text\"></button>';\n                        },\n                        separator: false,\n                    }\n                };\n            }\n\n            initialize(textareaWidget) {\n                if (!this.isEnabled() || !textareaWidget) {\n                    return false;\n                }\n\n                const speechButton = textareaWidget.wrapper.find(\"button[ref-speech-to-text-button]\");\n                if (speechButton.length === 0) {\n                    return false;\n                }\n\n                this._speechButton = speechButton.kendoSpeechToTextButton({\n                    ...this.options.options,\n                    fillMode: \"flat\"\n                }).getKendoSpeechToTextButton();\n\n                this._speechButton.bind(\"result\", (e) => this._handleResult(e, textareaWidget));\n                this.aiprompt.speechToTextButton = this._speechButton;\n                return true;\n            }\n\n            _handleResult(e, textareaWidget) {\n                if (e.isFinal || !this.options.options.interimResults) {\n                    const transcript = e.alternatives[0]?.transcript || '';\n                    const currentValue = textareaWidget.value();\n                    let newValue = currentValue ? currentValue + ' ' + transcript : transcript;\n                    const maxLength = textareaWidget.options.maxlength;\n\n                    if (maxLength && newValue.length > maxLength) {\n                        newValue = newValue.substring(0, maxLength);\n                    }\n\n                    textareaWidget.value(newValue);\n                }\n            }\n\n            startRecognition() {\n                if (this._speechButton) {\n                    this._speechButton.startRecognition();\n                }\n            }\n\n            stopRecognition() {\n                if (this._speechButton) {\n                    this._speechButton.stopRecognition();\n                }\n            }\n\n            abortRecognition() {\n                if (this._speechButton) {\n                    this._speechButton.abortRecognition();\n                }\n            }\n\n            isListening() {\n                return this._speechButton ? this._speechButton.isListening() : false;\n            }\n\n            destroy() {\n                if (this._speechButton) {\n                    this._speechButton.destroy();\n                    this._speechButton = null;\n                }\n            }\n        }\n\n        // Expose to kendo namespace\n        kendo.ui.AIPromptSpeechManager = AIPromptSpeechManager;\n\n    })(window.kendo.jQuery);\n\n    // Output management abstraction for AIPrompt components\n    (function($) {\n\n        class AIPromptOutputObject {\n            constructor(outputData, outputManager) {\n                this.id = outputData.id;\n                this.data = outputData;\n                this._element = null;\n                this._bodyElement = null;\n                this._aiprompt = outputManager.aiprompt;\n                this._isLoading = outputData.isLoading || false;\n            }\n\n            get isLoading() {\n                return this._isLoading;\n            }\n\n                    set isLoading(value) {\n                const wasLoading = this._isLoading;\n                this._isLoading = value;\n\n                this.data.isLoading = value;\n\n                if (value === true) {\n                    this.showSkeleton();\n                } else if (value === false) {\n                    this.hideSkeleton();\n\n                    if (wasLoading || this.data.output) {\n                        this.applyFinalTemplate();\n                    }\n                }\n            }\n\n            getElement() {\n                return this._element;\n            }\n\n            setElement(element) {\n                this._element = element;\n                return this;\n            }\n\n            updateContent(newContent) {\n                if (!this._element || this._element.length === 0) {\n                    return this;\n                }\n\n                this.data.content = newContent;\n                this.data.output = newContent;\n\n                const bodyElement = this._element.find('.k-card-body');\n                const contentElement = bodyElement.find('[ref-output-content]');\n\n                if (newContent && newContent.trim() && contentElement.length > 0) {\n                    bodyElement.find('.k-skeleton').remove();\n\n                    contentElement.attr('data-loading', 'false').show();\n                    const encodedPromptOutputs = this._aiprompt.options.encodedPromptOutputs;\n                    contentElement.html(encodedPromptOutputs ? kendo.htmlEncode(newContent) : newContent);\n                }\n\n                return this;\n            }\n\n            showSkeleton() {\n                this.showHeaderSkeleton();\n                this.showBodySkeleton();\n                this.showActionSkeleton();\n                return this;\n            }\n\n            hideSkeleton() {\n                this.hideHeaderSkeleton();\n                this.hideBodySkeleton();\n                this.hideActionSkeleton();\n                return this;\n            }\n\n            applyFinalTemplate() {\n                if (!this._element || this._element.length === 0) {\n                    return this;\n                }\n\n                const bodyElement = this._element.find('.k-card-body');\n                const contentElement = bodyElement.find('[ref-output-content]');\n\n                let outputTemplate = this._aiprompt?.options?.outputTemplate;\n                if (!outputTemplate) {\n                    return this;\n                } else if (typeof outputTemplate === 'string') {\n                    outputTemplate = kendo.template(outputTemplate);\n                }\n\n                if (outputTemplate && typeof outputTemplate === 'function' && this.data.output) {\n                    const customContent = outputTemplate({ output: this.data, content: this.data.output });\n                    bodyElement.html(customContent);\n                } else if (contentElement.length > 0) {\n                    contentElement.attr('data-loading', 'false').show();\n                }\n\n                return this;\n            }\n\n            showHeaderSkeleton() {\n                if (!this._element || this._element.length === 0) {\n                    return this;\n                }\n\n                const headerElement = this._element.find('.k-card-header');\n                if (headerElement.length === 0) {\n                    return this;\n                }\n\n                // Optionally hide header content if needed\n                headerElement.children().hide();\n\n                if (headerElement.find('.k-skeleton').length === 0) {\n                    const skeleton = $(`<span class=\"k-skeleton k-skeleton-text k-skeleton-pulse\"></span>`);\n                    skeleton.css('width', '60%').css('height', '24px');\n                    headerElement.prepend(skeleton);\n                }\n\n                return this;\n            }\n\n            hideHeaderSkeleton() {\n                if (!this._element || this._element.length === 0) {\n                    return this;\n                }\n\n                const headerElement = this._element.find('.k-card-header');\n                if (headerElement.length === 0) {\n                    return this;\n                }\n\n                headerElement.find('.k-skeleton').remove();\n                headerElement.children().removeClass(\"k-hidden\").show();\n\n                return this;\n            }\n\n            showBodySkeleton() {\n                if (!this._element || this._element.length === 0) {\n                    return this;\n                }\n\n                const bodyElement = this._element.find('.k-card-body');\n                const contentElement = bodyElement.find('[ref-output-content]');\n\n                contentElement.attr('data-loading', 'true').hide();\n\n                if (bodyElement.find('.k-skeleton').length === 0) {\n                    const skeleton = $(`<span class=\"k-skeleton k-skeleton-rect k-skeleton-pulse\"></span>`);\n                    skeleton.css('height', '80px');\n                    bodyElement.prepend(skeleton);\n                }\n\n                return this;\n            }\n\n            hideBodySkeleton() {\n                if (!this._element || this._element.length === 0) {\n                    return this;\n                }\n\n                const bodyElement = this._element.find('.k-card-body');\n\n                bodyElement.find('.k-skeleton').remove();\n\n                this.applyFinalTemplate();\n\n                return this;\n            }\n\n            showActionSkeleton() {\n                if (!this._element || this._element.length === 0) {\n                    return this;\n                }\n\n                const actionsElement = this._element.find('.k-card-actions');\n\n                if (actionsElement.length > 0) {\n                    actionsElement.children().hide();\n\n                    if (actionsElement.find('.k-skeleton').length === 0) {\n                        const skeleton = $(`<span class=\"k-skeleton k-skeleton-text k-skeleton-pulse\"></span>`);\n                        skeleton.css('width', '100%').css('height', '32px');\n                        actionsElement.prepend(skeleton);\n                    }\n                }\n\n                return this;\n            }\n\n            hideActionSkeleton() {\n                if (!this._element || this._element.length === 0) {\n                    return this;\n                }\n\n                const actionsElement = this._element.find('.k-card-actions');\n\n                if (actionsElement.length > 0) {\n                    actionsElement.find('.k-skeleton').remove();\n\n                    actionsElement.children().removeClass(\"k-hidden\").show();\n                }\n\n                return this;\n            }\n\n            toggleActionButtons(isStreaming, outputActions) {\n                if (!this._element || this._element.length === 0) {\n                    return this;\n                }\n\n                if (outputActions) {\n                    // For custom output actions - hide all buttons during streaming\n                    const allActions = this._element.find('[data-action-command]');\n\n                    if (isStreaming) {\n                        allActions.addClass('k-hidden');\n                    } else {\n                        allActions.removeClass('k-hidden');\n                    }\n                } else {\n                    // For legacy ref-based buttons - hide all except rating buttons during streaming\n                    const actionButtons = this._element.find('[ref-copy-button], [ref-retry-button]');\n\n                    if (isStreaming) {\n                        actionButtons.addClass('k-hidden');\n                    } else {\n                        actionButtons.removeClass('k-hidden');\n                    }\n                }\n\n                return this;\n            }\n\n            destroy() {\n                this._element = null;\n                this._bodyElement = null;\n                this._aiprompt = null;\n                this.data = null;\n                this.id = null;\n                this._isLoading = false;\n            }\n        }\n\n        class AIPromptOutputManager {\n            constructor(aiprompt) {\n                this.aiprompt = aiprompt;\n            }\n\n            createOutputObject(outputData) {\n                return new AIPromptOutputObject(outputData, this);\n            }\n\n            getLastOutputObject() {\n                if (this.aiprompt.promptOutputs.length > 0) {\n                    const lastOutput = this.aiprompt.promptOutputs[0]; // First element is the most recent\n                    return this.aiprompt.outputObjects.get(lastOutput.id);\n                }\n                return null;\n            }\n\n            // Enhanced method that handles parameter flexibility like the main AIPrompt component\n            updatePromptOutputContent(content, outputId) {\n                let outputObj;\n\n                if (outputId) {\n                    outputObj = this.aiprompt.outputObjects.get(outputId);\n                } else {\n                    outputObj = this.getLastOutputObject();\n                }\n\n                if (outputObj) {\n                    // Call the output object's updateContent method directly\n                    outputObj.updateContent(content);\n                    return outputObj; // Return the updated object for chaining\n                } else {\n                    // No output object found\n                    return null;\n                }\n            }\n\n            // Stop loading state for the most recent output\n            stopLoading(objectId) {\n                let outputObj = this.aiprompt.outputObjects.get(objectId);\n                if (outputObj) {\n                    outputObj.isLoading = false; // This will automatically call hideSkeleton()\n                } else {\n                    outputObj = this.getLastOutputObject();\n                    if (outputObj) {\n                        outputObj.isLoading = false; // This will automatically call hideSkeleton()\n                    }\n                }\n            }\n\n            stopAllLoading() {\n                this.aiprompt.outputObjects.forEach(outputObj => {\n                    outputObj.isLoading = false;\n                });\n            }\n\n            getOutputFromElement(element) {\n                let card = $(element).closest(\".k-card\");\n                let id = card.data(\"id\");\n\n                let promptOutput = this.aiprompt.promptOutputs.find(output => output.id == id);\n\n                if (!promptOutput && this.aiprompt.outputObjects) {\n                    promptOutput = this.aiprompt.outputObjects.get(id);\n                }\n\n                return promptOutput;\n            }\n\n            extractOutputData(promptOutput) {\n                if (!promptOutput) {\n                    return { prompt: null, output: null };\n                }\n\n                if (promptOutput.data) {\n                    return {\n                        prompt: promptOutput.data.prompt,\n                        output: promptOutput.data.output\n                    };\n                }\n\n                return {\n                    prompt: promptOutput.prompt,\n                    output: promptOutput.output\n                };\n            }\n\n            destroy() {\n                if (this.aiprompt && this.aiprompt.outputObjects) {\n                    this.aiprompt.outputObjects.forEach(outputObj => {\n                        if (outputObj) {\n                            outputObj._element = null;\n                            outputObj._bodyElement = null;\n                            outputObj._aiprompt = null;\n                            outputObj.data = null;\n                        }\n                    });\n                    this.aiprompt.outputObjects.clear();\n                }\n\n                this.aiprompt = null;\n            }\n        }\n\n        kendo.ui.AIPromptOutputObject = AIPromptOutputObject;\n        kendo.ui.AIPromptOutputManager = AIPromptOutputManager;\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n        let Widget = kendo.ui.Widget;\n        const messageTypes = {\n            \"ai\": \"assistant\",\n            \"system\": \"system\",\n            \"user\": \"user\",\n            \"tool\": \"tool\"\n        };\n\n        const KDISABLED = \"k-disabled\";\n        const CSS_CLASSES = {\n            PROMPT_VIEW: \"k-prompt-view\",\n            PROMPT_EXPANDER: \"k-prompt-expander\",\n            SUGGESTION_GROUP: \"k-suggestion-group\",\n            SUGGESTION: \"k-suggestion\",\n            CARD: \"k-card\",\n            CARD_LIST: \"k-card-list\",\n        };\n\n        const REFERENCE_ATTRIBUTES = {\n            PROMPT_SUGGESTIONS_BUTTON: \"ref-prompt-suggestions-button\",\n            PROMPT_INPUT: \"ref-prompt-input\",\n            GENERATE_OUTPUT_BUTTON: \"ref-generate-output-button\",\n            OUTPUT_CONTENT: \"ref-output-content\",\n            STOP_GENERATION_BUTTON: \"ref-stop-generation-button\"\n        };\n\n        let AIPromptBaseView = kendo.ui.AIPromptBaseView = Widget.extend({\n            init: function(element, options) {\n                let that = this;\n\n                Widget.fn.init.call(that, element, options);\n\n                that.aiprompt = element.getKendoAIPrompt();\n\n                that.contentElement = that.options.contentElement;\n                that.footerElement = that.options.footerElement;\n                that.buttonText = that.options.buttonText;\n                that.buttonIcon = that.options.buttonIcon;\n                that.service = that.options.service;\n            },\n\n            options: {\n                name: \"AIPromptBaseView\",\n                buttonText: \"\",\n                buttonIcon: \"\",\n            },\n\n            render: function() {\n                let that = this;\n\n                that._renderContent();\n                that._renderFooter();\n            },\n\n            _renderContentElement: function() {\n                let that = this;\n                let content = $(\"<div></div>\").addClass(\"k-prompt-content\");\n                that.contentElement = content;\n                that.element.append(content);\n\n                return that.contentElement;\n            },\n\n            _renderFooterElement: function() {\n                let that = this;\n                let footer = $(\"<div></div>\").addClass(\"k-prompt-footer\");\n                that.footerElement = footer;\n                that.element.append(footer);\n\n                return that.footerElement;\n            },\n\n            _ajaxRequest: function(prompt, isRetry, history) {\n                let that = this;\n                let service = that.service;\n                let data = that._getAjaxData(prompt, isRetry, history);\n                const url = typeof service === \"string\" ? service : service.url;\n                const requestOptions = {\n                    url: url,\n                    type: \"POST\",\n                    contentType: \"application/json\",\n                    data: JSON.stringify(data),\n                    success: (response) => that._ajaxSuccessHandler(response, isRetry, prompt),\n                };\n\n                if (service?.headers) {\n                    requestOptions.headers = service.headers;\n                }\n                kendo.ui.progress(that.contentElement, true);\n\n                return $.ajax(requestOptions);\n            },\n\n            _ajaxSuccessHandler: function(response, isRetry, prompt) {\n                const that = this;\n                const outputGetter = that.service?.outputGetter || that._getResponseMessageText;\n                const output = {\n                    id: kendo.guid(),\n                    output: outputGetter(response),\n                    prompt: prompt,\n                    isRetry: isRetry,\n                    activeView: 1\n                };\n\n                that.aiprompt.trigger(\"promptResponse\", {\n                    output: output.output,\n                    prompt: output.prompt,\n                    outputId: output.id,\n                    isRetry: output.isRetry,\n                    response: output.response,\n                });\n\n                that.aiprompt.addPromptOutput(output);\n                that.aiprompt.activeView(output.activeView);\n\n                if (!isRetry) {\n                    const generateButton = that.footerElement?.find(`button[${REFERENCE_ATTRIBUTES.GENERATE_OUTPUT_BUTTON}]`);\n                    generateButton?.removeClass(KDISABLED);\n                }\n\n                kendo.ui.progress(that.contentElement, false);\n            },\n\n            _getResponseMessageText: function(response) {\n                return response?.Message?.Text || \"An error occurred while processing the request.\";\n            },\n\n            _getAjaxData: function(prompt, isRetry, history) {\n                const that = this;\n                const service = that.service;\n                let defaultData = [\n                    {\n                        role: {\n                            value: messageTypes.user\n                        },\n                        text: prompt\n                    }\n                ];\n\n                if (history?.length) {\n                    defaultData = history.concat(defaultData);\n                }\n\n                if (typeof service === \"string\") {\n                    return defaultData;\n                }\n\n                if (kendo.isPresent(service.data) && Object.keys(service.data).length) {\n                    service.data.messages = defaultData;\n                    return service.data;\n                }\n\n                if (kendo.isFunction(service?.data)) {\n                    return service.data(prompt, isRetry, history);\n                }\n\n                if ($.isPlainObject(service) && kendo.isPresent(service.url)) {\n                    return defaultData;\n                }\n\n                throw new Error(\"Invalid AIPrompt service configuration.\");\n            },\n\n            destroy: function() {\n                let that = this;\n                Widget.fn.destroy.call(that);\n\n                if (that.contentElement) {\n                    that.contentElement.off();\n                    kendo.destroy(that.contentElement);\n                    that.contentElement.remove();\n                }\n\n                if (that.footerElement) {\n                    that.footerElement.off();\n                    kendo.destroy(that.footerElement);\n                    that.footerElement.remove();\n                }\n\n                that.aiprompt.speechToTextButton = null;\n            }\n        });\n\n        kendo.ui.AIPromptPromptView = AIPromptBaseView.extend({\n            init: function(element, options) {\n                let that = this;\n\n                AIPromptBaseView.fn.init.call(that, element, options);\n                that.promptSuggestions = that.options.promptSuggestions;\n                that.promptSuggestionItemTemplate = that.options.promptSuggestionItemTemplate ?\n                    kendo.template(that.options.promptSuggestionItemTemplate) :\n                    kendo.ui.AIPromptTemplateBuilder.createSuggestionItem;\n\n                // Initialize speech manager for speech-to-text functionality\n                that.speechManager = new kendo.ui.AIPromptSpeechManager(that, that.options.speechToText);\n            },\n            options: {\n                name: \"AIPromptPromptView\",\n                buttonIcon: \"sparkles\",\n            },\n\n            _renderContent: function() {\n                let that = this;\n                let suggestions = that.promptSuggestions;\n                let promptSuggestionItemTemplate = that.promptSuggestionItemTemplate;\n\n                let content;\n                if (that.options.viewTemplate) {\n                    content = kendo.template(that.options.viewTemplate)({\n                        suggestions,\n                        promptSuggestionItemTemplate,\n                        messages: that.options.messages\n                    });\n                } else {\n                    content = kendo.ui.AIPromptTemplateBuilder.createPromptView({\n                        suggestions,\n                        promptSuggestionItemTemplate,\n                        messages: that.options.messages\n                    });\n                }\n\n                that._renderContentElement();\n                that.contentElement.append(content);\n            },\n\n            _renderFooter: function() {\n                let that = this;\n\n                let footer;\n                if (that.options.footerTemplate) {\n                    footer = kendo.template(that.options.footerTemplate)({ messages: that.options.messages });\n                } else {\n                    footer = kendo.ui.AIPromptTemplateBuilder.createPromptFooter({ messages: that.options.messages });\n                }\n\n                that._renderFooterElement();\n                that.footerElement.append(footer);\n            },\n\n            setTextAreaValue: function(value) {\n                let that = this;\n                const textareaWidget = that.contentElement.find(`textarea[${REFERENCE_ATTRIBUTES.PROMPT_INPUT}]`).getKendoTextArea();\n                if (textareaWidget) {\n                    textareaWidget.value(value);\n                } else {\n                    that.contentElement.find(`textarea[${REFERENCE_ATTRIBUTES.PROMPT_INPUT}]`).val(value);\n                }\n            },\n\n            _focusSuggestion(element) {\n                let that = this;\n                if (!element || !element.length) {\n                    return;\n                }\n\n                that.contentElement.find(`.${CSS_CLASSES.SUGGESTION_GROUP} .${CSS_CLASSES.SUGGESTION}[tabindex=0]`).attr(\"tabindex\", \"-1\");\n\n                element.attr(\"tabindex\", \"0\").trigger(\"focus\");\n            },\n\n            startSpeechRecognition: function() {\n                let that = this;\n                that.speechManager.startRecognition();\n            },\n\n            stopSpeechRecognition: function() {\n                let that = this;\n                that.speechManager.stopRecognition();\n            },\n\n            abortSpeechRecognition: function() {\n                let that = this;\n                that.speechManager.abortRecognition();\n            },\n\n            isSpeechListening: function() {\n                let that = this;\n                return that.speechManager.isListening();\n            },\n\n            initializeComponents: function() {\n                let that = this;\n                let suggestions = that.promptSuggestions;\n                const generateButton = that.footerElement.find(`button[${REFERENCE_ATTRIBUTES.GENERATE_OUTPUT_BUTTON}]`);\n\n                // Initialize regular TextArea with speech manager configuration\n                let textAreaOptions = $.extend({\n                    resize: \"vertical\",\n                    placeholder: that.options.messages.promptPlaceholder\n                }, that.options.promptTextArea || {});\n\n                // Add speech-to-text button suffix if enabled\n                if (that.speechManager.isEnabled()) {\n                    textAreaOptions = $.extend(true, textAreaOptions, that.speechManager.getTextAreaSuffixOptions());\n                }\n\n                // Initialize the textarea as a regular Kendo TextArea\n                const textareaWidget = that.contentElement.find(`textarea[${REFERENCE_ATTRIBUTES.PROMPT_INPUT}]`).kendoTextArea(textAreaOptions).getKendoTextArea();\n\n                // Initialize speech-to-text button if enabled\n                if (that.speechManager.isEnabled()) {\n                    that.speechManager.initialize(textareaWidget);\n                }\n\n                generateButton.kendoButton({\n                    icon: \"sparkles\",\n                    themeColor: \"primary\",\n                    rounded: \"full\",\n                    click: function(e) {\n                        const textareaWidget = that.contentElement.find(`textarea[${REFERENCE_ATTRIBUTES.PROMPT_INPUT}]`).getKendoTextArea();\n                        const prompt = textareaWidget ? textareaWidget.value() : that.contentElement.find(`textarea[${REFERENCE_ATTRIBUTES.PROMPT_INPUT}]`).val();\n                        const eventArgs = { prompt, isRetry: false, history: [] };\n\n                        if (that.service) {\n                            eventArgs.service = that.service;\n                        }\n\n                        if (that.aiprompt.trigger(\"promptRequest\", eventArgs)) {\n                            return;\n                        }\n\n                        if (that.service) {\n                            that.aiprompt.transport.read({ prompt: eventArgs.prompt, history: eventArgs.history, isRetry: false, service: that.service });\n                        }\n                    }\n                });\n\n                if (suggestions?.length) {\n                    that.contentElement.find(`.${CSS_CLASSES.SUGGESTION_GROUP} .${CSS_CLASSES.SUGGESTION}`).first().attr(\"tabindex\", \"0\");\n                    let nextExpanderContentId = kendo.guid();\n                    let expanderButton = that.contentElement.find(`.${CSS_CLASSES.PROMPT_EXPANDER} button[${REFERENCE_ATTRIBUTES.PROMPT_SUGGESTIONS_BUTTON}]`);\n\n                    that.contentElement.find(`.${CSS_CLASSES.PROMPT_EXPANDER} button[${REFERENCE_ATTRIBUTES.PROMPT_SUGGESTIONS_BUTTON}]`).attr(\"aria-controls\", nextExpanderContentId);\n                    expanderButton.next(`.${CSS_CLASSES.PROMPT_EXPANDER_CONTENT}`).attr(\"id\", nextExpanderContentId);\n\n                    that.contentElement.find(`.${CSS_CLASSES.PROMPT_EXPANDER} button[${REFERENCE_ATTRIBUTES.PROMPT_SUGGESTIONS_BUTTON}]`).kendoButton({\n                        icon: \"chevron-up\",\n                        fillMode: \"flat\",\n                        click: function(e) {\n                            let expander = $(e.target).closest(\".k-prompt-expander\");\n                            let content = expander.find(\".k-prompt-expander-content\");\n                            let iconEl = e.sender.element.find(\".k-icon\");\n                            kendo.ui.icon(iconEl, content.is(\":visible\") ? \"chevron-down\" : \"chevron-up\");\n                            content.toggle();\n                            e.sender.element.attr(\"aria-expanded\", content.is(\":visible\"));\n                        }\n                    });\n\n                    that.contentElement.on(\"click\", \".k-suggestion-group .k-suggestion\", function(e) {\n                        that.setTextAreaValue($(e.target).text());\n                    });\n\n                    that.contentElement.on(\"keydown\", \".k-suggestion-group .k-suggestion\", function(e) {\n                        if (e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 36 || e.keyCode === 35 || e.keyCode === 13 || e.keyCode === 32) {\n                            e.preventDefault();\n                            let target = $(e.target);\n                            let siblings = target.siblings();\n                            let next, prev;\n\n                            // down arrow\n                            if (e.keyCode === 40) {\n                                next = target.next();\n                                that._focusSuggestion(next);\n                            }\n\n                            // up arrow\n                            if (e.keyCode === 38) {\n                                prev = target.prev();\n                                that._focusSuggestion(prev);\n                            }\n\n                            // home\n                            if (e.keyCode === 36) {\n                                prev = siblings.first();\n                                that._focusSuggestion(prev);\n                            }\n\n                            // end\n                            if (e.keyCode === 35) {\n                                next = siblings.last();\n                                that._focusSuggestion(next);\n                            }\n\n                            // enter or space\n                            if (e.keyCode === 13 || e.keyCode === 32) {\n                                that.setTextAreaValue($(e.target).text());\n                            }\n                        }\n                    });\n\n                }\n\n                if (kendo.isFunction(that.options.initializeComponents)) {\n                    that.options.initializeComponents({ view: that });\n                }\n            },\n\n            render: function() {\n                let that = this;\n\n                that._renderContent();\n                that._renderFooter();\n                that.initializeComponents();\n            },\n\n            destroy: function() {\n                let that = this;\n\n                if (that.speechManager) {\n                    that.speechManager.destroy();\n                    that.speechManager = null;\n                }\n\n                AIPromptBaseView.fn.destroy.call(that);\n            }\n        });\n\n        kendo.ui.AIPromptOutputView = AIPromptBaseView.extend({\n            init: function(element, options) {\n                let that = this;\n\n                AIPromptBaseView.fn.init.call(that, element, options);\n\n                that.promptOutputs = (that.aiprompt && that.aiprompt.promptOutputs) ? that.aiprompt.promptOutputs : [];\n\n                that.showOutputRating = that.options.showOutputRating;\n                that.isStreaming = that.options.isStreaming || false;\n                that.outputActions = that.options.outputActions;\n                that.outputTemplate = that.options.outputTemplate;\n\n                that.outputActionManager = that.options.outputActionManager;\n            },\n\n            options: {\n                name: \"AIPromptOutputView\",\n                buttonIcon: \"comment\",\n                isStreaming: false,\n                promptOutputs: []\n            },\n\n            startStreaming: function() {\n                let that = this;\n                // Set view-level streaming state\n                that.isStreaming = true;\n\n                // Show stop generation button\n                that._showStopButton();\n            },\n\n            stopStreaming: function() {\n                let that = this;\n                // Set view-level streaming state\n                that.isStreaming = false;\n\n                // Hide stop generation button\n                that._hideStopButton();\n            },\n\n            _showStopButton: function() {\n                let that = this;\n\n                if (!that.stopGenerationButton) {\n                    if (that._initStopGenerationButton()) {\n                        that.stopGenerationButton.show();\n                    }\n                } else {\n                    that.stopGenerationButton.show();\n                }\n            },\n\n            _hideStopButton: function() {\n                let that = this;\n\n                if (that.stopGenerationButton) {\n                    that.stopGenerationButton.hide();\n                }\n            },\n\n            renderPromptOutput: function(output) {\n                let that = this;\n                let showOutputRating = that.options.showOutputRating;\n                let encodedPromptOutputs = that.options.encodedPromptOutputs;\n                let messages = that.options.messages;\n                let isStreaming = that.isStreaming || false; // Use view-level streaming state\n                let outputActions = that.outputActions;\n\n                // Ensure cardListContainer exists\n                if (!that.cardListContainer || that.cardListContainer.length === 0) {\n                    if (that.outputsContainer) {\n                        that.cardListContainer = that.outputsContainer.find('.k-card-list');\n                    }\n                    if (!that.cardListContainer || that.cardListContainer.length === 0) {\n                        return;\n                    }\n                }\n\n                // Initialize floating action button if output is streaming and button doesn't exist\n                if (isStreaming && !that.stopGenerationButton) {\n                    that._initStopGenerationButton();\n                }\n\n                // Check if we have an enhanced output object from the main widget\n                const outputObj = that.aiprompt.outputObjects.get(output.id);\n\n                if (outputObj) {\n                    // Create the card HTML directly using the template builder\n                    const cardHtml = kendo.ui.AIPromptTemplateBuilder.createOutputCard({\n                        output,\n                        showOutputRating,\n                        messages,\n                        showOutputSubtitleTooltip: true,\n                        encodedPromptOutputs,\n                        isStreaming,\n                        outputActions,\n                        outputTemplate: that.outputTemplate\n                    });\n\n                    // Create jQuery element and store references in output object\n                    const card = $(cardHtml);\n                    outputObj._element = card;\n                    outputObj._bodyElement = card.find(`.k-card-body`);\n\n                    // Append to the card list container\n                    that.cardListContainer.prepend(card);\n\n                    // Handle initial state based on loading status\n                    if (output.isLoading) {\n                        outputObj.showSkeleton();\n                    } else if (output.output) {\n                        outputObj.applyFinalTemplate();\n                    }\n\n                    that.initializeComponents(card);\n                } else {\n                    // Fallback to original rendering method\n                    let card = $(kendo.ui.AIPromptTemplateBuilder.createOutputCard({\n                        output,\n                        showOutputRating,\n                        messages,\n                        showOutputSubtitleTooltip: true,\n                        encodedPromptOutputs,\n                        isStreaming,\n                        outputActions,\n                        outputTemplate: that.outputTemplate\n                    }));\n                    that.cardListContainer.prepend(card);\n                    that.initializeComponents(card);\n                }\n            },\n\n            updatePromptOutputContent: function(outputId, content) {\n                let that = this;\n\n                // Use the main widget's output object for streamlined management\n                const outputObj = that.aiprompt.outputObjects.get(outputId);\n\n                if (outputObj) {\n                    outputObj.updateContent(content);\n                }\n            },\n\n            _initStopGenerationButton: function() {\n                let that = this;\n                let contentElement = that.contentElement;\n\n                // Ensure contentElement exists and is in DOM\n                if (!contentElement || contentElement.length === 0) {\n                    return false;\n                }\n\n                // Check if button already exists\n                if (that.stopGenerationButton) {\n                    return true;\n                }\n\n                let stopFab = $(\"<button class='k-prompt-stop-fab k-generating'></button>\");\n                stopFab.attr({\n                    \"aria-label\": that.options.messages.stopGeneration,\n                    \"title\": that.options.messages.stopGeneration\n                });\n\n                contentElement.prepend(stopFab);\n\n                that.stopGenerationButton = stopFab.kendoFloatingActionButton({\n                    _classNames: [\"k-prompt-stop-fab\", \"k-generating\"],\n                    icon: \"stop-sm\",\n                    positionMode: \"absolute\",\n                    align: \"bottom end\",\n                    rounded: \"full\",\n                    click: function(e) {\n                        // Stop streaming and trigger cancel event\n                        that.stopStreaming();\n                        that.aiprompt.trigger(\"promptRequestCancel\", {});\n                    }\n                }).getKendoFloatingActionButton();\n\n                that.stopGenerationButton.hide();\n                return true;\n            },\n            _renderContent: function() {\n                let that = this;\n                let promptOutputs = that.promptOutputs;\n                let showOutputRating = that.options.showOutputRating;\n                let showOutputSubtitleTooltip = that.options.showOutputSubtitleTooltip;\n                let messages = that.options.messages;\n                let encodedPromptOutputs = that.options.encodedPromptOutputs;\n                let outputActions = that.outputActions;\n\n                let outputsContainer;\n                if (that.viewTemplate) {\n                    outputsContainer = kendo.template(that.viewTemplate)({\n                        promptOutputs, showOutputRating, messages, showOutputSubtitleTooltip,\n                        encodedPromptOutputs, outputActions, outputTemplate: that.outputTemplate\n                    });\n                } else {\n                    outputsContainer = kendo.ui.AIPromptTemplateBuilder.createOutputView({\n                        promptOutputs, showOutputRating, messages, showOutputSubtitleTooltip,\n                        encodedPromptOutputs, outputActions, outputTemplate: that.outputTemplate\n                    });\n                }\n\n                that.outputsContainer = $(outputsContainer);\n                that.cardListContainer = that.outputsContainer.find('.k-card-list');\n                that._renderContentElement();\n                that.contentElement.append(that.outputsContainer);\n\n                that._initStopGenerationButton();\n            },\n\n            initializeComponents: function(parentElement) {\n                let that = this;\n                parentElement = parentElement || that.contentElement;\n\n                // Use the output action manager to handle all button initialization\n                that.outputActionManager.initializeButtons(parentElement, that.outputActions);\n\n                // Handle CSP-compliant styling for loading content\n                parentElement.find('[data-loading=\"true\"]').hide();\n                parentElement.find('[data-loading=\"false\"]').show();\n\n                // Update DOM references for existing output objects after template rendering\n                // and ensure buttons are initialized for all cards\n                if (that.aiprompt && that.aiprompt.outputObjects) {\n                    that.aiprompt.outputObjects.forEach((outputObj, outputId) => {\n                        // Find the corresponding DOM element for this output\n                        const cardElement = parentElement.find(`.k-card[data-id=\"${outputId}\"]`);\n                        if (cardElement.length > 0) {\n                            // Update the output object's DOM references\n                            outputObj._element = cardElement;\n                            outputObj._bodyElement = cardElement.find('.k-card-body');\n\n                            // Apply custom output template for existing outputs when switching views\n                            if (that.outputTemplate && typeof that.outputTemplate === 'function' &&\n                                outputObj.data && outputObj.data.output && !outputObj.data.isLoading) {\n                                const customContent = that.outputTemplate({\n                                    output: outputObj.data,\n                                    content: outputObj.data.output\n                                });\n                                outputObj._bodyElement.html(customContent);\n                            }\n\n                            // Initialize buttons for this specific card if not already initialized\n                            // Check if buttons are already initialized by looking for kendoButton data\n                            const buttons = cardElement.find('.k-button');\n                            const hasInitializedButtons = buttons.length > 0 && buttons.first().data('kendoButton');\n                            if (!hasInitializedButtons && buttons.length > 0) {\n                                // Initialize buttons for this specific card only\n                                that.outputActionManager.initializeButtons(cardElement, that.outputActions);\n                            }\n                        }\n                    });\n                }\n            },\n\n            _initializeCardButtons: function(cardElement) {\n                let that = this;\n                // Delegate all button initialization to the output action manager\n                that.outputActionManager.initializeButtons(cardElement, that.outputActions);\n            },\n\n            render: function() {\n                let that = this;\n                that._renderContent();\n                that.initializeComponents();\n\n                that.contentElement.on(\"keydown\", \".k-card\", function(e) {\n                    let target = $(e.target);\n\n                    // if up or down arrow, focus next or previous card\n                    // if home or end, focus first or last card\n                    if (e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 36 || e.keyCode === 35) {\n                        e.preventDefault();\n\n                        // down arrow\n                        if (e.keyCode === 40) {\n                            target.next(\".k-card\").trigger(\"focus\");\n                        }\n\n                        // up arrow\n                        if (e.keyCode === 38) {\n                            target.prev(\".k-card\").trigger(\"focus\");\n                        }\n\n                        // home\n                        if (e.keyCode === 36) {\n                            that.contentElement.find(\".k-card\").first().trigger(\"focus\");\n                        }\n\n                        // end\n                        if (e.keyCode === 35) {\n                            that.contentElement.find(\".k-card\").last().trigger(\"focus\");\n                        }\n                    }\n                });\n            },\n\n            destroy: function() {\n                let that = this;\n\n\n                // Call parent destroy\n                AIPromptBaseView.fn.destroy.call(that);\n            }\n        });\n\n        kendo.ui.AIPromptCommandsView = AIPromptBaseView.extend({\n            options: {\n                name: \"AIPromptCommandsView\",\n                buttonText: \"\",\n                buttonIcon: \"more-horizontal\",\n                promptCommands: []\n            },\n\n            initializeComponents: function() {\n                let that = this;\n                let commandItems = that.options.promptCommands;\n\n                let panelBarEl = $(\"<div></div>\").kendoPanelBar({\n                    animation: false,\n                    dataSource: commandItems,\n                    selectable: false,\n                    select: function(ev) {\n                        let item = $(ev.item);\n                        let dataItem = this.dataItem(item);\n                        if (dataItem.hasChildren) {\n                            return;\n                        }\n\n                        that.aiprompt.trigger(\"commandExecute\", { sender: that.aiprompt, item: dataItem });\n                    }\n                });\n                const promptViewWrapper = $(\"<div class='k-prompt-view'>\");\n                promptViewWrapper.append(panelBarEl);\n\n                that.contentElement.append(promptViewWrapper);\n            },\n\n            render: function() {\n                let that = this;\n                that._renderContentElement();\n                that.initializeComponents();\n            },\n        });\n\n        let EMPTY_TEMPLATE = () => \"\";\n        kendo.ui.AIPromptCustomView = AIPromptBaseView.extend({\n            options: {\n                name: \"AIPromptCustomView\",\n                buttonText: \"\",\n                buttonIcon: \"\",\n                viewTemplate: EMPTY_TEMPLATE,\n                footerTemplate: EMPTY_TEMPLATE,\n            },\n\n            initializeComponents: function() {\n                let that = this;\n                if (typeof that.options.initializeComponents === \"function\") {\n                    that.options.initializeComponents.call(that);\n                }\n            },\n\n            _renderContent: function() {\n                let that = this;\n                let content = kendo.template(that.options.viewTemplate)({ aiprompt: that });\n\n                that._renderContentElement();\n                that.contentElement.append(content);\n            },\n\n            _renderFooter: function() {\n                let that = this;\n                if (that.options.footerTemplate === EMPTY_TEMPLATE) {\n                    return;\n                }\n\n                let footer = kendo.template(that.options.footerTemplate)({ messages: that.options.messages });\n\n                that._renderFooterElement();\n                that.footerElement.append(footer);\n            },\n            render: function() {\n                let that = this;\n                that._renderContent();\n                that._renderFooter();\n                that.initializeComponents();\n            },\n        });\n\n    })(window.kendo.jQuery);\n    var kendo$2 = kendo;\n\n    const __meta__ = {\n        id: \"aiprompt\",\n        name: \"AIPrompt\",\n        category: \"web\",\n        description: \"The AIPrompt component simplifies the incorporation of external AI services into apps.\",\n        depends: [\"core\", \"icons\", \"textarea\", \"button\", \"toolbar\", \"panelbar\", \"data\", \"floatingactionbutton\", \"skeletoncontainer\", \"speechtotextbutton\"],\n    };\n\n    (function($) {\n        let kendo = window.kendo,\n            Widget = kendo.ui.Widget,\n            NS = \".kendoAIPrompt\",\n            ui = kendo.ui,\n            extend = $.extend,\n\n            COMMAND_EXECUTE = \"commandExecute\",\n            PROMPT_REQUEST = \"promptRequest\",\n            PROMPT_RESPONSE = \"promptResponse\",\n            OUTPUT_RATING = \"outputRating\",\n            OUTPUT_COPY = \"outputCopy\",\n            OUTPUT_VIEW = \"output\",\n            OUTPUT_ACTION = \"outputAction\",\n            PROMPT_REQUEST_CANCEL = \"promptRequestCancel\",\n\n            DEFAULT_OUTPUT_ACTIONS = [\"copy\", \"retry\", \"spacer\", \"rating\"],\n            DEFAULT_OUTPUT_ACTIONS_WITHOUT_RATING = [\"copy\", \"retry\"],\n\n            FOCUS = \"focus\",\n            KDISABLED = \"k-disabled\";\n\n        let cssClasses = {\n            menuButton: \"k-menu-button\",\n            aIPrompt: \"k-prompt\"\n        };\n\n        let defaultViews = {\n            prompt: {\n                type: \"kendo.ui.AIPromptPromptView\",\n                name: \"prompt\",\n                buttonIcon: \"sparkles\",\n            },\n            output: {\n                type: \"kendo.ui.AIPromptOutputView\",\n                name: \"output\",\n                buttonIcon: \"comment\",\n            },\n            commands: {\n                type: \"kendo.ui.AIPromptCommandsView\",\n                name: \"commands\",\n                buttonIcon: \"more-horizontal\",\n            },\n            custom: {\n                type: \"kendo.ui.AIPromptCustomView\",\n                name: \"custom\",\n            }\n        };\n\n        let AIPrompt = Widget.extend({\n            init: function(element, options) {\n                let that = this;\n                options = options || {};\n\n                Widget.fn.init.call(that, element, options);\n\n                if (that.options.views.length == 0) {\n                    that.options.views = [\"prompt\", \"output\"];\n\n                    if (this.options.promptCommands && this.options.promptCommands.length) {\n                        this.options.views.push(\"commands\");\n                    }\n                }\n\n                that.options.outputActions = (options.outputActions && options.outputActions.length > 0) ? options.outputActions : DEFAULT_OUTPUT_ACTIONS_WITHOUT_RATING;\n\n                that.promptOutputs = that.options.promptOutputs || [];\n                that.outputObjects = new Map();\n\n                that.outputManager = new kendo.ui.AIPromptOutputManager(that);\n\n                // Initialize output action manager at component level\n                that.outputActions = kendo.ui.AIPromptOutputActionManager.processOutputActions(that.options.outputActions);\n                that.outputActionManager = new kendo.ui.AIPromptOutputActionManager(that, {\n                    outputActions: that.outputActions\n                });\n\n                // Populate outputObjects if promptOutputs is not empty\n                if (Array.isArray(that.promptOutputs) && that.promptOutputs.length > 0) {\n                    that.promptOutputs.forEach(output => {\n                        if (!output.id) {\n                            output.id = kendo.guid();\n                        }\n                        const outputObj = that.outputManager.createOutputObject(output);\n                        that.outputObjects.set(output.id, outputObj);\n                    });\n                }\n\n                that._initLayout();\n                that._initViews();\n                that._initToolbar();\n                that.activeView(that.options.activeView);\n\n                if (that.options.service) {\n                    that.transport = new kendo.data.AiTransport({\n                        service: that.options.service,\n                        success: that._serviceSuccess.bind(that),\n                        requestStart: () => kendo.ui.progress(that.element, true)\n                    });\n                }\n\n                kendo.notify(that);\n            },\n\n            options: {\n                name: \"AIPrompt\",\n                enabled: true,\n                toolbarItems: [],\n                promptOutputs: [],\n                encodedPromptOutputs: true,\n                activeView: 0,\n                views: [],\n                popup: null,\n                speechToText: false,\n                promptTextArea: null,\n                messages: {\n                    promptView: \"Ask AI\",\n                    outputView: \"Output\",\n                    commandsView: \"\",\n                    customView: \"Custom View\",\n                    promptPlaceholder: \"Ask or generate content with AI\",\n                    promptSuggestions: \"Prompt Suggestions\",\n                    generateOutput: \"Generate\",\n                    outputTitle: \"Generated with AI\",\n                    outputRetryTitle: \"Generated with AI\",\n                    copyOutput: \"Copy\",\n                    retryGeneration: \"Retry\",\n                    ratePositive: \"\",\n                    rateNegative: \"\",\n                    stopGeneration: \"Stop Generation\"\n                },\n                showOutputRating: true,\n                service: null,\n                suffixTemplate: null,\n                outputTemplate: null,\n                outputActions: DEFAULT_OUTPUT_ACTIONS\n            },\n\n            events: [\n                COMMAND_EXECUTE,\n                PROMPT_REQUEST,\n                PROMPT_RESPONSE,\n                PROMPT_REQUEST_CANCEL,\n                OUTPUT_RATING,\n                OUTPUT_COPY,\n                OUTPUT_ACTION\n            ],\n\n            _serviceSuccess: function(output) {\n                const that = this;\n                const outputViewIndex = that.viewsArray.findIndex(v => v.name === OUTPUT_VIEW);\n\n                output.activeView = outputViewIndex;\n                if (!that.trigger(PROMPT_RESPONSE, {\n                    output: output.output,\n                    prompt: output.prompt,\n                    outputId: output.id,\n                    isRetry: output.isRetry || false,\n                    response: output.response,\n                })) {\n                    that.addPromptOutput(output);\n                    that.activeView(output.activeView);\n                    kendo.ui.progress(that.element, false);\n                }\n\n            },\n\n            _initializeView: function(name) {\n                let viewConfig = this.views[name];\n                let view;\n                if (viewConfig) {\n                    let type = viewConfig.type;\n\n                    if (typeof type === \"string\") {\n                        type = kendo.getter(viewConfig.type)(window);\n                    }\n\n                    if (type) {\n                        view = new type(this.element, extend(true, {\n                            promptSuggestions: this.options.promptSuggestions,\n                            promptCommands: this.options.promptCommands,\n                            promptOutputs: this.promptOutputs,\n                            showOutputRating: this.showOutputRating,\n                            messages: this.options.messages,\n                            showOutputSubtitleTooltip: this.options.showOutputSubtitleTooltip,\n                            encodedPromptOutputs: this.options.encodedPromptOutputs,\n                            promptSuggestionItemTemplate: this.options.promptSuggestionItemTemplate,\n                            service: this.options.service,\n                            speechToText: this.options.speechToText,\n                            promptTextArea: this.options.promptTextArea,\n                            outputActions: this.outputActions,\n                            outputActionManager: this.outputActionManager,\n                            outputTemplate: this.options.outputTemplate,\n                        },\n                            viewConfig\n                        ));\n                    } else {\n                        throw new Error(\"There is no such view\");\n                    }\n                }\n\n                return view;\n            },\n\n            _unbindView: function(view) {\n                if (view) {\n                    view.destroy();\n                }\n            },\n\n            _initViews: function() {\n                let that = this,\n                    options = that.options,\n                    views = options.views;\n\n                that.views = {};\n                that.viewsArray = [];\n\n                for (let i = 0, l = views.length; i < l; i++) {\n                    let view = views[i];\n                    let isSettings = typeof view === \"object\";\n                    let name = view;\n\n                    if (isSettings) {\n                        view = { ...view };\n                        name = typeof view.type !== \"string\" ? view.name : view.type;\n                    }\n\n                    let defaultView = defaultViews[name];\n\n                    if (defaultView) {\n                        if (isSettings) {\n                            view.type = defaultView.type;\n                        }\n\n                        defaultView.buttonText = that.options.messages[`${name}View`];\n                    }\n\n                    view = Object.assign({ title: view.title, name, index: i }, defaultView, isSettings ? view : {});\n                    that.viewsArray.push(view);\n\n                    if (name) {\n                        that.views[name] = view;\n                    }\n                }\n            },\n\n            getViews: function() {\n                return this.viewsArray;\n            },\n\n            activeView: function(name) {\n                let that = this;\n                if (name === undefined) {\n                    return that._activeViewIndex;\n                }\n\n                if (Number.isInteger(name)) {\n                    name = that.viewsArray[name].name;\n                }\n\n                if (name && that.views[name]) {\n                    if (that._selectedView) {\n                        that._unbindView(that._selectedView);\n                    }\n\n                    that._selectedView = that._initializeView(name);\n                    that._activeViewIndex = that.viewsArray.findIndex(v => v.name === name);\n                    that._selectedView.render();\n\n                    that._updateToolbarState(that._activeViewIndex);\n\n                    let toolItem = $(that.toolbar._getAllItems()[that._activeViewIndex]);\n                    that.toolbar._resetTabIndex(toolItem);\n                    toolItem.trigger(FOCUS);\n                }\n            },\n\n            addPromptOutput: function(output) {\n                if (typeof output === 'string') {\n                    output = { output: output };\n                }\n\n                output.id = output.id || kendo.guid();\n\n                const outputObj = this.outputManager.createOutputObject(output);\n                this.promptOutputs.unshift(output);\n                this.outputObjects.set(output.id, outputObj);\n\n                if (this._selectedView && typeof this._selectedView.renderPromptOutput === \"function\") {\n                    this._selectedView.renderPromptOutput(output);\n\n                    if (output.isLoading) {\n                        this.startStreaming();\n                    }\n                }\n            },\n\n            removePromptOutput: function(output) {\n                    const that = this;\n                    let outputId = output;\n\n                    const removeOutput = (id) => {\n                        const el = that.promptOutputs.find((el) => el.id === id);\n\n                        if (el) {\n                            that.promptOutputs = that.promptOutputs.filter((item) => item.id !== id);\n                        }\n\n                        that.outputObjects.delete(id);\n                    };\n\n                    if (outputId instanceof jQuery) {\n                        outputId = output.data(\"id\");\n                        output.remove();\n                        removeOutput(outputId);\n                    } else {\n                        that.element.find(\"[data-id='\" + outputId + \"']\").remove();\n                        removeOutput(outputId);\n                    }\n            },\n\n            clearOutput: function() {\n                const that = this;\n                const elements = that.element.find(\"[data-id]\");\n                elements.each(function() {\n                    const id = $(this).data(\"id\");\n                    that.outputObjects.delete(id);\n                });\n                elements.remove();\n                that.promptOutputs = [];\n            },\n\n            _updateToolbarState: function(activeToolIndex) {\n                let toolbar = this.toolbar;\n                toolbar.element.find(\".k-toolbar-toggle-button\").each(function(index, elm) {\n                    toolbar.toggle($(elm), index == activeToolIndex);\n                });\n            },\n\n            _initLayout: function() {\n                let that = this,\n                    header = $(\"<div></div>\").addClass(\"k-prompt-header\");\n                that.header = header;\n                that.element.addClass(cssClasses.aIPrompt);\n                that.element.append(header);\n                const popupWrapper = that.element.closest('.k-popup');\n\n                if (popupWrapper.length) {\n                    $(popupWrapper).addClass('k-prompt-popup');\n                }\n            },\n\n            _getViewTools: function() {\n                let that = this;\n\n                return that.viewsArray.map(v => {\n                    if (v.name === 'commands') {\n                        if (v.buttonText) {\n                            v.title = v.buttonText;\n                        } else {\n                            v.title = \"More Actions\";\n                        }\n                    }\n\n                    return {\n                    type: \"button\",\n                    text: v.buttonText,\n                    icon: v.buttonIcon,\n                    fillMode: \"flat\",\n                    themeColor: v.themeColor || \"primary\",\n                    rounded: \"full\",\n                    togglable: true,\n                    attributes: { title: v.title },\n                    toggle: function() {\n                        that.activeView(v.name);\n                    }\n                };\n            });\n            },\n\n            _initToolbar: function() {\n                let that = this;\n                let items = that.options.toolbarItems;\n                items = Array.isArray(items) ? items : [items];\n                const closeButton = items.find(item => item.icon === 'x');\n\n                if (closeButton) {\n                    closeButton.themeColor = 'base';\n                }\n\n                let toolbarEl = $(\"<div></div>\").kendoToolBar({\n                    resizable: false,\n                    fillMode: \"flat\",\n                    items: that._getViewTools().concat(items)\n                }).appendTo(that.header);\n\n                that.toolbar = toolbarEl.data(\"kendoToolBar\");\n            },\n\n            focus: function() {\n                let that = this;\n                that.element.trigger(FOCUS);\n            },\n\n            updatePromptOutputContent: function(content, outputId) {\n                let that = this;\n\n                return that.outputManager.updatePromptOutputContent(content, outputId);\n            },\n\n            startStreaming: function() {\n                let that = this;\n\n                if (that._selectedView && typeof that._selectedView.startStreaming === \"function\") {\n                    that._selectedView.startStreaming();\n                }\n            },\n\n            stopStreaming: function() {\n                let that = this;\n\n                if (that._selectedView && typeof that._selectedView.stopStreaming === \"function\") {\n                    that._selectedView.stopStreaming();\n                }\n\n                if (that.outputManager) {\n                    that.outputManager.stopAllLoading();\n                }\n            },\n\n            setOptions: function(options) {\n                let that = this;\n                let el = that.element;\n                let originalOptions = that.options;\n                let newOptions = extend({}, originalOptions, options);\n\n                kendo.destroy(el);\n\n                $(el).empty();\n\n                that.init(el, newOptions);\n            },\n\n            destroy: function() {\n                let that = this;\n\n                if (that.toolbar) {\n                    that.toolbar.destroy();\n                    that.toolbar = null;\n                }\n\n                if (that._selectedView) {\n                    that._selectedView.destroy();\n                    that._selectedView = null;\n                }\n\n                if (that.outputManager) {\n                    that.outputManager.destroy();\n                    that.outputManager = null;\n                }\n\n                if (that.outputActionManager) {\n                    that.outputActionManager.destroy();\n                    that.outputActionManager = null;\n                }\n\n                that.promptOutputs = null;\n                if (that.outputObjects) {\n                    that.outputObjects.clear();\n                    that.outputObjects = null;\n                }\n\n                if (that.transport) {\n                    that.transport = null;\n                }\n\n                that.element.off(NS);\n\n                Widget.fn.destroy.call(that);\n            }\n        });\n\n        ui.plugin(AIPrompt);\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    exports.__meta__ = __meta__;\n    exports.default = kendo$1;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]}