/**
 * Kendo UI v2025.3.1002 (http://www.telerik.com/kendo-ui)
 * Copyright 2025 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("kendo.scheduler.view.js"),require("kendo.icons.js")):"function"==typeof define&&define.amd?define(["exports","kendo.scheduler.view.min","kendo.icons.min"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).kendo=e.kendo||{},e.kendo._globals=e.kendo._globals||{},e.kendo._globals.SchedulerDayview={}))}(this,(function(e){!function(e,t){var a=window.kendo,r=a.ui,i=a.htmlEncode,n=a.date.setTime,s=r.SchedulerView,o=a._outerWidth,l=a._outerHeight,d=e.extend,h=a.date.getDate,u=a.date.MS_PER_MINUTE,c=a.date.MS_PER_DAY,v="k-current-time",p="k-current-time-arrow",f="k-event-inverse",m=a.date.getMilliseconds,_=".kendoMultiDayView";var g=a.template((({start:e,end:t,title:r})=>`<div title="(${a.format("{0:t} - {1:t}",e,t)}): ${r.replace(/"/g,"&#34;")}"><div class="k-event-template k-event-time">${i(a.format("{0:t} - {1:t}",e,t))}</div><div class="k-event-template">${r}</div></div>`)),y=a.template((({start:e,title:t})=>`<div title="(${a.format("{0:t}",e)}): ${t.replace(/"/g,"&#34;")}"><div class="k-event-template">${t}</div></div>`)),D=a.template((({isMobile:e,date:t})=>`<span class='k-link k-nav-day'>${e?a.toString(t,"ddd")[0]:a.toString(t,"ddd M/dd")}</span>`)),k=e=>`<div role="button" aria-label="${i(e.ariaLabel)}" ${a.attr("uid")}="${e.uid}"`+(e.resources[0]?`${a.attr("style-background-color")}="${e.resources[0].color}" ${a.attr("style-border-color")}="${e.resources[0].color}"`:"")+' class="k-event"><span class="k-event-actions">'+(e.tail||e.middle?a.ui.icon("caret-alt-left"):"")+(e.isException()?a.ui.icon("arrows-no-repeat"):e.isRecurring()?a.ui.icon("arrow-rotate-cw"):"")+"</span>"+a.template(e.template)(e)+'<span class="k-event-actions">'+(e.showDelete?`<a href="#" class="k-link k-event-delete" title="${e.messages.destroy}" aria-label="${e.messages.destroy}">${a.ui.icon("x")}</a>`:"")+(e.head||e.middle?a.ui.icon("caret-alt-right"):"")+"</span>"+(!e.resizable||e.singleDay||e.tail||e.middle?"":'<span class="k-resize-handle k-resize-w"></span>')+(!e.resizable||e.singleDay||e.head||e.middle?"":'<span class="k-resize-handle k-resize-e"></span>')+"</div>",T=e=>`<div role="button" aria-label="${i(e.ariaLabel)}" ${a.attr("uid")}="${e.uid}"`+(e.resources[0]?`${a.attr("style-background-color")}="${e.resources[0].color}" ${a.attr("style-border-color")}="${e.resources[0].color}"`:"")+' class="k-event"><span class="k-event-actions">'+(e.isException()?a.ui.icon("arrows-no-repeat"):e.isRecurring()?a.ui.icon("arrow-rotate-cw"):"")+"</span>"+a.template(e.template)(e)+'<span class="k-event-actions">'+(e.showDelete?`<a href="#" class="k-link k-event-delete" title="${e.messages.destroy}" aria-label="${e.messages.destroy}">${a.ui.icon("x")}</a>`:"")+"</span>"+(e.tail||e.middle?'<span class="k-event-top-actions">'+a.ui.icon("caret-alt-up")+"</span>":"")+(e.head||e.middle?'<span class="k-event-bottom-actions">'+a.ui.icon("caret-alt-down")+"</span>":"")+(!e.resizable||e.tail||e.middle?"":'<span class="k-resize-handle k-resize-n"></span>')+(!e.resizable||e.head||e.middle?"":'<span class="k-resize-handle k-resize-s"></span>')+"</div>";function w(e){var t=new Date(1980,1,1,0,0,0);return n(t,m(e)),t}function S(e,t,a){return e>=t&&e<=a}function b(e,t,a,r){return r=r?e<=a:e<a,e>t&&r}function C(e,t,r,i){var n=e._continuousEvents;var s=n[n.length-1];var o=h(t.start.startDate()).getTime();if(i&&s&&h(s.start.startDate()).getTime()==o){var l=n.length-1;for(;l>-1&&!(n[l].isAllDay||h(n[l].start.startDate()).getTime()<o);l--);n.splice(l+1,0,{element:r,isAllDay:!0,uid:r.attr(a.attr("uid")),start:t.start,end:t.end})}else n.push({element:r,isAllDay:i,uid:r.attr(a.attr("uid")),start:t.start,end:t.end})}var x=s.extend({init:function(e,t){var a=this;s.fn.init.call(a,e,t),a.title=a.options.title||a.options.name,a._workDays=function(e){if(e.workDays&&e.workDays.length)return e.workDays;var t=[];var a=e.workWeekStart%7;var r=Math.abs(e.workWeekEnd%7);for(t.push(a);r!=a;)a>6?a-=7:a++,t.push(a);return t}(a.options),a._templates(),a._editable(),a.calculateDateRange(),a._groups(),a._currentTime(!0)},_currentTimeMarkerUpdater:function(){this._updateCurrentTimeMarker(new Date)},_updateCurrentTimeMarker:function(t){var r,i,n,s,d=this.options,h="<div class='"+v+"'></div>";if(!1===d.currentTimeMarker.useLocalTimezone){var u=d.dataSource.options.schema.timezone;if(d.dataSource&&u){var c=a.timezone.offset(t,u);t=a.timezone.convert(t,t.getTimezoneOffset(),c)}}r=this.times.find("."+v),i=this.content.find("."+v);var f=d.group&&"horizontal"!=d.group.orientation?this.groups.length:1;var m=this.times.find("tr").first().find("th").first();var _=this.times.find("tr").first().find("th").last();m.length>0&&_.length>0&&(s=this._isRtl?m.position().left+l(m)-l(_):_.position().left);for(var g=0;g<f;g++){var y=this.groups[g];if(!y)return;var D=a.date.toUtcTime(t);var k=y.timeSlotRanges(D,D+1);if(0===k.length)return;if(k[0].collection.slotByStartDate(t)){var T=r[g]?r.eq(g):e(h).prependTo(this.times);var w=Math.round(k[0].innerRect(t,new Date(t.getTime()+1),!1).top);var S={};this._isRtl?(S.right=s,T.addClass(p+"-left")):(S.left=s,T.addClass(p+"-right")),n||(n=.8666*o(T)/2),S.top=w-n,T.css(S),(i[g]?i.eq(g):e(h).prependTo(this.content)).css({top:w,height:"1px",right:0,left:0})}}},_currentTime:function(e){var a=this;var r=a.options.currentTimeMarker;!1!==r&&r.updateInterval!==t&&(a._currentTimeMarkerUpdater(),e&&(a._currentTimeUpdateTimer=setInterval(this._currentTimeMarkerUpdater.bind(a),r.updateInterval)))},_updateResizeHint:function(e,t,r,i){var n;n=this.options.enforceAllDaySlot?e.isMultiDay():e.isAllDay;var o=this.groups[t].ranges(r,i,n,e.isAllDay);var l,d,h,u;this._removeResizeHint();for(var c=0;c<o.length;c++){var v=o[c];var p=v.startSlot();if(this._isGroupedByDate()&&n)for(var f=p.index;f<=v.end.index;f++){var m=v.collection._slots[f];l=m.offsetWidth,d=m.clientHeight,h=m.offsetTop,u=s.fn._createResizeHint.call(this,m.offsetLeft,h,l,d),this._resizeHint=this._resizeHint.add(u)}else{if(l=p.offsetWidth,d=p.clientHeight,h=p.offsetTop,n)l=v.innerWidth();else{var _=v.outerRect(r,i,this.options.snap);h=_.top,d=_.bottom-_.top}u=s.fn._createResizeHint.call(this,p.offsetLeft,h,l,d),this._resizeHint=this._resizeHint.add(u)}}var g="t";var y=this.content;n&&(g="M/dd",(y=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div")).length||(y=this.content)),this._resizeHint.appendTo(y),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(a.toString(a.timezone.toLocalDate(r),g)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(a.toString(a.timezone.toLocalDate(i),g))},_updateMoveHint:function(t,r,i){var n;n=this.options.enforceAllDaySlot?t.isMultiDay():t.isAllDay;var s=this.groups[r];var o=a.date.toUtcTime(t.start)+i;var l=o+t.duration();var d=s.ranges(o,l,n,t.isAllDay);o=a.timezone.toLocalDate(o),l=a.timezone.toLocalDate(l),this._removeMoveHint(t.uid),!n&&m(l)<m(this.startTime())&&l<this._end().getTime()&&0!==m(l)&&d.length>1&&d.pop();var h=e();for(var u=0;u<d.length;u++){var c=d[u];var v=c.start;var p;var _={left:v.offsetLeft+2,top:v.offsetTop};if(this._isGroupedByDate()&&n)for(var g=v.index;g<=c.end.index;g++){var y=c.collection._slots[g];_.left=this._isRtl?.1*y.clientWidth+y.offsetLeft+2:y.offsetLeft+2,_.height=y.offsetHeight,_.width=.9*y.clientWidth-2,p=this._createEventElement(t.clone({start:o,end:l}),!n),t.inverseColor&&p.addClass(f),this._appendMoveHint(p,_),h=h.add(p)}else{if(this._isRtl&&(_.left=.1*v.clientWidth+v.offsetLeft+2),n)_.width=c.innerWidth()-2;else{var D=c.outerRect(o,l,this.options.snap);_.top=D.top,_.height=D.bottom-D.top,_.width=.9*v.clientWidth-2}p=this._createEventElement(t.clone({start:o,end:l}),!n),t.inverseColor&&p.addClass(f),this._appendMoveHint(p,_),h=h.add(p)}}var k=this.content;n&&((k=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div")).length||(k=this.content)),h.appendTo(k)},_appendMoveHint:function(e,t){e.addClass("k-event-drag-hint"),e.css(t),this._moveHint=this._moveHint.add(e)},_slotByPosition:function(e,t){var a,r;var i;for(this._isVerticallyGrouped()?(r=this.content.offset(),t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft):r=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset(),r&&(e-=r.left,t-=r.top),e=Math.ceil(e),t=Math.ceil(t),i=0;i<this.groups.length;i++)if(a=this.groups[i].daySlotByPosition(e,t,this._isGroupedByDate()))return a;for(r&&(e+=r.left,t+=r.top),e-=(r=this.content.offset()).left,t-=r.top,this._isVerticallyGrouped()||(t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft),e=Math.ceil(e),t=Math.ceil(t),i=0;i<this.groups.length;i++)if(a=this.groups[i].timeSlotByPosition(e,t))return a;return null},_groupCount:function(){var e=this.groupedResources;var t=this._isGroupedByDate();return e.length?"vertical"===this._groupOrientation()?t?this._columnCountForLevel(e.length-1):this._rowCountForLevel(e.length-1):t?this._columnCountForLevel(e.length)/this._columnCountForLevel(0):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnCountInResourceView:function(){var e=this.groupedResources;var t=this._isGroupedByDate();return!e.length||this._isVerticallyGrouped()?t?this._rowCountForLevel(0):this._columnCountForLevel(0):t?this._columnCountForLevel(0):this._columnOffsetForResource(e.length)},_timeSlotGroups:function(e,t){var a=this._timeSlotInterval();var r=e;var i=this._isGroupedByDate();var n=this.content.find("tr:not(.k-scheduler-header-all-day)");var s,o,l,d;var h=n.length;this._isVerticallyGrouped()&&(i&&(r=t),h=Math.floor(h/r));for(var u=0;u<r;u++){var c=0;var v=0;for(this._isVerticallyGrouped()?c=u:v=u,l=c*h;l<(c+1)*h;){var p=n[l].children;l%h==0&&(o=m(new Date(+this.startTime())));var f=0;if(i)if(this._isVerticallyGrouped())for(d=0;d<e;d++)s=this.groups[d],this._addTimeSlotGroup(s,p,d,o,a,u);else for(s=this.groups[u],d=v;d<e*t;d+=e)this._addTimeSlotGroup(s,p,d,o,a,f),f++;else for(s=this.groups[u],d=v*t;d<(v+1)*t;d++)this._addTimeSlotGroup(s,p,d,o,a,f),f++;o+=a,l++}}},_addTimeSlotGroup:function(e,t,a,r,i,n){var s=t[a];var o=e.getTimeSlotCollection(n);var l=this._dates[n];if(l&&s){var d=Date.UTC(l.getFullYear(),l.getMonth(),l.getDate())+r;var h=d+i;o.addTimeSlot(s,d,h)}},_addDaySlotGroup:function(e,t,r,i,n){var s=t[r];var o=this._dates[n];if(o){var l=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate());e.addDaySlot(s,l,l+a.date.MS_PER_DAY)}},_daySlotGroups:function(e,t){var a,r;var i=e;var n=this._isGroupedByDate();this._isVerticallyGrouped()?(n&&(i=t),a=this.element.find(".k-scheduler-header-all-day")):a=this.element.find(".k-scheduler-header-all-day tr");for(var s=0;s<i;s++){var o=0;var l;this._isVerticallyGrouped()&&(o=s);var d=a[o].children;var h=0;this._isVerticallyGrouped()||(h=s);var u=0;if(n)if(this._isVerticallyGrouped())for(r=0;r<e;r++)l=this.groups[r].getDaySlotCollection(0),this._addDaySlotGroup(l,d,r,t,s);else for(l=this.groups[s].getDaySlotCollection(0),r=h;r<e*t;r+=e)this._addDaySlotGroup(l,d,r,t,u),u++;else for(l=this.groups[s].getDaySlotCollection(0),r=h*t;r<(h+1)*t;r++)this._addDaySlotGroup(l,d,r,t,u),u++}},_groups:function(){var e=this._groupCount();var t=this._columnCountInResourceView();this.groups=[];for(var r=0;r<e;r++){var i=this._addResourceView(r);for(var n=0;n<t;n++)this._dates[n]&&i.addTimeSlotCollection(this._dates[n],a.date.addDays(this._dates[n],1));this.options.allDaySlot&&i.addDaySlotCollection(this._dates[0],a.date.addDays(this._dates[this._dates.length-1],1))}this._timeSlotGroups(e,t),this.options.allDaySlot&&this._daySlotGroups(e,t)},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",selectedShortDateFormat:"{0:d}",selectedMobileDateFormat:"{0:MMM} {0:dd} - {1:dd}",allDaySlot:!0,showWorkHours:!1,title:"",startTime:a.date.today(),endTime:a.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:({date:e})=>`<span>${a.toString(e,"t")}</span>`,minorTimeHeaderTemplate:()=>"&#8203;",groupHeaderTemplate:({text:e})=>e,slotTemplate:()=>"&nbsp;",allDaySlotTemplate:()=>"&nbsp;",eventTemplate:g,allDayEventTemplate:y,dateHeaderTemplate:D,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"},currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},ongoingEvents:{cssClass:null,enabled:!0,updateInterval:6e4},enforceAllDaySlot:!1},events:["remove","add","edit"],_templates:function(){var e=this.options,t=d({},a.Template,e.templateSettings);this.allDayEventTemplate=a.template(k),this.eventTemplate=a.template(T),this.majorTimeHeaderTemplate=a.template(e.majorTimeHeaderTemplate,t),this.minorTimeHeaderTemplate=a.template(e.minorTimeHeaderTemplate,t),this.dateHeaderTemplate=a.template(e.dateHeaderTemplate,t),this.slotTemplate=a.template(e.slotTemplate,t),this.allDaySlotTemplate=a.template(e.allDaySlotTemplate,t),this.groupHeaderTemplate=a.template(e.groupHeaderTemplate,t)},_editable:function(){this.options.editable&&(this._isMobile()?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+_,".k-event a:has(.k-i-x),.k-event a:has(.k-svg-i-x)",(function(r){t.trigger("remove",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),r.preventDefault()})),!1!==t.options.editable.create&&t.element.on("dblclick"+_,".k-scheduler-content > table td",(function(a){if(!e(this).parent().hasClass("k-scheduler-header-all-day")){var r=t._slotByPosition(a.pageX,a.pageY);if(r){var i=t._resourceBySlot(r);t.trigger("add",{eventInfo:d({start:r.startDate(),end:r.endDate()},i)})}a.preventDefault()}})).on("dblclick"+_,".k-scheduler-header-all-day td",(function(e){var r=t._slotByPosition(e.pageX,e.pageY);if(r){var i=t._resourceBySlot(r);t.trigger("add",{eventInfo:d({},{isAllDay:!0,start:a.date.getDate(r.startDate()),end:a.date.getDate(r.startDate())},i)})}e.preventDefault()})),!1!==t.options.editable.update&&t.element.on("dblclick"+_,".k-event",(function(r){t.trigger("edit",{uid:e(this).closest(".k-event").attr(a.attr("uid"))}),r.preventDefault()}))},_touchEditable:function(){var r=this;var i=0;a.support.mobileOS.android&&(i=5),!1!==r.options.editable.create&&(r._addUserEvents=new a.UserEvents(r.element,{threshold:i,filter:".k-scheduler-content td",useClickAsTap:!a.support.browser.edge,tap:function(a){if(!r._scrolling&&!e(a.target).parent().hasClass("k-scheduler-header-all-day")){var i=a.x.location!==t?a.x.location:a.x;var n=a.y.location!==t?a.y.location:a.y;var s=r._slotByPosition(i,n);if(s){var o=r._resourceBySlot(s);r.trigger("add",{eventInfo:d({start:s.startDate(),end:s.endDate()},o)})}a.preventDefault()}}}),r._allDayUserEvents=new a.UserEvents(r.element,{threshold:i,useClickAsTap:!a.support.browser.edge,filter:".k-scheduler-header-all-day td",tap:function(e){if(!r._scrolling){var i=e.x.location!==t?e.x.location:e.x;var n=e.y.location!==t?e.y.location:e.y;var s=r._slotByPosition(i,n);if(s){var o=r._resourceBySlot(s);r.trigger("add",{eventInfo:d({},{isAllDay:!0,start:a.date.getDate(s.startDate()),end:a.date.getDate(s.startDate())},o)})}e.preventDefault()}}})),!1!==r.options.editable.update&&(r._editUserEvents=new a.UserEvents(r.element,{threshold:i,useClickAsTap:!a.support.browser.edge,filter:".k-event",tap:function(t){if(!r._scrolling){var i=e(t.target).closest(".k-event");e(t.touch.initialTouch).is(".k-i-x,.k-svg-i-x")?r.trigger("remove",{uid:i.attr(a.attr("uid"))}):i.hasClass("k-event-active")||r.trigger("edit",{uid:i.attr(a.attr("uid"))}),t.preventDefault()}}}))},_layout:function(e){var t=[];var r=[];var i=this.options;var n=this;var s=n._isGroupedByDate();for(var o=0;o<e.length;o++){var l={};l.text=n.dateHeaderTemplate({date:e[o],isMobile:n._isMobile()}),a.date.isToday(e[o])&&(l.className="k-today"),t.push(l)}var d=this.groupedResources;return i.allDaySlot&&r.push({text:i.messages.allDay,allDay:!0,cellContent:function(t){var a=t;return t=d.length&&"vertical"!==n._groupOrientation()?t%e.length:t,n.allDaySlotTemplate({date:e[t],resources:function(){return n._resourceBySlot({groupIndex:a})}})}}),this._forTimeRange(this.startTime(),this.endTime(),(function(e,t,a,i){var s={text:(t?n.majorTimeHeaderTemplate:n.minorTimeHeaderTemplate)({date:e}),className:i?"k-slot-cell":""};r.push(s)})),d.length&&("vertical"===this._groupOrientation()?s?(r=this._createDateLayout(t,r),t=this._createColumnsLayout(d,null,this.groupHeaderTemplate)):r=this._createRowsLayout(d,r,this.groupHeaderTemplate):t=s?this._createColumnsLayout(d,t,this.groupHeaderTemplate,t):this._createColumnsLayout(d,t,this.groupHeaderTemplate)),{columns:t,rows:r}},toggleFullDay:function(){var e=this.options;this.trigger("navigate",{view:this.name||e.name,date:e.date,isWorkDay:!e.showWorkHours})},_footerItems:function(){var e=this,t=[],a=this.options.footer.command;return e._isMobile()&&t.push(e._defaultTools.todayMobile),a&&"workDay"===a&&(e._isMobile()?t.push(e._defaultTools.fulldayMobile):t.push(e._defaultTools.fulldayDesktop)),t},_forTimeRange:function(e,t,a,r){e=w(e),t=w(t);var i,s,o=m(e),l=m(t),d=this.options.minorTickCount,h=this.options.majorTick*u,v=h/d||1,p=new Date(+e),f=p.getDate(),_=0,g="";for(s=c/v,o!=l&&(o>l&&(l+=c),s=(l-o)/v),s=Math.round(s);_<s;_++){var y=_%(h/v);g+=a(p,0===y,y<d-1,y===d-1),n(p,v,!1)}return l&&(i=m(p),f<p.getDate()&&(i+=c),i>l&&(p=new Date(+t))),r&&(g+=r(p)),g},_content:function(e){var t=this;var a="";a+="<tbody>",a+=t._renderRows(e,t.rowLevels,t.columnLevels),a+="</tbody>",this.content.find("table").append(a)},_virtualContent:function(e,t){var a=this;var r="";var i=a._dates;r+=a._renderRows(i,e,t),a.content.find("table tbody").append(r)},_renderRows:function(e,t,a){var r=this;var i="vertical"===r._groupOrientation();var n=r._isGroupedByDate();var s=0;var o=e.length;var l=r.options;var d=r.startTime();var h=this.endTime();var u=1;var c=1;var v="";if(this.groupedResources.length){var p=r._recalculateLevels(t,a);c=p.rowCount,u=p.groupsCount}var f=function(t,a,l){var d="";var h=0;var c,v;if(d="<tr"+(l?' class="k-middle-row"':"")+">",n)for(c=0,v=o;c<v;c++){for(h=0;h<u;h++){var p=c;i&&(p=s),d=r._addCellsToContent(d,e,t,p,h,m)}if(i)break}else for(;h<u;h++)for(c=0,v=o;c<v;c++)d=r._addCellsToContent(d,e,t,c,h,m);return d+="</tr>"};for(var m=0;m<c;m++)v+=l.allDaySlot&&i?this._allDayVerticalGroupRow(e,m,u,s):"",v+=this._forTimeRange(d,h,f),i&&s++;return v},_recalculateLevels:function(e,t){var a=this;var r=a._isGroupedByDate();var i=1;var n=1;return"vertical"===a._groupOrientation()?(n=a._rowCountForLevel(e.length-2,e),r&&(i=a._columnCountForLevel(t.length-1))):i=r?a._columnCountForLevel(t.length-1)/this._columnCountForLevel(0):a._columnCountForLevel(t.length-2),{rowCount:n,groupsCount:i}},_allDayVerticalGroupRow:function(e,t,a,r){var i=this;var n='<tr class="k-scheduler-header-all-day">';var s=i._isGroupedByDate();var o=s?0:t;var l=i.allDaySlotTemplate;var d=function(){return i._resourceBySlot({groupIndex:o})};if(s)for(;o<a;o++)n+="<td>"+l({date:e[r],resources:d})+"</td>";else for(var h=0;h<e.length;h++)n+="<td>"+l({date:e[h],resources:d})+"</td>";return n+"</tr>"},_addCellsToContent:function(e,t,r,i,n,s){var o=this;var l="";var d;var h=this.slotTemplate;var u="vertical"===this._groupOrientation();var c;return a.date.isToday(t[i])&&(l+="k-today"),(a.date.getMilliseconds(r)<a.date.getMilliseconds(this.options.workDayStart)||a.date.getMilliseconds(r)>=a.date.getMilliseconds(this.options.workDayEnd)||!this._isWorkDay(t[i]))&&(l+=" k-nonwork-hour"),e+="<td"+(""!==l?' class="'+l+'"':"")+">",d=a.date.getDate(t[i]),a.date.setTime(d,a.date.getMilliseconds(r)),e+=h({date:d,resources:(c=u&&!o._isGroupedByDate()?s:n,function(){return o._resourceBySlot({groupIndex:c})})}),e+="</td>"},_isWorkDay:function(e){var t=e.getDay();var a=this._workDays;for(var r=0;r<a.length;r++)if(a[r]===t)return!0;return!1},_render:function(t){var a=this;t=t||[],this._dates=t,this._startDate=t[0],this._endDate=t[t.length-1||0],this.createLayout(this._layout(t)),this._content(t),this._footer(),this.refreshLayout(),this._isVirtualized()&&this._tryRenderContent();var r=this.element.find(".k-scheduler-header-all-day td");r.length&&(this._allDayHeaderHeight=r.first()[0].clientHeight),a.element.on("click"+_,".k-nav-day",(function(t){var r=e(t.currentTarget).closest("th");var i=r.offset();var n=0;var s=l(r);a._isGroupedByDate()&&(a._isVerticallyGrouped()?(n=o(a.times),s=0):s=l(a.datesHeader));var d=a._slotByPosition(i.left+n,i.top+s);a.trigger("navigate",{view:"day",date:d.startDate()})}))},startTime:function(){var e=this.options;return e.showWorkHours?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.showWorkHours?e.workDayEnd:e.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(e){var t=m(this.endTime())||c;return e&&(t=0),new Date(this._endDate.getTime()+t)},nextDate:function(){return a.date.nextDay(this.endDate())},previousDate:function(){return a.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){var e=this;e._currentTimeUpdateTimer&&clearInterval(e._currentTimeUpdateTimer),e.datesHeader&&e.datesHeader.off(_),e.element&&e.element.off(_),s.fn.destroy.call(this),this._isMobile()&&e.options.editable&&(!1!==e.options.editable.create&&(e._addUserEvents.destroy(),e._allDayUserEvents.destroy()),!1!==e.options.editable.update&&e._editUserEvents.destroy())},inRange:function(e){var t=s.fn.inRange.call(this,e);if(e.isAllDay)return t;var r=m(this.startTime());var i=m(this.endTime())||a.date.MS_PER_DAY;var n=m(e.start);var o=m(e.end)||a.date.MS_PER_DAY;return t&&r<=n&&o<=i},selectionByElement:function(e){var t=e.offset();var a=Math.round(e.innerHeight())-5;return this._slotByPosition(t.left,t.top+a)},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*u},_timeSlotIndex:function(e){var t=this.options;return(m(e)-m(this.startTime()))/(t.majorTick/t.minorTickCount*u)},_slotIndex:function(e,t){return t?this._dateSlotIndex(e):this._timeSlotIndex(e)},_dateSlotIndex:function(e,t){var r;var i;var n=this._dates||[];for(r=0,i=n.length;r<i;r++)if(S(e,a.date.getDate(n[r]),new Date(a.date.getDate(n[r]).getTime()+c-(t?0:1))))return 1*r;return-1},_positionAllDayEvent:function(t,a){var r=a.innerWidth();var i=a.start.index;var n=a.end.index;var o=s.collidingEvents(a.events(),i,n);var l=this._headerColumnCount||0;var d=i!==n?3:2;var h=this._allDayHeaderHeight;var u=a.startSlot();t.css({left:u.offsetLeft+2,width:r-d}),a.addEvent({slotIndex:i,start:i,end:n,element:t}),o.push({slotIndex:i,start:i,end:n,element:t});var c=s.createRows(o);c.length&&c.length>l&&(this._headerColumnCount=c.length);var v=a.start.offsetTop;for(var p=0,f=c.length;p<f;p++){var m=c[p].events;for(var _=0,g=m.length;_<g;_++)e(m[_].element).css({top:v+p*h,height:h-2})}},_arrangeColumns:function(e,t,a,r){var i=r.start;e={element:e,slotIndex:i.index,start:t,end:t+a};var n,o,l=i.clientWidth,d=.1*l,h=r.events(),u=s.collidingEvents(h,e.start,e.end),c=this.table.find(".k-scheduler-content .k-scheduler-table")[0],v=this.table.find(".k-scheduler-content")[0];r.addEvent(e),u.push(e);var p=(l-d)/(n=s.createColumns(u)).length;for(var f=0,m=n.length;f<m;f++)for(var _=0,g=(o=n[f].events).length;_<g;_++){var y=p-2;o[_].element[0].style.width=(y>0?y:p)+"px",this._isRtl&&v.clientWidth<v.scrollWidth?o[_].element[0].style.left=d+i.offsetLeft+f*p-(c.clientWidth-v.clientWidth)+"px":o[_].element[0].style.left=(this._isRtl?d:0)+i.offsetLeft+f*p+2+"px"}},_positionEvent:function(e,t,r){var i=e._startTime||e.start;var n=e._endTime||e.end;var s=a.getComputedStyles(r.start.element,["border-top-width","border-bottom-width"]);var o=r.innerRect(i,n,!1);var l=o.bottom-o.top-parseFloat(s["border-top-width"])-parseFloat(s["border-bottom-width"]);l<0&&(l=0),t.css({top:o.top,height:l}),this._arrangeColumns(t,o.top,t[0].clientHeight,r)},_createEventElement:function(t,r,i,n){var s=r?this.eventTemplate:this.allDayEventTemplate;var o=this.options;var l=o.editable;var u=this._isMobile();var v=l&&!1!==l.destroy&&!u;var p=l&&!1!==l.resize;var f=h(this.startDate());var _=h(this.endDate());var g=m(this.startTime());var y=m(this.endTime());var D=t._time("start");var k=t._time("end");var T=r?o.eventTemplate:o.allDayEventTemplate;var w;g>=y&&(y=m(new Date(this.endTime().getTime()+c-1))),r||t.isAllDay||(_=new Date(_.getTime()+c));var b=t.start;var C=t.end;t.isAllDay&&(C=h(t.end)),!S(h(b),f,_)&&!S(C,f,_)||r&&t.start.getTime()!==t.end.getTime()&&(D<g||D>=y)&&(k>y||k<=g)?w=!0:h(b)<f||r&&0!==D&&t.start.getTime()!==t.end.getTime()&&(D<g||D>=y)?n=!0:(C>_&&!r||r&&0!==k&&t.start.getTime()!==t.end.getTime()&&(k>y||k<=g))&&(i=!0);var x=this.eventResources(t);t._startTime&&D!==a.date.getMilliseconds(t.start)&&(b=new Date(D),b=a.timezone.apply(b,"Etc/UTC")),t._endTime&&k!==a.date.getMilliseconds(t.end)&&(C=new Date(k),C=a.timezone.apply(C,"Etc/UTC"));var E=d({},{ns:a.ns,resizable:p,showDelete:v,middle:w,head:i,tail:n,singleDay:1==this._dates.length,resources:x,inverseColor:!1,messages:o.messages,ariaLabel:this._formatEventAriaLabel(t.title,b,C,t.isAllDay),template:T},t,{start:b,end:C});var M=e(s(E));return a.applyStylesFromKendoAttributes(M,["background-color","border-color"]),M},_isInTimeSlot:function(e){var t=this.startTime(),r=this.endTime(),i=e._startTime||e.start,s=e._endTime||e.end;if(m(r)===m(a.date.getDate(r))&&(r=a.date.getDate(r),n(r,c-1)),e._date("end")>e._date("start")&&(s=+e._date("end")+(c-1)),s=e._endTime?s-e._date("end"):m(new Date(s)),i=e._startTime?i-e._date("start"):m(new Date(i)),r=m(r),(t=m(t))===i&&i===s)return!0;var o=i!==r;return b(i,t,r,o)||b(s,t,r,o)||b(t,i,s)||b(r,i,s)||e.end.getDate()>e.start.getDate()&&s>t},_isInDateSlot:function(e){var t=this.groups[0];var r=t.firstSlot().start;var i=t.lastSlot().end-1;var n=a.date.toUtcTime(e.start);var s=a.date.toUtcTime(e.end);return(S(n,r,i)||S(s,r,i)||S(r,n,s)||S(i,n,s))&&(!S(s,r,r)||S(s,n,n)||e.isAllDay)},_updateAllDayHeaderHeight:function(e){if(this._height!==e){this._height=e;var t=this.element.find(".k-scheduler-header-all-day td");if(t.length){t.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(e);for(var a=0;a<this.groups.length;a++)this.groups[a].refresh()}}},_renderEvents:function(e,t){var r=this.datesHeader.find(".k-scheduler-header-wrap > div");var i=this._isGroupedByDate();var n;var s;var o;for(s=0,o=e.length;s<o;s++){var l,d,h,u,v,p,f,m;if(n=e[s],this._isInDateSlot(n))if(d=(l=this.options.enforceAllDaySlot?n.isAllDay||n.duration()>=c:n.isAllDay)&&!this._isVerticallyGrouped()?r:this.content,l){if(this.options.allDaySlot){if(!(m=this.groups[t]))continue;if(m._continuousEvents||(m._continuousEvents=[]),(u=m.slotRanges(n)).length){var _=(v=u[0]).start.index;var g=v.end.index;if(i&&_!==g){p=v.start.start,f=v.end.end;var y=p;var D=p;for(var k=v.start.index;k<=v.end.index;k++){h=this._createEventElement(n,!l,k!==g,k!==_);var T=m.daySlotRanges(y,D,!0)[0];y=D+=a.date.MS_PER_DAY,this._positionAllDayEvent(h,T),C(m,T,h,!0),h.appendTo(d),this._inverseEventColor(h)}}else h=this._createEventElement(n,!l),this._positionAllDayEvent(h,u[0]),C(m,u[0],h,!0),h.appendTo(d),this._inverseEventColor(h)}}}else if(this._isInTimeSlot(n)){if(!(m=this.groups[t]))continue;m._continuousEvents||(m._continuousEvents=[]);var w=(u=m.slotRanges(n)).length;for(var S=0;S<w;S++){v=u[S],p=n.start,f=n.end,w>1&&(0===S?f=v.end.endDate():S==w-1?p=v.start.startDate():(p=v.start.startDate(),f=v.end.endDate()));var b=n.clone({start:p,end:f,_startTime:n._startTime,_endTime:n.endTime});if(this._isInTimeSlot(b)){var x=v.head;(h=this._createEventElement(n,!l,x,v.tail)).appendTo(d),this._inverseEventColor(h),this._positionEvent(b,h,v),C(m,v,h,!1)}}}}},_eventsPerDate:function(t,a){let r=this;return e.map(t,(function(t){return e.grep(t,(function(e){return r.options.enforceAllDaySlot?e.isMultiDay()&&S(a,h(e.start),h(e.end)):e.isAllDay&&S(a,h(e.start),h(e.end))})).length}))},render:function(t){var r=this;this._headerColumnCount=0,this._cachedEvents=t,this._groups(),this.element.find(".k-event").remove(),t=new a.data.Query(t).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var i=[];this._eventsByResource(t,this.groupedResources,i);var n=e.map(this._dates,(function(e){return Math.max.apply(null,r._eventsPerDate(i,e))}));var s=Math.max.apply(null,n);this._updateAllDayHeaderHeight((s+1)*this._allDayHeaderHeight);for(var o=0;o<i.length;o++)this._renderEvents(i[o],o);this.refreshLayout(),this._currentTime(!1),this._ongoingEvents(t),this.trigger("activate")},_eventsByResource:function(e,r,i,n){var o=r[0];if(o){var l=o.dataSource.view();l=l.filter((function(e){var r=a.getter(o.dataParentValueField)(e);return null===r||r===t||r===n}));for(var d=0;d<l.length;d++){var h=this._resourceValue(o,l[d]);var u=new a.data.Query(e).filter({field:o.field,operator:s.groupEqFilter(h)}).toArray();r.length>1?this._eventsByResource(u,r.slice(1),i,h):i.push(u)}}else i.push(e)},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e,t){var a=(t=t||this.rowLevels)[e];return a?a.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-selected").removeAttr("id").removeClass("k-selected")},_updateDirection:function(e,t,a,r,i){var n=e.isAllDay;var s=t[0].start;var o=t[t.length-1].end;a&&(i?n||s.index!==o.index||s.collectionIndex!==o.collectionIndex||(e.backward=r):(n&&s.index===o.index||!n&&s.collectionIndex===o.collectionIndex)&&(e.backward=r))},_changeViewPeriod:function(e,t,a){if(!a){var r=t?this.previousDate():this.nextDate();var i=e.start;var s=e.end;var o=this._isGroupedByDate()&&this._isVerticallyGrouped();var l=this.groups[e.groupIndex];var d=t?l._timeSlotCollections:l._getCollections(l.daySlotCollectionCount());var h=d[d.length-1]._slots;var u=t||l.daySlotCollectionCount()?h.length-1:0;var v;var p,f;if(p=new Date(r),f=new Date(r),this._isInRange(p,f))return!1;if(e.start=p,e.end=f,o){var _=new Date(h[u].startDate());var g=new Date(h[u].endDate());v=m(g)?m(g):c,n(e.start,m(_)),n(e.end,v),l.daySlotCollectionCount()&&(e.isAllDay=!e.isAllDay)}else v=e.isAllDay||!m(s)?c:m(s),n(e.start,m(i)),n(e.end,v);return this._isVerticallyGrouped()||(e.groupIndex=t?this.groups.length-1:0),e.events=[],!0}}});d(!0,r,{MultiDayView:x,DayView:x.extend({options:{name:"DayView",title:"Day",selectedMobileDateFormat:"{0:MMM d}"},name:"day"}),WeekView:x.extend({options:{name:"WeekView",title:"Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"week",calculateDateRange:function(){var e,t=this.options.date,r=a.date.dayOfWeek(t,this.calendarInfo().firstDay,-1),i=[];for(e=0,7;e<7;e++)i.push(r),r=a.date.nextDay(r);this._render(i)}}),WorkWeekView:x.extend({options:{name:"WorkWeekView",title:"Work Week",selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}"},name:"workWeek",nextDate:function(){var e=a.date.dayOfWeek(a.date.nextDay(this.startDate()),this.calendarInfo().firstDay,1);return a.date.addDays(e,this._workDays[0])},previousDate:function(){var e=a.date.dayOfWeek(this.startDate(),this.calendarInfo().firstDay,-1);var t=this._workDays;return a.date.addDays(e,t[t.length-1]-7)},calculateDateRange:function(){var e=this.options,t=e.date,r=a.date.dayOfWeek,i=r(t,this.calendarInfo().firstDay,-1),n=r(i,e.workWeekStart,1),s=r(n,e.workWeekEnd,1),o=[],l=e.workDays&&e.workDays.length?e.workDays.map((function(e){return r(i,e,1).getTime()})):null;for(l&&(s=r(n=i,this.calendarInfo().firstDay+6,1));n<=s;)l&&l.indexOf(n.getTime())>-1?o.push(n):l||o.push(n),n=a.date.nextDay(n);this._render(o)}})})}(window.kendo.jQuery);var t=kendo;e.__meta__={id:"scheduler.dayview",name:"Scheduler Day View",category:"web",description:"The Scheduler Day View",depends:["scheduler.view","icons"],hidden:!0},e.default=t,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=kendo.scheduler.dayview.min.js.map
