/**
 * Kendo UI v2025.3.1002 (http://www.telerik.com/kendo-ui)
 * Copyright 2025 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("kendo.core.js"),require("kendo.drawing.js"),require("kendo.dialog.js"),require("kendo.html.button.js")):"function"==typeof define&&define.amd?define(["exports","kendo.core.min","kendo.drawing.min","kendo.dialog.min","kendo.html.button.min"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).kendo=t.kendo||{},t.kendo._globals=t.kendo._globals||{},t.kendo._globals.Signature={}))}(this,(function(t){window.kendo=window.kendo||{},window.kendo.inputs=window.kendo.inputs||{},function(t,e){var i=e.util,o=i.elementOffset,n=i.limitValue;var a=kendo.geometry.Point,s=kendo.geometry.Rect,r=kendo.geometry.transform;var l=function(){};var d=function(){function t(t,e){void 0===e&&(e={}),this.element=t,this.lastMoveTime=0,this.options=Object.assign({scale:1,precision:1,samplingRate:200,smooth:!1!==e.smooth,color:e.color||"#000",backgroundColor:e.backgroundColor||"#fff",strokeWidth:1,onChange:l,onDraw:l,onDrawEnd:l},e),this.pathOptions={stroke:{color:this.options.color,width:this.options.strokeWidth,lineCap:"round",lineJoin:"round"}},this.initSurface(),this.attachEvents()}return t.prototype.destroy=function(){this.detachEvents()},t.prototype.clear=function(){this.rootGroup.clear(),this.path=null},Object.defineProperty(t.prototype,"isDrawing",{get:function(){return Boolean(this.points)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pathData",{get:function(){var t;return null===(t=this.path)||void 0===t?void 0:t.toString(3)},set:function(t){this.clear(),this.path=e.MultiPath.parse(t,this.pathOptions),this.rootGroup.append(this.path)},enumerable:!1,configurable:!0}),t.prototype.loadImage=function(t,i){if(void 0===i&&(i=[]),t){var o=this.size,n=o[0],a=o[1];var s=n/this.options.scale;var l=a/this.options.scale;var d=i[0]||6*s;var h=i[1]||6*l;var p=s/d;var u=l/h;var c=Math.min(p,u);var g=new e.Image(t,new kendo.geometry.Rect([0,0],[d,h]));g.transform(r().scale(c,c)),this.clear(),this.rootGroup.append(g)}else this.clear()},t.prototype.exportImage=function(t){var i;var o=this.size,n=o[0],a=o[1];var l=n/this.options.scale;var d=a/this.options.scale;var h=(null==t?void 0:t.width)||6*l;var p=(null==t?void 0:t.height)||6*d;var u=h/l;var c=p/d;var g=Math.min(u,c);var m=new s([0,0],[h,p]);var f=new e.Group({clip:e.Path.fromRect(m)});var v=new e.Group({transform:r().scale(g,g)});var _=e.Path.fromRect(m,{fill:{color:this.options.backgroundColor}});return f.append(_),f.append(v),(i=v.children).push.apply(i,this.rootGroup.children),e.exportImage(f,Object.assign({width:h,height:p},t))},t.prototype.resize=function(){this.surface.resize(!0)},t.prototype.setOptions=function(t){Object.assign(this.options,t),this.pathOptions.stroke.color=this.options.color,this.pathOptions.stroke.width=this.options.strokeWidth,this.path&&(this.path.options.set("stroke.color",this.options.color),this.path.options.set("stroke.width",this.options.strokeWidth)),this.background.options.set("fill.color",this.options.backgroundColor)},t.prototype.initSurface=function(){this.surface=e.Surface.create(this.element,{type:"canvas"}),this.element.style.touchAction="none";var t=this.options.scale;this.rootGroup=new e.Group({transform:r().scale(t,t)});var i=this.element.offsetWidth||750;var o=this.element.offsetHeight||250;this.size=[i,o],this.background=e.Path.fromRect(new s([0,0],this.size),{fill:{color:this.options.backgroundColor}}),this.surface.draw(this.background),this.surface.draw(this.rootGroup)},t.prototype.attachEvents=function(){this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.element.addEventListener("pointerdown",this.onPointerDown),this.element.addEventListener("pointermove",this.onPointerMove),this.element.addEventListener("pointerup",this.onPointerUp)},t.prototype.detachEvents=function(){this.element.removeEventListener("pointerdown",this.onPointerDown),this.element.removeEventListener("pointermove",this.onPointerMove),this.element.removeEventListener("pointerup",this.onPointerUp)},t.prototype.touchPoint=function(t){var e=o(this.element);var i=t.pageX;var n=t.pageY;var s=1/this.options.scale;return new a(i-e.left,n-e.top).scale(s,s)},t.prototype.onPointerDown=function(t){if(!this.options.readonly&&t.isPrimary&&function(t){return"number"!=typeof t.button||0===t.button}(t)){this.path||(this.path=new e.MultiPath(this.pathOptions),this.rootGroup.append(this.path)),this.options.onDraw(),this.element.setPointerCapture(t.pointerId);var i=this.touchPoint(t);this.points=[i],this.path.moveTo(i)}},t.prototype.onPointerMove=function(t){if(this.points&&t.isPrimary){var e=(new Date).getTime();if(!(e-this.lastMoveTime<1e3/n(this.options.samplingRate,1,1e4))){this.lastMoveTime=e;var i=this.touchPoint(t);var o=this.points[this.points.length-1];var a=1/n(this.options.precision,.01,100);i.distanceTo(o)<a||(this.points.push(i),this.path.lineTo(i))}}},t.prototype.onPointerUp=function(t){if(t.isPrimary&&this.path&&this.points&&!this.options.readonly){if(this.options.smooth){var i=e.Path.curveFromPoints(this.points);this.path.paths.splice(this.path.paths.length-1,1,i)}this.points=null,this.options.onDrawEnd(),this.options.onChange(this.pathData)}},t}();t.SignaturePad=d}(window.kendo.inputs.common=window.kendo.inputs.common||{},window.kendo.drawing);!function(t){var e=window.kendo,i=e.ui.Widget,o=e.ui.Dialog,n=e.html,a=e._outerWidth,s=e._outerHeight,r=e.inputs.common.SignaturePad,l=".kendoSignature",d="change",h="open",p="close",u="click";var c=i.extend({init:function(t,e){var o=this;e=e||{},i.fn.init.call(o,t,e),o._createElements(o.element,o.options.maximizable?"maxi":"",!1,1),o._createInput(),o.wrapper=o.element,o.options.backgroundColor||(o.options.backgroundColor=getComputedStyle(o.element[0]).backgroundColor||"#ffffff"),o._createPad(),o._createDialogPad(),o._attachHandlers(),o._assignLabel(),o.options.value&&(o._pad.loadImage(o.options.value),o._dialogPad.loadImage(o.options.value)),o.options.readonly&&o.readonly(),o.options.enable||o.enable(!1)},options:{name:"Signature",color:"#000000",enable:!0,fillMode:"solid",hideLine:!1,label:"",maximizable:!0,popupScale:3,readonly:!1,rounded:"medium",size:"medium",smooth:!1,strokeWidth:1,exportScale:2,value:""},events:[d,h,p],setOptions:function(i){var o=this.options;var n;var a=e.getValidCssClass("k-button-","size",o.size);var s=this.element.add(this._dialogPadEl).find("."+a);var r=t(this._pad.element).add(this._dialogPad.element);s.removeClass(a),this._clearCssClasses(o),this.element.removeClass(e.getValidCssClass("k-signature-","size",o.size)),e.deepExtend(o,i),this.options=o,this.element.width(o.width),this.element.height(o.height),this._dialogPadEl.width(o.width*o.popupScale),this._dialogPadEl.height(o.height*o.popupScale),n=this._pad.path,this._destroyPad(),this._destroyDialog(),this._createPad(),this._createDialogPad(),function(t,i){if(!i||!i.paths||!i.paths.length)return;t.path=new e.drawing.MultiPath(t.pathOptions),t.rootGroup.append(t.path);for(var o=0;o<i.paths.length;o++)t.path.paths.push(i.paths[o]);t.options.onChange()}(this._pad,n),this.enable(o.enable),this.readonly(o.readonly),this._hideLine(this.element),this._hideLine(this._dialogPadEl),this._applyCssClasses(this.element),this.element.find(".k-signature-maximize").toggle(o.maximizable),this.element.removeClass(e.getValidCssClass("k-input-","size",this.options.size)),this.element.addClass(e.getValidCssClass("k-signature-","size",this.options.size)),s.addClass(e.getValidCssClass("k-button-","size",o.size)),r.removeAttr("aria-label"),this._assignLabel()},close:function(){this._dialog&&this._dialog.close()},open:function(){this.options.maximizable&&this._dialog&&this._dialog.open()},destroy:function(){var t=this;t._destroyPad(),t._destroyDialog(),t.element.off(l),t.element.empty(),i.fn.destroy.call(t)},enable:function(t){(t=!1!==t)||this._dialog.close(),this.element.find(".k-button").toggle(t),this.element.toggleClass("k-disabled",!t),this._pad.options.readonly=!t,this._dialogPad.options.readonly=!t},readonly:function(e){var i=this;e=!1!==e;i._pad.options.readonly=e,i._dialogPad.options.readonly=e,i.element.find(".k-signature-clear").length||e||(t(n.renderButton('<button class="k-signature-action k-signature-clear"></button>',{icon:"x",size:this.options.size,fillMode:"flat"})).insertAfter(i.element.find(".k-signature-actions-bottom")),t(n.renderButton('<button class="k-signature-action k-signature-clear"></button>',{icon:"x",size:this.options.size,fillMode:"flat"})).insertAfter(i._dialogEl.find(".k-signature-actions-bottom"))),i.element.find(".k-signature-clear").toggle(!e),i._dialogEl.find(".k-signature-clear").toggle(!e)},value:function(t){return undefined!==t&&(this._value=t,this._input.val(t),this._pad.loadImage(t)),this._value},reset:function(){this._dialogPad.clear(),this._pad.clear(),this._value=""},_assignLabel:function(){var e=t(this._pad.element).add(this._dialogPad.element);this.options.label?e.attr("aria-label",this.options.label):this._ariaLabel(e),this.element.removeAttr("aria-labelledby")},_attachHandlers:function(){var t=this;t.element.on(u+l,".k-signature-clear",(function(){t.reset(),t.trigger(d)})).on(u+l,".k-signature-maximize",(function(){t._dialog.open(),t._dialog.wrapper.find(".k-signature-minimize").trigger("focus")}))},_createInput:function(){var e=this;var i=e.element.attr("name");var o=e.element.attr("autocomplete");var n=e.element.attr("required");e._input=t("<input class='k-hidden' aria-hidden='true'/>").appendTo(e.element),i&&(e._input.attr("name",i),e.element.removeAttr("name")),o&&(e._input.attr("autocomplete",o),e.element.removeAttr("autocomplete")),n&&(e._input.attr("required",n),e.element.removeAttr("required"))},_destroyPad:function(){this._pad&&(e.destroy(this.element.find(".k-signature-canvas")),this._pad=null,this.element.find(".k-signature-canvas").empty())},_destroyDialog:function(){this._dialogPad&&(this._dialogPad.destroy(),this._dialogPad=null,this._dialogEl.off(l),this._dialog.destroy(),this._dialog=null,this._dialogEl.remove(),this._dialogEl=null)},_hideLine:function(e){var i=e.find(".k-signature-line");this.options.hideLine||i.length||t("<div class='k-signature-line'>").appendTo(e),this.options.hideLine&&i.remove()},_createElements:function(i,o,a,s){t("<div class='k-signature-canvas' role='img' tabindex='0'>").appendTo(i),this._hideLine(i),t("<div class='k-signature-actions k-signature-actions-top'></div>").appendTo(i),"mini"==o&&t(n.renderButton('<button class="k-signature-action k-signature-minimize k-rotate-180" aria-label="Minimize signature"></button>',{icon:"hyperlink-open",size:this.options.size,fillMode:"flat"})).appendTo(i.find(".k-signature-actions-top")),"maxi"==o&&t(n.renderButton('<button class="k-signature-action k-signature-maximize" aria-label="Maximize signature"></button>',{icon:"hyperlink-open",size:this.options.size,fillMode:"flat"})).appendTo(i.find(".k-signature-actions-top")),t("<div class='k-signature-actions k-signature-actions-bottom'></div>").appendTo(i),this.options.readonly||t(n.renderButton('<button class="k-signature-action k-signature-clear"  aria-label="Clear signature"></button>',{icon:"x",size:this.options.size,fillMode:"flat"})).appendTo(i.find(".k-signature-actions-bottom")),i.addClass("k-input k-signature"),i.width(this.options.width*s),i.height(this.options.height*s),a&&i.addClass("k-signature-maximized"),this._applyCssClasses(i),i.removeClass(e.getValidCssClass("k-input-","size",this.options.size)),i.addClass(e.getValidCssClass("k-signature-","size",this.options.size))},_createPad:function(){var e=this;var i=t.extend(!0,{},e.options,{onChange:function(){var t=a(e.element,!1);var i=s(e.element,!1);e._pad.exportImage({width:t*e.options.exportScale,height:i*e.options.exportScale}).then((function(t){e._value=t,e._input.val(t),e.trigger(d)})),e._pad.exportImage({width:t*e.options.exportScale*e.options.popupScale,height:i*e.options.exportScale*e.options.popupScale}).then((function(t){e._dialogPad.loadImage(t)}))},onDraw:function(){e.element.find(".k-button").hide()},onDrawEnd:function(){e.element.find(".k-button").show()}});e._pad=new r(e.element.find(".k-signature-canvas")[0],i)},_createDialogPad:function(){var i=this;var n;i._dialogEl=t("<div>").appendTo(i.element),i._dialog=new o(i._dialogEl,{title:!1,closable:!1,open:function(){i.trigger(h)},close:function(){i.trigger(p)}}),i._dialogEl.removeAttr("tabindex").on("keydown",(function(t){t.keyCode===e.keys.ESC&&i._dialog.close()})),i._dialogPadEl=t("<div>").appendTo(i._dialog.element),i._createElements(i._dialogPadEl,"mini",!0,this.options.popupScale),n=i._dialogPadEl.find(".k-signature-canvas")[0],i._dialogPad=new r(n,t.extend(!0,{},i.options,{scale:i.options.popupScale,onChange:function(){var t=a(i.element,!1);var e=s(i.element,!1);i._dialogPad.exportImage({width:t*i.options.exportScale,height:e*i.options.exportScale}).then((function(t){i._pad.loadImage(t),i._value=t,i._input.val(t),i.trigger(d)}))},onDraw:function(){i._dialogEl.find(".k-button").hide()},onDrawEnd:function(){i._dialogEl.find(".k-button").show()}})),i._dialog.close(),i._dialogEl.on(u+l,".k-signature-clear",(function(){i.reset()})).on(u+l,".k-signature-minimize",(function(){i._dialog.close()}))}});e.cssProperties.registerPrefix("Signature","k-input-"),e.ui.plugin(c)}(window.kendo.jQuery);var e=kendo;t.__meta__={id:"signature",name:"Signature",category:"web",description:"The Signature component ...",depends:["core","dialog","html.button","drawing"]},t.default=e,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=kendo.signature.min.js.map
