{"version":3,"sources":["raw-js/kendo.data.signalr.js"],"names":["global","factory","exports","module","require","define","amd","globalThis","self","kendo","_globals","DataSignalr","this","$","window","isFunction","isJQueryPromise","promise","done","fail","isNativePromise","then","catch","transport","data","RemoteTransport","extend","init","options","signalr","Error","hub","on","invoke","fn","call","push","callbacks","client","create","pushCreate","update","pushUpdate","destroy","pushDestroy","_crud","type","server","format","args","parameterMap","isEmptyObject","apply","success","error","read","transports","jQuery","kendo$1","__meta__","id","name","category","depends","hidden","default","Object","defineProperty","value"],"mappings":"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","file":"kendo.data.signalr.min.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('kendo.data.js')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'kendo.data'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.kendo = global.kendo || {}, global.kendo._globals = global.kendo._globals || {}, global.kendo._globals.DataSignalr = {})));\n})(this, (function (exports) {\n    const __meta__ = {\n        id: \"data.signalr\",\n        name: \"SignalR\",\n        category: \"framework\",\n        depends: [ \"data\" ],\n        hidden: true\n    };\n\n    (function($) {\n        var kendo = window.kendo;\n        var isFunction = kendo.isFunction;\n\n        function isJQueryPromise(promise) {\n            return promise && isFunction(promise.done) && isFunction(promise.fail);\n        }\n\n        function isNativePromise(promise) {\n            return promise && isFunction(promise.then) && isFunction(promise.catch);\n        }\n\n        var transport = kendo.data.RemoteTransport.extend({\n            init: function(options) {\n                var signalr = options && options.signalr ? options.signalr : {};\n\n                var promise = signalr.promise;\n\n                if (!promise) {\n                    throw new Error('The \"promise\" option must be set.');\n                }\n\n                if (!isJQueryPromise(promise) && !isNativePromise(promise)) {\n                    throw new Error('The \"promise\" option must be a Promise.');\n                }\n\n                this.promise = promise;\n\n                var hub = signalr.hub;\n\n                if (!hub) {\n                    throw new Error('The \"hub\" option must be set.');\n                }\n\n                if (typeof hub.on != \"function\" || typeof hub.invoke != \"function\") {\n                    throw new Error('The \"hub\" option is not a valid SignalR hub proxy.');\n                }\n\n                this.hub = hub;\n\n                kendo.data.RemoteTransport.fn.init.call(this, options);\n            },\n\n            push: function(callbacks) {\n                var client = this.options.signalr.client || {};\n\n                if (client.create) {\n                    this.hub.on(client.create, callbacks.pushCreate);\n                }\n\n                if (client.update) {\n                    this.hub.on(client.update, callbacks.pushUpdate);\n                }\n\n                if (client.destroy) {\n                    this.hub.on(client.destroy, callbacks.pushDestroy);\n                }\n            },\n\n            _crud: function(options, type) {\n                var hub = this.hub;\n                var promise = this.promise;\n                var server = this.options.signalr.server;\n\n                if (!server || !server[type]) {\n                    throw new Error(kendo.format('The \"server.{0}\" option must be set.', type));\n                }\n\n                var args = [server[type]];\n\n                var data = this.parameterMap(options.data, type);\n\n                if (!$.isEmptyObject(data)) {\n                    args.push(data);\n                }\n\n                if (isJQueryPromise(promise)) {\n                    promise.done(function() {\n                        hub.invoke.apply(hub, args)\n                                  .done(options.success)\n                                  .fail(options.error);\n                    });\n                } else if (isNativePromise(promise)) {\n                    promise.then(function() {\n                        hub.invoke.apply(hub, args)\n                                  .then(options.success)\n                                  .catch(options.error);\n                    });\n                }\n            },\n\n            read: function(options) {\n                this._crud(options, \"read\");\n            },\n\n            create: function(options) {\n                this._crud(options, \"create\");\n            },\n\n            update: function(options) {\n                this._crud(options, \"update\");\n            },\n\n            destroy: function(options) {\n                this._crud(options, \"destroy\");\n            }\n        });\n\n        $.extend(true, kendo.data, {\n            transports: {\n                signalr: transport\n            }\n        });\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    exports.__meta__ = __meta__;\n    exports.default = kendo$1;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]}