/**
 * Kendo UI v2025.3.1002 (http://www.telerik.com/kendo-ui)
 * Copyright 2025 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("kendo.drawing.cmn.chunk.js")):"function"==typeof define&&define.amd?define(["exports","kendo.drawing.cmn.chunk.min"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).kendo=t.kendo||{},t.kendo._globals=t.kendo._globals||{},t.kendo._globals.ChartsCmnChunk={}),t.kendo._globals.DrawingCmnChunk)}(this,(function(t,e){const s="arc";const i="ArrowUp";const o="ArrowDown";const n="ArrowLeft";const r="ArrowRight";const a="aria-activedescendant";const l="axisLabelClick";const h="#000";const c="bottom";const d="center";const u="circle";const p="cross";const g="date";const m="12px sans-serif";const f=10;const x=600;const y="end";const v="Enter";const b="Escape";const w=/\{\d+:?/;const _="height";const k="inside";const A="inherit";const S="left";const C=Number.MAX_VALUE;const T=-Number.MAX_VALUE;const P="none";const M="noteClick";const E="noteHover";const L="noteLeave";const I="object";const R="outside";const B="right";const O="roundedRect";const V="start";const D="string";const z="top";const F="triangle";const H="square";const N="rect";const j="value";const U="#fff";const G="width";const W="x";const X="y";const Y="pointer";const q="horizontal";const Z="vertical";var $=Object.freeze({__proto__:null,ARC:s,ARIA_ACTIVE_DESCENDANT:a,ARROW_DOWN:o,ARROW_LEFT:n,ARROW_RIGHT:r,ARROW_UP:i,AXIS_LABEL_CLICK:l,BLACK:h,BOTTOM:c,CENTER:d,CIRCLE:u,COORD_PRECISION:3,CROSS:p,DATE:g,DEFAULT_FONT:m,DEFAULT_HEIGHT:400,DEFAULT_PRECISION:f,DEFAULT_SERIES_OPACITY:1,DEFAULT_WIDTH:x,END:y,ENTER:v,ESCAPE:b,FORMAT_REGEX:w,HEIGHT:_,HIGHLIGHT_ZINDEX:100,HORIZONTAL:q,INHERIT:A,INSIDE:k,LEFT:S,MAX_VALUE:C,MIN_VALUE:T,NONE:P,NOTE_CLICK:M,NOTE_HOVER:E,NOTE_LEAVE:L,OBJECT:I,OUTSIDE:R,POINTER:Y,RECT:N,RIGHT:B,ROUNDED_RECT:O,SQUARE:H,START:V,STRING:D,TAB:"Tab",TOP:z,TRIANGLE:F,VALUE:j,VERTICAL:Z,WHITE:U,WIDTH:G,X:W,Y:X});function Q(t){return Array.isArray(t)}function K(t,e){const s=Q(e)?e:[e];for(let e=0;e<s.length;e++){const i=s[e];-1===t.className.indexOf(i)&&(t.className+=" "+i)}}const J=/\s+/g;function tt(t,e){t&&t.className&&(t.className=t.className.replace(e,"").replace(J," "))}function et(t){let s=.5;t.options.stroke&&e.d(t.options.stroke.width)&&t.options.stroke.width%2==0&&(s=0);for(let e=0;e<t.segments.length;e++)t.segments[e].anchor().round(0).translate(s,s);return t}function st(t,e){return-t.x*e.y+t.y*e.x<0}function it(t){return"number"==typeof t&&!isNaN(t)}function ot(t){return typeof t===D}function nt(t){return it(t)||ot(t)&&isFinite(t)}function rt(t,e){return(t+1)%e}function at(t,e){let s=t-1;return s<0?e-1:s}function lt(t,e){return 1===e||t%e==0?0:t<0?e+t%e:t>=e?t%e:t}function ht(t){return"function"==typeof t}const ct="object";function dt(t,e){for(let s in e){if("__proto__"===s||"constructor"===s)continue;let i=e[s];let o=typeof i;let n;if(n=o===ct&&null!==i?i.constructor:null,n&&n!==Array)if(i instanceof Date)t[s]=new Date(i.getTime());else if(ht(i.clone))t[s]=i.clone();else{let e=t[s];t[s]=typeof e===ct&&e||{},dt(t[s],i)}else"undefined"!==o&&(t[s]=i)}return t}function ut(t){const e=arguments.length;for(let s=1;s<e;s++)dt(t,arguments[s]);return t}function pt(t){return"object"==typeof t}function gt(t){return it(t)?t+"px":t}const mt=/width|height|top|left|bottom|right/i;function ft(t){return mt.test(t)}function xt(t,e){const s=ot(e)?[e]:e;if(Q(s)){const e={};const i=window.getComputedStyle(t);for(let t=0;t<s.length;t++){let o=s[t];e[o]=ft(o)?parseFloat(i[o]):i[o]}return e}if(pt(e))for(let s in e)t.style[s]=gt(e[s])}function yt(t,e=0){const s={top:0,right:0,bottom:0,left:0};return"number"==typeof t?s[z]=s[B]=s[c]=s[S]=t:(s[z]=t[z]||e,s[B]=t[B]||e,s[c]=t[c]||e,s[S]=t[S]||e),s}let vt={compile:function(t){return t}};class bt{static register(t){vt=t}static compile(t,e){return vt.compile(t,e)}}function wt(t={}){let e;return t.template?t.template=e=bt.compile(t.template):ht(t.content)&&(e=t.content),e}function _t(t={}){let e;return t.ariaTemplate?t.ariaTemplate=e=bt.compile(t.ariaTemplate):ht(t.ariaContent)&&(e=t.ariaContent),e}const kt=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g;const At={};function St(t){if(At[t])return At[t];const e=[];return t.replace(kt,(function(t,s,i,o){e.push(void 0!==s?s:i||o)})),At[t]=function(t){let s=t;for(let t=0;t<e.length&&s;t++)s=s[e[t]];return s},At[t]}At[void 0]=function(t){return t};const Ct=(t,e)=>t.filter(e);function Tt(t,e){if(t.className){const s=e.split(" ");for(let e=0;e<s.length;e++)if(t.className.indexOf&&-1!==t.className.indexOf(s[e]))return!0}}class Pt{constructor(){this._map=new Map}get(t){return this._map.get(t)}set(t,e){this._map.set(t,e)}}function Mt(t,e){if(e)return e.includes(t)}function Et(t,s,i){return e.r(t+(s-t)*i,3)}const Lt="trigger";class It{constructor(t,e){this.observer=t,this.handlerMap=ut({},this.handlerMap,e)}trigger(t,e){const{observer:s,handlerMap:i}=this;let o;return i[t]?o=this.callObserver(i[t],e):s[Lt]&&(o=this.callObserver(Lt,t,e)),o}callObserver(t,...e){return this.observer[t].apply(this.observer,e)}requiresHandlers(t){if(this.observer.requiresHandlers)return this.observer.requiresHandlers(t);for(let e=0;e<t.length;e++)if(this.handlerMap[t[e]])return!0}}function Rt(t){return"[object Object]"===Object.prototype.toString.call(t)}function Bt(t,s){const i=t.length;const o=[];for(let n=0;n<i;n++){let i=s(t[n]);e.d(i)&&o.push(i)}return o}const Ot=e.s.browser||{};function Vt(t){let e=0;return t.wheelDelta?(e=-t.wheelDelta/120,Ot.webkit&&(e/=2*Math.max(window.devicePixelRatio,.625))):t.detail&&(e=t.detail/3),e=e>0?Math.ceil(e):Math.floor(e),e}const{append:Dt,bindEvents:zt,defined:Ft,deg:Ht,elementOffset:Nt,elementSize:jt,eventCoordinates:Ut,eventElement:Gt,hashKey:Wt,last:Xt,limitValue:Yt,objectKey:qt,rad:Zt,round:$t,unbindEvents:Qt,valueOrDefault:Kt}=e.u;class Jt{static fetchFonts(t,e,s={depth:0}){!t||s.depth>5||!document.fonts||Object.keys(t).forEach((function(i){const o=t[i];"dataSource"!==i&&"$"!==i[0]&&o&&("font"===i?e.push(o):"object"==typeof o&&(s.depth++,Jt.fetchFonts(o,e,s),s.depth--))}))}static loadFonts(t,s){let i=[];if(t.length>0&&document.fonts){try{i=t.map((function(t){return document.fonts.load(t)}))}catch(t){e.l(t)}Promise.all(i).then(s,s)}else s()}static preloadFonts(t,e){const s=[];Jt.fetchFonts(t,s),Jt.loadFonts(s,e)}}function te(t,e){const s=t.prototype;s.options?s.options=ut({},s.options,e):s.options=e}const ee="k-i-";const se="k-svg-i-";class ie{constructor(t,e){this.element=t,this.options=ut({},this.options,e),this.wrapper()}wrapper(){this.addClasses()}addClasses(){}html(){return this.element.outerHTML}}te(ie,{name:"",size:"none",themeColor:"none",flip:"default",iconClass:"",stylingOptions:["size","themeColor","fill"]});class oe extends ie{constructor(t,e){super(t,e)}wrapper(){let t=this.element.className.split(" ").find((t=>t.startsWith(ee)));let e=this.options.icon?`${this.options.icon.startsWith(ee)?"":ee}${this.options.icon}`:"";this._className=e,K(this.element,"k-icon"),K(this.element,"k-font-icon"),tt(this.element,t),K(this.element,e),K(this.element,this.options.iconClass||""),super.wrapper()}}te(oe,{name:"HTMLFontIcon",icon:null});class ne extends ie{constructor(t,e){t.innerHTML="",super(t,e)}wrapper(){let t=this.options.icon;let e=this.options.iconClass;let s=this.element.className.split(" ").find((t=>t.startsWith(se)));if(!t&&e){const s=/k-i-(\w+(?:-\w+)*)/;let i=e.match(s);i&&(t=i[1],e=e.replace(i[0],""))}ot(t)&&(t=t.replace("k-i-","").replace(/-./g,(t=>t[1].toUpperCase())),t=this.options.svgIcons[t]||this.options.svgIcons[`${t}Icon`]);let i=t&&t.name?`${se}${t.name}`:"";if(this._className=i,K(this.element,"k-svg-icon"),tt(this.element,s),K(this.element,i),K(this.element,e||""),this.element.setAttribute("aria-hidden","true"),t&&Rt(t)){let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox",t.viewBox||""),e.setAttribute("focusable","false"),e.innerHTML=t.content||"",this.element.appendChild(e)}super.wrapper()}}te(ne,{name:"HTMLSvgIcon",icon:null,svgIcons:{}});const re={svg:ne,font:oe};function ae(t,e){let s=t;let i=e;return s&&(!pt(s)||s instanceof HTMLElement)&&!ot(s)||(i=s,s=document.createElement("span")),ot(i)&&(i={icon:i}),i.type||(i.type="svg"),re[i.type]?new re[i.type](s,i).html():null}function le(t){let e=C;let s=T;for(let i=0,o=t.length;i<o;i++){const o=t[i];null!==o&&isFinite(o)&&(e=Math.min(e,o),s=Math.max(s,o))}return{min:e===C?void 0:e,max:s===T?void 0:s}}function he(t,e){for(let s=0;s<t.length;s++){const i=t[s];if(e(i,s,t))return i}}const ce=e.M;const de=/matrix\((.*)\)/;function ue(t){const e=getComputedStyle(t).transform;return"none"===e?ce.unit():function(t){const e=t.match(de);if(null===e||2!==e.length)return ce.unit();const s=e[1].split(",").map((t=>parseFloat(t)));return new ce(...s)}(e)}function pe(t){if(!t)return ce.unit();let e=ue(t);let s=t.parentElement;for(;s;){const t=ue(s);e=e.multiplyCopy(t),s=s.parentElement}return e.b=e.c=e.e=e.f=0,e}function ge(t){return new e.C(t).isDark()?U:h}const me={};class fe{constructor(t){this._index={},this._values=t?t.slice(0):[];for(let t=0;t<this._values.length;t++)this._index[this._values[t]]=t}values(){return this._values.filter((t=>t!==me))}has(t){return void 0!==this._index[t]}add(t){this.has(t)||(this._index[t]=this._values.length,this._values.push(t))}delete(t){const e=this._index[t];void 0!==e&&(this._values[e]=me,delete this._index[t])}clear(){this._index={},this._values=[]}get size(){return this._values.length}}class xe{constructor(t){this._set=new Set(t)}values(){return Array.from(this._set)}has(t){return this._set.has(t)}add(t){this._set.add(t)}delete(t){this._set.delete(t)}clear(){this._set.clear()}get size(){return this._set.size}}function ye(t){return(()=>{let t=!1;"function"==typeof Set&&(t=new Set([1]).has(1));return t})()?new xe(t):new fe(t)}function ve(t){throw t}let be={INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110};function we(t,e){return Object.prototype.hasOwnProperty.call(t,e)}class _e{constructor(){this.height=0,this.width=0,this.data=[]}clone(){const t=new _e;return t.height=this.height,t.width=this.width,t.data=this.data.map((t=>t.slice())),t}get(t,e){const s=this.data[t];return s?s[e]:null}set(t,e,s){let i=this.data[t];null==i&&(i=this.data[t]=[]),i[e]=s,t>=this.height&&(this.height=t+1),e>=this.width&&(this.width=e+1)}each(t,e){for(let s=0;s<this.height;++s)for(let i=0;i<this.width;++i){let o=this.get(s,i);if((e||null!=o)&&(o=t(o,s,i),void 0!==o))return o}}map(t,e){const s=new _e;return this.each((function(e,i,o){s.set(i,o,t(e,i,o))}),e),s}transpose(){const t=new _e;return this.each((function(e,s,i){t.set(i,s,e)})),t}unit(t){this.width=this.height=t;const e=this.data=new Array(t);for(let s=t;--s>=0;){const i=e[s]=new Array(t);for(let e=t;--e>=0;)i[e]=s===e?1:0}return this}multiply(t){const e=this;const s=new _e;for(let i=0;i<e.height;++i)for(let o=0;o<t.width;++o){let n=0;for(let s=0;s<e.width;++s){const r=e.get(i,s);const a=t.get(s,o);"number"==typeof r&&"number"==typeof a&&(n+=r*a)}s.set(i,o,n)}return s}inverse(){const t=this.width;const e=this.augment((new _e).unit(t));const s=e.data;for(let e=0;e<t;++e){const i=ke(e,t,(function(t){return s[t][e]}));if(!s[i][e])return null;if(e!==i){let t=s[e];s[e]=s[i],s[i]=t}for(let i=e+1;i<t;++i){for(let o=e+1;o<2*t;++o)s[i][o]-=s[e][o]*s[i][e]/s[e][e];s[i][e]=0}}for(let e=0;e<t;++e)for(let i=s[e][e],o=0;o<2*t;++o)s[e][o]/=i;for(let e=t;--e>=0;)for(let i=e;--i>=0;)if(s[i][e])for(let o=2*t;--o>=t;)s[i][o]-=s[e][o]*s[i][e];return e.slice(0,t,t,t)}augment(t){const e=this.clone();const s=e.width;return t.each((function(t,i,o){e.set(i,o+s,t)})),e}slice(t,e,s,i){const o=new _e;for(let n=0;n<s;++n)for(let s=0;s<i;++s)o.set(n,s,this.get(t+n,e+s));return o}}function ke(t,e,s){let i=s(t),o=t;for(let n=t+1;n<e;n++){const e=s(t);e>i&&(i=e,o=t)}return o}const Ae={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"};function Se(t){return Ae[t]||t}const Ce=t=>t.replace(/([^ ]+)/g,Se);let Te=1;function Pe(){return"kchart"+Te++}function Me(){return Pe()}const Ee=new WeakMap;const Le=Symbol("id");function Ie(t,e,s,i,o){!function(t,e,s,i,o){const n=Q(e)?e:(e||"").split(" ");n.forEach((function(e){!function(t,e,s,i,o){let n=i;let r;s&&ht(s)&&!i?n=s:s&&function(t){return"string"==typeof t}(s)&&ht(n)&&(r=s);const a=function(e){const s=e.target?e.target.closest(r):null;if(!r||r&&e.target&&s){const i=r?s:e.currentTarget;Object.defineProperty(e,"currentTarget",{value:i}),Object.defineProperty(e,"delegateTarget",{value:t}),n(e)}};n[Le]||(n[Le]=Me());let l=Ee.get(t);l||(l=new Map,Ee.set(t,l));l.set(e+n[Le],a),t.addEventListener(e,a,Boolean(o))}(t,e,s,i,o)}))}(t,e,s,i,o)}function Re(t,e,s,i,o){!function(t,e,s,i){const o=Q(e)?e:(e||"").split(" ");o.forEach((function(e){!function(t,e,s,i){const o=Ee.get(t);if(o&&s&&s[Le]){const n=e+s[Le];const r=o.get(n);o.delete(n),r&&t.removeEventListener(e,r,Boolean(i))}}(t,e,s,i)}))}(t,e,s,i)}function Be(){const t=function(t){let e=!1;const s={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[._]([\d._]+)/,ipad:/(iPad).*OS\s+(\d+)[._]([\d_]+)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i},i={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i};for(let o in s){if(t.match(s[o])){if("windows"===o&&"plugins"in navigator)return!1;e={},e.device=o,e.name=Oe(o,i),e[e.name]=!0;break}}return e}(navigator.userAgent);const e={};return e.mobileOS=t,e}function Oe(t,e,s){for(let s in e)if(e[s].test(t))return s;return void 0!==s?s:t}function Ve(){}function De(){return(new Date).getTime()}const ze="string";const Fe="function";let He=function(){this._defaultPrevented=!0};let Ne=function(){return!0===this._defaultPrevented};class je{constructor(){this._events={}}destroy(){this.unbind()}bind(t,e,s){let i,o,n,r,a,l=this,h=typeof t===ze?[t]:t||[],c=typeof e===Fe;if(void 0===e){for(i in t)l.bind(i,t[i]);return l}for(i=0,o=h.length;i<o;i++){let t=h[i];r=c?e:e[t],r&&(s&&(n=r,r=function(){l.unbind(t,r),n.apply(l,arguments)},r.original=n),a=l._events[t]=l._events[t]||[],a.push(r))}return l}one(t,e){return this.bind(t,e,!0)}first(t,e){let s,i,o,n,r=this,a=typeof t===ze?[t]:t,l=typeof e===Fe;for(s=0,i=a.length;s<i;s++){let t=a[s];o=l?e:e[t],o&&(n=r._events[t]=r._events[t]||[],n.unshift(o))}return r}trigger(t,e){let s,i,o=this,n=o._events[t];if(n){let t=e||{};for(t.sender=o,t._defaultPrevented=!1,t.preventDefault=He,t.isDefaultPrevented=Ne,n=n.slice(),s=0,i=n.length;s<i;s++)n[s].call(o,t);return!0===t._defaultPrevented}return!1}unbind(t,e){let s,i=this,o=i._events[t];if(void 0===t)i._events={};else if(o)if(e)for(s=o.length-1;s>=0;s--)o[s]!==e&&o[s].original!==e||o.splice(s,1);else i._events[t]=[];return i}_setEvents(t){const e=(this.events||[]).length;for(let s=0;s<e;s++){let e=this.events[s];this.options[e]&&t[e]&&(this.unbind(e,this.options[e]),this._events&&this._events[e]&&delete this._events[e])}this.bind(this.events,t)}}const Ue=Object.assign;const Ge=t=>{t.preventDefault()};let We=800,Xe=0,Ye="press",qe="hold",Ze="select",$e="start",Qe="move",Ke="end",Je="cancel",ts="tap",es="doubleTap",ss="release",is="gesturechange",os="gestureend",ns="gesturetap";let rs={api:0,touch:0,mouse:9,pointer:9};function as(t){let e=[],s=t.originalEvent||t,i=t.currentTarget;return t.api?e.push({id:2,event:t,target:t.target,currentTarget:t.target,location:t,type:"api"}):e.push({location:s,event:t,target:t.target,currentTarget:i,id:s.pointerId,type:"pointer"}),e}class ls{constructor(t,e){let s=this;s.support=Be(),s.invalidZeroEvents=this.support.mobileOS&&this.support.mobileOS.android,s.axis=t,s._updateLocationData(e),s.startLocation=s.location,s.velocity=s.delta=0,s.timeStamp=De()}move(t){let e=this,s=t["page"+e.axis],i=De(),o=i-e.timeStamp||1;!s&&this.invalidZeroEvents||(e.delta=s-e.location,e._updateLocationData(t),e.initialDelta=s-e.startLocation,e.velocity=e.delta/o,e.timeStamp=i)}_updateLocationData(t){let e=this,s=e.axis;e.location=t["page"+s],e.client=t["client"+s],e.screen=t["screen"+s]}}class hs{constructor(t,e,s){Ue(this,{x:new ls("X",s.location),y:new ls("Y",s.location),type:s.type,threshold:t.threshold||rs[s.type],userEvents:t,target:e,currentTarget:s.currentTarget,initialTouch:s.target,id:s.id,pressEvent:s,_clicks:t._clicks,supportDoubleTap:t.supportDoubleTap,_moved:!1,_finished:!1})}press(){this._holdTimeout=setTimeout((()=>this._hold()),this.userEvents.minHold),this._trigger(Ye,this.pressEvent)}_tap(t){let e=this;e.userEvents._clicks++,1===e.userEvents._clicks&&(e._clickTimeout=setTimeout((function(){1===e.userEvents._clicks?e._trigger(ts,t):e._trigger(es,t),e.userEvents._clicks=0}),300))}_hold(){this._trigger(qe,this.pressEvent)}move(t){let e=this;let s="api"!==t.type&&e.userEvents._shouldNotMove;if(!e._finished&&!s){if(e.x.move(t.location),e.y.move(t.location),!e._moved){if(e._withinIgnoreThreshold())return;if(ds.current&&ds.current!==e.userEvents)return e.dispose();e._start(t)}e._finished||e._trigger(Qe,t)}}end(t){this.endTime=De(),this._finished||(this._finished=!0,this._trigger(ss,t),this._moved?this._trigger(Ke,t):this.supportDoubleTap?this._tap(t):this._trigger(ts,t),clearTimeout(this._holdTimeout),this.dispose())}dispose(){let t=this.userEvents.touches||[];this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout);const e=t.indexOf(this);t.splice(e,1)}skip(){this.dispose()}cancel(){this.dispose()}isMoved(){return this._moved}_start(t){clearTimeout(this._holdTimeout),this.startTime=De(),this._moved=!0,this._trigger($e,t)}_trigger(t,e){const s=e.event;const i={touch:this,x:this.x,y:this.y,target:this.target,event:s};this.userEvents.notify(t,i)&&s.preventDefault()}_withinIgnoreThreshold(){let t=this.x.initialDelta,e=this.y.initialDelta;return Math.sqrt(t*t+e*e)<=this.threshold}}function cs(t){let e=Ae.up.split(" "),s=0,i=e.length;for(;s<i;s++)t(e[s])}class ds extends je{constructor(t,e){super();let s=this;let i;const o=Be();if(this.support=o,e=e||{},this.options=e,i=s.filter=e.filter,s.threshold=e.threshold||Xe,s.minHold=e.minHold||We,s.touches=[],s._maxTouches=e.multiTouch?2:1,s.allowSelection=e.allowSelection,s.captureUpIfMoved=e.captureUpIfMoved,s._clicks=0,s.supportDoubleTap=e.supportDoubleTap,Ue(s,{element:t,surface:e.surface||t,stopPropagation:e.stopPropagation,pressed:!1}),this._surfaceMoveHandler=this._move.bind(this),Ie(s.surface,Ce("move"),this._surfaceMoveHandler),this._surfaceEndHandler=this._end.bind(this),Ie(s.surface,Ce("up cancel"),this._surfaceEndHandler),this._elementStartHandler=this._start.bind(this),Ie(t,Ce("down"),i,this._elementStartHandler),t.style["touch-action"]=e.touchAction||"none",e.preventDragEvent&&(this._elementDragStartHandler=Ge,Ie(t,Ce("dragstart"),this._elementDragStartHandler)),this._elementSelectHandler=this._select.bind(this),Ie(t,Ce("mousedown"),i,this._elementSelectHandler),s.captureUpIfMoved){let t=s.surface;s._preventIfMovingProxy=s.preventIfMoving.bind(s),cs((function(e){t.addEventListener(e,s._preventIfMovingProxy,!0)}))}s.bind([Ye,qe,ts,es,$e,Qe,Ke,ss,Je,"gesturestart",is,os,ns,Ze],e)}preventIfMoving(t){this._isMoved()&&t.preventDefault()}destroy(){let t=this;const e=this.options;const s=this.element;if(!t._destroyed){if(t._destroyed=!0,t.captureUpIfMoved){let e=t.surface;cs((function(s){e.removeEventListener(s,t._preventIfMovingProxy,!0)}))}Re(t.surface,Ce("move"),this._surfaceMoveHandler),Re(t.surface,Ce("up cancel"),this._surfaceEndHandler),Re(s,Ce("down"),this._elementStartHandler),e.preventDragEvent&&Re(s,Ce("dragstart"),this._elementDragStartHandler),Re(s,Ce("mousedown"),this._elementSelectHandler),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget}}capture(){ds.current=this}cancel(){this._disposeAll(),this.trigger(Je)}notify(t,e){let s=this.touches;let i=t;if(this._isMultiTouch()){switch(i){case Qe:i=is;break;case Ke:i=os;break;case ts:i=ns}Ue(e,{touches:s},function(t,e){let s=t.x.location,i=t.y.location,o=e.x.location,n=e.y.location,r=s-o,a=i-n;return{center:{x:(s+o)/2,y:(i+n)/2},distance:Math.sqrt(r*r+a*a)}}(s[0],s[1]))}return this.trigger(i,Ue(e,{type:i}))}press(t,e,s){this._apiCall("_start",t,e,s)}move(t,e){this._apiCall("_move",t,e)}end(t,e){this._apiCall("_end",t,e)}_isMultiTouch(){return this.touches.length>1}_maxTouchesReached(){return this.touches.length>=this._maxTouches}_disposeAll(){let t=this.touches;for(;t.length>0;)t.pop().dispose()}_isMoved(){return Ct(this.touches,(function(t){return t.isMoved()})).length}_select(t){this.allowSelection&&!this.trigger(Ze,{event:t})||t.preventDefault()}_start(t){if(t.which&&t.which>1||this._maxTouchesReached())return;let e;ds.current=null,this.currentTarget=t.currentTarget,this.stopPropagation&&t.stopPropagation();const s=as(t);for(let t=0;t<s.length&&!this._maxTouchesReached();t++){const i=s[t];if(e=this.filter?i.currentTarget:this.element,e&&0===e.length)continue;const o=new hs(this,e,i);this.touches.push(o),o.press(),this._isMultiTouch()&&this.notify("gesturestart",{})}}_move(t){this._eachTouch("move",t)}_end(t){this._eachTouch("end",t)}_eachTouch(t,e){let s,i,o,n,r={},a=as(e),l=this.touches;for(s=0;s<l.length;s++)i=l[s],r[i.id]=i;for(s=0;s<a.length;s++)if(o=a[s],n=r[o.id],n){"move"===t&&"pointer"===o.type&&!this.surface.hasPointerCapture(o.id)&&this.surface.setPointerCapture(o.id),n[t](o)}}_apiCall(t,e,s,i){this[t]({api:!0,pageX:e,pageY:s,clientX:e,clientY:s,target:i||this.element,stopPropagation:Ve,preventDefault:Ve})}static defaultThreshold(t){Xe=t}static minHold(t){We=t}}function us(t,e){let s=$t(e-t,9);if(0===s){if(0===e)return.1;s=Math.abs(e)}const i=Math.pow(10,Math.floor(Math.log(s)/Math.log(10)));const o=$t(s/i,f);let n=1;return n=o<1.904762?.2:o<4.761904?.5:o<9.523809?1:2,$t(i*n,f)}let ps=class t{constructor(t,e){this.x=t||0,this.y=e||0}clone(){return new t(this.x,this.y)}equals(t){return t&&this.x===t.x&&this.y===t.y}rotate(t,e){const s=Zt(e);const i=Math.cos(s);const o=Math.sin(s);const{x:n,y:r}=t;const{x:a,y:l}=this;return this.x=$t(n+(a-n)*i+(l-r)*o,3),this.y=$t(r+(l-r)*i-(a-n)*o,3),this}multiply(t){return this.x*=t,this.y*=t,this}distanceTo(t){const e=this.x-t.x;const s=this.y-t.y;return Math.sqrt(e*e+s*s)}static onCircle(e,s,i){const o=Zt(s);return new t(e.x-i*Math.cos(o),e.y-i*Math.sin(o))}};class gs{constructor(t,e,s,i){this.x1=t||0,this.y1=e||0,this.x2=s||0,this.y2=i||0}equals(t){return this.x1===t.x1&&this.x2===t.x2&&this.y1===t.y1&&this.y2===t.y2}width(){return this.x2-this.x1}height(){return this.y2-this.y1}translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this}move(t,e){const s=this.height();const i=this.width();return void 0!==t&&(this.x1=t,this.x2=this.x1+i),void 0!==e&&(this.y1=e,this.y2=this.y1+s),this}wrap(t){return this.x1=Math.min(this.x1,t.x1),this.y1=Math.min(this.y1,t.y1),this.x2=Math.max(this.x2,t.x2),this.y2=Math.max(this.y2,t.y2),this}wrapLimit(t,e,s){return this.x1=Math.min(this.x1,Math.max(this.x1-e,t.x1)),this.y1=Math.min(this.y1,Math.max(this.y1-s,t.y1)),this.x2=Math.max(this.x2,Math.min(this.x2+e,t.x2)),this.y2=Math.max(this.y2,Math.min(this.y2+s,t.y2)),this}wrapPoint(t){const e=Q(t);const s=e?t[0]:t.x;const i=e?t[1]:t.y;return this.wrap(new gs(s,i,s,i)),this}snapTo(t,e){return e!==W&&e||(this.x1=t.x1,this.x2=t.x2),e!==X&&e||(this.y1=t.y1,this.y2=t.y2),this}alignTo(t,e){const s=this.height();const i=this.width();const o=e===z||e===c?X:W;const n=o===X?s:i;if(e===d){const e=t.center();const s=this.center();this.x1+=e.x-s.x,this.y1+=e.y-s.y}else this[o+1]=e===z||e===S?t[o+1]-n:t[o+2];return this.x2=this.x1+i,this.y2=this.y1+s,this}shrink(t,e){return this.x2-=t,this.y2-=e,this}expand(t,e){return this.shrink(-t,-e),this}pad(t){const e=yt(t);return this.x1-=e.left,this.x2+=e.right,this.y1-=e.top,this.y2+=e.bottom,this}unpad(t){const e=yt(t);return e.left=-e.left,e.top=-e.top,e.right=-e.right,e.bottom=-e.bottom,this.pad(e)}clone(){return new gs(this.x1,this.y1,this.x2,this.y2)}center(){return new ps(this.x1+this.width()/2,this.y1+this.height()/2)}containsPoint(t){return t.x>=this.x1&&t.x<=this.x2&&t.y>=this.y1&&t.y<=this.y2}points(){return[new ps(this.x1,this.y1),new ps(this.x2,this.y1),new ps(this.x2,this.y2),new ps(this.x1,this.y2)]}getHash(){return[this.x1,this.y1,this.x2,this.y2].join(",")}overlaps(t){return!(t.y2<this.y1||this.y2<t.y1||t.x2<this.x1||this.x2<t.x1)}rotate(t){let e=this.width();let s=this.height();const{x:i,y:o}=this.center();const n=ms(0,0,i,o,t);const r=ms(e,0,i,o,t);const a=ms(e,s,i,o,t);const l=ms(0,s,i,o,t);return e=Math.max(n.x,r.x,a.x,l.x)-Math.min(n.x,r.x,a.x,l.x),s=Math.max(n.y,r.y,a.y,l.y)-Math.min(n.y,r.y,a.y,l.y),this.x2=this.x1+e,this.y2=this.y1+s,this}toRect(){return new e.R([this.x1,this.y1],[this.width(),this.height()])}hasSize(){return 0!==this.width()&&0!==this.height()}align(t,e,s){return e===W?this.alignX(t,s):this.alignY(t,s),this}alignX(t,e){const s=this.width();e===S?(this.x1=t.x1,this.x2=this.x1+s):e===B?(this.x2=t.x2,this.x1=this.x2-s):e===d&&(this.x1=t.x1+(t.width()-s)/2,this.x2=this.x1+s)}alignY(t,e){const s=this.height();e===z?(this.y1=t.y1,this.y2=this.y1+s):e===c?(this.y2=t.y2,this.y1=this.y2-s):e===d&&(this.y1=t.y1+(t.height()-s)/2,this.y2=this.y1+s)}}function ms(t,e,s,i,o){const n=Zt(o);return new ps(s+(t-s)*Math.cos(n)+(e-i)*Math.sin(n),i-(t-s)*Math.sin(n)+(e-i)*Math.cos(n))}class fs{constructor(t,e,s,i,o){this.center=t,this.innerRadius=e,this.radius=s,this.startAngle=i,this.angle=o}clone(){return new fs(this.center,this.innerRadius,this.radius,this.startAngle,this.angle)}middle(){return this.startAngle+this.angle/2}setRadius(t,e){return e?this.innerRadius=t:this.radius=t,this}point(t,e){const s=Zt(t);const i=Math.cos(s);const o=Math.sin(s);const n=e?this.innerRadius:this.radius;const r=$t(this.center.x-i*n,3);const a=$t(this.center.y-o*n,3);return new ps(r,a)}adjacentBox(t,e,s){const i=this.clone().expand(t);const o=i.middle();const n=i.point(o);const r=e/2;const a=s/2;const l=Math.sin(Zt(o));const h=Math.cos(Zt(o));let c=n.x-r;let d=n.y-a;return Math.abs(l)<.9&&(c+=r*-h/Math.abs(h)),Math.abs(h)<.9&&(d+=a*-l/Math.abs(l)),new gs(c,d,c+e,d+s)}containsPoint(t){const e=this.center;const s=this.innerRadius;const i=this.radius;const o=this.startAngle;const n=this.startAngle+this.angle;const r=t.x-e.x;const a=t.y-e.y;const l=new ps(r,a);const h=this.point(o);const c=new ps(h.x-e.x,h.y-e.y);const d=this.point(n);const u=new ps(d.x-e.x,d.y-e.y);const p=$t(r*r+a*a,3);return(c.equals(l)||st(c,l))&&!st(u,l)&&p>=s*s&&p<=i*i}getBBox(){const t=new gs(C,C,T,T);const e=$t(this.startAngle%360);const s=$t((e+this.angle)%360);const i=this.innerRadius;const o=[0,90,180,270,e,s].sort(xs);const n=o.indexOf(e);const r=o.indexOf(s);let a;a=e===s?o:n<r?o.slice(n,r+1):[].concat(o.slice(0,r+1),o.slice(n,o.length));for(let e=0;e<a.length;e++){let s=this.point(a[e]);t.wrapPoint(s),t.wrapPoint(s,i)}return i||t.wrapPoint(this.center),t}expand(t){return this.radius+=t,this}}function xs(t,e){return t-e}class ys extends fs{constructor(t,e,s,i){super(t,0,e,s,i)}expand(t){return super.expand(t)}clone(){return new ys(this.center,this.radius,this.startAngle,this.angle)}setRadius(t){return this.radius=t,this}}class vs{createRing(t,s){const i=t.startAngle+180;let o=t.angle+i;(0===t.angle||t.angle>0&&i===o)&&(o+=.001);const n=new e.P(t.center.x,t.center.y);const r=Math.max(t.radius,0);const a=Math.max(t.innerRadius,0);const l=new e.A(n,{startAngle:i,endAngle:o,radiusX:r,radiusY:r});const h=e.a.fromArc(l,s).close();if(a){l.radiusX=l.radiusY=a;const t=l.pointAt(o);h.lineTo(t.x,t.y),h.arc(o,i,a,a,!0)}else h.lineTo(n.x,n.y);return h}}vs.current=new vs;class bs{constructor(t){this.children=[],this.initOptions(t)}initOptions(t){this.options=ut({},this.options,this.initUserOptions(t))}initUserOptions(t){return t}reflow(t){const e=this.children;let s;for(let i=0;i<e.length;i++){let o=e[i];o.reflow(t),s=s?s.wrap(o.box):o.box.clone()}this.box=s||t}destroy(){const t=this.children;this.animation&&this.animation.destroy();for(let e=0;e<t.length;e++)t[e].destroy()}getRoot(){const t=this.parent;return t?t.getRoot():null}getSender(){const t=this.getService();if(t)return t.sender}getService(){let t=this;for(;t;){if(t.chartService)return t.chartService;t=t.parent}}translateChildren(t,e){const s=this.children;const i=s.length;for(let o=0;o<i;o++)s[o].box.translate(t,e)}append(){for(let t=0;t<arguments.length;t++){let e=arguments[t];this.children.push(e),e.parent=this}}renderVisual(){!1!==this.options.visible&&(this.createVisual(),this.addVisual(),this.renderChildren(),this.createAnimation(),this.renderComplete())}addVisual(){this.visual&&(this.visual.chartElement=this,this.parent&&this.parent.appendVisual(this.visual))}renderChildren(){const t=this.children;const e=t.length;for(let s=0;s<e;s++)t[s].renderVisual()}createVisual(){this.visual=new e.G({zIndex:this.options.zIndex,visible:Kt(this.options.visible,!0)})}createAnimation(){this.visual&&this.options.animation&&(this.animation=e.b.create(this.visual,this.options.animation))}appendVisual(t){t.chartElement||(t.chartElement=this),t.options.noclip?this.clipRoot().visual.append(t):void 0!==t.options.zIndex?this.stackRoot().stackVisual(t):this.isStackRoot?this.stackVisual(t):this.visual?this.visual.append(t):this.parent.appendVisual(t)}clipRoot(){return this.parent?this.parent.clipRoot():this}stackRoot(){return this.parent?this.parent.stackRoot():this}stackVisual(t){const e=t.options.zIndex||0;const s=this.visual.children;const i=s.length;let o;for(o=0;o<i;o++){let t=s[o];if(Kt(t.options.zIndex,0)>e)break}this.visual.insert(o,t)}traverse(t){const e=this.children;const s=e.length;for(let i=0;i<s;i++){let s=e[i];t(s),s.traverse&&s.traverse(t)}}closest(t){let e=this;let s=!1;for(;e&&!s;)s=t(e),s||(e=e.parent);if(s)return e}renderComplete(){}hasHighlight(){const t=(this.options||{}).highlight;return!(!this.createHighlight||t&&!1===t.visible||!1===this.visible)}toggleHighlight(t,e){const s=(this.options||{}).highlight||{};const i=s.visual;let o=this._highlight;if(!o){const t={fill:{color:U,opacity:e||.2},stroke:{color:U,width:1,opacity:e||.2}};if(i){if(o=this._highlight=i(Object.assign(this.highlightVisualArgs(),{createVisual:()=>this.createHighlight(t),sender:this.getSender(),series:this.series,dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total})),!o)return}else o=this._highlight=this.createHighlight(t);void 0===o.options.zIndex&&(o.options.zIndex=Kt(s.zIndex,this.options.zIndex)),this.appendVisual(o)}o.visible(t)}toggleFocusHighlight(t){const e=(this.options||{}).focusHighlight||{};let s=this._focusHighlight;if(t||s){if(!s){const t=ge(this.getRoot().options.background);const i={fill:{opacity:e.opacity,color:e.color},stroke:Object.assign({},{color:t},e.border),zIndex:e.zIndex};s=this._focusHighlight=this.createFocusHighlight(i),this.appendVisual(s)}s.visible(t)}}createGradientOverlay(t,s,i){const o=new e.a(Object.assign({stroke:{color:"none"},fill:this.createGradient(i),closed:t.options.closed},s));return o.segments.elements(t.segments.elements()),o}createGradient(t){if(this.parent)return this.parent.createGradient(t)}supportsPointInactiveOpacity(){return!0}}bs.prototype.options={};const{dotsPattern:ws,verticalStripesPattern:_s,crosshatchPattern:ks,diagonalStripesPattern:As,gridPattern:Ss}=e.c;const Cs={dots:ws,verticalStripes:_s,crosshatch:ks,diagonalStripes:As,grid:Ss};function Ts(t,e,s){const i=function(t,e){return ht(t)?t(e):t}(t,s);const o=i&&Cs[i.type];return o?o(Object.assign({},e,i)):e}class Ps extends bs{constructor(t){super(t),this.options.margin=yt(this.options.margin),this.options.padding=yt(this.options.padding)}reflow(t){const e=this.options;const{width:s,height:i,shrinkToFit:o}=e;const n=s&&i;const r=e.margin;const a=e.padding;const l=e.border.width;let h;const c=()=>{this.align(t,W,e.align),this.align(t,X,e.vAlign),this.paddingBox=h.clone().unpad(r).unpad(l)};let d=t.clone();n&&(d.x2=d.x1+s,d.y2=d.y1+i),o&&d.unpad(r).unpad(l).unpad(a),super.reflow(d),h=n?this.box=new gs(0,0,s,i):this.box,o&&n?(c(),d=this.contentBox=this.paddingBox.clone().unpad(a)):(d=this.contentBox=h.clone(),h.pad(a).pad(l).pad(r),c()),this.translateChildren(h.x1-d.x1+r.left+l+a.left,h.y1-d.y1+r.top+l+a.top);const u=this.children;for(let t=0;t<u.length;t++){let e=u[t];e.reflow(e.box)}}align(t,e,s){this.box.align(t,e,s)}hasBox(){const t=this.options;return t.border.width||t.background}createVisual(){super.createVisual();this.options.visible&&this.hasBox()&&this.visual.append(e.a.fromRect(this.paddingBox.toRect(),this.visualStyle()))}visualStyle(){const t=this.options;const e=t.border||{};return{stroke:{width:e.width,color:e.color,opacity:Kt(e.opacity,t.opacity),dashType:e.dashType},fill:Ts(t.pattern,{color:t.background,opacity:t.opacity},void 0),cursor:t.cursor}}}function Ms(t,e){e&&(t.options.className=e.className,t.options.role=e.role,t.options.ariaLabel=e.ariaLabel,t.options.ariaRoleDescription=e.ariaRoleDescription,t.options.ariaChecked=e.ariaChecked)}te(Ps,{align:S,vAlign:z,margin:{},padding:{},border:{color:h,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0});class Es extends Ps{constructor(t,e){super(t),this.pointData=e}getElement(){const{options:t,paddingBox:s}=this;const{type:i,rotation:o}=t;const n=s.center();const r=s.width()/2;const a=s.height()/2;if(!t.visible||!this.hasBox())return null;const l=this.visualStyle();let h;if(i===u)h=new e.e(new e.f([$t(s.x1+r,3),$t(s.y1+a,3)],Math.min(r,a)),l);else if(i===F)h=e.a.fromPoints([[s.x1+r,s.y1],[s.x1,s.y2],[s.x2,s.y2]],l).close();else if(i===p)h=new e.g(l),h.moveTo(s.x1,s.y1).lineTo(s.x2,s.y2),h.moveTo(s.x1,s.y2).lineTo(s.x2,s.y1);else{const o=s.toRect();if(i===O){const e=Kt(t.borderRadius,o.width()/5);o.setCornerRadius(e)}h=e.a.fromRect(o,l)}return o&&h.transform(e.t().rotate(-o,[n.x,n.y])),h.options.zIndex=t.zIndex,h}createElement(){const t=this.options.visual;const e=this.pointData||{};let s;return s=t?t({value:e.value,dataItem:e.dataItem,sender:this.getSender(),series:e.series,category:e.category,rect:this.paddingBox.toRect(),options:this.visualOptions(),createVisual:()=>this.getElement()}):this.getElement(),s}visualOptions(){const t=this.options;return{background:t.background,border:t.border,margin:t.margin,padding:t.padding,type:t.type,size:t.width,visible:t.visible}}createVisual(){this.visual=this.createElement(),Ms(this.visual,this.options.accessibilityOptions)}}te(Es,{type:u,align:d,vAlign:d});const Ls="radial";const Is={glass:{type:"linear",rotation:0,stops:[{offset:0,color:U,opacity:0},{offset:.25,color:U,opacity:.3},{offset:1,color:U,opacity:0}]},sharpBevel:{type:Ls,stops:[{offset:0,color:U,opacity:.55},{offset:.65,color:U,opacity:0},{offset:.95,color:U,opacity:.25}]},roundedBevel:{type:Ls,stops:[{offset:.33,color:U,opacity:.06},{offset:.83,color:U,opacity:.2},{offset:.95,color:U,opacity:0}]},roundedGlass:{type:Ls,supportVML:!1,stops:[{offset:0,color:U,opacity:0},{offset:.5,color:U,opacity:.3},{offset:.99,color:U,opacity:0}]},sharpGlass:{type:Ls,supportVML:!1,stops:[{offset:0,color:U,opacity:.2},{offset:.15,color:U,opacity:.15},{offset:.17,color:U,opacity:.35},{offset:.85,color:U,opacity:.05},{offset:.87,color:U,opacity:.15},{offset:.99,color:U,opacity:0}]},bubbleShadow:{type:Ls,center:[.5,.5],radius:.5}};function Rs(t,e){if(t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2)return e;const s=Math.min(t.x1,e.x1);const i=Math.max(t.x1,e.x1);const o=Math.min(t.x2,e.x2);const n=Math.max(t.x2,e.x2);const r=Math.min(t.y1,e.y1);const a=Math.max(t.y1,e.y1);const l=Math.min(t.y2,e.y2);const h=Math.max(t.y2,e.y2);const c=[];return c[0]=new gs(i,r,o,a),c[1]=new gs(s,a,i,l),c[2]=new gs(o,a,n,l),c[3]=new gs(i,l,o,h),t.x1===s&&t.y1===r||e.x1===s&&e.y1===r?(c[4]=new gs(s,r,i,a),c[5]=new gs(o,l,n,h)):(c[4]=new gs(o,r,n,a),c[5]=new gs(s,l,i,h)),Ct(c,(function(t){return t.height()>0&&t.width()>0}))[0]}class Bs extends bs{constructor(t){super(t);const e=this.options;e.width=parseInt(e.width,10),e.height=parseInt(e.height,10),this.gradients={}}reflow(){const{options:t,children:e}=this;let s=new gs(0,0,t.width,t.height);this.box=s.unpad(t.margin);for(let t=0;t<e.length;t++)e[t].reflow(s),s=Rs(s,e[t].box)||new gs}createVisual(){this.visual=new e.G,this.createBackground()}createBackground(){const t=this.options;const s=t.border||{};const i=this.box.clone().pad(t.margin).unpad(s.width);const o=e.a.fromRect(i.toRect(),{stroke:{color:s.width?s.color:"",width:s.width,dashType:s.dashType},fill:{color:t.background,opacity:t.opacity},zIndex:-10});this.visual.append(o)}getRoot(){return this}createGradient(t){const s=this.gradients;const i=qt(t);const o=Is[t.gradient];let n;if(s[i])n=s[i];else{const r=Object.assign({},o,t);"linear"===o.type?n=new e.L(r):(t.innerRadius&&(r.stops=function(t){const e=t.stops;const s=t.innerRadius/t.radius*100;const i=e.length;const o=[];for(let t=0;t<i;t++){let i=Object.assign({},e[t]);i.offset=(i.offset*(100-s)+s)/100,o.push(i)}return o}(r)),n=new e.h(r),n.supportVML=!1!==o.supportVML),s[i]=n}return n}cleanGradients(){const t=this.gradients;for(let e in t)t[e]._observers=[]}size(){const t=this.options;return new gs(0,0,t.width,t.height)}}te(Bs,{width:x,height:400,background:U,border:{color:h,width:0},margin:yt(5),zIndex:-2});class Os extends bs{constructor(t){super(t),this._initDirection()}_initDirection(){const t=this.options;t.vertical?(this.groupAxis=W,this.elementAxis=X,this.groupSizeField=G,this.elementSizeField=_,this.groupSpacing=t.spacing,this.elementSpacing=t.vSpacing):(this.groupAxis=X,this.elementAxis=W,this.groupSizeField=_,this.elementSizeField=G,this.groupSpacing=t.vSpacing,this.elementSpacing=t.spacing)}reflow(t){this.box=t.clone(),this.reflowChildren()}reflowChildren(){const{box:t,elementAxis:e,groupAxis:s,elementSizeField:i,groupSizeField:o}=this;const{groups:n,groupsSize:r,maxGroupElementsSize:a}=this.groupOptions();const l=n.length;const h=t[s+1]+this.alignStart(r,t[o]());if(l){let c=h;for(let r=0;r<l;r++){let a=n[r];let l=a.groupElements;let h=t[e+1];let d=l.length;for(let t=0;t<d;t++){let n=l[t];let r=this.elementSize(n);let d=c+this.alignStart(r[o],a.groupSize);let u=new gs;u[s+1]=d,u[s+2]=d+r[o],u[e+1]=h,u[e+2]=h+r[i],n.reflow(u),h+=r[i]+this.elementSpacing}c+=a.groupSize+this.groupSpacing}t[s+1]=h,t[s+2]=h+r,t[e+2]=t[e+1]+a}}alignStart(t,e){let s=0;const i=this.options.align;return i===B||i===c?s=e-t:i===d&&(s=(e-t)/2),s}groupOptions(){const{box:t,children:e,elementSizeField:s,groupSizeField:i,elementSpacing:o,groupSpacing:n}=this;const r=$t(t[s]());const a=e.length;const l=[];let h=0;let c=0;let d=0;let u=0;let p=[];for(let g=0;g<a;g++){let a=e[g];a.box||a.reflow(t);let m=this.elementSize(a);this.options.wrap&&$t(c+o+m[s])>r&&(l.push({groupElements:p,groupSize:h,groupElementsSize:c}),u=Math.max(u,c),d+=n+h,h=0,c=0,p=[]),h=Math.max(h,m[i]),c>0&&(c+=o),c+=m[s],p.push(a)}return l.push({groupElements:p,groupSize:h,groupElementsSize:c}),u=Math.max(u,c),d+=h,{groups:l,groupsSize:d,maxGroupElementsSize:u}}elementSize(t){return{width:t.box.width(),height:t.box.height()}}createVisual(){}}te(Os,{vertical:!0,wrap:!0,vSpacing:0,spacing:0});const Vs=e.T;let Ds=class extends bs{constructor(t,e){super(e),this.content=t,this.reflow(new gs)}reflow(t){const s=this.options;const i=s.size=e.m(this.content,{font:s.font});this.baseline=i.baseline,this.box=new gs(t.x1,t.y1,t.x1+i.width,t.y1+i.height)}createVisual(){const{font:t,color:e,opacity:s,cursor:i,stroke:o,paintOrder:n}=this.options;this.visual=new Vs(this.content,this.box.toRect().topLeft(),{font:t,fill:{color:e,opacity:s},cursor:i,stroke:o,paintOrder:n})}};function zs(t){const e=t.origin;const s=t.bottomRight();return new gs(e.x,e.y,s.x,s.y)}te(Ds,{font:m,color:h});const Fs=/\n/m;class Hs extends Ps{constructor(t,e,s){super(e),this.content=t,this.data=s,this._initContainer(),!1!==this.options._autoReflow&&this.reflow(new gs)}_initContainer(){const t=this.options;const e=String(this.content).split(Fs);const s=new Os({vertical:!0,align:t.align,wrap:!1});const i=ut({},t,{opacity:1,animation:null});this.container=s,this.append(s);for(let t=0;t<e.length;t++){let o=new Ds(e[t].trim(),i);s.append(o)}}reflow(t){const s=this.options;const i=s.visual;if(this.container.options.align=s.align,i&&!this._boxReflow){let o=t;o.hasSize()||(this._boxReflow=!0,this.reflow(o),this._boxReflow=!1,o=this.box);const n=this.visual=i(this.visualContext(o));n&&(o=zs(n.clippedBBox()||new e.R),n.options.zIndex=s.zIndex),this.box=this.contentBox=this.paddingBox=o}else if(super.reflow(t),s.rotation){const e=yt(s.margin);let i=this.box.unpad(e);this.targetBox=t,this.normalBox=i.clone(),i=this.rotate(),i.translate(e.left-e.right,e.top-e.bottom),this.rotatedBox=i.clone(),i.pad(e)}}createVisual(){const t=this.options;if(this.visual=new e.G({transform:this.rotationTransform(),zIndex:t.zIndex,noclip:t.noclip}),this.hasBox()){const t=e.a.fromRect(this.paddingBox.toRect(),this.visualStyle());this.visual.append(t)}}renderVisual(){if(this.options.visible)if(this.options.visual){const t=this.visual;t&&!Ft(t.options.noclip)&&(t.options.noclip=this.options.noclip),this.addVisual(),this.createAnimation()}else super.renderVisual()}visualContext(t){const e={text:this.content,rect:t.toRect(),sender:this.getSender(),options:this.options,createVisual:()=>(this._boxReflow=!0,this.reflow(t),this._boxReflow=!1,this.getDefaultVisual())};return this.data&&Object.assign(e,this.data),e}getDefaultVisual(){this.createVisual(),this.renderChildren();const t=this.visual;return delete this.visual,t}rotate(){const t=this.options;return this.box.rotate(t.rotation),this.align(this.targetBox,W,t.align),this.align(this.targetBox,X,t.vAlign),this.box}rotationTransform(){const t=this.options.rotation;if(!t)return null;const{x:s,y:i}=this.normalBox.center();const o=this.rotatedBox.center();return e.t().translate(o.x-s,o.y-i).rotate(t,[s,i])}}let Ns=class t extends bs{constructor(t){super(t),this._textBox=new Hs(this.options.text,Object.assign({},this.options,{vAlign:this.options.position})),this.append(this._textBox)}reflow(t){super.reflow(t),this.box.snapTo(t,W)}static buildTitle(e,s){let i=e;let o;return"string"==typeof e&&(i={text:e}),i=Object.assign({visible:!0},s,i),i&&i.visible&&i.text&&(o=new t(i)),o}static orderTitles(t){const e=[].concat(t);const s=e.filter((t=>t&&t.options.position!==c));const i=e.filter((t=>t&&t.options.position===c));return js(s),js(i),i.reverse(),s.concat(i)}};function js(t){for(let e=1;e<t.length;e++){const s=t[e]._textBox;const i=t[e-1]._textBox;i.options.margin=Object.assign(yt(i.options.margin),{bottom:0}),s.options.margin=Object.assign(yt(s.options.margin),{top:0})}}te(Ns,{color:h,position:z,align:d,margin:yt(5),padding:yt(5)});class Us extends Hs{constructor(t,e,s,i,o){super(e,o),this.text=e,this.value=t,this.index=s,this.dataItem=i,this.reflow(new gs)}visualContext(t){const e=super.visualContext(t);return e.value=this.value,e.dataItem=this.dataItem,e.format=this.options.format,e.culture=this.options.culture,e}click(t,e){t.trigger(l,{element:Gt(e),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})}rotate(){if(this.options.alignRotation!==d){const t=this.normalBox.toRect();const e=this.rotationTransform();this.box=zs(t.bbox(e.matrix()))}else super.rotate();return this.box}rotationTransform(){const t=this.options;const s=t.rotation;if(!s)return null;if(t.alignRotation===d)return super.rotationTransform();const i=e.t().rotate(s).matrix();const o=this.normalBox.toRect();const n=this.targetBox.toRect();const r=t.rotationOrigin||z;const a=r===z||r===c?W:X;const l=r===z||r===c?X:W;const h=r===z||r===S?n.origin:n.bottomRight();const u=o.topLeft().transformCopy(i);const p=o.topRight().transformCopy(i);const g=o.bottomRight().transformCopy(i);const m=o.bottomLeft().transformCopy(i);const x=e.R.fromPoints(u,p,g,m);const y={[l]:n.origin[l]-x.origin[l]};const v=Math.abs(u[l]+y[l]-h[l]);const b=Math.abs(p[l]+y[l]-h[l]);let w,_;$t(v,f)===$t(b,f)?(w=u,_=p):b<v?(w=p,_=g):(w=u,_=m);const k=w[a]+(_[a]-w[a])/2;return y[a]=n.center()[a]-k,e.t().translate(y.x,y.y).rotate(s)}}te(Us,{_autoReflow:!1});class Gs extends Ps{constructor(t,e,s){super(e),this.fields=t,this.chartService=s,this.render()}hide(){this.options.visible=!1}show(){this.options.visible=!0}render(){const t=this.options;if(t.visible){const{label:e,icon:s}=t;const i=new gs;const o=()=>this;let n=s.size;let r=this.fields.text;let a,l;if(Ft(e)&&e.visible){const t=wt(e);t?r=t(this.fields):e.format&&(r=this.chartService.format.auto(e.format,r)),e.color||(e.color=e.position===k?"#fff":s.background),this.label=new Hs(r,ut({},e)),this.label.aliasFor=o,e.position!==k||Ft(n)||(s.type===u?n=Math.max(this.label.box.width(),this.label.box.height()):(a=this.label.box.width(),l=this.label.box.height()),i.wrap(this.label.box))}s.width=a||n||7,s.height=l||n||7;const h=new Es(ut({},s));h.aliasFor=o,this.marker=h,this.append(h),this.label&&this.append(this.label),h.reflow(new gs),this.wrapperBox=i.wrap(h.box)}}reflow(t){const{options:e,label:s,marker:i,wrapperBox:o}=this;const n=t.center();const r=e.line.length;const a=e.position;if(e.visible){let l,h,d;Mt(a,[S,B])?a===S?(d=o.alignTo(t,a).translate(-r,t.center().y-o.center().y),e.line.visible&&(l=[t.x1,n.y],this.linePoints=[l,[d.x2,n.y]],h=d.clone().wrapPoint(l))):(d=o.alignTo(t,a).translate(r,t.center().y-o.center().y),e.line.visible&&(l=[t.x2,n.y],this.linePoints=[l,[d.x1,n.y]],h=d.clone().wrapPoint(l))):a===c?(d=o.alignTo(t,a).translate(t.center().x-o.center().x,r),e.line.visible&&(l=[n.x,t.y2],this.linePoints=[l,[n.x,d.y1]],h=d.clone().wrapPoint(l))):(d=o.alignTo(t,a).translate(t.center().x-o.center().x,-r),e.line.visible&&(l=[n.x,t.y1],this.linePoints=[l,[n.x,d.y2]],h=d.clone().wrapPoint(l))),i&&i.reflow(d),s&&(s.reflow(d),i&&(e.label.position===R&&s.box.alignTo(i.box,a),s.reflow(s.box))),this.contentBox=d,this.targetBox=t,this.box=h||d}}createVisual(){super.createVisual(),this.visual.options.noclip=this.options.noclip,this.options.visible&&this.createLine()}renderVisual(){const t=this.options;const e=t.visual;t.visible&&e?(this.visual=e(Object.assign(this.fields,{sender:this.getSender(),rect:this.targetBox.toRect(),options:{background:t.background,border:t.background,icon:t.icon,label:t.label,line:t.line,position:t.position,visible:t.visible},createVisual:()=>{this.createVisual(),this.renderChildren();const t=this.visual;return delete this.visual,t}})),this.addVisual()):super.renderVisual()}createLine(){const t=this.options.line;if(this.linePoints){const s=e.a.fromPoints(this.linePoints,{stroke:{color:t.color,width:t.width,dashType:t.dashType}});et(s),this.visual.append(s)}}click(t,e){const s=this.eventArgs(e);t.trigger(M,s)||e.preventDefault()}over(t,e){const s=this.eventArgs(e);t.trigger(E,s)||e.preventDefault()}out(t,e){const s=this.eventArgs(e);t.trigger(L,s)}eventArgs(t){const e=this.options;return Object.assign(this.fields,{element:Gt(t),text:Ft(e.label)?e.label.text:"",visual:this.visual})}}te(Gs,{icon:{visible:!0,type:u},label:{position:k,visible:!0,align:d,vAlign:d},line:{visible:!0},visible:!0,position:z,zIndex:2});const Ws={format:(t,e)=>e,toString:t=>t,parseDate:t=>new Date(t),firstDay:()=>0};let Xs=Ws;class Ys{static register(t){Xs=t}static get implementation(){return Xs}}const qs=/\{(\d+)(:[^\}]+)?\}/g;class Zs{constructor(t){this._intlService=t}get intl(){return this._intlService||Ys.implementation}set intl(t){this._intlService=t}auto(t,...e){const s=this.intl;return ot(t)&&t.match(w)?s.format(t,...e):s.toString(e[0],t)}localeAuto(t,e,s){const i=this.intl;let o;return o=ot(t)&&t.match(w)?t.replace(qs,(function(t,o,n){let r=e[parseInt(o,10)];return i.toString(r,n?n.substring(1):"",s)})):i.toString(e[0],t,s),o}}class $s{constructor(t,e={}){this._intlService=e.intlService,this.sender=e.sender||t,this.format=new Zs(e.intlService),this.chart=t,this.rtl=Boolean(e.rtl)}get intl(){return this._intlService||Ys.implementation}set intl(t){this._intlService=t,this.format.intl=t}notify(t,e){this.chart&&this.chart.trigger(t,e)}isPannable(t){const e=((this.chart||{}).options||{}).pannable;return e&&e.lock!==t}}let Qs;class Ks{static register(t){Qs=t}static create(t,e){let s;return s=Qs?Qs.create(t,e):new ds(t,Object.assign({},{multiTouch:!0,touchAction:"manipulation"},e)),s}}var Js=Object.freeze({__proto__:null,ChartService:$s,DomEventsBuilder:Ks,FormatService:Zs,IntlService:Ys,TemplateService:bt});function ti(t,s){const{tickX:i,tickY:o,position:n}=t;const r=new e.a({stroke:{width:s.width,color:s.color}});return t.vertical?r.moveTo(i,n).lineTo(i+s.size,n):r.moveTo(n,o).lineTo(n,o+s.size),et(r),r}function ei(t,s){const{lineStart:i,lineEnd:o,position:n}=t;const r=new e.a({stroke:{width:s.width,color:s.color,dashType:s.dashType}});return t.vertical?r.moveTo(i,n).lineTo(o,n):r.moveTo(n,i).lineTo(n,o),et(r),r}class si extends bs{constructor(t,e=new $s){super(t),this.chartService=e,this.options.visible||(this.options=ut({},this.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),this.options.minorTicks=ut({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.minorTickType!==P},this.options.minorTicks,{size:this.options.minorTickSize,align:this.options.minorTickType}),this.options.majorTicks=ut({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.majorTickType!==P},this.options.majorTicks,{size:this.options.majorTickSize,align:this.options.majorTickType}),this.initFields(),this.options._deferLabels||this.createLabels(),this.createTitle(),this.createNotes()}initFields(){}labelsRange(){return{min:this.options.labels.skip,max:this.labelsCount()}}normalizeLabelRotation(t){const e=t.rotation;pt(e)&&(t.alignRotation=e.align,t.rotation=e.angle)}createLabels(){const t=this.options;const e=t.vertical?B:d;const s=ut({},t.labels,{align:e,zIndex:t.zIndex});const i=Math.max(1,s.step);if(this.clearLabels(),s.visible){this.normalizeLabelRotation(s),"auto"===s.rotation&&(s.rotation=0,t.autoRotateLabels=!0);const e=this.labelsRange();for(let t=e.min;t<e.max;t+=i){const i={index:t,count:e.max};let o=this.createAxisLabel(t,s,i);o&&(this.append(o),this.labels.push(o))}}}clearLabels(){this.children=Ct(this.children,(t=>!(t instanceof Us))),this.labels=[]}clearTitle(){this.title&&(this.children=Ct(this.children,(t=>t!==this.title)),this.title=void 0)}clear(){this.clearLabels(),this.clearTitle()}lineBox(){const{options:t,box:e}=this;const s=t.vertical;const i=t.labels.mirror;const o=i?e.x1:e.x2;const n=i?e.y2:e.y1;const r=t.line.width||0;return s?new gs(o,e.y1,o,e.y2-r):new gs(e.x1,n,e.x2-r,n)}createTitle(){const t=this.options;const e=ut({rotation:t.vertical?-90:0,text:"",zIndex:1,visualSize:!0},t.title);if(e.visible&&e.text){const t=new Hs(e.text,e);this.append(t),this.title=t}}createNotes(){const t=this.options;const e=t.notes;const s=e.data||[];this.notes=[];for(let i=0;i<s.length;i++){const o=ut({},e,s[i]);o.value=this.parseNoteValue(o.value);const n=new Gs({value:o.value,text:o.label.text,dataItem:o},o,this.chartService);n.options.visible&&(Ft(n.options.position)?t.vertical&&!Mt(n.options.position,[S,B])?n.options.position=t.reverse?S:B:t.vertical||Mt(n.options.position,[z,c])||(n.options.position=t.reverse?c:z):t.vertical?n.options.position=t.reverse?S:B:n.options.position=t.reverse?c:z,this.append(n),this.notes.push(n))}}parseNoteValue(t){return t}renderVisual(){super.renderVisual(),this.createPlotBands()}createVisual(){super.createVisual(),this.createBackground(),this.createLine()}gridLinesVisual(){let t=this._gridLines;return t||(t=this._gridLines=new e.G({zIndex:-2}),this.appendVisual(this._gridLines)),t}createTicks(t){const e=this.options;const s=this.lineBox();const i=e.labels.mirror;const o=e.majorTicks.visible?e.majorUnit:0;const n={vertical:e.vertical};function r(e,o,r){const a=e.length;const l=Math.max(1,o.step);if(o.visible)for(let h=o.skip;h<a;h+=l)Ft(r)&&h%r==0||(n.tickX=i?s.x2:s.x2-o.size,n.tickY=i?s.y1-o.size:s.y1,n.position=e[h],t.append(ti(n,o)))}r(this.getMajorTickPositions(),e.majorTicks),r(this.getMinorTickPositions(),e.minorTicks,o/e.minorUnit)}createLine(){const t=this.options;const s=t.line;const i=this.lineBox();if(s.width>0&&s.visible){const o=new e.a({stroke:{width:s.width,color:s.color,dashType:s.dashType}});o.moveTo(i.x1,i.y1).lineTo(i.x2,i.y2),t._alignLines&&et(o);const n=this._lineGroup=new e.G;n.append(o),this.visual.append(n),this.createTicks(n)}}getActualTickSize(){const t=this.options;let e=0;return t.majorTicks.visible&&t.minorTicks.visible?e=Math.max(t.majorTicks.size,t.minorTicks.size):t.majorTicks.visible?e=t.majorTicks.size:t.minorTicks.visible&&(e=t.minorTicks.size),e}createBackground(){const{options:t,box:s}=this;const i=t.background;i&&(this._backgroundPath=e.a.fromRect(s.toRect(),{fill:{color:i},stroke:null}),this.visual.append(this._backgroundPath))}createPlotBands(){const t=this.options;const s=t.plotBands||[];const i=t.vertical;const o=this.plotArea;if(0===s.length)return;const n=this._plotbandGroup=new e.G({zIndex:-1});const r=Ct(this.pane.axes,(t=>t.options.vertical!==this.options.vertical))[0];for(let t=0;t<s.length;t++){let a=s[t];let l,h;let c=a.label;let d;if(i?(l=(r||o.axisX).lineBox(),h=this.getSlot(a.from,a.to,!0)):(l=this.getSlot(a.from,a.to,!0),h=(r||o.axisY).lineBox()),c&&(c.vAlign=c.position||S,d=this.createPlotBandLabel(c,a,new gs(l.x1,h.y1,l.x2,h.y2))),0!==l.width()&&0!==h.height()){const t=new e.R([l.x1,h.y1],[l.width(),h.height()]);const s=e.a.fromRect(t,{fill:{color:a.color,opacity:a.opacity},stroke:null});n.append(s),d&&n.append(d)}}this.appendVisual(n)}createPlotBandLabel(t,e,s){if(!1===t.visible)return null;let i=t.text;let o;if(Ft(t)&&t.visible){const s=wt(t);s?i=s({text:i,item:e}):t.format&&(i=this.chartService.format.auto(t.format,i)),t.color||(t.color=this.options.labels.color)}return o=new Hs(i,t),o.reflow(s),o.renderVisual(),o.visual}createGridLines(t){const e=this.options;const{minorGridLines:s,majorGridLines:i,minorUnit:o,vertical:n}=e;const r=t.options.line.visible;const a=i.visible?e.majorUnit:0;const l=t.lineBox();const h=l[n?"y1":"x1"];const c={lineStart:l[n?"x1":"y1"],lineEnd:l[n?"x2":"y2"],vertical:n};const d=[];const u=this.gridLinesVisual();function p(t,e,s){const i=t.length;const o=Math.max(1,e.step);if(e.visible)for(let n=e.skip;n<i;n+=o){let i=$t(t[n]);Mt(i,d)||n%s==0||r&&h===i||(c.position=i,u.append(ei(c,e)),d.push(i))}}return p(this.getMajorTickPositions(),i),p(this.getMinorTickPositions(),s,a/o),u.children}reflow(t){const{options:e,labels:s,title:i}=this;const o=e.vertical;const n=s.length;const r=o?G:_;const a=i?i.box[r]():0;const l=this.getActualTickSize()+e.margin+a;const h=((this.getRoot()||{}).box||t)[r]();let c=0;for(let t=0;t<n;t++){let e=s[t].box[r]();e+l<=h&&(c=Math.max(c,e))}this.box=o?new gs(t.x1,t.y1,t.x1+c+l,t.y2):new gs(t.x1,t.y1,t.x2,t.y1+c+l),this.arrangeTitle(),this.arrangeLabels(),this.arrangeNotes()}getLabelsTickPositions(){return this.getMajorTickPositions()}labelTickIndex(t){return t.index}arrangeLabels(){const{options:t,labels:e}=this;const s=this.labelsBetweenTicks();const i=t.vertical;const o=t.labels.mirror;const n=this.getLabelsTickPositions();for(let t=0;t<e.length;t++){const r=e[t];const a=this.labelTickIndex(r);const l=i?r.box.height():r.box.width();const h=n[a];const c=n[a+1];let d,u;if(i){if(s){d=h+(c-h)/2-l/2}else d=h-l/2;u=d}else s?(d=h,u=c):(d=h-l/2,u=d+l);this.positionLabel(r,o,d,u)}}positionLabel(t,e,s,i=s){const o=this.options;const n=o.vertical;const r=this.lineBox();const a=this.getActualTickSize()+o.margin;let l;if(n){let i=r.x2;e?(i+=a,t.options.rotationOrigin=S):(i-=a+t.box.width(),t.options.rotationOrigin=B),l=t.box.move(i,s)}else{let o=r.y1;e?(o-=a+t.box.height(),t.options.rotationOrigin=c):(o+=a,t.options.rotationOrigin=z),l=new gs(s,o,i,o+t.box.height())}t.reflow(l)}autoRotateLabelAngle(t,e){return t.width()<e?0:t.height()>e?-90:-45}autoRotateLabels(){if(!this.options.autoRotateLabels||this.options.vertical)return!1;const t=this.getMajorTickPositions();const e=this.labels;const s=Math.min(e.length,t.length-1);let i=0;for(let o=0;o<s;o++){const s=Math.abs(t[o+1]-t[o]);const n=e[o].box;const r=this.autoRotateLabelAngle(n,s);if(0!==r&&(i=r),-90===i)break}if(0!==i){for(let t=0;t<e.length;t++)e[t].options.rotation=i,e[t].reflow(new gs);return!0}}arrangeTitle(){const{options:t,title:e}=this;const s=t.labels.mirror;const i=t.vertical;e&&(i?(e.options.align=s?B:S,e.options.vAlign=e.options.position):(e.options.align=e.options.position,e.options.vAlign=s?z:c),e.reflow(this.box))}arrangeNotes(){for(let t=0;t<this.notes.length;t++){const e=this.notes[t];const s=e.options.value;let i;Ft(s)?(this.shouldRenderNote(s)?e.show():e.hide(),i=this.noteSlot(s)):e.hide(),e.reflow(i||this.lineBox())}}noteSlot(t){return this.getSlot(t)}alignTo(t){const e=t.lineBox();const s=this.options.vertical;const i=s?X:W;this.box.snapTo(e,i),s?this.box.shrink(0,this.lineBox().height()-e.height()):this.box.shrink(this.lineBox().width()-e.width(),0),this.box[i+1]-=this.lineBox()[i+1]-e[i+1],this.box[i+2]-=this.lineBox()[i+2]-e[i+2]}axisLabelText(t,e,s){let i;const o=wt(e);const n=()=>e.format?this.chartService.format.localeAuto(e.format,[t],e.culture):t;if(o){i=o(Object.assign({},s,{get text(){return n()},value:t,format:e.format,culture:e.culture}))}else i=n();return i}slot(t,e,s){const i=this.getSlot(t,e,s);if(i)return i.toRect()}contentBox(){const t=this.box.clone();const e=this.labels;if(e.length){const s=this.options.vertical?X:W;if(this.chartService.isPannable(s)){const e=this.maxLabelOffset();t[s+1]-=e.start,t[s+2]+=e.end}else{e[0].options.visible&&t.wrap(e[0].box);const s=e[e.length-1];s.options.visible&&t.wrap(s.box)}}return t}maxLabelOffset(){const{vertical:t,reverse:e}=this.options;const s=this.labelsBetweenTicks();const i=this.getLabelsTickPositions();const o=t?X:W;const n=this.labels;const r=e?1:0;const a=e?0:1;let l=0;let h=0;for(let t=0;t<n.length;t++){const e=n[t];const c=this.labelTickIndex(e);let d,u;s?(d=i[c+r],u=i[c+a]):d=u=i[c],l=Math.max(l,d-e.box[o+1]),h=Math.max(h,e.box[o+2]-u)}return{start:l,end:h}}limitRange(t,e,s,i,o){const n=this.options;if(t<s&&o<0&&(!Ft(n.min)||n.min<=s)||i<e&&o>0&&(!Ft(n.max)||i<=n.max))return null;if(e<s&&o>0||i<t&&o<0)return{min:t,max:e};const r=e-t;let a=t;let l=e;return t<s&&o<0?(a=Yt(t,s,i),l=Yt(t+r,s+r,i)):e>i&&o>0&&(l=Yt(e,s,i),a=Yt(e-r,s,i-r)),{min:a,max:l}}valueRange(){return{min:this.seriesMin,max:this.seriesMax}}lineDir(){const{vertical:t,reverse:e}=this.options;return(t?-1:1)*(e?-1:1)}lineInfo(){const{vertical:t}=this.options;const e=this.lineBox();const s=t?e.height():e.width();const i=t?X:W;const o=this.lineDir();const n=i+(1===o?1:2).toString();return{axis:i,axisOrigin:n,axisDir:o,lineBox:e,lineSize:s,lineStart:e[n]}}pointOffset(t){const{axis:e,axisDir:s,axisOrigin:i,lineBox:o,lineSize:n}=this.lineInfo();return(s>0?t[e]-o[i]:o[i]-t[e])/n}scaleToDelta(t,e){const s=Yt(t,-.999,.999);let i;return i=s>0?e*Math.min(1,s):e-e/(1+s),i}labelsBetweenTicks(){return!this.options.justified}prepareUserOptions(){}}te(si,{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:h,visible:!0},title:{visible:!0,position:d},majorTicks:{align:R,size:4,skip:0,step:1},minorTicks:{align:R,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:R,minorTickType:P,majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:h,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0,_deferLabels:!1});const ii="milliseconds";const oi="seconds";const ni="minutes";const ri="hours";const ai="days";const li="weeks";const hi="months";const ci="years";const di=1e3;const ui=6e4;const pi=36e5;const gi=864e5;const mi=6048e5;const fi=26784e5;const xi=31536e6;const yi={years:xi,months:fi,weeks:mi,days:gi,hours:pi,minutes:ui,seconds:di,milliseconds:1};function vi(t,e){return t.getTime()-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ui}function bi(t,e){return new Date(t.getTime()+e)}function wi(t){let e;return t instanceof Date?e=t:t&&(e=new Date(t)),e}function _i(t,e=0){let s=0;let i=t.getDay();if(!isNaN(i))for(;i!==e;)0===i?i=6:i--,s++;return bi(t,-s*gi)}function ki(t,e){return 0===e&&23===t.getHours()&&(t.setHours(t.getHours()+2),!0)}function Ai(t,e,s,i){let o=t;if(t){let n=wi(t);const r=n.getHours();s===ci?(o=new Date(n.getFullYear()+e,0,1),ki(o,0)):s===hi?(o=new Date(n.getFullYear(),n.getMonth()+e,1),ki(o,r)):s===li?(o=Ai(_i(n,i),7*e,ai),ki(o,r)):s===ai?(o=new Date(n.getFullYear(),n.getMonth(),n.getDate()+e),ki(o,r)):s===ri?o=function(t,e){const s=new Date(t);s.setMinutes(0,0,0);const i=(t.getTimezoneOffset()-s.getTimezoneOffset())*ui;return bi(s,i+e*pi)}(n,e):s===ni?(o=bi(n,e*ui),o.getSeconds()>0&&o.setSeconds(0)):s===oi?o=bi(n,e*di):s===ii&&(o=bi(n,e)),s!==ii&&o.getMilliseconds()>0&&o.setMilliseconds(0)}return o}function Si(t,e,s){return Ai(wi(t),0,e,s)}function Ci(t,e,s){const i=wi(t);return i&&Si(i,e,s).getTime()===i.getTime()?i:Ai(i,1,e,s)}function Ti(t,e){return t&&e?t.getTime()-e.getTime():-1}function Pi(t,e){return t.getTime()-e}function Mi(t){if(Q(t)){let e=[];for(let s=0;s<t.length;s++)e.push(Mi(t[s]));return e}if(t)return wi(t).getTime()}function Ei(t,e){return t&&e?Mi(t)===Mi(e):t===e}function Li(t,e,s){return vi(t,e)/yi[s]}function Ii(t,e,s,i){const o=wi(t);const n=wi(e);let r;return r=s===hi?o.getMonth()-n.getMonth()+12*(o.getFullYear()-n.getFullYear())+Li(o,new Date(o.getFullYear(),o.getMonth()),ai)/new Date(o.getFullYear(),o.getMonth()+1,0).getDate():s===ci?o.getFullYear()-n.getFullYear()+Ii(o,new Date(o.getFullYear(),0),hi,1)/12:s===ai||s===li?Li(o,n,s):Pi(o,e)/yi[s],r/i}function Ri(t,e,s){let i;return i=s===ci?e.getFullYear()-t.getFullYear():s===hi?12*Ri(t,e,ci)+e.getMonth()-t.getMonth():s===ai?Math.floor(Pi(e,t)/gi):Math.floor(Pi(e,t)/yi[s]),i}function Bi(t,e){let s;return s=ot(e)&&t.parseDate(e)||wi(e),s}function Oi(t,e){if(Q(e)){const s=[];for(let i=0;i<e.length;i++)s.push(Bi(t,e[i]));return s}return Bi(t,e)}function Vi(t,e){return it(t.weekStartDay)?t.weekStartDay:e&&e.firstDay?e.firstDay():0}class Di extends si{initFields(){this._ticks={}}categoriesHash(){return""}clone(){const t=new Di(Object.assign({},this.options,{categories:this.options.srcCategories}),this.chartService);return t.createLabels(),t}initUserOptions(t){const e=t.categories||[];const s=void 0!==t.min;const i=void 0!==t.max;if(t.srcCategories=t.categories=e,(s||i)&&e.length){const o=s?Math.floor(t.min):0;let n;n=i?t.justified?Math.floor(t.max)+1:Math.ceil(t.max):e.length,t.categories=t.categories.slice(o,n)}return t}rangeIndices(){const t=this.options;const e=t.categories.length||1;const s=it(t.min)?t.min%1:0;let i;return i=it(t.max)&&t.max%1!=0&&t.max<this.totalRange().max?e-(1-t.max%1):e-(t.justified?1:0),{min:s,max:i}}range(){const t=this.options;return{min:it(t.min)?t.min:0,max:it(t.max)?t.max:this.totalRange().max}}roundedRange(){return this.range()}totalRange(){const t=this.options;return{min:0,max:Math.max(this._seriesMax||0,t.srcCategories.length)-(t.justified?1:0)}}scaleOptions(){const{min:t,max:e}=this.rangeIndices();const s=this.lineBox();return{scale:(this.options.vertical?s.height():s.width())/(e-t||1)*(this.options.reverse?-1:1),box:s,min:t,max:e}}arrangeLabels(){super.arrangeLabels(),this.hideOutOfRangeLabels()}hideOutOfRangeLabels(){const{box:t,labels:e}=this;if(e.length>0){const s=this.options.vertical?X:W;const i=t[s+1];const o=t[s+2];const n=e[0];const r=Xt(e);(n.box[s+1]>o||n.box[s+2]<i)&&(n.options.visible=!1),(r.box[s+1]>o||r.box[s+2]<i)&&(r.options.visible=!1)}}getMajorTickPositions(){return this.getTicks().majorTicks}getMinorTickPositions(){return this.getTicks().minorTicks}getLabelsTickPositions(){return this.getTicks().labelTicks}tickIndices(t){const{min:e,max:s}=this.rangeIndices();const i=Math.ceil(s);let o=Math.floor(e);const n=[];for(;o<=i;)n.push(o),o+=t;return n}getTickPositions(t){const{vertical:e,reverse:s}=this.options;const{scale:i,box:o,min:n}=this.scaleOptions();const r=o[(e?X:W)+(s?2:1)];const a=this.tickIndices(t);const l=[];for(let t=0;t<a.length;t++)l.push(r+$t(i*(a[t]-n),3));return l}getTicks(){const t=this.options;const e=this._ticks;const s=this.rangeIndices();const i=this.lineBox();const o=i.getHash()+s.min+","+s.max+t.reverse+t.justified;if(e._hash!==o){const s=t.minorTicks.visible||t.minorGridLines.visible;e._hash=o,e.labelTicks=this.getTickPositions(1),e.majorTicks=this.filterOutOfRangePositions(e.labelTicks,i),e.minorTicks=s?this.filterOutOfRangePositions(this.getTickPositions(.5),i):[]}return e}filterOutOfRangePositions(t,e){if(!t.length)return t;const s=this.options.vertical?X:W;const i=t=>e[s+1]<=t&&t<=e[s+2];const o=t.length-1;let n=0;for(;!i(t[n])&&n<=o;)n++;let r=o;for(;!i(t[r])&&r>=0;)r--;return t.slice(n,r+1)}lineInfo(){const{vertical:t,reverse:e}=this.options;const s=this.lineBox();const i=t?s.height():s.width();const o=t?X:W;const n=e?-1:1;const r=o+(1===n?1:2).toString();return{axis:o,axisOrigin:r,axisDir:n,lineBox:s,lineSize:i,lineStart:s[r]}}lineDir(){const{reverse:t}=this.options;return t?-1:1}getSlot(t,e,s){const i=this.options;const{reverse:o,justified:n}=i;const{scale:r,box:a,min:l}=this.scaleOptions();const{axis:h,lineStart:c}=this.lineInfo();const d=a.clone();const u=void 0===e;const p=Kt(t,0);let g=Kt(e,p);g=Math.max(g-1,p),g=Math.max(p,g);let m=c+(p-l)*r;let f=c+(g+1-l)*r;return u&&n&&(f=m),s&&(m=Yt(m,a[h+1],a[h+2]),f=Yt(f,a[h+1],a[h+2])),d[h+1]=o?f:m,d[h+2]=o?m:f,d}limitSlot(t){const e=this.options.vertical?X:W;const s=this.lineBox();const i=t.clone();return i[e+1]=Yt(t[e+1],s[e+1],s[e+2]),i[e+2]=Yt(t[e+2],s[e+1],s[e+2]),i}slot(t,e,s){const i=Math.floor(this.options.min||0);let o=t;let n=e;return"string"==typeof o?o=this.categoryIndex(o):it(o)&&(o-=i),"string"==typeof n?n=this.categoryIndex(n):it(n)&&(n-=i),super.slot(o,n,s)}pointCategoryIndex(t){const{reverse:e,justified:s,vertical:i}=this.options;const o=i?X:W;const{scale:n,box:r,min:a,max:l}=this.scaleOptions();const h=e?l:a;const c=r[o+1];const d=r[o+2];const u=t[o];if(u<c||u>d)return null;let p=h+(u-c)/n;const g=p%1;return s?p=Math.round(p):0===g&&p>0&&p--,Math.floor(p)}getCategory(t){const e=this.pointCategoryIndex(t);return null===e?null:this.options.categories[e]}categoryIndex(t){return this.totalIndex(t)-Math.floor(this.options.min||0)}categoryAt(t,e){const s=this.options;return(e?s.srcCategories:s.categories)[t]}categoriesCount(){return(this.options.categories||[]).length}translateRange(t){const e=this.options;const s=this.lineBox();const i=e.vertical?s.height():s.width();const o=e.categories.length;const n=$t(t/(i/o),f);return{min:n,max:o+n}}scaleRange(t,e){const s=Math.abs(this.pointOffset(e));const i=this.limitedRangeIndices();const o=i.max-i.min;const n=this.scaleToDelta(t,o);const r=s*n;const a=(1-s)*n;const l=i.min+r;let h=i.max-a;return h-l<.1&&(h=l+.1),{min:l,max:h}}zoomRange(t,e){const{min:s,max:i}=this.totalRange();const o=this.scaleRange(t,e);return{min:Yt(o.min,s,i),max:Yt(o.max,s,i)}}labelsCount(){const t=this.labelsRange();return t.max-t.min}labelsRange(){const t=this.options;const{justified:e,labels:s}=t;let{min:i,max:o}=this.limitedRangeIndices(!0);const n=Math.floor(i);let r;return e?(i=Math.ceil(i),o=Math.floor(o)):(i=Math.floor(i),o=Math.ceil(o)),r=i>s.skip?s.skip+s.step*Math.ceil((i-s.skip)/s.step):s.skip,{min:r-n,max:(t.categories.length?o+(e?1:0):0)-n}}createAxisLabel(t,e,s){const i=this.options;const o=i.dataItems?i.dataItems[t]:null;const n=Kt(i.categories[t],"");s.dataItem=o;const r=this.axisLabelText(n,e,s);return new Us(n,r,t,o,e)}shouldRenderNote(t){const e=this.limitedRangeIndices();return Math.floor(e.min)<=t&&t<=Math.ceil(e.max)}noteSlot(t){const e=this.options;const s=t-Math.floor(e.min||0);return this.getSlot(s)}arrangeNotes(){super.arrangeNotes(),this.hideOutOfRangeNotes()}hideOutOfRangeNotes(){const{notes:t,box:e}=this;if(t&&t.length){const s=this.options.vertical?X:W;const i=e[s+1];const o=e[s+2];for(let e=0;e<t.length;e++){const n=t[e];n.box&&(o<n.box[s+1]||n.box[s+2]<i)&&n.hide()}}}pan(t){const e=this.limitedRangeIndices(!0);const{scale:s}=this.scaleOptions();const i=$t(t/s,f);const o=this.totalRange();const n=e.min+i;const r=e.max+i;return this.limitRange(n,r,0,o.max,i)}pointsRange(t,e){const{reverse:s,vertical:i}=this.options;const o=i?X:W;const n=this.limitedRangeIndices(!0);const{scale:r,box:a}=this.scaleOptions();const l=a[o+(s?2:1)];const h=t[o]-l;const c=e[o]-l;const d=n.min+h/r;const u=n.min+c/r;const p=Math.min(d,u);const g=Math.max(d,u);if(g-p>=.01)return{min:p,max:g}}valueRange(){return this.range()}totalIndex(t){const e=this.options;const s=this._categoriesMap?this._categoriesMap.get(t):function(t,e){return t instanceof Date?e.findIndex((e=>Ei(e,t))):e.indexOf(t)}(t,e.srcCategories);return s}currentRangeIndices(){const t=this.options;let e=0;let s;return it(t.min)&&(e=Math.floor(t.min)),s=it(t.max)?t.justified?Math.floor(t.max):Math.ceil(t.max)-1:this.totalCount()-1,{min:e,max:s}}limitedRangeIndices(t){const e=this.options;let s=it(e.min)?e.min:0;let i;if(i=it(e.max)?e.max:it(e.min)?s+e.categories.length:this.totalRange().max||1,t){const t=this.totalRange();s=Yt(s,0,t.max),i=Yt(i,0,t.max)}return{min:s,max:i}}totalRangeIndices(){return{min:0,max:this.totalRange().max||1}}indexCategories(){if(!this._categoriesMap){const t=this._categoriesMap=new Pt;const e=this.options.srcCategories;for(let s=0;s<e.length;s++)t.set(e[s],s)}}totalCount(){return Math.max(this.options.srcCategories.length,this._seriesMax||0)}}te(Di,{type:"category",vertical:!1,majorGridLines:{visible:!1,width:1,color:h},labels:{zIndex:1},justified:!1,_deferLabels:!0});const zi=3e5;const Fi={milliseconds:"HH:mm:ss.fff",seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"};const Hi=[ii,oi,ni,ri,ai,li,hi,ci];const Ni="fit";function ji(t,e){e&&(t._range=void 0);let s=t._range;return s||(s=t._range=le(t),s.min=wi(s.min),s.max=wi(s.max)),s}class Ui{constructor(t){this.options=t}displayIndices(){return{min:0,max:1}}displayRange(){return{}}total(){return{}}valueRange(){return{}}valueIndex(){return-1}values(){return[]}totalIndex(){return-1}valuesCount(){return 0}totalCount(){return 0}dateAt(){return null}}class Gi{constructor(t,e,s){this.options=s,s.baseUnitStep=s.baseUnitStep||1;const{roundToBaseUnit:i,justified:o}=s;this.start=Ai(t,0,s.baseUnit,s.weekStartDay);const n=this.roundToTotalStep(e);const r=!o&&Ei(e,n)&&!s.justifyEnd;this.end=this.roundToTotalStep(e,!o,r?1:0);const a=s.min||t;this.valueStart=this.roundToTotalStep(a),this.displayStart=i?this.valueStart:a;const l=s.max;if(l){const t=!o&&Ei(l,this.roundToTotalStep(l))?-1:0;this.valueEnd=this.roundToTotalStep(l,!1,t),this.displayEnd=i?this.roundToTotalStep(l,!o):s.max}else this.valueEnd=n,this.displayEnd=i||r?this.end:e;this.valueEnd<this.valueStart&&(this.valueEnd=this.valueStart),this.displayEnd<=this.displayStart&&(this.displayEnd=this.roundToTotalStep(this.displayStart,!1,1))}displayRange(){return{min:this.displayStart,max:this.displayEnd}}displayIndices(){if(!this._indices){const t=this.options;const{baseUnit:e,baseUnitStep:s}=t;const i=Ii(this.displayStart,this.valueStart,e,s);const o=Ii(this.displayEnd,this.valueStart,e,s);this._indices={min:i,max:o}}return this._indices}total(){return{min:this.start,max:this.end}}totalCount(){return this.totalIndex(this.end)+(this.options.justified?1:0)}valueRange(){return{min:this.valueStart,max:this.valueEnd}}valueIndex(t){const e=this.options;return Math.floor(Ii(t,this.valueStart,e.baseUnit,e.baseUnitStep))}totalIndex(t){const e=this.options;return Math.floor(Ii(t,this.start,e.baseUnit,e.baseUnitStep))}dateIndex(t){const e=this.options;return Ii(t,this.valueStart,e.baseUnit,e.baseUnitStep)}valuesCount(){return this.valueIndex(this.valueEnd)+1}values(){let t=this._values;if(!t){const e=this.options;const s=this.valueRange();this._values=t=[];for(let i=s.min;i<=s.max;)t.push(i),i=Ai(i,e.baseUnitStep,e.baseUnit,e.weekStartDay)}return t}dateAt(t,e){const s=this.options;return Ai(e?this.start:this.valueStart,s.baseUnitStep*t,s.baseUnit,s.weekStartDay)}roundToTotalStep(t,e,s){const{baseUnit:i,baseUnitStep:o,weekStartDay:n}=this.options;const r=this.start;const a=Ii(t,r,i,o);let l=e?Math.ceil(a):Math.floor(a);return s&&(l+=s),Ai(r,l*o,i,n)}}function Wi(t,e,s){const i=ji(t.categories);const o=(t.max||i.max)-(t.min||i.min);const{autoBaseUnitSteps:n,maxDateGroups:r}=t;const a=t.baseUnit===Ni;let l=e?Hi.indexOf(e):0;let h=a?Hi[l++]:t.baseUnit;let c=o/yi[h];let d=c;let u,p,g;for(;!p||c>=r;){u=u||n[h].slice(0);do{g=u.shift()}while(g&&e===h&&g<s);if(g)p=g,c=d/p;else{if(h===Xt(Hi)){p=Math.ceil(d/r);break}if(!a){c>r&&(p=Math.ceil(d/r));break}h=Hi[l++]||Xt(Hi),d=o/yi[h],u=null}}t.baseUnitStep=p,t.baseUnit=h}function Xi(t){const e=(t.baseUnit||"").toLowerCase();return e!==Ni&&!Mt(e,Hi)&&function(t){const e=t.categories;const s=Ft(e)?e.length:0;let i=C;let o,n;for(let t=0;t<s;t++){const s=e[t];if(s&&o){let t=Math.abs(vi(s,o));0!==t&&(i=Math.min(i,t),n=i>=xi?ci:i>=24192e5?hi:i>=mi?li:i>=gi?ai:i>=pi?ri:i>=ui?ni:oi)}o=s}t.baseUnit=n||ai}(t),e!==Ni&&"auto"!==t.baseUnitStep||Wi(t),t}class Yi extends Di{clone(){const t=new Yi(Object.assign({},this.options),this.chartService);return t.createLabels(),t}categoriesHash(){const t=this.dataRange.total().min;return this.options.baseUnit+this.options.baseUnitStep+t}initUserOptions(t){return t}initFields(){super.initFields();const t=this.chartService;const e=t.intl;let s=this.options;let i=s.categories||[];if(i._parsed||(i=Oi(e,i),i._parsed=!0),s=ut({roundToBaseUnit:!0},s,{categories:i,min:Bi(e,s.min),max:Bi(e,s.max),weekStartDay:Vi(s,e)}),t.panning&&t.isPannable(s.vertical?X:W)&&(s.roundToBaseUnit=!1),s.userSetBaseUnit=s.userSetBaseUnit||s.baseUnit,s.userSetBaseUnitStep=s.userSetBaseUnitStep||s.baseUnitStep,this.options=s,s.srcCategories=i,i.length>0){const t=ji(i,!0);const e=s.maxDivisions;const o=Xi(s);const n=s._forecast;if(n&&(n.before>0&&(t.min=Ai(t.min,-n.before,o.baseUnit,o.weekStartDay)),n.after>0&&(t.max=Ai(t.max,n.after,o.baseUnit,o.weekStartDay))),this.dataRange=new Gi(t.min,t.max,o),e){const i=this.dataRange.displayRange();const o=Object.assign({},s,{justified:!0,roundToBaseUnit:!1,baseUnit:"fit",min:i.min,max:i.max,maxDateGroups:e});const n=this.dataRange.options;Wi(o,n.baseUnit,n.baseUnitStep),this.divisionRange=new Gi(t.min,t.max,o)}else this.divisionRange=this.dataRange}else s.baseUnit=s.baseUnit||ai,this.dataRange=this.divisionRange=new Ui(s);this.rangeLabels=[]}tickIndices(t){const{dataRange:e,divisionRange:s}=this;const i=s.valuesCount();if(!this.options.maxDivisions||!i)return super.tickIndices(t);const o=[];let n=s.values();let r=0;this.options.justified||(n=n.concat(s.dateAt(i)),r=.5);for(let s=0;s<n.length;s++)if(o.push(e.dateIndex(n[s])+r),1!==t&&s>=1){const e=o.length-1;o.splice(s,0,o[e-1]+(o[e]-o[e-1])*t)}return o}shouldRenderNote(t){const e=this.range();const s=this.options.categories||[];return Ti(t,e.min)>=0&&Ti(t,e.max)<=0&&s.length}parseNoteValue(t){return Bi(this.chartService.intl,t)}noteSlot(t){return this.getSlot(t)}translateRange(t){const e=this.options;const{baseUnit:s,weekStartDay:i,vertical:o}=e;const n=this.lineBox();const r=o?n.height():n.width();let a=this.range();const l=r/(a.max-a.min);const h=$t(t/l,f);if(a.min&&a.max){const t=bi(e.min||a.min,h);const o=bi(e.max||a.max,h);a={min:Ai(t,0,s,i),max:Ai(o,0,s,i)}}return a}labelsRange(){return{min:this.options.labels.skip,max:this.divisionRange.valuesCount()}}pan(t){if(this.isEmpty())return null;const e=this.options;const s=this.lineBox();const i=e.vertical?s.height():s.width();const{min:o,max:n}=this.dataRange.displayRange();const r=this.dataRange.total();const a=$t(t/(i/(n-o)),f)*(e.reverse?-1:1);const l=bi(o,a);const h=bi(n,a);const c=this.limitRange(Mi(l),Mi(h),Mi(r.min),Mi(r.max),a);return c?(c.min=wi(c.min),c.max=wi(c.max),c.baseUnit=e.baseUnit,c.baseUnitStep=e.baseUnitStep||1,c.userSetBaseUnit=e.userSetBaseUnit,c.userSetBaseUnitStep=e.userSetBaseUnitStep,c):void 0}pointsRange(t,e){if(this.isEmpty())return null;const s=super.pointsRange(t,e);const i=this.dataRange.displayRange();const o=this.dataRange.displayIndices();const n=Pi(i.max,i.min)/(o.max-o.min);const r=this.options;return{min:bi(i.min,s.min*n),max:bi(i.min,s.max*n),baseUnit:r.userSetBaseUnit||r.baseUnit,baseUnitStep:r.userSetBaseUnitStep||r.baseUnitStep}}scaleRange(t,e){if(this.isEmpty())return{};const s=this.options;const i=s.userSetBaseUnit===Ni;const o=this.dataRange.total();const{min:n,max:r}=this.dataRange.displayRange();const a=Math.abs(this.pointOffset(e));const l=r-n;const h=this.scaleToDelta(t,l);const c=Math.round(a*h);const d=Math.round((1-a)*h);let{baseUnit:u}=this.dataRange.options;let p=new Date(n.getTime()+c);let g=new Date(r.getTime()-d);if(i){const{autoBaseUnitSteps:t,maxDateGroups:e}=s;const i=Xt(t[u])*e*yi[u];const a=Pi(r,n);const l=Pi(g,p);let h=Hi.indexOf(u);let c,d;if(l<yi[u]&&u!==ii)u=Hi[h-1],c=Xt(t[u]),d=(a-(e-1)*c*yi[u])/2,p=bi(n,d),g=bi(r,-d);else if(l>i&&u!==ci){let e=0;do{h++,u=Hi[h],e=0,d=2*yi[u];do{c=t[u][e],e++}while(e<t[u].length&&d*c<a)}while(u!==ci&&d*c<a);d=(d*c-a)/2,d>0&&(p=bi(n,-d),g=bi(r,d),p=bi(p,Yt(g,o.min,o.max)-g),g=bi(g,Yt(p,o.min,o.max)-p))}}return p&&g&&Pi(g,p)>0?{min:p,max:g,baseUnit:s.userSetBaseUnit||s.baseUnit,baseUnitStep:s.userSetBaseUnitStep||s.baseUnitStep}:void 0}zoomRange(t,e){const s=this.dataRange.total();const i=this.scaleRange(t,e);return i&&(i.min<s.min&&(i.min=s.min),i.max>s.max&&(i.max=s.max)),i}range(){return this.dataRange.displayRange()}createLabels(){super.createLabels(),this.createRangeLabels()}clearLabels(){super.clearLabels(),this.rangeLabels=[]}arrangeLabels(){this.arrangeRangeLabels(),super.arrangeLabels()}arrangeRangeLabels(){const{options:t,rangeLabels:e}=this;if(0===e.length)return;const s=this.lineBox();const i=t.vertical;const o=t.rangeLabels.mirror||t.labels.mirror;const n=e[0];if(n){const t=i?s.y1-n.box.height()/2:s.x1;this.positionLabel(n,o,t)}const r=e[1];if(r){const t=i?s.y2-r.box.height()/2:s.x2;this.positionLabel(r,o,t)}}autoRotateLabels(){super.autoRotateLabels(),this.autoRotateRangeLabels()}hideOutOfRangeLabels(){super.hideOutOfRangeLabels(),this.hideOverlappingLabels()}hideOverlappingLabels(){const{rangeLabels:t,labels:e}=this;if(0===t.length)return;function s(t,e){return!(e.options.visible&&!e.box.overlaps(t.box))&&(e.options.visible=!1,!0)}const i=t[0];if(i&&i.options.visible)for(let t=0;t<e.length;t++){if(!s(i,e[t]))break}const o=t[1];if(o&&o.options.visible)for(let t=e.length-1;t>0;--t){if(!s(o,e[t]))break}}contentBox(){const t=super.contentBox();const e=this.rangeLabels;for(let s=0;s<e.length;s++){const i=e[s];i.options.visible&&t.wrap(i.box)}return t}createAxisLabel(t,e,s={}){const i=this.options;const o=i.dataItems&&!i.maxDivisions?i.dataItems[t]:null;const n=this.divisionRange.dateAt(t);const r=e.dateFormats[this.divisionRange.options.baseUnit];e.format=e.format||r,s.dataItem=o;const a=this.axisLabelText(n,e,s);if(a)return new Us(n,a,t,o,e)}createRangeLabels(){const{displayStart:t,displayEnd:e}=this.divisionRange;const s=this.options;const i=Object.assign({},s.labels,s.rangeLabels,{align:d,zIndex:s.zIndex});if(!0!==i.visible)return;this.normalizeLabelRotation(i),i.alignRotation=d,"auto"===i.rotation&&(i.rotation=0,s.autoRotateRangeLabels=!0);const o=i.dateFormats[this.divisionRange.options.baseUnit];i.format=i.format||o;const n=(t,e,s)=>{if(s){const o=new Us(e,s,t,null,i);this.append(o),this.rangeLabels.push(o)}};n(0,t,this.axisLabelText(t,i,{index:0,count:2}));n(1,e,this.axisLabelText(e,i,{index:1,count:2}))}autoRotateRangeLabels(){const t=this.rangeLabels;if(!this.options.autoRotateRangeLabels||this.options.vertical||2!==t.length)return;const e=(t,e,s)=>{const i=2*Math.abs(e[s+1]-e[s]);const o=this.autoRotateLabelAngle(t.box,i);0!==o&&(t.options.rotation=o,t.reflow(new gs))};const s=this.getMajorTickPositions();e(t[0],s,0),e(t[1],s,s.length-2)}categoryIndex(t){return this.dataRange.valueIndex(t)}slot(t,e,s){const i=this.dataRange;let o=t;let n=e;o instanceof Date&&(o=i.dateIndex(o)),n instanceof Date&&(n=i.dateIndex(n));const r=this.getSlot(o,n,s);if(r)return r.toRect()}getSlot(t,e,s){let i=t;let o=e;return typeof i===I&&(i=this.categoryIndex(i)),typeof o===I&&(o=this.categoryIndex(o)),super.getSlot(i,o,s)}valueRange(){const t=ji(this.options.srcCategories);return{min:wi(t.min),max:wi(t.max)}}categoryAt(t,e){return this.dataRange.dateAt(t,e)}categoriesCount(){return this.dataRange.valuesCount()}rangeIndices(){return this.dataRange.displayIndices()}labelsBetweenTicks(){return!this.divisionRange.options.justified}prepareUserOptions(){this.isEmpty()||(this.options.categories=this.dataRange.values())}getCategory(t){const e=this.pointCategoryIndex(t);return null===e?null:this.dataRange.dateAt(e)}totalIndex(t){return this.dataRange.totalIndex(t)}currentRangeIndices(){const t=this.dataRange.valueRange();return{min:this.dataRange.totalIndex(t.min),max:this.dataRange.totalIndex(t.max)}}totalRange(){return this.dataRange.total()}totalRangeIndices(){const t=this.dataRange.total();return{min:this.dataRange.totalIndex(t.min),max:this.dataRange.totalIndex(t.max)}}totalCount(){return this.dataRange.totalCount()}isEmpty(){return!this.options.srcCategories.length}roundedRange(){if(!1!==this.options.roundToBaseUnit||this.isEmpty())return this.range();const t=this.options;const e=ji(t.srcCategories);return new Gi(e.min,e.max,Object.assign({},t,{justified:!1,roundToBaseUnit:!0,justifyEnd:!1})).displayRange()}}function qi(t,e){return $t(Math.floor(t/e)*e,f)}function Zi(t,e){return $t(Math.ceil(t/e)*e,f)}function $i(t){return Math.max(Math.min(t,zi),-3e5)}te(Yi,{type:g,labels:{dateFormats:Fi},rangeLabels:{visible:!1},autoBaseUnitSteps:{milliseconds:[1,10,100],seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10});const Qi=Math.pow(10,-9);class Ki extends si{constructor(t,e,s,i){super(Object.assign({},s,{seriesMin:t,seriesMax:e}),i)}initUserOptions(t){const e=function(t,e,s){const i=s.narrowRange;let o=function(t,e,s){if(!t&&!e)return 0;let i;if(t>=0&&e>=0){const o=t===e?0:t;if(!1===s||!s&&(e-o)/e>.2)return 0;i=Math.max(0,o-(e-o)/2)}else i=t;return i}(t,e,i);let n=function(t,e,s){if(!t&&!e)return 1;let i;if(t<=0&&e<=0){const o=t===e?0:e;let n=Math.abs((o-t)/o);if(!1===s||!s&&n>.2)return 0;i=Math.min(0,o-(t-o)/2)}else i=e;return i}(t,e,i);const r=us(o,n);const a={majorUnit:r};!1!==s.roundToMajorUnit&&(o<0&&Ji(o,r,1/3)&&(o-=r),n>0&&Ji(n,r,1/3)&&(n+=r));return a.min=qi(o,r),a.max=Zi(n,r),a}(t.seriesMin,t.seriesMax,t);return this.totalOptions=function(t,e){return{min:Ft(e.min)?Math.min(t.min,e.min):t.min,max:Ft(e.max)?Math.max(t.max,e.max):t.max,majorUnit:t.majorUnit}}(e,t),function(t,e){let s=e;let i,o;if(e){!function(t,e){for(let s=0;s<e.length;s++){const i=e[s];null===t[i]&&(t[i]=void 0)}}(e,["min","max"]),i=Ft(e.min),o=Ft(e.max);const n=i||o;n&&e.min===e.max&&(e.min>0?e.min=0:e.max=1),e.majorUnit?(t.min=qi(t.min,e.majorUnit),t.max=Zi(t.max,e.majorUnit)):n&&(s=ut(t,e),t.majorUnit=us(s.min,s.max))}t.minorUnit=(s.majorUnit||t.majorUnit)/5;const n=ut(t,s);n.min>=n.max&&(i&&!o?n.max=n.min+n.majorUnit:!i&&o&&(n.min=n.max-n.majorUnit));return n}(e,t)}initFields(){this.totalMin=this.totalOptions.min,this.totalMax=this.totalOptions.max,this.totalMajorUnit=this.totalOptions.majorUnit,this.seriesMin=this.options.seriesMin,this.seriesMax=this.options.seriesMax}clone(){return new Ki(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)}startValue(){return 0}range(){const t=this.options;return{min:t.min,max:t.max}}getDivisions(t){if(0===t)return 1;const e=this.options;const s=e.max-e.min;return Math.floor($t(s/t,3))+1}getTickPositions(t,e){const s=this.options;const{axisDir:i,axisOrigin:o,lineBox:n,lineSize:r}=this.lineInfo();const a=t*(r/(s.max-s.min));const l=this.getDivisions(t);const h=[];let c=n[o];let d=0;e&&(d=e/t);for(let t=0;t<l;t++)t%d!=0&&h.push($t(c,3)),c+=a*i;return h}getMajorTickPositions(){return this.getTickPositions(this.options.majorUnit)}getMinorTickPositions(){return this.getTickPositions(this.options.minorUnit)}getSlot(t,e,s=!1){const i=this.options;const{axis:o,axisDir:n,lineBox:r,lineSize:a,lineStart:l}=this.lineInfo();const h=n*(a/(i.max-i.min));let c=Kt(t,e||0);let d=Kt(e,t||0);s&&(c=Yt(c,i.min,i.max),d=Yt(d,i.min,i.max));const u=Math.min(c,d)-i.min;const p=Math.max(c,d)-i.min;const g=new gs(r.x1,r.y1,r.x1,r.y1);return g[o+1]=$i(l+h*(n>0?u:p)),g[o+2]=$i(l+h*(n>0?p:u)),g}getValue(t){const e=this.options;const s=Number(e.max);const i=Number(e.min);const o=this.pointOffset(t);if(o<0||o>1)return null;return $t(i+o*(s-i),f)}translateRange(t){const e=this.options;const{vertical:s,reverse:i,max:o,min:n}=e;const{lineSize:r}=this.lineInfo();let a=$t(t/(r/(o-n)),f);return!s&&!i||s&&i||(a=-a),{min:n+a,max:o+a,offset:a}}labelsCount(){return this.getDivisions(this.options.majorUnit)}createAxisLabel(t,e,s){const i=this.options;const o=$t(i.min+t*i.majorUnit,f);const n=this.axisLabelText(o,e,s);return new Us(o,n,t,null,e)}shouldRenderNote(t){const e=this.range();return e.min<=t&&t<=e.max}pan(t){const e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)}pointsRange(t,e){const s=this.getValue(t);const i=this.getValue(e);const o=Math.min(s,i);const n=Math.max(s,i);if(this.isValidRange(o,n))return{min:o,max:n}}scaleRange(t,e){const s=Math.abs(this.pointOffset(e));const i=this.options.max-this.options.min;const o=this.scaleToDelta(t,i);const n=s*o;const r=(1-s)*o;const a=$t(this.options.min+n,f);let l=$t(this.options.max-r,f);return l-a<Qi&&(l=a+Qi),{min:a,max:l}}zoomRange(t,e){const{totalMin:s,totalMax:i}=this;const o=this.scaleRange(t,e);return{min:Yt(o.min,s,i),max:Yt(o.max,s,i),narrowRange:!1}}isValidRange(t,e){return e-t>Qi}}function Ji(t,e,s){const i=$t(Math.abs(t%e),f);return 0===i||i>e*(1-s)}te(Ki,{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:h},labels:{format:"#.####################"},zIndex:1});class to extends si{constructor(t,e,s,i){const o=wi(t);const n=wi(e);const r=i.intl;let a=s||{};a=ut(a||{},{min:Bi(r,a.min),max:Bi(r,a.max),axisCrossingValue:Oi(r,a.axisCrossingValues||a.axisCrossingValue),weekStartDay:Vi(a,r)}),a=function(t,e,s){const i=s.min||t;const o=s.max||e;const n=s.baseUnit||(o&&i?function(t){let e=ri;t>=xi?e=ci:t>=fi?e=hi:t>=mi?e=li:t>=gi&&(e=ai);return e}(vi(o,i)):ri);const r=yi[n];const a=s.weekStartDay||0;const l=Si(Mi(i)-1,n,a)||wi(o);const h=Ci(Mi(o)+1,n,a);const c=s.majorUnit?s.majorUnit:void 0;const d=c||Zi(us(l.getTime(),h.getTime()),r)/r;const u=Ri(l,h,n);const p=Zi(u,d)-u;const g=Math.floor(p/2);const m=p-g;s.baseUnit||delete s.baseUnit;return s.baseUnit=s.baseUnit||n,s.min=s.min||Ai(l,-g,n,a),s.max=s.max||Ai(h,m,n,a),s.minorUnit=s.minorUnit||d/5,s.majorUnit=d,s}(o,n,a),super(a,i),this.intlService=r,this.seriesMin=o,this.seriesMax=n;const l=a.weekStartDay||0;this.totalMin=Mi(Si(Mi(o)-1,a.baseUnit,l)),this.totalMax=Mi(Ci(Mi(n)+1,a.baseUnit,l))}clone(){return new to(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)}range(){const t=this.options;return{min:t.min,max:t.max}}getDivisions(t){const e=this.options;return Math.floor(Ri(e.min,e.max,e.baseUnit)/t+1)}getTickPositions(t){const e=this.options;const{axisDir:s,lineSize:i,lineStart:o}=this.lineInfo();const n=this.getDivisions(t);const r=i/Pi(e.max,e.min);const a=e.weekStartDay||0;const l=[o];for(let i=1;i<n;i++){const n=o+Pi(Ai(e.min,i*t,e.baseUnit,a),e.min)*r*s;l.push($t(n,3))}return l}getMajorTickPositions(){return this.getTickPositions(this.options.majorUnit)}getMinorTickPositions(){return this.getTickPositions(this.options.minorUnit)}getSlot(t,e,s){return Ki.prototype.getSlot.call(this,Bi(this.intlService,t),Bi(this.intlService,e),s)}getValue(t){const e=Ki.prototype.getValue.call(this,t);return null!==e?wi(e):null}labelsCount(){return this.getDivisions(this.options.majorUnit)}createAxisLabel(t,e,s){const i=this.options;const o=t*i.majorUnit;const n=i.weekStartDay||0;let r=i.min;o>0&&(r=Ai(r,o,i.baseUnit,n));const a=e.dateFormats[i.baseUnit];e.format=e.format||a;const l=this.axisLabelText(r,e,s);return new Us(r,l,t,null,e)}translateRange(t){const e=this.options;const s=this.lineBox();const{vertical:i,reverse:o}=e;const n=i?s.height():s.width();const r=this.range();const a=n/Pi(r.max,r.min);let l=$t(t/a,f);return!i&&!o||i&&o||(l=-l),{min:bi(e.min,l),max:bi(e.max,l),offset:l}}shouldRenderNote(t){const e=this.range();return Ti(t,e.min)>=0&&Ti(t,e.max)<=0}pan(t){const e=this.translateRange(t,!0);const s=this.limitRange(Mi(e.min),Mi(e.max),this.totalMin,this.totalMax,e.offset);if(s)return{min:wi(s.min),max:wi(s.max)}}pointsRange(t,e){const s=this.getValue(t);const i=this.getValue(e);const o=Math.min(s,i);const n=Math.max(s,i);return{min:wi(o),max:wi(n)}}scaleRange(t,e){const s=Math.abs(this.pointOffset(e));const i=this.options.max-this.options.min;const o=this.scaleToDelta(t,i);const n=s*o;const r=(1-s)*o;const a=wi(Mi(this.options.min)+n);let l=wi(Mi(this.options.max)-r);return l-a<1e3&&(l=wi(Mi(a)+1e3)),{min:a,max:l}}zoomRange(t,e){const s=this.scaleRange(t,e);return{min:wi(Yt(Mi(s.min),this.totalMin,this.totalMax)),max:wi(Yt(Mi(s.max),this.totalMin,this.totalMax))}}}te(to,{type:g,majorGridLines:{visible:!0,width:1,color:h},labels:{dateFormats:Fi}});const eo=1e-6;class so extends si{constructor(t,e,s,i){const o=ut({majorUnit:10,min:t,max:e},s);const n=o.majorUnit;const r=function(t,e){const s=$t(oo(t,e),f)%1;let i;i=t<=0?e:0!==s&&(s<.3||s>.9)?Math.pow(e,oo(t,e)+.2):Math.pow(e,Math.ceil(oo(t,e)));return i}(e,n);const a=function(t,e,s){const i=s.majorUnit;let o=t;t<=0?o=e<=1?Math.pow(i,-2):1:s.narrowRange||(o=Math.pow(i,Math.floor(oo(t,i))));return o}(t,e,o);const l=function(t,e,s,i){let{min:o,max:n}=s;Ft(s.axisCrossingValue)&&s.axisCrossingValue<=0&&io();Ft(i.max)?i.max<=0&&io():n=e;Ft(i.min)?i.min<=0&&io():o=t;return{min:o,max:n}}(a,r,o,s);o.max=l.max,o.min=l.min,o.minorUnit=s.minorUnit||$t(n-1,f),super(o,i),this.totalMin=Ft(s.min)?Math.min(a,s.min):a,this.totalMax=Ft(s.max)?Math.max(r,s.max):r,this.logMin=$t(oo(l.min,n),f),this.logMax=$t(oo(l.max,n),f),this.seriesMin=t,this.seriesMax=e,this.createLabels()}clone(){return new so(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)}startValue(){return this.options.min}getSlot(t,e,s){const{options:i,logMin:o,logMax:n}=this;const{majorUnit:r,min:a,max:l}=i;const{axis:h,axisDir:c,lineBox:d,lineSize:u,lineStart:p}=this.lineInfo();const g=c*(u/(n-o));let m=Kt(t,e||1);let f=Kt(e,t||1);if(m<=0||f<=0)return null;s&&(m=Yt(m,a,l),f=Yt(f,a,l)),m=oo(m,r),f=oo(f,r);const x=Math.min(m,f)-o;const y=Math.max(m,f)-o;const v=new gs(d.x1,d.y1,d.x1,d.y1);return v[h+1]=$i(p+g*(c>0?x:y)),v[h+2]=$i(p+g*(c>0?y:x)),v}getValue(t){const{options:e,logMin:s,logMax:i}=this;const{majorUnit:o}=e;const{axis:n,axisDir:r,lineStart:a,lineSize:l}=this.lineInfo();const h=(i-s)/l;const c=r*(t[n]-a);if(c<0||c>l)return null;const d=s+c*h;return $t(Math.pow(o,d),f)}range(){const t=this.options;return{min:t.min,max:t.max}}translateRange(t){const{options:e,logMin:s,logMax:i}=this;const{reverse:o,vertical:n,majorUnit:r}=e;const a=this.lineBox();const l=n?a.height():a.width();let h=$t(t/(l/(i-s)),f);return!n&&!o||n&&o||(h=-h),{min:Math.pow(r,s+h),max:Math.pow(r,i+h),offset:h}}labelsCount(){const t=Math.floor(this.logMax);return Math.floor(t-this.logMin)+1}getMajorTickPositions(){const t=[];return this.traverseMajorTicksPositions((e=>{t.push(e)}),{step:1,skip:0}),t}createTicks(t){const e=this.options;const{majorTicks:s,minorTicks:i,vertical:o}=e;const n=e.labels.mirror;const r=this.lineBox();const a={vertical:o};function l(e,s){a.tickX=n?r.x2:r.x2-s.size,a.tickY=n?r.y1-s.size:r.y1,a.position=e,t.append(ti(a,s))}return s.visible&&this.traverseMajorTicksPositions(l,s),i.visible&&this.traverseMinorTicksPositions(l,i),[]}createGridLines(t){const e=this.options;const{minorGridLines:s,majorGridLines:i,vertical:o}=e;const n=t.lineBox();const r={lineStart:n[o?"x1":"y1"],lineEnd:n[o?"x2":"y2"],vertical:o};const a=[];const l=this.gridLinesVisual();function h(t,e){Mt(t,a)||(r.position=t,l.append(ei(r,e)),a.push(t))}return i.visible&&this.traverseMajorTicksPositions(h,i),s.visible&&this.traverseMinorTicksPositions(h,s),l.children}traverseMajorTicksPositions(t,e){const{lineStart:s,step:i}=this.lineInfo();const{logMin:o,logMax:n}=this;for(let r=Math.ceil(o)+e.skip;r<=n;r+=e.step){t($t(s+i*(r-o),f),e)}}traverseMinorTicksPositions(t,e){const{min:s,max:i,minorUnit:o,majorUnit:n}=this.options;const{lineStart:r,step:a}=this.lineInfo();const{logMin:l,logMax:h}=this;for(let c=Math.floor(l);c<h;c++){const h=this._minorIntervalOptions(c);for(let c=e.skip;c<o;c+=e.step){const o=h.value+c*h.minorStep;if(o>i)break;if(o>=s){t($t(r+a*(oo(o,n)-l),f),e)}}}}createAxisLabel(t,e,s){const i=Math.ceil(this.logMin+t);const o=Math.pow(this.options.majorUnit,i);const n=this.axisLabelText(o,e,s);return new Us(o,n,t,null,e)}shouldRenderNote(t){const e=this.range();return e.min<=t&&t<=e.max}pan(t){const e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)}pointsRange(t,e){const s=this.getValue(t);const i=this.getValue(e);return{min:Math.min(s,i),max:Math.max(s,i)}}scaleRange(t,e){const{majorUnit:s}=this.options;const i=oo(this.options.min,s);const o=oo(this.options.max,s);const n=Math.abs(this.pointOffset(e));const r=o-i;const a=this.scaleToDelta(t,r);const l=Math.pow(s,i+n*a);let h=Math.pow(s,o-(1-n)*a);return h-l<eo&&(h=l+eo),{min:l,max:h}}zoomRange(t,e){const s=this.scaleRange(t,e);const{totalMin:i,totalMax:o}=this;return{min:Yt(s.min,i,o),max:Yt(s.max,i,o)}}_minorIntervalOptions(t){const{minorUnit:e,majorUnit:s}=this.options;const i=Math.pow(s,t);return{value:i,minorStep:(Math.pow(s,t+1)-i)/e}}lineInfo(){const t=super.lineInfo();return t.step=t.axisDir*(t.lineSize/(this.logMax-this.logMin)),t}}function io(){throw new Error("Non positive values cannot be used for a logarithmic axis")}function oo(t,e){return Math.log(t)/Math.log(e)}te(so,{type:"log",majorUnit:10,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:h},zIndex:1,_deferLabels:!0});const no={createGridLines:function(t){const e=this.options;const s=Math.abs(this.box.center().y-t.lineBox().y1);let i=[];let o=!1;let n,r;return e.majorGridLines.visible&&(n=this.majorGridLineAngles(t),o=!0,i=this.renderMajorGridLines(n,s,e.majorGridLines)),e.minorGridLines.visible&&(r=this.minorGridLineAngles(t,o),Dt(i,this.renderMinorGridLines(r,s,e.minorGridLines,t,o))),i},renderMajorGridLines:function(t,e,s){return this.renderGridLines(t,e,s)},renderMinorGridLines:function(t,e,s,i,o){const n=this.radiusCallback&&this.radiusCallback(e,i,o);return this.renderGridLines(t,e,s,n)},renderGridLines:function(t,s,i,o){const n={stroke:{width:i.width,color:i.color,dashType:i.dashType}};const r=this.box.center();const a=new e.f([r.x,r.y],s);const l=this.gridLinesVisual();for(let s=0;s<t.length;s++){const i=new e.a(n);o&&(a.radius=o(t[s])),i.moveTo(a.center).lineTo(a.pointAt(t[s]+180)),l.append(i)}return l.children},gridLineAngles:function(t,e,s,i,o){const n=this.intervals(e,s,i,o);const r=t.options;const a=r.visible&&!1!==(r.line||{}).visible;return Bt(n,(t=>{const e=this.intervalAngle(t);if(!a||90!==e)return e}))}};class ro extends Di{range(){return{min:0,max:this.options.categories.length}}reflow(t){this.box=t,this.reflowLabels()}lineBox(){return this.box}reflowLabels(){const{labels:t,options:{labels:e}}=this;const s=e.skip||0;const i=e.step||1;const o=new gs;for(let e=0;e<t.length;e++){t[e].reflow(o);const n=t[e].box;t[e].reflow(this.getSlot(s+e*i).adjacentBox(0,n.width(),n.height()))}}intervals(t,e,s,i=!1){const o=this.options;const n=o.categories.length/t||1;const r=360/n;const a=s||1;const l=[];let h=0;for(let t=e||0;t<n;t+=a)h=o.reverse?360-t*r:t*r,h=$t(h,3)%360,i&&Mt(h,i)||l.push(h);return l}majorIntervals(){return this.intervals(1)}minorIntervals(){return this.intervals(.5)}intervalAngle(t){return(360+t+this.options.startAngle)%360}majorAngles(){return Bt(this.majorIntervals(),(t=>this.intervalAngle(t)))}createLine(){return[]}majorGridLineAngles(t){const e=this.options.majorGridLines;return this.gridLineAngles(t,1,e.skip,e.step)}minorGridLineAngles(t,e){const{minorGridLines:s,majorGridLines:i}=this.options;const o=e?this.intervals(1,i.skip,i.step):null;return this.gridLineAngles(t,.5,s.skip,s.step,o)}radiusCallback(t,e,i){if(e.options.type!==s){const e=Zt(360/(2*this.options.categories.length));const s=Math.cos(e)*t;const o=this.majorAngles();return function(e){return!i&&Mt(e,o)?t:s}}}createPlotBands(){const t=this.options.plotBands||[];const s=this._plotbandGroup=new e.G({zIndex:-1});for(let e=0;e<t.length;e++){const i=t[e];const o=this.plotBandSlot(i);const n=this.getSlot(i.from);const r=i.from-Math.floor(i.from);o.startAngle+=r*n.angle;const a=Math.ceil(i.to)-i.to;o.angle-=(a+r)*n.angle;const l=vs.current.createRing(o,{fill:{color:i.color,opacity:i.opacity},stroke:{opacity:i.opacity}});s.append(l)}this.appendVisual(s)}plotBandSlot(t){return this.getSlot(t.from,t.to-1)}getSlot(t,e){const s=this.options;const i=s.justified;const o=this.box;const n=this.majorAngles();const r=n.length;const a=360/r;let l=t;s.reverse&&!i&&(l=(l+1)%r),l=Yt(Math.floor(l),0,r-1);let h=n[l];i&&(h-=a/2,h<0&&(h+=360));const c=a*(Yt(Math.ceil(e||l),l,r-1)-l+1);return new fs(o.center(),0,o.height()/2,h,c)}slot(t,s){const i=this.getSlot(t,s);const o=i.startAngle+180;const n=o+i.angle;return new e.A([i.center.x,i.center.y],{startAngle:o,endAngle:n,radiusX:i.radius,radiusY:i.radius})}pointCategoryIndex(t){const e=this.options.categories.length;let s=null;for(let i=0;i<e;i++){if(this.getSlot(i).containsPoint(t)){s=i;break}}return s}}te(ro,{startAngle:90,labels:{margin:yt(10)},majorGridLines:{visible:!0},justified:!0}),ut(ro.prototype,no);class ao extends si{constructor(t,e){super(t,e);const s=this.options;s.minorUnit=s.minorUnit||s.majorUnit/2}getDivisions(t){return Ki.prototype.getDivisions.call(this,t)-1}reflow(t){this.box=t,this.reflowLabels()}reflowLabels(){const{options:t,labels:e,options:{labels:s}}=this;const i=s.skip||0;const o=s.step||1;const n=new gs;const r=this.intervals(t.majorUnit,i,o);for(let t=0;t<e.length;t++){e[t].reflow(n);const s=e[t].box;e[t].reflow(this.getSlot(r[t]).adjacentBox(0,s.width(),s.height()))}}lineBox(){return this.box}intervals(t,e,s,i=!1){const o=this.options.min;const n=this.getDivisions(t);const r=[];const a=s||1;for(let s=e||0;s<n;s+=a){const e=(360+o+s*t)%360;i&&Mt(e,i)||r.push(e)}return r}majorIntervals(){return this.intervals(this.options.majorUnit)}minorIntervals(){return this.intervals(this.options.minorUnit)}intervalAngle(t){return(540-t-this.options.startAngle)%360}createLine(){return[]}majorGridLineAngles(t){const e=this.options.majorGridLines;return this.gridLineAngles(t,this.options.majorUnit,e.skip,e.step)}minorGridLineAngles(t,e){const s=this.options;const{minorGridLines:i,majorGridLines:o}=s;const n=e?this.intervals(s.majorUnit,o.skip,o.step):null;return this.gridLineAngles(t,s.minorUnit,i.skip,i.step,n)}plotBandSlot(t){return this.getSlot(t.from,t.to)}getSlot(t,e){const{options:s,box:i}=this;const o=s.startAngle;let n=Yt(t,s.min,s.max);let r=Yt(e||n,n,s.max);if(s.reverse&&(n*=-1,r*=-1),n=(540-n-o)%360,r=(540-r-o)%360,r<n){const t=n;n=r,r=t}return new fs(i.center(),0,i.height()/2,n,r-n)}slot(t,s=t){const i=this.options;const o=360-i.startAngle;const n=this.getSlot(t,s);const r=Math.min(t,s);const a=Math.max(t,s);let l,h;return i.reverse?(l=r,h=a):(l=360-a,h=360-r),l=(l+o)%360,h=(h+o)%360,new e.A([n.center.x,n.center.y],{startAngle:l,endAngle:h,radiusX:n.radius,radiusY:n.radius})}getValue(t){const e=this.options;const s=this.box.center();const i=t.x-s.x;const o=t.y-s.y;let n=Math.round(Ht(Math.atan2(o,i)));let r=e.startAngle;return e.reverse||(n*=-1,r*=-1),(n+r+360)%360}valueRange(){return{min:0,max:2*Math.PI}}}te(ao,{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:yt(10)},majorGridLines:{color:h,visible:!0,width:1},minorGridLines:{color:"#aaa"}}),ut(ao.prototype,no,{createPlotBands:ro.prototype.createPlotBands,majorAngles:ro.prototype.majorAngles,range:Ki.prototype.range,labelsCount:Ki.prototype.labelsCount,createAxisLabel:Ki.prototype.createAxisLabel});const lo={options:{majorGridLines:{visible:!0}},createPlotBands:function(){const{majorGridLines:{type:t},plotBands:i=[]}=this.options;const o=this.plotArea.polarAxis;const n=o.majorAngles();const r=o.box.center();const a=this._plotbandGroup=new e.G({zIndex:-1});for(let o=0;o<i.length;o++){const l=i[o];const h={fill:{color:l.color,opacity:l.opacity},stroke:{opacity:l.opacity}};const c=this.getSlot(l.from,l.to,!0);const d=new fs(r,r.y-c.y2,r.y-c.y1,0,360);let u;u=t===s?vs.current.createRing(d,h):e.a.fromPoints(this.plotBandPoints(d,n),h).close(),a.append(u)}this.appendVisual(a)},plotBandPoints:function(t,s){const i=[];const o=[];const n=[t.center.x,t.center.y];const r=new e.f(n,t.innerRadius);const a=new e.f(n,t.radius);for(let t=0;t<s.length;t++)i.push(r.pointAt(s[t]+180)),o.push(a.pointAt(s[t]+180));return i.reverse(),i.push(i[0]),o.push(o[0]),o.concat(i)},createGridLines:function(t){const e=this.options;const s=this.radarMajorGridLinePositions();const i=t.majorAngles();const o=t.box.center();let n=[];if(e.majorGridLines.visible&&(n=this.renderGridLines(o,s,i,e.majorGridLines)),e.minorGridLines.visible){const t=this.radarMinorGridLinePositions();Dt(n,this.renderGridLines(o,t,i,e.minorGridLines))}return n},renderGridLines:function(t,i,o,n){const r={stroke:{width:n.width,color:n.color,dashType:n.dashType}};const{skip:a=0,step:l=0}=n;const h=this.gridLinesVisual();for(let c=a;c<i.length;c+=l){const a=t.y-i[c];if(a>0){const i=new e.f([t.x,t.y],a);if(n.type===s)h.append(new e.e(i,r));else{const t=new e.a(r);for(let e=0;e<o.length;e++)t.lineTo(i.pointAt(o[e]+180));t.close(),h.append(t)}}}return h.children},getValue:function(t){const e=this.lineBox();const i=this.plotArea.polarAxis;const o=i.majorAngles();const n=i.box.center();const r=t.distanceTo(n);let a=r;if(this.options.majorGridLines.type!==s&&o.length>1){const e=t.x-n.x;const s=t.y-n.y;const i=(Ht(Math.atan2(s,e))+540)%360;o.sort((function(t,e){return ho(t,i)-ho(e,i)}));const l=90-ho(o[0],o[1])/2;const h=180-ho(i,o[0])-l;a=r*(Math.sin(Zt(h))/Math.sin(Zt(l)))}return this.axisType().prototype.getValue.call(this,new ps(e.x1,e.y2-a))}};function ho(t,e){return 180-Math.abs(Math.abs(t-e)-180)}class co extends Ki{radarMajorGridLinePositions(){return this.getTickPositions(this.options.majorUnit)}radarMinorGridLinePositions(){const t=this.options;let e=0;return t.majorGridLines.visible&&(e=t.majorUnit),this.getTickPositions(t.minorUnit,e)}axisType(){return Ki}}ut(co.prototype,lo);class uo extends so{radarMajorGridLinePositions(){const t=[];return this.traverseMajorTicksPositions((function(e){t.push(e)}),this.options.majorGridLines),t}radarMinorGridLinePositions(){const t=[];return this.traverseMinorTicksPositions((function(e){t.push(e)}),this.options.minorGridLines),t}axisType(){return so}}ut(uo.prototype,lo);class po{constructor(t){this.closed=t}process(t){const s=t.slice(0);const i=[];let o=this.closed;let n=s.length;if(n>2&&(this.removeDuplicates(0,s),n=s.length),n<2||2===n&&s[0].equals(s[1]))return i;let r=s[0];let a=s[1];let l=s[2];for(i.push(new e.S(r));r.equals(s[n-1]);)o=!0,s.pop(),n--;if(2===n){const t=this.tangent(r,a,W,X);return Xt(i).controlOut(this.firstControlPoint(t,r,a,W,X)),i.push(new e.S(a,this.secondControlPoint(t,r,a,W,X))),i}let h,c;if(o){r=s[n-1],a=s[0],l=s[1];const t=this.controlPoints(r,a,l);h=t[1],c=t[0]}else{const t=this.tangent(r,a,W,X);h=this.firstControlPoint(t,r,a,W,X)}let d=h;for(let t=0;t<=n-3;t++)if(this.removeDuplicates(t,s),n=s.length,t+3<=n){r=s[t],a=s[t+1],l=s[t+2];const o=this.controlPoints(r,a,l);Xt(i).controlOut(d),d=o[1];const n=o[0];i.push(new e.S(a,n))}if(o){r=s[n-2],a=s[n-1],l=s[0];const t=this.controlPoints(r,a,l);Xt(i).controlOut(d),i.push(new e.S(a,t[0])),Xt(i).controlOut(t[1]),i.push(new e.S(l,c))}else{const t=this.tangent(a,l,W,X);Xt(i).controlOut(d),i.push(new e.S(l,this.secondControlPoint(t,a,l,W,X)))}return i}removeDuplicates(t,e){for(;e[t+1]&&(e[t].equals(e[t+1])||e[t+1].equals(e[t+2]));)e.splice(t+1,1)}invertAxis(t,e,s){let i=!1;if(t.x===e.x)i=!0;else if(e.x===s.x)(e.y<s.y&&t.y<=e.y||s.y<e.y&&e.y<=t.y)&&(i=!0);else{const o=this.lineFunction(t,e);const n=this.calculateFunction(o,s.x);t.y<=e.y&&s.y<=n||e.y<=t.y&&s.y>=n||(i=!0)}return i}isLine(t,e,s){const i=this.lineFunction(t,e);const o=this.calculateFunction(i,s.x);return t.x===e.x&&e.x===s.x||$t(o,1)===$t(s.y,1)}lineFunction(t,e){const s=(e.y-t.y)/(e.x-t.x);return[t.y-s*t.x,s]}controlPoints(t,e,s){let i=W;let o=X;let n=!1;let r=!1;let a;if(this.isLine(t,e,s))a=this.tangent(t,e,W,X);else{const l={x:this.isMonotonicByField(t,e,s,W),y:this.isMonotonicByField(t,e,s,X)};if(l.x&&l.y)a=this.tangent(t,s,W,X),n=!0;else if(this.invertAxis(t,e,s)&&(i=X,o=W),l[i])a=0;else{let n;n=s[o]<t[o]&&t[o]<=e[o]||t[o]<s[o]&&e[o]<=t[o]?go((s[o]-t[o])*(e[i]-t[i])):-go((s[i]-t[i])*(e[o]-t[o])),a=.01*n,r=!0}}const l=this.secondControlPoint(a,t,e,i,o);if(r){const t=i;i=o,o=t}const h=this.firstControlPoint(a,e,s,i,o);return n&&(this.restrictControlPoint(t,e,l,a),this.restrictControlPoint(e,s,h,a)),[l,h]}restrictControlPoint(t,e,s,i){t.y<e.y?e.y<s.y?(s.x=t.x+(e.y-t.y)/i,s.y=e.y):s.y<t.y&&(s.x=e.x-(e.y-t.y)/i,s.y=t.y):s.y<e.y?(s.x=t.x-(t.y-e.y)/i,s.y=e.y):t.y<s.y&&(s.x=e.x+(t.y-e.y)/i,s.y=t.y)}tangent(t,e,s,i){const o=e[s]-t[s];const n=e[i]-t[i];let r;return r=0===o?0:n/o,r}isMonotonicByField(t,e,s,i){return s[i]>e[i]&&e[i]>t[i]||s[i]<e[i]&&e[i]<t[i]}firstControlPoint(t,e,s,i,o){const n=e[i];const r=.333*(s[i]-n);return this.point(n+r,e[o]+r*t,i,o)}secondControlPoint(t,e,s,i,o){const n=e[i];const r=s[i];const a=.333*(r-n);return this.point(r-a,s[o]-a*t,i,o)}point(t,s,i,o){const n=new e.P;return n[i]=t,n[o]=s,n}calculateFunction(t,e){const s=t.length;let i=0;for(let o=0;o<s;o++)i+=Math.pow(e,o)*t[o];return i}}function go(t){return t<=0?-1:1}var mo=Object.freeze({__proto__:null,Axis:si,AxisLabel:Us,Box:gs,BoxElement:Ps,CategoryAxis:Di,ChartElement:bs,CurveProcessor:po,DateCategoryAxis:Yi,DateValueAxis:to,FloatElement:Os,FontLoader:Jt,Gradients:Is,HashMap:Pt,InstanceObserver:It,LogarithmicAxis:so,Matrix:_e,Note:Gs,NumericAxis:Ki,Observable:je,Point:ps,PolarAxis:ao,RadarCategoryAxis:ro,RadarLogarithmicAxis:uo,RadarNumericAxis:co,Ring:fs,RootElement:Bs,Sector:ys,ShapeBuilder:vs,ShapeElement:Es,Text:Ds,TextBox:Hs,Title:Ns,UserEvents:ds,absoluteDateDiff:vi,addClass:K,addDuration:Ai,addTicks:bi,alignPathToPixel:et,append:Dt,applyEventMap:Ce,autoMajorUnit:us,autoTextColor:ge,bindEvents:zt,ceilDate:Ci,clockwise:st,constants:$,convertableToNumber:nt,createHashSet:ye,createPatternFill:Ts,cycleDown:at,cycleIndex:lt,cycleUp:rt,dateComparer:Ti,dateDiff:Pi,dateEquals:Ei,dateIndex:Ii,deepExtend:ut,defaultErrorHandler:ve,defined:Ft,deg:Ht,duration:Ri,elementOffset:Nt,elementScale:pe,elementSize:jt,elementStyles:xt,eventCoordinates:Ut,eventElement:Gt,eventMap:Ae,find:he,firstDay:Vi,floorDate:Si,getAriaTemplate:_t,getSpacing:yt,getSupportedFeatures:Be,getTemplate:wt,getter:St,grep:Ct,hasClasses:Tt,hasOwnProperty:we,hashKey:Wt,inArray:Mt,interpolateValue:Et,isArray:Q,isFunction:ht,isNumber:it,isObject:pt,isPlainObject:Rt,isString:ot,keys:be,last:Xt,limitValue:Yt,logToConsole:e.l,lteDateIndex:function(t,e){let s=0;let i=e.length-1;let o;for(;s<=i;){o=Math.floor((s+i)/2);const n=e[o];if(n<t)s=o+1;else{if(!(n>t)){for(;Ei(e[o-1],t);)o--;return o}i=o-1}}return e[o]<=t?o:o-1},map:Bt,mousewheelDelta:Vt,noop:Ve,now:De,objectKey:qt,off:Re,on:Ie,parseDate:Bi,parseDates:Oi,rad:Zt,rectToBox:zs,removeClass:tt,renderIcon:ae,round:$t,services:Js,setDefaultOptions:te,sparseArrayLimits:le,startOfWeek:_i,styleValue:gt,toDate:wi,toTime:Mi,unbindEvents:Qt,valueOrDefault:Kt});class fo{constructor(t){this._axis=t,this.options=t.options}value(t){const e=this._axis;return e.getCategory?e.getCategory(t):e.getValue(t)}slot(t,e,s=!0){return this._axis.slot(t,e,s)}range(){return this._axis.range()}valueRange(){return this._axis.valueRange()}}function xo(t,e){for(let s=0;s<e.length;s++)if(e[s].options.name===t)return e[s].prepareUserOptions(),new fo(e[s])}class yo{constructor(t){this.visual=t.visual,this.chartsVisual=t.chartContainer.visual,this._pane=t}findAxisByName(t){return xo(t,this._pane.axes)}}class vo{constructor(t){this._plotArea=t,this.visual=t.visual,this.backgroundVisual=t._bgVisual}}function bo(t){const e=t.length;let s=0;for(let i=0;i<e;i++){it(t[i])&&s++}return s}const wo={min:function(t){const e=t.length;let s=C;for(let i=0;i<e;i++){const e=t[i];it(e)&&(s=Math.min(s,e))}return s===C?t[0]:s},max:function(t){const e=t.length;let s=T;for(let i=0;i<e;i++){const e=t[i];it(e)&&(s=Math.max(s,e))}return s===T?t[0]:s},sum:function(t){const e=t.length;let s=0;for(let i=0;i<e;i++){const e=t[i];it(e)&&(s+=e)}return s},sumOrNull:function(t){let e=null;return bo(t)&&(e=wo.sum(t)),e},count:function(t){const e=t.length;let s=0;for(let i=0;i<e;i++){const e=t[i];null!=e&&s++}return s},avg:function(t){const e=bo(t);let s=t[0];return e>0&&(s=wo.sum(t)/e),s},first:function(t){const e=t.length;for(let s=0;s<e;s++){const e=t[s];if(null!=e)return e}return t[0]}};function _o(t,e){if(null===e)return e;return St(t)(e)}class ko{constructor(){this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}}register(t,e=[j],s={}){for(let i=0;i<t.length;i++){const o=t[i];this._valueFields[o]=e,this._otherFields[o]=s,this._nullValue[o]=this._makeValue(e,null),this._undefinedValue[o]=this._makeValue(e,void 0)}}canonicalFields(t){return this.valueFields(t).concat(this.otherFields(t))}valueFields(t){return this._valueFields[t.type]||[j]}otherFields(t){return this._otherFields[t.type]||[j]}bindPoint(t,e,s){const i=t.data;const o=void 0!==s?s:i[e];const n={valueFields:{value:o}};const r=this.valueFields(t);const a=this._otherFields[t.type];let l,h;if(null===o)h=this._nullValue[t.type];else if(void 0===o)h=this._undefinedValue[t.type];else if(Array.isArray(o)){const t=o.slice(r.length);h=this._bindFromArray(o,r),l=this._bindFromArray(t,a)}else if("object"==typeof o){const e=this.sourceFields(t,r);const s=this.sourceFields(t,a);h=this._bindFromObject(o,r,e),l=this._bindFromObject(o,a,s)}return void 0!==h&&(1===r.length?n.valueFields.value=h[r[0]]:n.valueFields=h),n.fields=l||{},n}_makeValue(t,e){const s={};const i=t.length;for(let o=0;o<i;o++){s[t[o]]=e}return s}_bindFromArray(t,e){const s={};if(e){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++)s[e[o]]=t[o]}return s}_bindFromObject(t,e,s=e){const i={};if(e){const o=e.length;for(let n=0;n<o;n++){const o=e[n];const r=s[n];null!==r&&(i[o]=_o(r,t))}}return i}sourceFields(t,e){const s=[];if(e){const i=e.length;for(let o=0;o<i;o++){const i=e[o];const n=i===j?"field":i+"Field";s.push(null!==t[n]?t[n]||i:null)}}return s}}ko.current=new ko;const Ao=/percent(?:\w*)\((\d+)\)/;const So=new RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$");class Co{constructor(t,e,s){this.initGlobalRanges(t,e,s)}initGlobalRanges(t,e,s){const i=e.data;const o=So.exec(t);if(o){this.valueGetter=this.createValueGetter(e,s);const t=this.getAverage(i);const n=this.getStandardDeviation(i,t,!1);const r=o[1]?parseFloat(o[1]):1;const a={low:t.value-n*r,high:t.value+n*r};this.globalRange=function(){return a}}else if(t.indexOf&&t.indexOf("stderr")>=0){this.valueGetter=this.createValueGetter(e,s);const t=this.getStandardError(i,this.getAverage(i));this.globalRange=function(e){return{low:e-t,high:e+t}}}}createValueGetter(t,e){const s=t.data;const i=ko.current;const o=i.valueFields(t);const n=Ft(s[0])?s[0]:{};let r;if(Q(n)){r=St("["+(e?o.indexOf(e):0)+"]")}else if(it(n))r=St();else if(typeof n===I){r=St(i.sourceFields(t,o)[o.indexOf(e)])}return r}getErrorRange(t,e){let s,i,o;if(!Ft(e))return null;if(this.globalRange)return this.globalRange(t);if(Q(e))s=t-e[0],i=t+e[1];else if(it(o=parseFloat(e)))s=t-o,i=t+o;else{if(!(o=Ao.exec(e)))throw new Error("Invalid ErrorBar value: "+e);{const e=t*(parseFloat(o[1])/100);s=t-Math.abs(e),i=t+Math.abs(e)}}return{low:s,high:i}}getStandardError(t,e){return this.getStandardDeviation(t,e,!0)/Math.sqrt(e.count)}getStandardDeviation(t,e,s){const i=t.length;const o=s?e.count-1:e.count;let n=0;for(let s=0;s<i;s++){const i=this.valueGetter(t[s]);it(i)&&(n+=Math.pow(i-e.value,2))}return Math.sqrt(n/o)}getAverage(t){const e=t.length;let s=0;let i=0;for(let o=0;o<e;o++){const e=this.valueGetter(t[o]);it(e)&&(s+=e,i++)}return{value:s/i,count:i}}}const To=e.s.browser||{};const Po=600;const Mo="fadeIn";const Eo=.8;const Lo=To.msie?.001:0;const Io="errorLow";const Ro="errorHigh";const Bo="xErrorLow";const Oo="xErrorHigh";const Vo="yErrorLow";const Do="yErrorHigh";const zo="zero";const Fo="interpolate";const Ho="gap";const No="above";const jo="below";const Uo="smooth";const Go="step";const Wo="area";const Xo="bar";const Yo="boxPlot";const qo="bubble";const Zo="bullet";const $o="candlestick";const Qo="column";const Ko="donut";const Jo="funnel";const tn="pyramid";const en="heatmap";const sn="horizontalWaterfall";const on="line";const nn="ohlc";const rn="pie";const an="polarArea";const ln="polarLine";const hn="polarScatter";const cn="radarArea";const dn="radarColumn";const un="radarLine";const pn="rangeArea";const gn="rangeBar";const mn="rangeColumn";const fn="scatter";const xn="scatterLine";const yn="verticalArea";const vn="verticalBoxPlot";const bn="verticalBullet";const wn="verticalLine";const _n="verticalRangeArea";const kn="waterfall";const An=[Xo,Qo,nn,$o,Yo,vn,Zo,mn,gn,kn,sn];const Sn="exponentialTrendline";const Cn="linearTrendline";const Tn="logarithmicTrendline";const Pn="movingAverageTrendline";const Mn="polynomialTrendline";const En="powerTrendline";const Ln=[Sn,Cn,Tn,Pn,Mn,En];const In="legendItemClick";const Rn="legendItemHover";const Bn="legendItemLeave";const On="seriesClick";const Vn="seriesHover";const Dn="seriesOver";const zn="seriesLeave";const Fn="plotAreaClick";const Hn="plotAreaHover";const Nn="plotAreaLeave";const jn="drag";const Un="dragEnd";const Gn="dragStart";const Wn="zoomStart";const Xn="zoom";const Yn="zoomEnd";const qn="selectStart";const Zn="select";const $n="selectEnd";const Qn="render";const Kn="showTooltip";const Jn="hideTooltip";const tr="paneRender";const er="graphics-symbol";const sr="k-chart-point";const ir="Point";const or="checkbox";const nr="k-chart-legend-item";const rr="Legend item";const ar="log";const lr="category";const hr="insideEnd";const cr="insideBase";const dr="outsideEnd";const ur="wheel";const pr=150;const gr="drilldown";const mr="drilldown";const fr="pattern";var xr=Object.freeze({__proto__:null,ABOVE:No,AREA:Wo,BAR:Xo,BELOW:jo,BORDER_BRIGHTNESS:Eo,BOTTOM:"bottom",BOX_PLOT:Yo,BUBBLE:qo,BULLET:Zo,CANDLESTICK:$o,CATEGORY:lr,CHART_POINT_CLASSNAME:sr,CHART_POINT_ROLE:er,CHART_POINT_ROLE_DESCRIPTION:ir,COLUMN:Qo,DONUT:Ko,DRAG:jn,DRAG_END:Un,DRAG_START:Gn,DRILLDOWN:gr,DRILLDOWN_FIELD:mr,EQUALLY_SPACED_SERIES:An,ERROR_HIGH_FIELD:Ro,ERROR_LOW_FIELD:Io,FADEIN:Mo,FUNNEL:Jo,GAP:Ho,GLASS:"glass",HEATMAP:en,HIDE_TOOLTIP:Jn,HORIZONTAL_WATERFALL:sn,INITIAL_ANIMATION_DURATION:Po,INSIDE_BASE:cr,INSIDE_END:hr,INTERPOLATE:Fo,LEGEND_ITEM_ARIA_ROLE_DESCRIPTION:rr,LEGEND_ITEM_CLASSNAME:nr,LEGEND_ITEM_CLICK:In,LEGEND_ITEM_HOVER:Rn,LEGEND_ITEM_LEAVE:Bn,LEGEND_ITEM_ROLE:or,LINE:on,LINE_MARKER_SIZE:8,LOGARITHMIC:ar,MIN_MOVING_AVERAGE_PERIOD:2,MOUSEWHEEL:ur,MOUSEWHEEL_DELAY:pr,MOUSEWHEEL_ZOOM_RATE:.3,OHLC:nn,OUTSIDE_END:dr,PANE_RENDER:tr,PATTERN_FIELD:fr,PIE:rn,PLOT_AREA_CLICK:Fn,PLOT_AREA_HOVER:Hn,PLOT_AREA_LEAVE:Nn,POLAR_AREA:an,POLAR_LINE:ln,POLAR_SCATTER:hn,PYRAMID:tn,RADAR_AREA:cn,RADAR_COLUMN:dn,RADAR_LINE:un,RANGE_AREA:pn,RANGE_BAR:gn,RANGE_COLUMN:mn,RENDER:Qn,SCATTER:fn,SCATTER_LINE:xn,SELECT:Zn,SELECT_END:$n,SELECT_START:qn,SERIES_CLICK:On,SERIES_HOVER:Vn,SERIES_LEAVE:zn,SERIES_OVER:Dn,SHOW_TOOLTIP:Kn,SMOOTH:Uo,START_SCALE:Lo,STEP:Go,TOOLTIP_OFFSET:5,TRENDLINE_EXPONENTIAL:Sn,TRENDLINE_LINEAR:Cn,TRENDLINE_LOGARITHMIC:Tn,TRENDLINE_MOVING_AVERAGE:Pn,TRENDLINE_POLYNOMIAL:Mn,TRENDLINE_POWER:En,TRENDLINE_SERIES:Ln,VERTICAL_AREA:yn,VERTICAL_BOX_PLOT:vn,VERTICAL_BULLET:bn,VERTICAL_LINE:wn,VERTICAL_RANGE_AREA:_n,WATERFALL:kn,X_ERROR_HIGH_FIELD:Oo,X_ERROR_LOW_FIELD:Bo,Y_ERROR_HIGH_FIELD:Do,Y_ERROR_LOW_FIELD:Vo,ZERO:zo,ZOOM:Xn,ZOOM_END:Yn,ZOOM_START:Wn});class yr extends bs{constructor(t,e,s,i,o,n){super(n),this.low=t,this.high=e,this.isVertical=s,this.chart=i,this.series=o}reflow(t){const e=this.options.endCaps;const s=this.isVertical;const i=this.getAxis().getSlot(this.low,this.high);const o=t.center();const n=this.getCapsWidth(t,s);const r=s?o.x:o.y;const a=r-n;const l=r+n;let h;s?(h=[new ps(o.x,i.y1),new ps(o.x,i.y2)],e&&h.push(new ps(a,i.y1),new ps(l,i.y1),new ps(a,i.y2),new ps(l,i.y2)),this.box=new gs(a,i.y1,l,i.y2)):(h=[new ps(i.x1,o.y),new ps(i.x2,o.y)],e&&h.push(new ps(i.x1,a),new ps(i.x1,l),new ps(i.x2,a),new ps(i.x2,l)),this.box=new gs(i.x1,a,i.x2,l)),this.linePoints=h}getCapsWidth(t,e){const s=e?t.width():t.height();return Math.min(Math.floor(s/2),4)||4}createVisual(){const t=this.options;const e=t.visual;e?this.visual=e({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:t.endCaps,color:t.color,line:t.line},createVisual:()=>{this.createDefaultVisual();const t=this.visual;return delete this.visual,t}}):this.createDefaultVisual()}createDefaultVisual(){const{options:t,linePoints:s}=this;const i={stroke:{color:t.color,width:t.line.width,dashType:t.line.dashType}};super.createVisual();for(let t=0;t<s.length;t+=2){const o=new e.a(i).moveTo(s[t].x,s[t].y).lineTo(s[t+1].x,s[t+1].y);et(o),this.visual.append(o)}}}te(yr,{animation:{type:Mo,delay:Po},endCaps:!0,line:{width:2},zIndex:1});class vr extends yr{getAxis(){return this.chart.seriesValueAxis(this.series)}}function br(t){for(let e=0;e<t.length;e++)if(Ft(t[e].zIndex))return!0}function wr(t,e){null!==e&&t.push(e)}function _r(t){return bo(t)===t.length}function kr(t,e,s){const i=e.visible;if(Ft(i))return i;const o=t.pointVisibility;return o?o[s]:void 0}function Ar(t){const e=t.data;const s=[];let i=0;let o=0;for(let n=0;n<e.length;n++){const e=ko.current.bindPoint(t,n);let r=e.valueFields.value;ot(r)&&(r=parseFloat(r)),it(r)?(e.visible=!1!==kr(t,e.fields,n),e.value=Math.abs(r),s.push(e),e.visible&&(i+=e.value),0!==r&&o++):s.push(null)}return{total:i,points:s,count:o}}function Sr(t){const e=t.length;let s=0;for(let i=0;i<e;i++)s=Math.max(s,t[i].data.length);return s}function Cr(t,e){return t&&e?t.toLowerCase()===e.toLowerCase():t===e}function Tr(t,e,s={},i=!1){const o=s.defaults=s.defaults||{};const n=s.depth=s.depth||0;let r=!1;if(s.excluded=s.excluded||[],n>5)return null;for(let n in t)if(!Mt(n,s.excluded)&&we(t,n)){const a=t[n];ht(a)?(r=!0,i||(t[n]=Kt(a(e),o[n]))):pt(a)&&(i||(s.defaults=o[n]),s.depth++,r=Tr(a,e,s,i)||r,s.depth--)}return r}function Pr(t,e){const s=[];const i=[].concat(e);for(let e=0;e<t.length;e++){const o=t[e];Mt(o.type,i)&&s.push(o)}return s}const Mr=new WeakMap;function Er(t,e,s){if(null===e||"object"!=typeof e)return Bi(s,t);let i=Mr.get(e);return i||(i=Bi(s,t),Mr.set(e,i)),i}function Lr(t){const e=t.overlay;return e&&e.gradient&&"none"!==e.gradient}function Ir(t){return Ft(t)&&null!==t}function Rr(t,e){const s=t.type;const i=e instanceof Date;return!s&&i||Cr(s,g)}function Br(t){return 1===t.length?t[0]:t}const Or=/area/i;function Vr(t,e){const s=ko.current.bindPoint(t,null,e).valueFields;for(let t in s)if(nt(s[t]))return!0}function Dr({start:t,dir:e,min:s,max:i,getter:o,hasItem:n,series:r}){let a,l;let h=t;do{h+=e,n(h)&&(l=o(h),a=Vr(r,l.item))}while(s<=h&&h<=i&&!a);if(a)return l}function zr(t,e,s,i,o){const{min:n,max:r}=e;const a=n>0&&n<s;const l=r+1<s;if(a||l){const e=function(t){return t.missingValues?t.missingValues:Or.test(t.type)||t.stack?zo:Fo}(t);let h,c;if(e!==Fo)a&&(h=i(n-1)),l&&(c=i(r+1));else{let e,d;a&&(e=i(n-1),d=Vr(t,e.item),h=d?e:Dr({start:n,dir:-1,min:0,max:s-1,getter:i,hasItem:o,series:t})),l&&(e=i(r+1),d=Vr(t,e.item),c=d?e:Dr({start:r,dir:1,min:0,max:s-1,getter:i,hasItem:o,series:t}))}h&&(t._outOfRangeMinPoint=h),c&&(t._outOfRangeMaxPoint=c)}}function Fr(t,e){return e.forEach((e=>{const s=e&&e.options;const i=e&&(e.box||e.wrapperBox);s&&i&&!1!==s.noclip&&!1!==s.visible&&t.wrap(i)})),t}class Hr extends bs{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this.categoryAxis=t.seriesCategoryAxis(e.series[0]),this.valueAxisRanges={},this.points=[],this.categoryPoints=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[],this.render()}render(){this.traverseDataPoints(this.addValue.bind(this))}pointOptions(t,e){let s=this.seriesOptions[e];if(!s){const i=this.pointType().prototype.defaults;this.seriesOptions[e]=s=ut({},i,{vertical:!this.options.invertAxes},t)}return s}plotValue(t){if(!t)return 0;if(this.options.isStacked100&&it(t.value)){const e=t.categoryIx;const s=this.categoryPoints[e];const i=[];let o=0;for(let e=0;e<s.length;e++){const n=s[e];if(n){const e=t.series.stack;const s=n.series.stack;if(e&&s&&e.group!==s.group)continue;it(n.value)&&(o+=Math.abs(n.value),i.push(Math.abs(n.value)))}}if(o>0)return t.value/o}return t.value}plotRange(t,e=0){const s=this.categoryPoints[t.categoryIx];if(this.options.isStacked){let i=this.plotValue(t);const o=i>=0;let n=e;let r=!1;const a=void 0!==t.series.stack?t.series.stack:this.options.defaultStack;const l=t=>!0===t||typeof t===I&&!t.group;if(a)for(let h=0;h<s.length;h++){const c=s[h];if(t===c)break;const d=void 0!==c.series.stack?c.series.stack:this.options.defaultStack;if(!d)continue;if(typeof a===D&&a!==d)continue;if(l(a)&&!l(d))continue;if(a.group&&a.group!==d.group)continue;const u=this.plotValue(c);(u>=0&&o||u<0&&!o)&&(0!==e&&0===u||(n+=u,i+=u,r=!0,this.options.isStacked100&&(i=Math.min(i,1))))}return r&&(n-=e),[n,i]}const i=t.series;const o=this.seriesValueAxis(i);const n=this.categoryAxisCrossingValue(o);return[n,nt(t.value)?t.value:n]}stackLimits(t,e){let s=C;let i=T;for(let o=0;o<this.categoryPoints.length;o++){const n=this.categoryPoints[o];if(n)for(let o=0;o<n.length;o++){const r=n[o];if(r&&(r.series.stack===e||r.series.axis===t)){const t=this.plotRange(r,0)[1];void 0!==t&&isFinite(t)&&(i=Math.max(i,t),s=Math.min(s,t))}}}return{min:s,max:i}}updateStackRange(){const{isStacked:t,series:e}=this.options;const s={};if(t)for(let t=0;t<e.length;t++){const i=e[t];const o=i.axis;const n=o+i.stack;let r=s[n];if(!r){r=this.stackLimits(o,i.stack);const t=this.errorTotals;t&&(t.negative.length&&(r.min=Math.min(r.min,le(t.negative).min)),t.positive.length&&(r.max=Math.max(r.max,le(t.positive).max))),r.min!==C||r.max!==T?s[n]=r:r=null}r&&(this.valueAxisRanges[o]=r)}}addErrorBar(t,e,s){const{value:i,series:o,seriesIx:n}=t;const r=t.options.errorBars;const a=e.fields[Io];const l=e.fields[Ro];let h;it(a)&&it(l)?h={low:a,high:l}:r&&void 0!==r.value&&(this.seriesErrorRanges=this.seriesErrorRanges||[],this.seriesErrorRanges[n]=this.seriesErrorRanges[n]||new Co(r.value,o,j),h=this.seriesErrorRanges[n].getErrorRange(i,r.value)),h&&(t.low=h.low,t.high=h.high,this.addPointErrorBar(t,s))}addPointErrorBar(t,e){const s=!this.options.invertAxes;const i=t.options.errorBars;let{series:o,low:n,high:r}=t;if(this.options.isStacked){const s=this.stackedErrorRange(t,e);n=s.low,r=s.high}else{const t={categoryIx:e,series:o};this.updateRange({value:n},t),this.updateRange({value:r},t)}const a=new vr(n,r,s,this,o,i);t.errorBars=[a],t.append(a)}stackedErrorRange(t,e){const s=this.plotRange(t,0)[1]-t.value;const i=t.low+s;const o=t.high+s;return this.errorTotals=this.errorTotals||{positive:[],negative:[]},i<0&&(this.errorTotals.negative[e]=Math.min(this.errorTotals.negative[e]||0,i)),o>0&&(this.errorTotals.positive[e]=Math.max(this.errorTotals.positive[e]||0,o)),{low:i,high:o}}addValue(t,e){const{categoryIx:s,series:i,seriesIx:o}=e;let n=this.categoryPoints[s];n||(this.categoryPoints[s]=n=[]);let r=this.seriesPoints[o];r||(this.seriesPoints[o]=r=[]);const a=this.createPoint(t,e);a&&(Object.assign(a,e),a.owner=this,a.noteText=t.fields.noteText,void 0===a.dataItem&&(a.dataItem=i.data[s]),this.addErrorBar(a,t,s)),this.points.push(a),r.push(a),n.push(a),this.updateRange(t.valueFields,e)}evalPointOptions(t,e,s){const i=s.categoryIx;const o=s.category;const n=s.series;const r=s.seriesIx;const a={defaults:n._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint","drilldownSeriesFactory","ariaTemplate","ariaContent"]};let l=this._evalSeries[r];void 0===l&&(this._evalSeries[r]=l=Tr(t,{},a,!0));let h=t;return l&&(h=ut({},h),Tr(h,{value:e,category:o,index:i,series:n,dataItem:n.data[i]},a)),h}updateRange(t,e){const s=e.series.axis;const i=t.value;let o=this.valueAxisRanges[s];isFinite(i)&&null!==i&&(o=this.valueAxisRanges[s]=o||{min:C,max:T},o.min=Math.min(o.min,i),o.max=Math.max(o.max,i))}seriesValueAxis(t){const e=this.plotArea;const s=t.axis;const i=s?e.namedValueAxes[s]:e.valueAxis;if(!i)throw new Error("Unable to locate value axis with name "+s);return i}reflow(t){const e=this.categorySlots=[];const s=this.points;const i=this.categoryAxis;let o=0;this.traverseDataPoints(((t,n)=>{const{categoryIx:r,series:a}=n;const l=this.seriesValueAxis(a);const h=s[o++];let c=e[r];if(c||(e[r]=c=this.categorySlot(i,r,l)),h){const t=this.plotRange(h,l.startValue());const e=this.valueSlot(l,t);if(e){const s=this.pointSlot(c,e);h.aboveAxis=this.aboveAxis(h,l),h.stackValue=t[1],this.options.isStacked100&&(h.percentage=this.plotValue(h)),this.reflowPoint(h,s)}else h.visible=!1}})),this.reflowCategories(e),!this.options.clip&&this.options.limitPoints&&this.points.length&&this.limitPoints(),this.box=t}valueSlot(t,e){return t.getSlot(e[0],e[1],!this.options.clip)}limitPoints(){const t=this.categoryPoints;const e=t[0].concat(Xt(t));for(let t=0;t<e.length;t++)e[t]&&this.limitPoint(e[t])}limitPoint(t){const e=this.categoryAxis.limitSlot(t.box);e.equals(t.box)||t.reflow(e)}aboveAxis(t,e){const s=this.categoryAxisCrossingValue(e);const i=t.value;return e.options.reverse?i<s:i>=s}categoryAxisCrossingValue(t){const e=this.categoryAxis;const s=t.options;return[].concat(s.axisCrossingValues||s.axisCrossingValue)[e.axisIndex||0]||0}reflowPoint(t,e){t.reflow(e)}reflowCategories(){}pointSlot(t,e){const s=this.options.invertAxes;const i=s?e:t;const o=s?t:e;return new gs(i.x1,o.y1,i.x2,o.y2)}categorySlot(t,e){return t.getSlot(e)}traverseDataPoints(t){const e=this.options.series;const s=Sr(e);const i=e.length;for(let s=0;s<i;s++)this._outOfRangeCallback(e[s],"_outOfRangeMinPoint",s,t);for(let o=0;o<s;o++){const n=this.categoryAxis.categoryAt(o);for(let r=0;r<i;r++){const i=e[r];t(this.plotArea.bindPoint(i,o),{category:n,categoryIx:o,categoriesCount:s,series:i,seriesIx:r})}}for(let s=0;s<i;s++)this._outOfRangeCallback(e[s],"_outOfRangeMaxPoint",s,t)}_outOfRangeCallback(t,e,s,i){const o=t[e];if(o){const e=o.categoryIx;i(this.plotArea.bindPoint(t,e,o.item),{category:o.category,categoryIx:e,series:t,seriesIx:s,dataItem:o.item})}}formatPointValue(t,e){return null===t.value?"":this.chartService.format.auto(e,t.value)}pointValue(t){return t.valueFields.value}}te(Hr,{series:[],invertAxes:!1,isStacked:!1,clip:!0,limitPoints:!0});const Nr={click:function(t,e){return t.trigger(On,this.eventArgs(e))},hover:function(t,e){return t.trigger(Vn,this.eventArgs(e))},over:function(t,e){return t.trigger(Dn,this.eventArgs(e))},out:function(t,e){return t.trigger(zn,this.eventArgs(e))},eventArgs:function(t){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:Gt(t),originalEvent:t,point:this}}};const jr={createNote:function(){const t=this.options.notes;const e=this.noteText||t.label.text;!1!==t.visible&&null!=e&&(this.note=new Gs({value:this.value,text:e,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService),this.append(this.note))}};class Ur extends bs{constructor(t,e){super(e),this.value=t,this.aboveAxis=Kt(this.options.aboveAxis,!0),this.tooltipTracking=!0,this._id=Pe()}initOptions(t){this.options=Object.assign({},t)}render(){const{markers:t}=this.options;this._rendered||(this._rendered=!0,t.visible&&t.size&&(this.marker=this.createMarker(),this.append(this.marker)),this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))}createLabel(){const t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))}createLabelElement(t){return new Hs(this.getLabelText(t),Object.assign({},{align:d,vAlign:d,zIndex:Kt(t.zIndex,this.series.zIndex)},t,{margin:Object.assign({},{left:5,right:5},t.margin)}),this.pointData())}getLabelText(t){let e=wt(t);return e?e(this.pointData()):t.format?this.formatValue(t.format):this.value}getAriaLabelText(){const t=this.options.labels;const e=_t(t);return e?e(this.pointData()):this.getLabelText(t)}markerBorder(){const t=this.options.markers;const s=t.background;const i=Object.assign({},{color:this.color},t.border);return void 0===i.color&&(i.color=new e.C(s).brightness(Eo).toHex()),i}createVisual(){}createMarker(){const t=this.options.markers;return new Es({type:t.type,width:t.size,height:t.size,rotation:t.rotation,background:t.background,border:this.markerBorder(),opacity:t.opacity,pattern:this.options.pattern,zIndex:Kt(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual,accessibilityOptions:Object.assign({},{ariaLabel:this.getAriaLabelText(this.options.labels)},this.options.accessibility)},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category})}markerBox(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box}reflow(t){const{options:e,aboveAxis:s}=this;const i=e.vertical;this.render(),this.box=t;const o=t.clone();if(i?s?o.y1-=o.height():o.y2+=o.height():s?o.x1+=o.width():o.x2-=o.width(),this._childBox=o,this.marker&&this.marker.reflow(o),this.reflowLabel(o),this.errorBars)for(let t=0;t<this.errorBars.length;t++)this.errorBars[t].reflow(o);if(this.note){let t=this.markerBox();if(!e.markers.visible||!e.markers.size){const e=t.center();t=new gs(e.x,e.y,e.x,e.y)}this.note.reflow(t)}}reflowLabel(t){const{options:e,label:s}=this;let i=e.labels.position;s&&(i=i===No?z:i,i=i===jo?c:i,s.reflow(t),s.box.alignTo(this.markerBox(),i),s.reflow(s.box))}createHighlight(){const t=this.options.highlight.markers;const e=this.markerBorder().color;const s=this.options.markers;const i=s.size+(s.border.width||0)+(t.border.width||0);const o=new Es({type:s.type,width:i,height:i,rotation:s.rotation,background:t.color||e,border:{color:t.border.color,width:t.border.width,opacity:Kt(t.border.opacity,1)},opacity:Kt(t.opacity,1)});return o.reflow(this._childBox),o.getElement()}highlightVisual(){return(this.marker||{}).visual}highlightVisualArgs(){const t=this.marker;let s,i;if(t)i=t.paddingBox.toRect(),s=t.visual;else{const t=this.options.markers.size;const s=t/2;const o=this.box.center();i=new e.R([o.x-s,o.y-s],[t,t])}return{options:this.options,rect:i,visual:s}}createFocusHighlight(){const t=this.options.markers;const e=this.options.focusHighlight;const s=t.size+(t.border.width||0);const i=new Es({type:t.type,width:s,height:s,rotation:t.rotation,background:e.color,border:e.border,opacity:e.opacity,padding:e.border.width/2,zIndex:e.zIndex});return i.reflow(this._childBox),i.getElement()}tooltipAnchor(){const t=this.markerBox();const e=this.owner.pane.clipBox();if(!e||e.overlaps(t)){const e=t.x2+5;const s=S;let i,o;return this.aboveAxis?(i=t.y1,o=c):(i=t.y2,o=z),{point:new ps(e,i),align:{horizontal:s,vertical:o}}}}formatValue(t){return this.owner.formatPointValue(this,t)}overlapsBox(t){return this.markerBox().overlaps(t)}clipElements(){this.options.visible=!1}unclipElements(){this.label&&(this.label.options.noclip=!0),this.note&&(this.note.options.noclip=!0)}unclipBox(){return Fr(this.markerBox().clone(),[this.label,this.note])}labelBox(){return this.label?this.label.box:new gs}noteBox(){return this.note?this.note.box:new gs}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}}focusVisual(){this.marker&&(this.marker.visual&&this.marker.visual.options.set("id",this._id),this.toggleFocusHighlight(!0))}clearFocusFromVisual(){this.marker&&(this.marker.visual&&this.marker.visual.options.set("id",""),this.toggleFocusHighlight(!1))}getIndex(){return void 0!==this.categoryIx?this.categoryIx:this.pointIx}}Ur.prototype.defaults={vertical:!0,markers:{visible:!0,background:U,size:8,type:u,border:{width:2},opacity:1},labels:{visible:!1,position:No,margin:yt(3),padding:yt(4),animation:{type:Mo,delay:Po}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:100},errorBars:{line:{width:1}},accessibility:{tabIndex:0,role:er,className:sr,ariaRoleDescription:ir}},ut(Ur.prototype,Nr),ut(Ur.prototype,jr);class Gr extends bs{constructor(t,e,s){super(),this.linePoints=t,this.series=e,this.seriesIx=s}points(){return this.toGeometryPoints(this.linePoints)}toGeometryPoints(t){const e=[];for(let s=0,i=t.length;s<i;s++)t[s]&&!1!==t[s].visible&&e.push(t[s]._childBox.toRect().center());return e}createVisual(){const t=this.series.visual;t?(this.visual=t({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:()=>(this.segmentVisual(),this.visual)}),this.visual&&!Ft(this.visual.options.zIndex)&&(this.visual.options.zIndex=this.series.zIndex)):this.segmentVisual()}segmentVisual(){const{options:t,series:s}=this;let{color:i,_defaults:o}=s;ht(i)&&o&&(i=o.color);const n=e.a.fromPoints(this.points(),{stroke:{color:i,width:s.width,opacity:s.opacity,dashType:s.dashType},zIndex:s.zIndex});t.closed&&n.close(),this.visual=n}aliasFor(t,e){return this.parent.getNearestPoint(e.x,e.y,this.seriesIx)}}te(Gr,{closed:!1});const Wr={calculateStepPoints:function(t){const s=this.parent.plotArea.seriesCategoryAxis(this.series);const{justified:i,vertical:o,reverse:n}=s.options;const r=o?W:X;const a=o?X:W;const l=n?2:1;const h=l;let c=Xr(t[0],r,l,a,h);const d=[c];for(let s=1;s<t.length;s++){const i=Xr(t[s],r,l,a,h);if(c[r]!==i[r]){const t=new e.P;t[r]=c[r],t[a]=i[a],d.push(t,i)}c=i}return i?c!==Xt(d)&&d.push(c):d.push(Xr(Xt(t),r,l,a,n?1:2)),d}};function Xr(t,s,i,o,n){const r=t.box;const a=new e.P;return a[s]=r[s+i],a[o]=r[o+n],a}class Yr extends Gr{points(){return this.calculateStepPoints(this.linePoints)}}ut(Yr.prototype,Wr);class qr extends Gr{segmentVisual(){const t=this.series;const s=t._defaults;let i=t.color;ht(i)&&s&&(i=s.color);const o=new po(this.options.closed).process(this.points());const n=new e.a({stroke:{color:i,width:t.width,opacity:t.opacity,dashType:t.dashType},zIndex:t.zIndex});n.segments.push.apply(n.segments,o),this.visual=n}}const Zr={renderSegments:function(){const{options:t,seriesPoints:e}=this;const s=t.series;const i=e.length;let o;this._segments=[];for(let t=0;t<i;t++){const i=s[t];const n=this.sortPoints(e[t]);const r=n.length;let a=[];for(let e=0;e<r;e++){const s=n[e];s?a.push(s):this.seriesMissingValues(i)!==Fo&&(a.length>1&&(o=this.createSegment(a,i,t,o),this._addSegment(o)),a=[])}a.length>1&&(o=this.createSegment(a,i,t,o),this._addSegment(o))}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(t){this._segments.push(t),t.parent=this},sortPoints:function(t){return t},seriesMissingValues:function(t){const e=t.missingValues;return!e&&this.options.isStacked?zo:e||Fo},getNearestPoint:function(t,e,s){const i=new ps(t,e);const o=this.seriesPoints[s];let n=C;let r;for(let t=0;t<o.length;t++){const e=o[t];if(e&&void 0!==e.value&&null!==e.value&&!1!==e.visible){const t=e.box.center().distanceTo(i);t<n&&(r=e,n=t)}}return r}};class $r extends e.b{setup(){this._setEnd(this.options.box.x1)}step(t){const e=this.options.box;this._setEnd(Et(e.x1,e.x2,t))}_setEnd(t){const e=this.element;const s=e.segments;const i=s[1].anchor();const o=s[2].anchor();e.suspend(),i.setX(t),e.resume(),o.setX(t)}}te($r,{duration:Po}),e.i.current.register("clip",$r);const Qr={createAnimation:function(){const t=this.getRoot();const s=(t&&t.options||{}).transitions;if(t&&!1!==s){const i=this.parent&&this.parent.clipBox||t.size();const o=e.a.fromRect(i.toRect());const n=s&&!0!==s?s.loading:s;this.visual.clip(o),this.animation=new $r(o,Object.assign({},{box:i},n)),br(this.options.series)&&this._setChildrenAnimation(o)}},_setChildrenAnimation:function(t){const e=this.animationPoints();for(let s=0;s<e.length;s++){const i=e[s];i&&i.visual&&Ft(i.visual.options.zIndex)&&i.visual.clip(t)}}};class Kr extends Hr{render(){super.render(),this.updateStackRange(),this.renderSegments()}pointType(){return Ur}createPoint(t,e){const{series:s,seriesIx:i}=e;const o=this.seriesMissingValues(s);let n=t.valueFields.value;if(null==n){if(o!==zo)return null;n=0}let r=this.pointOptions(s,i);r=this.evalPointOptions(r,n,e);let a=t.fields.color||s.color;ht(s.color)&&(a=r.color);const l=new Ur(n,r);return l.color=a,this.append(l),l}plotRange(t){let e=this.plotValue(t);if(this.options.isStacked){const s=t.categoryIx;const i=this.categoryPoints[s];for(let s=0;s<i.length;s++){const o=i[s];if(t===o)break;e+=this.plotValue(o),this.options.isStacked100&&(e=Math.min(e,1))}}return[e,e]}createSegment(t,e,s){const i=e.style;let o;return o=i===Go?Yr:i===Uo?qr:Gr,new o(t,e,s)}animationPoints(){const t=this.points;const e=[];for(let s=0;s<t.length;s++)e.push((t[s]||{}).marker);return e.concat(this._segments)}supportsPointInactiveOpacity(){return!1}}ut(Kr.prototype,Zr,Qr);class Jr extends Gr{constructor(t,e,s,i,o){super(t,e,s),this.prevSegment=i,this.stackPoints=o}createVisual(){const t=this.series;const s=t._defaults;const i=t.line||{};let o=t.color;ht(o)&&s&&(o=s.color),this.visual=new e.G({zIndex:t.zIndex}),this.createFill({fill:Ts(t.pattern,{color:o,opacity:t.opacity}),stroke:null}),i.width>0&&!1!==i.visible&&this.createStroke({stroke:ut({color:o,opacity:t.opacity,lineCap:"butt"},i)})}strokeSegments(){let t=this._strokeSegments;return t||(t=this._strokeSegments=this.createStrokeSegments()),t}createStrokeSegments(){return this.segmentsFromPoints(this.points())}stackSegments(){return this.prevSegment?this.prevSegment.createStackSegments(this.stackPoints):this.createStackSegments(this.stackPoints)}createStackSegments(t){return this.segmentsFromPoints(this.toGeometryPoints(t)).reverse()}segmentsFromPoints(t){return t.map((t=>new e.S(t)))}createStroke(t){const s=new e.a(t);s.segments.push.apply(s.segments,this.strokeSegments()),this.visual.append(s)}hasStackSegment(){return this.prevSegment||this.stackPoints&&this.stackPoints.length}createFill(t){const s=this.strokeSegments();const i=s.slice(0);const o=this.hasStackSegment();if(o){const t=this.stackSegments();Dt(i,t)}const n=new e.a(t);n.segments.push.apply(n.segments,i),!o&&s.length>1&&this.fillToAxes(n),this.visual.append(n)}fillToAxes(t){const e=this.parent;const s=e.options.invertAxes;const i=e.seriesValueAxis(this.series);const o=e.categoryAxisCrossingValue(i);const n=i.getSlot(o,o,!0);const r=this.strokeSegments();const a=r[0].anchor();const l=Xt(r).anchor();let h=s?n.x1:n.y1;s?t.lineTo(h,l.y).lineTo(h,a.y):t.lineTo(l.x,h).lineTo(a.x,h)}}class ta extends Jr{createStrokeSegments(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))}createStackSegments(t){return this.segmentsFromPoints(this.calculateStepPoints(t)).reverse()}}ut(ta.prototype,Wr);class ea extends Jr{createStrokeSegments(){const t=new po(this.options.closed);const e=this.points();return t.process(e)}createStackSegments(){const t=this.strokeSegments();const s=[];for(let i=t.length-1;i>=0;i--){const o=t[i];s.push(new e.S(o.anchor(),o.controlOut(),o.controlIn()))}return s}}class sa extends Kr{createSegment(t,e,s,i){const o=this.options.isStacked;const n=(e.line||{}).style;let r;let a;if(o&&s>0&&i){"gap"!==this.seriesMissingValues(e)?(a=i.linePoints,r=i):a=this._gapStackPoints(t,s,n)}let l;return l=n===Go?ta:n===Uo?ea:Jr,new l(t,e,s,r,a)}reflow(t){super.reflow(t);const e=this._stackPoints;if(e)for(let t=0;t<e.length;t++){const s=e[t];const i=this.categoryAxis.getSlot(s.categoryIx);s.reflow(i)}}_gapStackPoints(t,e,s){const i=this.seriesPoints;let o=t[0].categoryIx;let n=t.length;o<0&&(o=0,n--);const r=o+n;const a=this.seriesOptions[0]._outOfRangeMinPoint?1:0;const l=[];this._stackPoints=this._stackPoints||[];for(let t=o;t<r;t++){const n=t+a;let h=e;let c;do{h--,c=i[h][n]}while(h>0&&!c);if(c)s!==Go&&t>o&&!i[h][n-1]&&l.push(this._previousSegmentPoint(t,n,n-1,h)),l.push(c),s!==Go&&t+1<r&&!i[h][n+1]&&l.push(this._previousSegmentPoint(t,n,n+1,h));else{const e=this._createGapStackPoint(t);this._stackPoints.push(e),l.push(e)}}return l}_previousSegmentPoint(t,e,s,i){const o=this.seriesPoints;let n=i;let r;for(;n>0&&!r;)n--,r=o[n][s];return r?r=o[n][e]:(r=this._createGapStackPoint(t),this._stackPoints.push(r)),r}_createGapStackPoint(t){const e=this.pointOptions({},0);const s=new Ur(0,e);return s.categoryIx=t,s.series={},s}seriesMissingValues(t){return t.missingValues||zo}supportsPointInactiveOpacity(){return!1}}class ia{constructor(){this.axisRanges={}}update(t){const e=this.axisRanges;for(let s in t){const i=t[s];let o=e[s];e[s]=o=o||{min:C,max:T},o.min=Math.min(o.min,i.min),o.max=Math.max(o.max,i.max)}}reset(t){this.axisRanges[t]=void 0}query(t){return this.axisRanges[t]}}class oa extends bs{constructor(t,e,s){super(e),this.textBox=new Hs(t,this.options,s),this.append(this.textBox)}createVisual(){this.textBox.options.noclip=this.options.noclip}reflow(t){const e=this.options;const{vertical:s,aboveAxis:i}=e;const o=this.children[0];const n=o.options;const r=o.box;const a=o.options.padding;let l=t;if(n.align=s?d:S,n.vAlign=s?z:d,e.position===hr)s?(n.vAlign=z,!i&&r.height()<t.height()&&(n.vAlign=c)):n.align=i?B:S;else if(e.position===d)n.vAlign=d,n.align=d;else if(e.position===cr)s?n.vAlign=i?c:z:n.align=i?S:B;else if(e.position===dr)if(s)if(i){const e=(r.width()-t.width()-a.left-a.right)/2;l=new gs(t.x1-e,t.y1-r.height(),t.x2+e,t.y1)}else l=new gs(t.x1,t.y2,t.x2,t.y2+r.height());else n.align=d,l=i?new gs(t.x2,t.y1,t.x2+r.width(),t.y2):new gs(t.x1-r.width(),t.y1,t.x1,t.y2);e.rotation||(s?a.left=a.right=(l.width()-o.contentBox.width())/2:a.top=a.bottom=(l.height()-o.contentBox.height())/2),o.reflow(l)}alignToClipBox(t){const e=this.options.vertical?X:W;const s=e+"1";const i=e+"2";const o=this.children[0];const n=this.parent.box;if(n[s]<t[s]||t[i]<n[i]){const e=o.paddingBox.clone();e[s]=Math.max(n[s],t[s]),e[i]=Math.min(n[i],t[i]),this.reflow(e)}}}te(oa,{position:dr,margin:yt(3),padding:yt(4),color:h,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:Mo,delay:Po},zIndex:2});const na={addAccessibilityAttributesToVisual:function(){this._id=this._id||Me();const t=Object.assign({},{ariaLabel:this.getAriaLabelText()},this.options.accessibility);Ms(this.visual,t)},getAriaLabelText(){const t=this.options.labels;const e=_t(t);return e?e(this.pointData()):this.getLabelText(t)},focusVisual(){this.visual.options.set("id",this._id),this.toggleFocusHighlight(!0)},clearFocusFromVisual(){this.visual.options.set("id",""),this.toggleFocusHighlight(!1)}};class ra extends bs{constructor(t,e){super(),this.options=e,this.color=e.color||U,this.aboveAxis=Kt(this.options.aboveAxis,!0),this.value=t}render(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))}createLabel(){const t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))}createLabelElement(t){return new oa(this.getLabelText(t),ut({vertical:this.options.vertical},t),this.pointData())}getLabelText(t){let e=wt(t);return e?e(this.pointData()):this.formatValue(t.format)}formatValue(t){return this.owner.formatPointValue(this,t)}reflow(t){this.render();const e=this.label;if(this.box=t,e&&(e.options.aboveAxis=this.aboveAxis,e.reflow(t)),this.note&&this.note.reflow(t),this.errorBars)for(let e=0;e<this.errorBars.length;e++)this.errorBars[e].reflow(t)}createVisual(){const{box:t,options:s}=this;const i=s.visual;if(!1!==this.visible)if(super.createVisual(),this.addAccessibilityAttributesToVisual(),i){const o=this.rectVisual=i({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:t.toRect(),createVisual:()=>{const t=new e.G;return this.createRect(t),t},options:s});o&&this.visual.append(o)}else t.width()>0&&t.height()>0&&this.createRect(this.visual)}createRect(t){const s=this.options;const i=s.border;const o=Ft(i.opacity)?i.opacity:s.opacity;const n=this.box.toRect();n.size.width=Math.round(n.size.width);const r=this.rectVisual=e.a.fromRect(n,{fill:Ts(s.pattern,{color:this.color,opacity:s.opacity}),stroke:{color:this.getBorderColor(),width:i.width,opacity:o,dashType:i.dashType}});const a=this.box.width();const l=this.box.height();if((s.vertical?a:l)>6&&(et(r),(a<1||l<1)&&(r.options.stroke.lineJoin="round")),t.append(r),Lr(s)){const e=this.createGradientOverlay(r,{baseColor:this.color},ut({end:s.vertical?void 0:[0,1]},s.overlay));t.append(e)}}createHighlight(t){return et(e.a.fromRect(this.box.toRect(),t))}highlightVisual(){return this.rectVisual}highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}}createFocusHighlight(t){const s=this.options.focusHighlight.border.width;return et(e.a.fromRect(this.box.pad(s/2).toRect(),t))}getBorderColor(){const t=this.color;const s=this.options.border;const i=s._brightness||Eo;let o=s.color;return Ft(o)||(o=new e.C(t).brightness(i).toHex()),o}tooltipAnchor(){const{options:t,box:e,aboveAxis:s}=this;const i=this.owner.pane.clipBox()||e;let o=S;let n=z;let r,a;if(t.vertical)r=Math.min(e.x2,i.x2)+5,s?a=Math.max(e.y1,i.y1):(a=Math.min(e.y2,i.y2),n=c);else{const l=Math.max(e.x1,i.x1);const h=Math.min(e.x2,i.x2);t.isStacked?(n=c,s?(o=B,r=h):r=l,a=Math.max(e.y1,i.y1)-5):(s?r=h+5:(r=l-5,o=B),a=Math.max(e.y1,i.y1))}return{point:new ps(r,a),align:{horizontal:o,vertical:n}}}overlapsBox(t){return this.box.overlaps(t)}unclipBox(){const t=this.label&&this.label.textBox;return Fr(this.box.clone(),[t,this.note])}labelBox(){const t=this.label&&this.label.textBox;return t?t.box:new gs}noteBox(){return this.note?this.note.box:new gs}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}}getIndex(){return this.categoryIx}}function aa(t,e){t.forEach(e)}function la(t,e){const s=t.length;for(let i=s-1;i>=0;i--)e(t[i],i-s-1)}ut(ra.prototype,Nr),ut(ra.prototype,jr),ut(ra.prototype,na),ra.prototype.defaults={border:{width:1},vertical:!0,overlay:{gradient:"glass"},labels:{visible:!1,format:"{0}"},opacity:1,notes:{label:{}},accessibility:{role:er,className:sr,ariaRoleDescription:ir}};class ha extends bs{constructor(t){super(t),this.forEach=t.rtl?la:aa}reflow(t){const{vertical:e,gap:s,spacing:i}=this.options;const o=this.children;const n=o.length;const r=e?X:W;const a=n+s+i*(n-1);const l=(e?t.height():t.width())/a;let h=t[r+1]+l*(s/2);this.forEach(o,((e,s)=>{const o=(e.box||t).clone();o[r+1]=h,o[r+2]=h+l,e.reflow(o),s<n-1&&(h+=l*i),h+=l}))}}te(ha,{vertical:!1,gap:0,spacing:0});class ca extends bs{reflow(t){const e=this.options.vertical?W:X;const s=this.children;const i=s.length;let o=this.box=new gs;for(let n=0;n<i;n++){const i=s[n];if(!1!==i.visible){const s=i.box.clone();s.snapTo(t,e),0===n&&(o=this.box=s.clone()),i.reflow(s),o.wrap(s)}}}}te(ca,{vertical:!0});class da extends Hr{render(){super.render(),this.updateStackRange()}pointType(){return ra}clusterType(){return ha}stackType(){return ca}stackLimits(t,e){return super.stackLimits(t,e)}createPoint(t,e){const{categoryIx:s,series:i,seriesIx:o}=e;const{options:n,children:r}=this;const a=Ft(i.stack)?i.stack:n.defaultStack;const l=this.pointValue(t);let h=this.pointOptions(i,o);const c=h.labels;a&&c.position===dr&&(c.position=hr),h.isStacked=a;let d=t.fields.color||i.color;l<0&&h.negativeColor&&(d=h.negativeColor),h=this.evalPointOptions(h,l,e),ht(i.color)&&(d=h.color);const u=new(this.pointType())(l,h);u.color=d;let p=r[s];if(!p){p=new(this.clusterType())({vertical:n.invertAxes,gap:n.gap,spacing:n.spacing,rtl:!n.invertAxes&&(this.chartService||{}).rtl}),this.append(p)}if(n.isStacked){this.getStackWrap(a,p).append(u)}else p.append(u);return u}getStackWrap(t,e){const s=typeof t===I?t.group||!0:t;const i=e.children;let o;if(typeof s===D||!0===s)for(let t=0;t<i.length;t++)if(i[t]._stackGroup===s){o=i[t];break}if(!o){o=new(this.stackType())({vertical:!this.options.invertAxes}),o._stackGroup=s,e.append(o)}return o}categorySlot(t,e,s){const i=this.options;const o=t.getSlot(e);const n=s.startValue();if(i.isStacked){const t=s.getSlot(n,n,!0);const e=i.invertAxes?W:X;o[e+1]=o[e+2]=t[e+1]}return o}reflowCategories(t){const e=this.children;const s=e.length;for(let i=0;i<s;i++)e[i].reflow(t[i])}createAnimation(){this._setAnimationOptions(),super.createAnimation(),br(this.options.series)&&this._setChildrenAnimation()}_setChildrenAnimation(){const t=this.points;for(let e=0;e<t.length;e++){const s=t[e];const i=s.visual;i&&Ft(i.options.zIndex)&&(s.options.animation=this.options.animation,s.createAnimation())}}_setAnimationOptions(){const t=this.options;const s=t.animation||{};let i;if(t.isStacked){const e=this.seriesValueAxis(t.series[0]);i=e.getSlot(e.startValue())}else i=this.categoryAxis.getSlot(0);s.origin=new e.P(i.x1,i.y1),s.vertical=!t.invertAxes}}te(da,{animation:{type:Xo}});class ua extends bs{constructor(t,e){super(e),this.value=t}getLabelText(t){return this.formatValue(t.format)}reflow(t){const{options:e,value:s,owner:i}=this;const o=i.seriesValueAxis(e);const n=o.getSlot(s.open,s.close);const r=o.getSlot(s.low,s.high);n.x1=r.x1=t.x1,n.x2=r.x2=t.x2,this.realBody=n;const a=r.center().x;const l=[];l.push([[a,r.y1],[a,n.y1]]),l.push([[a,n.y2],[a,r.y2]]),this.lines=l,this.box=r.clone().wrap(n),this._rendered||(this._rendered=!0,this.createNote()),this.reflowNote()}reflowNote(){this.note&&this.note.reflow(this.box)}createVisual(){super.createVisual(),this.addAccessibilityAttributesToVisual(),this._mainVisual=this.mainVisual(this.options),this.visual.append(this._mainVisual),this.createOverlay()}mainVisual(t){const s=new e.G;return this.createBody(s,t),this.createLines(s,t),s}createBody(t,s){const i=e.a.fromRect(this.realBody.toRect(),{fill:Ts(s.pattern,{color:this.color,opacity:s.opacity}),stroke:null});s.border.width>0&&i.options.set("stroke",{color:this.getBorderColor(s),width:s.border.width,dashType:s.border.dashType,opacity:Kt(s.border.opacity,s.opacity)}),et(i),t.append(i),Lr(s)&&t.append(this.createGradientOverlay(i,{baseColor:this.color},ut({end:s.vertical?void 0:[0,1]},s.overlay)))}createLines(t,e){this.drawLines(t,e,this.lines,e.line)}drawLines(t,s,i,o){if(!i)return;const n={stroke:{color:o.color||this.color,opacity:Kt(o.opacity,s.opacity),width:o.width,dashType:o.dashType,lineCap:"butt"}};for(let s=0;s<i.length;s++){const o=e.a.fromPoints(i[s],n);et(o),t.append(o)}}getBorderColor(t){let s=t.border.color;return Ft(s)||(s=new e.C(this.color).brightness(this.options.border._brightness).toHex()),s}createOverlay(){const t=e.a.fromRect(this.box.toRect(),{fill:{color:U,opacity:0},stroke:null});this.visual.append(t)}createHighlight(){const t=this.options.highlight;const e=this.color;this.color=t.color||this.color;const s=this.mainVisual(ut({},this.options,{line:{color:this.getBorderColor(t)}},t));return this.color=e,s}highlightVisual(){return this._mainVisual}highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}}tooltipAnchor(){const t=this.box;const e=this.owner.pane.clipBox()||t;return{point:new ps(t.x2+5,Math.max(t.y1,e.y1)+5),align:{horizontal:S,vertical:z}}}formatValue(t){return this.owner.formatPointValue(this,t)}overlapsBox(t){return this.box.overlaps(t)}pointData(){return{dataItem:this.dataItem,value:this.value,meanPoints:this.meanPoints,medianPoints:this.medianPoints,whiskerPoints:this.whiskerPoints,stackValue:this.stackValue,series:this.series}}getIndex(){return this.categoryIx}}ua.prototype.createFocusHighlight=ra.prototype.createFocusHighlight,te(ua,{vertical:!0,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{4:d}</th></tr><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},labels:{format:""},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},accessibility:{role:er,className:sr,ariaRoleDescription:ir}}),ut(ua.prototype,Nr),ut(ua.prototype,jr),ut(ua.prototype,na);class pa extends Hr{reflowCategories(t){const e=this.children;const s=e.length;for(let i=0;i<s;i++)e[i].reflow(t[i])}addValue(t,e){const{categoryIx:s,category:i,series:o,seriesIx:n}=e;const{children:r,options:a}=this;const l=t.valueFields;const h=_r(this.splitValue(l));const c=o.data[s];let d=this.categoryPoints[s];let u;d||(this.categoryPoints[s]=d=[]),h&&(u=this.createPoint(t,e));let p=r[s];p||(p=new ha({vertical:a.invertAxes,gap:a.gap,spacing:a.spacing,rtl:!a.invertAxes&&(this.chartService||{}).rtl}),this.append(p)),u&&(this.updateRange(l,e),p.append(u),u.categoryIx=s,u.category=i,u.series=o,u.seriesIx=n,u.owner=this,u.dataItem=c,u.noteText=t.fields.noteText),this.points.push(u),d.push(u)}pointType(){return ua}createPoint(t,e){const{series:s}=e;const i=this.pointType();const o=t.valueFields;let n=ut({},s);let r=t.fields.color||s.color;n=this.evalPointOptions(n,o,e),s.type!==$o&&s.type!==nn||o.open>o.close&&(r=t.fields.downColor||s.downColor||s.color),ht(s.color)&&(r=n.color),n.vertical=!this.options.invertAxes;const a=new i(o,n);return a.color=r,a}splitValue(t){return[t.low,t.open,t.close,t.high]}updateRange(t,e){const s=e.series.axis;const i=this.splitValue(t);let o=this.valueAxisRanges[s]||{min:C,max:T};this.valueAxisRanges[s]={min:Math.min.apply(Math,i.concat([o.min])),max:Math.max.apply(Math,i.concat([o.max]))}}formatPointValue(t,e){const s=t.value;return this.chartService.format.auto(e,s.open,s.high,s.low,s.close,t.category)}animationPoints(){return this.points}}ut(pa.prototype,Qr);class ga extends ua{constructor(t,e){super(t,e),this.createNote()}reflow(t){const{options:e,value:s,owner:i}=this;const o=i.seriesValueAxis(e);let n,r;this.boxSlot=r=o.getSlot(s.q1,s.q3),this.realBody=r,this.reflowBoxSlot(t),this.whiskerSlot=n=o.getSlot(s.lower,s.upper),this.reflowWhiskerSlot(t);const a=o.getSlot(s.median);if(s.mean){const e=o.getSlot(s.mean);this.meanPoints=this.calcMeanPoints(t,e)}this.whiskerPoints=this.calcWhiskerPoints(r,n),this.medianPoints=this.calcMedianPoints(t,a),this.box=n.clone().wrap(r),this.reflowNote()}reflowBoxSlot(t){this.boxSlot.x1=t.x1,this.boxSlot.x2=t.x2}reflowWhiskerSlot(t){this.whiskerSlot.x1=t.x1,this.whiskerSlot.x2=t.x2}calcMeanPoints(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]}calcWhiskerPoints(t,e){const s=e.center().x;return[[[s-5,e.y1],[s+5,e.y1],[s,e.y1],[s,t.y1]],[[s-5,e.y2],[s+5,e.y2],[s,e.y2],[s,t.y2]]]}calcMedianPoints(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]}renderOutliers(t){const s=this.value;const i=s.outliers||[];const o=3*Math.abs(s.q3-s.q1);const n=[];let r=t.markers||{};for(let a=0;a<i.length;a++){const l=i[a];r=l<s.q3+o&&l>s.q1-o?t.outliers:t.extremes;let h=ut({},r.border);Ft(h.color)||(Ft(this.color)?h.color=this.color:h.color=new e.C(r.background).brightness(Eo).toHex());const c=new Es({type:r.type,width:r.size,height:r.size,rotation:r.rotation,background:r.background,border:h,opacity:r.opacity});c.value=l,n.push(c)}return this.reflowOutliers(n),n}reflowOutliers(t){const e=this.owner.seriesValueAxis(this.options);const s=this.box.center();for(let i=0;i<t.length;i++){const o=t[i].value;const n=e.getSlot(o);this.options.vertical?n.move(s.x):n.move(void 0,s.y),this.box=this.box.wrap(n),t[i].reflow(n)}}mainVisual(t){const e=super.mainVisual(t);const s=this.renderOutliers(t);for(let t=0;t<s.length;t++){const i=s[t].getElement();i&&e.append(i)}return e}createLines(t,e){this.drawLines(t,e,this.whiskerPoints,e.whiskers),this.drawLines(t,e,this.medianPoints,e.median),this.drawLines(t,e,this.meanPoints,e.mean)}getBorderColor(){return(this.options.border||{}).color?this.options.border.color:this.color?this.color:super.getBorderColor()}}te(ga,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{6:d}</th></tr><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:8,type:p,background:U,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:8,type:u,background:U,border:{width:2,opacity:1},opacity:0}}),ut(ga.prototype,Nr);class ma extends ga{reflowBoxSlot(t){this.boxSlot.y1=t.y1,this.boxSlot.y2=t.y2}reflowWhiskerSlot(t){this.whiskerSlot.y1=t.y1,this.whiskerSlot.y2=t.y2}calcMeanPoints(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]}calcWhiskerPoints(t,e){const s=e.center().y;return[[[e.x1,s-5],[e.x1,s+5],[e.x1,s],[t.x1,s]],[[e.x2,s-5],[e.x2,s+5],[e.x2,s],[t.x2,s]]]}calcMedianPoints(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]}}class fa extends pa{addValue(t,e){const{categoryIx:s,category:i,series:o,seriesIx:n}=e;const{children:r,options:a}=this;const l=t.valueFields;const h=_r(this.splitValue(l));const c=o.data[s];let d=this.categoryPoints[s];let u;d||(this.categoryPoints[s]=d=[]),h&&(u=this.createPoint(t,e));let p=r[s];p||(p=new ha({vertical:a.invertAxes,gap:a.gap,spacing:a.spacing,rtl:!a.invertAxes&&(this.chartService||{}).rtl}),this.append(p)),u&&(this.updateRange(l,e),p.append(u),u.categoryIx=s,u.category=i,u.series=o,u.seriesIx=n,u.owner=this,u.dataItem=c),this.points.push(u),d.push(u)}pointType(){return this.options.invertAxes?ma:ga}splitValue(t){return[t.lower,t.q1,t.median,t.q3,t.upper]}updateRange(t,e){const s=e.series.axis;let i=this.splitValue(t).concat(this.filterOutliers(t.outliers));Ft(t.mean)&&(i=i.concat(t.mean));let o=this.valueAxisRanges[s]||{min:C,max:T};this.valueAxisRanges[s]={min:Math.min.apply(Math,i.concat([o.min])),max:Math.max.apply(Math,i.concat([o.max]))}}formatPointValue(t,e){const s=t.value;return this.chartService.format.auto(e,s.lower,s.q1,s.median,s.q3,s.upper,s.mean,t.category)}filterOutliers(t){const e=(t||[]).length;const s=[];for(let i=0;i<e;i++){const e=t[i];Ft(e)&&null!==e&&s.push(e)}return s}supportsPointInactiveOpacity(){return!1}}class xa extends yr{getAxis(){const t=this.chart.seriesAxes(this.series);return this.isVertical?t.y:t.x}}class ya extends bs{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this._initFields(),this.render()}_initFields(){this.xAxisRanges={},this.yAxisRanges={},this.points=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[]}render(){this.traverseDataPoints(this.addValue.bind(this))}addErrorBar(t,e,s){const i=t.value[e];const o=e+"Value";const n=e+"ErrorLow";const r=e+"ErrorHigh";const{seriesIx:a,series:l}=s;const h=t.options.errorBars;const c=s[n];const d=s[r];if(it(i)){let s;it(c)&&it(d)&&(s={low:c,high:d}),h&&Ft(h[o])&&(this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]},this.seriesErrorRanges[e][a]=this.seriesErrorRanges[e][a]||new Co(h[o],l,e),s=this.seriesErrorRanges[e][a].getErrorRange(i,h[o])),s&&this.addPointErrorBar(s,t,e)}}addPointErrorBar(t,e,s){const{low:i,high:o}=t;const{series:n,options:{errorBars:r}}=e;const a=s===X;const l={};e[s+"Low"]=i,e[s+"High"]=o,e.errorBars=e.errorBars||[];const h=new xa(i,o,a,this,n,r);e.errorBars.push(h),e.append(h),l[s]=i,this.updateRange(l,n),l[s]=o,this.updateRange(l,n)}addValue(t,e){const{x:s,y:i}=t;const o=e.seriesIx;const n=this.options.series[o];const r=this.seriesMissingValues(n);const a=this.seriesPoints[o];let l=t;let h;Ir(s)&&Ir(i)||(l=this.createMissingValue(l,r)),l&&(h=this.createPoint(l,e),h&&(Object.assign(h,e),this.addErrorBar(h,W,e),this.addErrorBar(h,X,e)),this.updateRange(l,e.series)),this.points.push(h),a.push(h)}seriesMissingValues(t){return t.missingValues}createMissingValue(){}updateRange(t,e){const s=this.chartService.intl;const{xAxis:i,yAxis:o}=e;let{x:n,y:r}=t;let a=this.xAxisRanges[i];let l=this.yAxisRanges[o];Ir(n)&&(a=this.xAxisRanges[i]=a||{min:C,max:T},ot(n)&&(n=Bi(s,n)),a.min=Math.min(a.min,n),a.max=Math.max(a.max,n)),Ir(r)&&(l=this.yAxisRanges[o]=l||{min:C,max:T},ot(r)&&(r=Bi(s,r)),l.min=Math.min(l.min,r),l.max=Math.max(l.max,r))}evalPointOptions(t,e,s){const{series:i,seriesIx:o}=s;const n={defaults:i._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint","drilldownSeriesFactory","ariaTemplate","ariaContent"]};let r=this._evalSeries[o];Ft(r)||(this._evalSeries[o]=r=Tr(t,{},n,!0));let a=t;return r&&(a=ut({},t),Tr(a,{value:e,series:i,dataItem:s.dataItem},n)),a}pointType(){return Ur}pointOptions(t,e){let s=this.seriesOptions[e];if(!s){const i=this.pointType().prototype.defaults;this.seriesOptions[e]=s=ut({},i,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return s}createPoint(t,e){const s=e.series;let i=this.pointOptions(s,e.seriesIx);let o=e.color||s.color;i=this.evalPointOptions(i,t,e),ht(s.color)&&(o=i.color);const n=new Ur(t,i);return n.color=o,this.append(n),n}seriesAxes(t){const{xAxis:e,yAxis:s}=t;const i=this.plotArea;const o=e?i.namedXAxes[e]:i.axisX;const n=s?i.namedYAxes[s]:i.axisY;if(!o)throw new Error("Unable to locate X axis with name "+e);if(!n)throw new Error("Unable to locate Y axis with name "+s);return{x:o,y:n}}reflow(t){const e=this.points;const s=!this.options.clip;let i=0;this.traverseDataPoints(((t,o)=>{const n=e[i++];const r=this.seriesAxes(o.series);const a=r.x.getSlot(t.x,t.x,s);const l=r.y.getSlot(t.y,t.y,s);if(n)if(a&&l){const t=this.pointSlot(a,l);n.reflow(t)}else n.visible=!1})),this.box=t}pointSlot(t,e){return new gs(t.x1,e.y1,t.x2,e.y2)}traverseDataPoints(t){const{options:{series:e},seriesPoints:s}=this;for(let i=0;i<e.length;i++){const o=e[i];s[i]||(s[i]=[]);for(let e=0;e<o.data.length;e++){const{valueFields:s,fields:n}=this.plotArea.bindPoint(o,e);t(s,ut({pointIx:e,series:o,seriesIx:i,dataItem:o.data[e],owner:this},n))}}}formatPointValue(t,e){const s=t.value;return this.chartService.format.auto(e,s.x,s.y)}animationPoints(){const t=this.points;const e=[];for(let s=0;s<t.length;s++)e.push((t[s]||{}).marker);return e}}te(ya,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0}),ut(ya.prototype,Qr);class va extends Ur{constructor(t,e){super(t,e),this.category=t.category}createHighlight(){const t=this.options.highlight;const s=t.border;const i=this.options.markers;const o=this.box.center();const n=(i.size+i.border.width+s.width)/2;const r=new e.G;const a=new e.e(new e.f([o.x,o.y+n/5+s.width/2],n+s.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:i.background,stops:[{offset:0,color:i.background,opacity:.3},{offset:1,color:i.background,opacity:0}]})});const l=new e.e(new e.f([o.x,o.y],n),{stroke:{color:s.color||new e.C(i.background).brightness(Eo).toHex(),width:s.width,opacity:s.opacity,dashType:s.dashType},fill:Ts(this.options.pattern,{color:i.background,opacity:t.opacity})});return r.append(a,l),r}createFocusHighlight(t){const s=this.options.focusHighlight;const i=this.options.markers;const o=this.box.center();const n=(i.size+i.border.width)/2+s.border.width/2;return new e.e(new e.f([o.x,o.y],n),t)}}va.prototype.defaults=ut({},va.prototype.defaults,{labels:{position:d},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}}),va.prototype.defaults.highlight.zIndex=void 0;class ba extends ya{_initFields(){this._maxSize=T,super._initFields()}addValue(t,e){null!==t.size&&(t.size>0||t.size<0&&e.series.negativeValues.visible)?(this._maxSize=Math.max(this._maxSize,Math.abs(t.size)),super.addValue(t,e)):(this.points.push(null),this.seriesPoints[e.seriesIx].push(null))}reflow(t){this.updateBubblesSize(t),super.reflow(t)}pointType(){return va}createPoint(t,e){const s=e.series;const i=s.data.length;const o=e.pointIx*(Po/i);const n={delay:o,duration:Po-o,type:qo};let r=e.color||s.color;t.size<0&&s.negativeValues.visible&&(r=Kt(s.negativeValues.color,r));let a=ut({labels:{animation:{delay:o,duration:Po-o}}},this.pointOptions(s,e.seriesIx),{markers:{type:u,border:s.border,opacity:s.opacity,animation:n}});a=this.evalPointOptions(a,t,e),ht(s.color)&&(r=a.color),a.markers.background=r;const l=new va(t,a);return l.color=r,this.append(l),l}updateBubblesSize(t){const{options:{series:e}}=this;const s=Math.min(t.width(),t.height());for(let t=0;t<e.length;t++){const i=e[t];const o=this.seriesPoints[t];const n=(i.minSize||Math.max(.02*s,10))/2;const r=(i.maxSize||.2*s)/2;const a=Math.PI*n*n;const l=(Math.PI*r*r-a)/this._maxSize;for(let t=0;t<o.length;t++){const e=o[t];if(e){const t=Math.abs(e.value.size)*l;const s=Math.sqrt((a+t)/Math.PI);const i=Kt(e.options.zIndex,0)+(1-s/r);ut(e.options,{zIndex:i,markers:{size:2*s,zIndex:i},labels:{zIndex:i+1}})}}}}formatPointValue(t,e){const s=t.value;return this.chartService.format.auto(e,s.x,s.y,s.size,t.category)}createAnimation(){}createVisual(){}}te(ba,{tooltip:{format:"{3}"},labels:{format:"{3}"}});class wa extends Es{}ut(wa.prototype,Nr);class _a extends bs{constructor(t,e){super(e),this.aboveAxis=this.options.aboveAxis,this.color=e.color||U,this.value=t}render(){const t=this.options;this._rendered||(this._rendered=!0,Ft(this.value.target)&&(this.target=new wa({type:t.target.shape,background:t.target.color||this.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:z,align:B}),this.target.value=this.value,this.target.dataItem=this.dataItem,this.target.series=this.series,this.append(this.target)),this.createLabel(),this.createNote())}createLabel(){const t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))}createLabelElement(t){return new oa(this.getLabelText(t),t,this.pointData())}getLabelText(t){let e=wt(t);return e?e(this.pointData()):this.formatValue(t.format)}reflow(t){this.render();const{options:e,target:s,owner:i}=this;const o=e.invertAxes;const n=i.seriesValueAxis(this.options);const r=i.categorySlot(i.categoryAxis,e.categoryIx,n);const a=n.getSlot(this.value.target);const l=o?a:r;const h=o?r:a;if(s){const t=new gs(l.x1,h.y1,l.x2,h.y2);s.options.height=o?t.height():e.target.line.width,s.options.width=o?e.target.line.width:t.width(),s.reflow(t)}const c=this.label;c&&(c.options.aboveAxis=this.aboveAxis,c.reflow(t)),this.note&&this.note.reflow(t),this.box=t}createVisual(){super.createVisual(),this.addAccessibilityAttributesToVisual();const t=this.options;const s=e.a.fromRect(this.box.toRect(),{fill:Ts(t.pattern,{color:this.color,opacity:t.opacity}),stroke:null});t.border.width>0&&s.options.set("stroke",{color:t.border.color||this.color,width:t.border.width,dashType:t.border.dashType,opacity:Kt(t.border.opacity,t.opacity)}),this.bodyVisual=s,et(s),this.visual.append(s)}createAnimation(){this.bodyVisual&&(this.animation=e.b.create(this.bodyVisual,this.options.animation))}createHighlight(t){return e.a.fromRect(this.box.toRect(),t)}highlightVisual(){return this.bodyVisual}highlightVisualArgs(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}}formatValue(t){return this.owner.formatPointValue(this,t)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series}}overlapsBox(t){return this.box.overlaps(t)}getIndex(){return this.categoryIx}}_a.prototype.tooltipAnchor=ra.prototype.tooltipAnchor,_a.prototype.createFocusHighlight=ra.prototype.createFocusHighlight,te(_a,{border:{width:1},vertical:!1,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},labels:{visible:!1},tooltip:{format:"Current: {0}<br />Target: {1}"},notes:{label:{}},accessibility:{role:er,className:sr,ariaRoleDescription:ir}}),ut(_a.prototype,Nr),ut(_a.prototype,jr),ut(_a.prototype,na);class ka extends Hr{constructor(t,e){!function(t){const e=t.series;for(let t=0;t<e.length;t++){const s=e[t];const i=s.data;!i||Q(i[0])||pt(i[0])||(s.data=[i])}}(e),super(t,e)}reflowCategories(t){const e=this.children;const s=e.length;for(let i=0;i<s;i++)e[i].reflow(t[i])}plotRange(t){const e=t.series;const s=this.seriesValueAxis(e);const i=this.categoryAxisCrossingValue(s);return[i,t.value.current||i]}createPoint(t,e){const{categoryIx:s,series:i}=e;const{options:o,children:n}=this;const r=t.valueFields;let a=ut({vertical:!o.invertAxes,overlay:i.overlay,categoryIx:s,invertAxes:o.invertAxes},i);let l=t.fields.color||i.color;a=this.evalPointOptions(a,r,e),ht(i.color)&&(l=a.color);const h=new _a(r,a);h.color=l;let c=n[s];return c||(c=new ha({vertical:o.invertAxes,gap:o.gap,spacing:o.spacing,rtl:!o.invertAxes&&(this.chartService||{}).rtl}),this.append(c)),c.append(h),h}updateRange(t,e){const{current:s,target:i}=t;const o=e.series.axis;let n=this.valueAxisRanges[o];Ft(s)&&!isNaN(s)&&Ft(i&&!isNaN(i))&&(n=this.valueAxisRanges[o]=n||{min:C,max:T},n.min=Math.min(n.min,s,i),n.max=Math.max(n.max,s,i))}formatPointValue(t,e){return this.chartService.format.auto(e,t.value.current,t.value.target)}pointValue(t){return t.valueFields.current}aboveAxis(t){return t.value.current>0}createAnimation(){const t=this.points;this._setAnimationOptions();for(let e=0;e<t.length;e++){const s=t[e];s.options.animation=this.options.animation,s.createAnimation()}}}ka.prototype._setAnimationOptions=da.prototype._setAnimationOptions,te(ka,{animation:{type:Xo}});class Aa{constructor(t,e){this.chartService=t,this.options=ut({},this.options,e)}getStyle(t,e){let{background:s,border:{color:i}}=t;if(e){const t=e.color||e.options.color;s=Kt(s,t),i=Kt(i,t)}const o=void 0!==t.padding?yt(t.padding):{};return"object"==typeof t.padding&&(o.top=void 0!==t.padding.top?o.top:void 0,o.right=void 0!==t.padding.right?o.right:void 0,o.bottom=void 0!==t.padding.bottom?o.bottom:void 0,o.left=void 0!==t.padding.left?o.left:void 0),{backgroundColor:s,borderColor:i,font:t.font,color:t.color,opacity:t.opacity,borderWidth:gt(t.border.width),paddingTop:gt(o.top),paddingBottom:gt(o.bottom),paddingLeft:gt(o.left),paddingRight:gt(o.right)}}show(t,s,i){if(!this.chartService)return;t.format=s.format;const o=this.getStyle(s,i);t.style=o;const n=new e.C(o.backgroundColor);Ft(s.color)||n.isDark()||(t.className="k-chart-tooltip-inverse"),this.chartService.notify(Kn,t),this.visible=!0}hide(){this.chartService&&this.chartService.notify(Jn),this.visible=!1}destroy(){delete this.chartService}}te(Aa,{border:{width:1},opacity:1});class Sa extends Aa{constructor(t,e,s){super(t,s),this.crosshair=e,this.formatService=t.format,this.initAxisName()}initAxisName(){const t=this.crosshair.axis;let e;e=t.plotArea.categoryAxis?t.getCategory?"categoryAxis":"valueAxis":t.options.vertical?"yAxis":"xAxis",this.axisName=e}showAt(t){const{crosshair:{axis:e},options:s}=this;let i=e[s.stickyMode?"getCategory":"getValue"](t);let o=i;s.format?o=this.formatService.auto(s.format,i):e.options.type===g&&(o=this.formatService.auto(e.options.labels.dateFormats[e.options.baseUnit],i)),this.show({point:t,anchor:this.getAnchor(),crosshair:this.crosshair,value:o,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)}hide(){this.chartService.notify(Jn,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})}getAnchor(){const{crosshair:t,options:{position:e,padding:s}}=this;const i=!t.axis.options.vertical;const o=t.line.bbox();let n,r,a;return i?(n=d,e===c?(r=z,a=o.bottomLeft().translate(0,s)):(r=c,a=o.topLeft().translate(0,-s))):(r=d,e===S?(n=B,a=o.topLeft().translate(-s,0)):(n=S,a=o.topRight().translate(s,0))),{point:a,align:{horizontal:n,vertical:r}}}}te(Sa,{padding:10});class Ca extends bs{constructor(t,e,s){super(s),this.axis=e,this.stickyMode=e instanceof Di;const i=this.options.tooltip;i.visible&&(this.tooltip=new Sa(t,this,ut({},i,{stickyMode:this.stickyMode})))}showAt(t){this.point=t,this.moveLine(),this.line.visible(!0),this.tooltip&&this.tooltip.showAt(t)}hide(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()}moveLine(){const{axis:t,point:s}=this;const i=t.options.vertical;const o=this.getBox();const n=i?X:W;const r=new e.P(o.x1,o.y1);let a;if(a=i?new e.P(o.x2,o.y1):new e.P(o.x1,o.y2),s)if(this.stickyMode){const e=t.getSlot(t.pointCategoryIndex(s));r[n]=a[n]=e.center()[n]}else r[n]=a[n]=s[n];this.box=o,this.line.moveTo(r).lineTo(a)}getBox(){const t=this.axis;const e=t.pane.axes;const s=e.length;const i=t.options.vertical;const o=t.lineBox().clone();const n=i?W:X;let r;for(let t=0;t<s;t++){const s=e[t];s.options.vertical!==i&&(r?r.wrap(s.lineBox()):r=s.lineBox().clone())}return o[n+1]=r[n+1],o[n+2]=r[n+2],o}createVisual(){super.createVisual();const t=this.options;this.line=new e.a({stroke:{color:t.color,width:t.width,opacity:t.opacity,dashType:t.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)}destroy(){this.tooltip&&this.tooltip.destroy(),super.destroy()}}te(Ca,{color:h,width:2,zIndex:-1,tooltip:{visible:!1}});class Ta extends bs{constructor(t,e){super(t),this.pane=e}shouldClip(){const t=this.children;const e=t.length;for(let s=0;s<e;s++)if(!0===t[s].options.clip)return!0;return!1}_clipBox(){return this.pane.chartsBox()}createVisual(){if(this.visual=new e.G({zIndex:0}),this.shouldClip()){const t=(this.clipBox=this._clipBox()).toRect();const s=e.a.fromRect(t);et(s),this.visual.clip(s),this.unclipLabels()}}stackRoot(){return this}unclipLabels(){const{children:t,clipBox:e}=this;for(let s=0;s<t.length;s++){const i=t[s].points||[];const o=i.length;for(let t=0;t<o;t++){const s=i[t];if(s&&!1!==s.visible&&s.overlapsBox&&s.overlapsBox(e))if(s.unclipElements)s.unclipElements();else{const{label:t,note:i}=s;t&&t.options.visible&&(t.alignToClipBox&&t.alignToClipBox(e),t.options.noclip=!0),i&&i.options.visible&&(i.options.noclip=!0)}}}}unclipBox(){const{children:t}=this;const e=this._clipBox();const s=e.clone();for(let i=0;i<t.length;i++){const o=t[i].points||[];const n=o.length;for(let t=0;t<n;t++){const i=o[t];if(i&&i.unclipBox&&i.overlapsBox&&!1!==i.visible){if(!i.overlapsBox(e)){i.clipElements&&i.clipElements();continue}const t=i.unclipBox();if(s.overlaps(t)){const e=i.labelBox?i.labelBox():new gs;const o=i.noteBox?i.noteBox():new gs;const n=Math.max(e.height(),o.height());const r=Math.max(e.width(),o.width());s.wrapLimit(t,r,n)}}}}return s}destroy(){super.destroy(),delete this.parent}}Ta.prototype.isStackRoot=!0;let Pa=class t extends Ps{constructor(t){super(t),this.id="pane"+Ma++,this.createTitle(),this.content=new bs,this.chartContainer=new Ta({},this),this.append(this.content),this.axes=[],this.charts=[]}createTitle(){let e=this.options.title;pt(e)&&(e=ut({},e,{align:e.position,position:z})),this.title=Ns.buildTitle(e,t.prototype.options.title),this.title&&this.append(this.title)}appendAxis(t){this.content.append(t),this.axes.push(t),t.pane=this}appendAxisAt(t,e){this.content.append(t),this.axes.splice(e,0,t),t.pane=this}appendChart(t){this.chartContainer.parent!==this.content&&this.content.append(this.chartContainer),this.charts.push(t),this.chartContainer.append(t),t.pane=this}empty(){const t=this.parent;if(t){for(let e=0;e<this.axes.length;e++)t.removeAxis(this.axes[e]);for(let e=0;e<this.charts.length;e++)t.removeChart(this.charts[e])}this.axes=[],this.charts=[],this.content.destroy(),this.content.children=[],this.chartContainer.children=[]}reflow(t){let e;Xt(this.children)===this.content&&(e=this.children.pop()),super.reflow(t),e&&this.children.push(e),this.title&&(this.contentBox.y1+=this.title.box.height())}unclipBox(){return this.chartContainer.unclipBox()}visualStyle(){const t=super.visualStyle();return t.zIndex=-10,t}renderComplete(){this.options.visible&&this.createGridLines()}stackRoot(){return this}clipRoot(){return this}createGridLines(){const t=this.axes;const e=t.concat(this.parent.axes);const s=[];const i=[];for(let o=0;o<t.length;o++){const n=t[o];const r=n.options.vertical;const a=r?s:i;for(let t=0;t<e.length;t++)if(0===a.length){const s=e[t];r!==s.options.vertical&&Dt(a,n.createGridLines(s))}}}refresh(){this.visual.clear(),this.content.parent=null,this.content.createGradient=this.createGradient.bind(this),this.content.renderVisual(),this.content.parent=this,this.title&&this.visual.append(this.title.visual),this.visual.append(this.content.visual),this.renderComplete(),this.notifyRender()}chartsBox(){const t=this.axes;const e=t.length;const s=new gs;for(let i=0;i<e;i++){const e=t[i];const o=e.options.vertical?X:W;const n=e.lineBox();s[o+1]=n[o+1],s[o+2]=n[o+2]}if(0===s.x2){const t=this.parent.axes;const e=t.length;for(let i=0;i<e;i++){const e=t[i];if(!e.options.vertical){const t=e.lineBox();s.x1=t.x1,s.x2=t.x2}}}return s}clipBox(){return this.chartContainer.clipBox}notifyRender(){const t=this.getService();t&&t.notify(tr,{pane:new yo(this),index:this.paneIndex,name:this.options.name})}};let Ma=1;Pa.prototype.isStackRoot=!0,te(Pa,{zIndex:-1,shrinkToFit:!0,title:{align:S},visible:!0});const Ea=t=>!1!==t.options.visible;class La extends bs{constructor(t,e,s){super(e),this.initFields(t,e),this.series=t,this.initSeries(),this.charts=[],this.options.legend=this.options.legend||{},this.options.legend.data=[],this.axes=[],this.crosshairs=[],this.chartService=s,this.originalOptions=e,this.originalSeries=t,this._bindCache=new WeakMap,this.createPanes(),this.render(),this.createCrosshairs()}initFields(){}initSeries(){const t=this.series;for(let e=0;e<t.length;e++)t[e].index=e}bindPoint(t,e,s){let i=this._bindCache.get(t);i||(i=[],this._bindCache.set(t,i));let o=i[e];return o||(o=i[e]=ko.current.bindPoint(t,e,s)),o}createPanes(){const t=this.options.title||{};const e=this.options.paneDefaults;const s=this.options.panes||[];const i=Math.max(s.length,1);const o=[];const n=ut({title:{color:t.color}},e);for(let t=0;t<i;t++){const e=ut({},n,s[t]);ot(e.title)&&(e.title=ut({text:e.title},n.title));const i=new Pa(e);i.paneIndex=t,o.push(i),this.append(i)}this.panes=o}crosshairOptions(t){return t.options.crosshair}createCrosshairs(t=this.panes){for(let e=0;e<t.length;e++){const s=t[e];for(let t=0;t<s.axes.length;t++){const e=s.axes[t];const i=this.crosshairOptions(e);if(i&&i.visible){const t=new Ca(this.chartService,e,i);this.crosshairs.push(t),s.content.append(t)}}}}removeCrosshairs(t){const e=this.crosshairs;const s=t.axes;for(let t=e.length-1;t>=0;t--)for(let i=0;i<s.length;i++)if(e[t].axis===s[i]){e.splice(t,1);break}}hideCrosshairs(){const t=this.crosshairs;for(let e=0;e<t.length;e++)t[e].hide()}findPane(t){const e=this.panes;let s;for(let i=0;i<e.length;i++)if(e[i].options.name===t){s=e[i];break}return s||e[0]}findPointPane(t){const e=this.panes;let s;for(let i=0;i<e.length;i++)if(e[i].box.containsPoint(t)){s=e[i];break}return s}appendAxis(t){this.findPane(t.options.pane).appendAxis(t),this.axes.push(t),t.plotArea=this}removeAxis(t){const e=[];for(let s=0;s<this.axes.length;s++){const i=this.axes[s];t!==i?e.push(i):i.destroy()}this.axes=e}appendChart(t,e){this.charts.push(t),e?e.appendChart(t):this.append(t)}removeChart(t){const e=[];for(let s=0;s<this.charts.length;s++){const i=this.charts[s];i!==t?e.push(i):i.destroy()}this.charts=e}addToLegend(t){const e=t.length;const s=this.options.legend;const i=s.labels||{};const o=s.inactiveItems||{};const n=o.labels||{};const r=[];for(let s=0;s<e;s++){const e=t[s];const a=!1!==e.visible;if(!1===e.visibleInLegend)continue;let l=e.name;const h=a?wt(i):wt(n)||wt(i);h&&(l=h({text:Ir(l)?l:"",series:e}));const c=e._defaults;let d=e.color;let u,p;ht(d)&&c&&(d=c.color),a?(u={},p=d):(u={color:n.color,font:n.font},p=o.markers.color),Ir(l)&&""!==l&&r.push({text:l,labels:u,markerColor:p,series:e,active:a})}Dt(s.data,r)}groupAxes(t){const e=[];const s=[];for(let i=0;i<t.length;i++){const o=t[i].axes;for(let t=0;t<o.length;t++){const i=o[t];i.options.vertical?s.push(i):e.push(i)}}return{x:e,y:s,any:e.concat(s)}}groupSeriesByPane(){const t=this.series;const e={};for(let s=0;s<t.length;s++){const i=t[s];const o=this.seriesPaneName(i);e[o]?e[o].push(i):e[o]=[i]}return e}filterVisibleSeries(t){const e=[];for(let s=0;s<t.length;s++){const i=t[s];!1!==i.visible&&e.push(i)}return e}reflow(t){const e=this.options.plotArea;const s=this.panes;const i=yt(e.margin);this.box=t.clone().unpad(i),this.reflowArea(s),this.ensureLabelsFit(s)&&this.reflowArea(s)}reflowArea(t){this.reflowPanes(),this.detachLabels(),this.reflowAxes(t),this.reflowCharts(t)}ensureLabelsFit(t){let e=!1;return t.forEach((t=>{const s=t.unclipBox();const i=t.chartContainer._clipBox();const o=yt(t.options.padding||{});s.y1<i.y1+o.top&&(e=!0,o.top=i.y1-s.y1+o.top),s.y2>i.y2-o.bottom&&(e=!0,o.bottom=s.y2-i.y2+o.bottom),s.x1<i.x1+o.left&&(e=!0,o.left=i.x1-s.x1+o.left),s.x2>i.x2-o.right&&(e=!0,o.right=s.x2-i.x2+o.right),e&&(t.options.padding=o)})),e}redraw(t){const e=[].concat(t);this.initSeries();const s=this.getRoot();s&&s.cleanGradients();for(let t=0;t<e.length;t++)this.removeCrosshairs(e[t]),e[t].empty();this._bindCache=new WeakMap,this.render(e),this.detachLabels(),this.reflowAxes(this.panes),this.reflowCharts(e),this.createCrosshairs(e);for(let t=0;t<e.length;t++)e[t].refresh()}axisCrossingValues(t,e){const s=t.options;const i=[].concat(s.axisCrossingValues||s.axisCrossingValue);const o=e.length-i.length;const n=i[0]||0;for(let t=0;t<o;t++)i.push(n);return i}alignAxisTo(t,e,s,i){const o=t.getSlot(s,s,!0);const n=t.options.reverse?2:1;const r=e.getSlot(i,i,!0);const a=e.options.reverse?2:1;const l=t.box.translate(r[W+a]-o[W+n],r[X+a]-o[X+n]);t.pane!==e.pane&&l.translate(0,t.pane.box.y1-e.pane.box.y1),t.reflow(l)}alignAxes(t,e){const s=t[0];const i=e[0];const o=this.axisCrossingValues(s,e);const n=this.axisCrossingValues(i,t);const r={};const a={};const l={};const h={};for(let l=0;l<e.length;l++){const h=e[l];const c=h.pane;const d=c.id;const u=!1!==h.options.visible;const p=Ba(t,c)||s;let g=o;if(p!==s&&(g=this.axisCrossingValues(p,e)),this.alignAxisTo(h,p,n[l],g[l]),h.options._overlap)continue;$t(h.lineBox().x1)===$t(p.lineBox().x1)&&(r[d]&&h.reflow(h.box.alignTo(r[d].box,S).translate(-h.options.margin,0)),u&&(r[d]=h)),$t(h.lineBox().x2)===$t(p.lineBox().x2)&&(h._mirrored||(h.options.labels.mirror=!h.options.labels.mirror,h._mirrored=!0),this.alignAxisTo(h,p,n[l],g[l]),a[d]&&h.reflow(h.box.alignTo(a[d].box,B).translate(h.options.margin,0)),u&&(a[d]=h));const m=Ba(e,c)||i;m!==h&&(h.alignTo(m),h.reflow(h.box))}for(let r=0;r<t.length;r++){const a=t[r];const d=a.pane;const u=d.id;const p=!1!==a.options.visible;const g=Ba(e,d)||i;let m=n;g!==i&&(m=this.axisCrossingValues(g,t)),this.alignAxisTo(a,g,o[r],m[r]),a.options._overlap||($t(a.lineBox().y1)===$t(g.lineBox().y1)&&(a._mirrored||(a.options.labels.mirror=!a.options.labels.mirror,a._mirrored=!0),this.alignAxisTo(a,g,o[r],m[r]),l[u]&&a.reflow(a.box.alignTo(l[u].box,z).translate(0,-a.options.margin)),p&&(l[u]=a)),$t(a.lineBox().y2,3)===$t(g.lineBox().y2,3)&&(h[u]&&a.reflow(a.box.alignTo(h[u].box,c).translate(0,a.options.margin)),p&&(h[u]=a)),0!==r&&(a.alignTo(s),a.reflow(a.box)))}}shrinkAxisWidth(t){const e=this.groupAxes(t).any;const s=Ra(e);let i=0;for(let e=0;e<t.length;e++){const o=t[e];o.axes.length>0&&(i=Math.max(i,s.width()-o.contentBox.width()))}if(0!==i)for(let t=0;t<e.length;t++){const s=e[t];s.options.vertical||s.reflow(s.box.shrink(i,0))}}shrinkAxisHeight(t){let e;for(let s=0;s<t.length;s++){const i=t[s];const o=i.axes;const n=Math.max(0,Ra(o).height()-i.contentBox.height());if(0!==n){for(let t=0;t<o.length;t++){const e=o[t];e.options.vertical&&e.reflow(e.box.shrink(0,n))}e=!0}}return e}fitAxes(t){const e=this.groupAxes(t).any;let s=0;for(let e=0;e<t.length;e++){const i=t[e];const o=i.axes;const n=i.contentBox;if(o.length>0){const t=Ra(o);const e=Math.max(n.y1-t.y1,n.y2-t.y2);s=Math.max(s,n.x1-t.x1);for(let t=0;t<o.length;t++){const s=o[t];s.reflow(s.box.translate(0,e))}}}for(let t=0;t<e.length;t++){const i=e[t];i.reflow(i.box.translate(s,0))}}reflowAxes(t){const e=this.groupAxes(t);for(let e=0;e<t.length;e++)this.reflowPaneAxes(t[e]);e.x.length>0&&e.y.length>0&&(this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t),this.autoRotateAxisLabels(e),this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t)&&this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t),this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t)&&this.alignAxes(e.x,e.y),this.fitAxes(t))}autoRotateAxisLabels(t){const{panes:e}=this;const s=Oa(e);let i;for(let t=0;t<s.length;t++){s[t].autoRotateLabels()&&(i=!0)}if(i){for(let t=0;t<e.length;t++)this.reflowPaneAxes(e[t]);t.x.length>0&&t.y.length>0&&(this.alignAxes(t.x,t.y),this.shrinkAxisWidth(e))}}reflowPaneAxes(t){const e=t.axes;const s=e.length;if(s>0)for(let i=0;i<s;i++)e[i].reflow(t.contentBox)}reflowCharts(t){const e=this.charts;const s=e.length;const i=this.box;for(let o=0;o<s;o++){const s=e[o].pane;s&&!Mt(s,t)||e[o].reflow(i)}}reflowPanes(){const{box:t,panes:e}=this;const s=e.length;let i=t.height();let o=0;let n=t.y1;for(let n=0;n<s;n++){const s=e[n];const r=s.options.height;if(s.options.width=t.width(),s.options.height){if(r.indexOf&&r.indexOf("%")){const e=parseInt(r,10)/100;s.options.height=e*t.height()}s.reflow(t.clone()),i-=s.options.height}else o++}for(let t=0;t<s;t++){const s=e[t];s.options.height||(s.options.height=i/o)}for(let i=0;i<s;i++){const s=e[i];const o=t.clone().move(t.x1,n);s.reflow(o),n+=s.options.height}}backgroundBox(){const t=this.axes;const e=t.length;let s;for(let i=0;i<e;i++){const o=t[i];for(let i=0;i<e;i++){const e=t[i];if(o.options.vertical!==e.options.vertical){const t=o.lineBox().clone().wrap(e.lineBox());s=s?s.wrap(t):t}}}return s||this.box}chartsBoxes(){const t=this.panes;const e=[];for(let s=0;s<t.length;s++)e.push(t[s].chartsBox());return e}addBackgroundPaths(t){const s=this.chartsBoxes();for(let i=0;i<s.length;i++)t.paths.push(e.a.fromRect(s[i].toRect()))}backgroundContainsPoint(t){const e=this.chartsBoxes();for(let s=0;s<e.length;s++)if(e[s].containsPoint(t))return!0}createVisual(){super.createVisual();const t=this.options.plotArea;let{opacity:s,background:i,border:o={}}=t;var n;""!==(n=i)&&null!==n&&"none"!==n&&"transparent"!==n&&Ft(n)||(i=U,s=0);const r=this._bgVisual=new e.g({fill:{color:i,opacity:s},stroke:{color:o.width?o.color:"",width:o.width,dashType:o.dashType},zIndex:-1});this.addBackgroundPaths(r),this.appendVisual(r)}pointsByCategoryIndex(t){const e=this.charts;const s=[];if(null!==t)for(let i=0;i<e.length;i++){if("_navigator"===e[i].pane.options.name)continue;const o=e[i].categoryPoints[t];if(o&&o.length)for(let t=0;t<o.length;t++){const e=o[t];e&&Ft(e.value)&&null!==e.value&&s.push(e)}}return s}pointsBySeriesIndex(t){return this.filterPoints((function(e){return e.series.index===t}))}pointsByPointIndex(t){return this.filterPoints((function(e){return e.getIndex()===t}))}pointsBySeriesName(t){return this.filterPoints((function(e){return e.series.name===t}))}filterPoints(t){const e=this.charts;const s=[];for(let i=0;i<e.length;i++){const o=e[i].points;for(let e=0;e<o.length;e++){const i=o[e];i&&!1!==i.visible&&t(i)&&s.push(i)}}return s}findPoint(t){const e=this.charts;for(let s=0;s<e.length;s++){const i=e[s].points;for(let e=0;e<i.length;e++){const s=i[e];if(s&&!1!==s.visible&&t(s))return s}}}paneByPoint(t){const e=this.panes;for(let s=0;s<e.length;s++){const i=e[s];if(i.box.containsPoint(t))return i}}detachLabels(){const t=this.groupAxes(this.panes);const e=t.x;const s=t.y;this.detachAxisGroupLabels(s,e),this.detachAxisGroupLabels(e,s)}detachAxisGroupLabels(t,e){let s=0;for(let i=0;i<t.length;i++){const o=t[i];const n=o.pane;const r=Ba(e,n)||e[0];const a=i+s;const l=this.createLabelAxis(o,a,r);if(l){s++;const t=n.axes.indexOf(o)+s;n.appendAxisAt(l,t)}}}createLabelAxis(t,e,s){const i=t.options.labels;const o=i.position;const n=o!==y&&o!==V;const r=i.visible;if(n||!1===r)return null;const a=this.groupAxes(this.panes);const l=s.options.vertical?a.x:a.y;const h=this.axisCrossingValues(s,l);const c=o===y;const d=s.range();const u=c?d.max:d.min;if(Yt(h[e],d.min,d.max)-u==0)return null;h.splice(e+1,0,u),s.options.axisCrossingValues=h;const p=t.clone();return t.clear(),p.options.name=void 0,p.options.line.visible=!1,p.options.crosshair=void 0,p.options.notes=void 0,p.options.plotBands=void 0,p}isTrendline(t){return t&&Mt(t.type,Ln)}trendlineFactory(){}createTrendlineSeries(){const t=[];return this.series=this.series.map((e=>{if(!this.isTrendline(e))return e;const s=this.seriesByName(e.for);if(!s)throw new Error(`Invalid Configuration: Unable to locate linked series "${e.for}" for trendline "${e.name}".`);const i=ko.current.valueFields(s);const o=Xt(i);const n=this.trendlineFactory(Object.assign({},{field:o},e),s);return n&&(!1===s.visible&&(n.visible=!1),n.color===A&&(n.color=s.color),t.push(n)),n})).filter((t=>null!==t)),t}seriesByName(t){return this.series.find((e=>e.name===t))}getFirstPoint(){for(let t=0;t<this.series.length;t++){const e=this.pointsBySeriesIndex(t).find(Ea);if(e)return e}}getPointBelow(t){return this._getNextPoint(t,this._pointsByVertical,1)}getPointAbove(t){return this._getNextPoint(t,this._pointsByVertical,-1)}getPointToTheRight(t){return this._getNextPoint(t,this._pointsByHorizontal,1)}getPointToTheLeft(t){return this._getNextPoint(t,this._pointsByHorizontal,-1)}_getNextPoint(t,e,s){let i=e.call(this,t).filter(Ea);let o=i.indexOf(t)+s;const n=s=>{let i;let o=0;do{o+=s,i=e.call(this,t,o).filter(Ea)}while(0===i.length);return i};return o<0?(i=n(-1),i.at(-1)):o>=i.length?(i=n(1),i.at(0)):i[o]}_pointsByVertical(t){return this.pointsByPointIndex(t.getIndex())}_pointsByHorizontal(t,e=0){let s=lt(t.series.index+e,this.series.length);return this.pointsBySeriesIndex(s)}}function Ia(t){return!t.pane.axes.some((e=>e.options.vertical===t.options.vertical&&e!==t&&!1!==e.options.visible))}function Ra(t){const e=t.length;let s;for(let i=0;i<e;i++){const e=t[i];const o=!1!==e.options.visible;if(o||Ia(e)){const t=o?e.contentBox():e.lineBox();s?s.wrap(t):s=t.clone()}}return s||new gs}function Ba(t,e){for(let s=0;s<t.length;s++){const i=t[s];if(i&&i.pane===e)return i}}const Oa=t=>t.reduce(((t,e)=>t.concat(e.axes)),[]);te(La,{series:[],plotArea:{margin:{}},background:"",border:{color:h,width:0},paneDefaults:{title:{}},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}});const Va={hover:function(t,e){this._dispatchEvent(t,e,Hn)},click:function(t,e){this._dispatchEvent(t,e,Fn)}};class Da{constructor(t,e,s){const i=e.canonicalFields(t);const o=e.valueFields(t);const n=e.sourceFields(t,i);const r=this._seriesFields=[];const a=s.query(t.type);const l=t.aggregate||a;this._series=t,this._binder=e;for(let t=0;t<i.length;t++){const e=i[t];let s;if(pt(l))s=l[e];else{if(0!==t&&!Mt(e,o))break;s=l}s&&r.push({canonicalName:e,name:n[t],transform:ht(s)?s:wo[s]})}}aggregatePoints(t,e){const{_series:s,_seriesFields:i}=this;const o=this._bindPoints(t||[]);const n=o.dataItems[0];let r=null;if(n&&!it(n)&&!Q(n)){const t=function(){};t.prototype=n,r=new t}for(let t=0;t<i.length;t++){const n=i[t];const a=this._bindField(o.values,n.canonicalName);const l=n.transform(a,s,o.dataItems,e);if(null!==l&&pt(l)&&void 0===l.length&&!(l instanceof Date)){r=l;break}void 0!==l&&(null===r&&(r={}),za(n.name,r,l))}return r}_bindPoints(t){const{_binder:e,_series:s}=this;const i=[];const o=[];for(let n=0;n<t.length;n++){const r=t[n];i.push(e.bindPoint(s,r)),o.push(s.data[r])}return{values:i,dataItems:o}}_bindField(t,e){const s=[];const i=t.length;for(let o=0;o<i;o++){const i=t[o];const n=i.valueFields;let r;r=void 0!==n[e]?n[e]:i.fields[e],s.push(r)}return s}}function za(t,e,s){let i=e;let o=t;if(t.indexOf(".")>-1){const e=t.split(".");for(;e.length>1;)o=e.shift(),void 0===i[o]&&(i[o]={}),i=i[o];o=e.shift()}i[o]=s}class Fa{constructor(){this._defaults={}}register(t,e){for(let s=0;s<t.length;s++)this._defaults[t[s]]=e}query(t){return this._defaults[t]}}Fa.current=new Fa;class Ha extends ra{createLabel(){const t=this.options.labels;const e=ut({},t,t.from);const s=ut({},t,t.to);e.visible&&(this.labelFrom=this.createLabelElement(e),this.append(this.labelFrom)),s.visible&&(this.labelTo=this.createLabelElement(s),this.append(this.labelTo))}reflow(t){this.render();const{labelFrom:e,labelTo:s,value:i}=this;this.box=t,e&&(e.options.aboveAxis=i.from>i.to,e.reflow(t)),s&&(s.options.aboveAxis=i.to>i.from,s.reflow(t)),this.note&&this.note.reflow(t)}}Ha.prototype.defaults=ut({},Ha.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}});class Na extends da{pointType(){return Ha}pointValue(t){return t.valueFields}formatPointValue(t,e){return null===t.value.from&&null===t.value.to?"":this.chartService.format.auto(e,t.value.from,t.value.to)}plotRange(t){return t?[t.value.from,t.value.to]:0}updateRange(t,e){const s=e.series.axis;const{from:i,to:o}=t;let n=this.valueAxisRanges[s];null!==t&&it(i)&&it(o)&&(n=this.valueAxisRanges[s]=n||{min:C,max:T},n.min=Math.min(n.min,i),n.max=Math.max(n.max,i),n.min=Math.min(n.min,o),n.max=Math.max(n.max,o))}aboveAxis(t){const e=t.value;return e.from<e.to}}Na.prototype.plotLimits=Hr.prototype.plotLimits;class ja extends Ur{aliasFor(){return this.parent}}const Ua="auto";class Ga extends bs{constructor(t,e){super(),this.value=t,this.options=e,this.aboveAxis=Kt(this.options.aboveAxis,!0),this.tooltipTracking=!0,this._id=Me(),this.initLabelsFormat()}render(){if(this._rendered)return;this._rendered=!0;const{markers:t,labels:e}=this.options;const s=this.value;const i=this.fromPoint=new ja(s,ut({},this.options,{labels:e.from,markers:t.from}));const o=this.toPoint=new ja(s,ut({},this.options,{labels:e.to,markers:t.to}));this.copyFields(i),this.copyFields(o),this.append(i),this.append(o)}reflow(t){this.render();const{from:e,to:s}=t;this.positionLabels(e,s),this.fromPoint.reflow(e),this.toPoint.reflow(s),this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())}createHighlight(){const t=new e.G;return t.append(this.fromPoint.createHighlight()),t.append(this.toPoint.createHighlight()),t}highlightVisual(){return this.visual}highlightVisualArgs(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}}createFocusHighlight(){const t=new e.G;return t.append(this.fromPoint.createFocusHighlight()),t.append(this.toPoint.createFocusHighlight()),t}tooltipAnchor(){const t=this.owner.pane.clipBox();if(!t||t.overlaps(this.box)){const t=this.box;const e=t.center();const s=S;let i,o,n;return this.options.vertical?(i=e.x,o=t.y1-5,n=c):(i=t.x2+5,o=e.y,n=d),{point:new ps(i,o),align:{horizontal:s,vertical:n}}}}formatValue(t){return this.owner.formatPointValue(this,t)}overlapsBox(t){return this.box.overlaps(t)}unclipElements(){this.fromPoint.unclipElements(),this.toPoint.unclipElements()}initLabelsFormat(){const t=this.options.labels;t.format||(t.from&&t.from.format||(t.from=Object.assign({},t.from,{format:"{0}"})),t.to&&t.to.format||(t.to=Object.assign({},t.to,{format:"{1}"})))}positionLabels(t,e){const{labels:s,vertical:i}=this.options;if(s.position===Ua){let o,n;i?e.y1<=t.y1?(n=No,o=jo):(n=jo,o=No):e.x1<=t.x1?(n=S,o=B):(n=B,o=S),s.from&&s.from.position||(this.fromPoint.options.labels.position=o),s.to&&s.to.position||(this.toPoint.options.labels.position=n)}}copyFields(t){t.dataItem=this.dataItem,t.category=this.category,t.series=this.series,t.color=this.color,t.owner=this.owner}focusVisual(){this.fromPoint.focusVisual()}clearFocusFromVisual(){this.toPoint.clearFocusFromVisual()}getIndex(){return this.categoryIx}}ut(Ga.prototype,Nr),ut(Ga.prototype,jr),Ga.prototype.defaults={markers:{visible:!1,background:U,size:8,type:u,border:{width:2},opacity:1},labels:{visible:!1,margin:yt(3),padding:yt(4),animation:{type:Mo,delay:Po},position:Ua},notes:{label:{}},highlight:{markers:{border:{color:U,width:2}},zIndex:100},tooltip:{format:"{0} - {1}"},accessibility:{role:er,className:sr,ariaRoleDescription:ir}};class Wa extends Jr{createStrokeSegments(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))}stackSegments(){let t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()))),t}createStroke(t){const s=new e.a(t);const i=new e.a(t);s.segments.push.apply(s.segments,this.strokeSegments()),i.segments.push.apply(i.segments,this.stackSegments()),this.visual.append(s),this.visual.append(i)}hasStackSegment(){return!0}fromPoints(){return this.linePoints.map((t=>t.fromPoint))}toPoints(){return this.linePoints.map((t=>t.toPoint))}}class Xa extends Wa{createStrokeSegments(){return this.createCurveSegments(this.toPoints())}stackSegments(){let t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse())),t}createCurveSegments(t){return(new po).process(this.toGeometryPoints(t))}}class Ya extends Wa{createStrokeSegments(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))}stackSegments(){let t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints())),t.reverse()),t}}ut(Ya.prototype,Wr);class qa extends Hr{render(){super.render(),this.renderSegments()}pointType(){return Ga}createPoint(t,e){const{series:s,seriesIx:i}=e;let o=t.valueFields;if(!Ir(o.from)&&!Ir(o.to)){if(this.seriesMissingValues(s)!==zo)return null;o={from:0,to:0}}let n=this.pointOptions(s,i);n=this.evalPointOptions(n,o,e);let r=t.fields.color||s.color;ht(s.color)&&(r=n.color);const a=new Ga(o,n);return a.color=r,this.append(a),a}createSegment(t,e,s){const i=(e.line||{}).style;let o;return o="smooth"===i?Xa:"step"===i?Ya:Wa,new o(t,e,s)}plotRange(t,e){return t?[t.value.from,t.value.to]:[e,e]}valueSlot(t,e){const s=t.getSlot(e[0],e[0],!this.options.clip);const i=t.getSlot(e[1],e[1],!this.options.clip);if(s&&i)return{from:s,to:i}}pointSlot(t,e){const{from:s,to:i}=e;let o,n;return this.options.invertAxes?(o=new gs(s.x1,t.y1,s.x2,t.y2),n=new gs(i.x1,t.y1,i.x2,t.y2)):(o=new gs(t.x1,s.y1,t.x2,s.y2),n=new gs(t.x1,i.y1,t.x2,i.y2)),{from:o,to:n}}addValue(t,e){const s=t.valueFields;it(s.from)||(s.from=s.to),it(s.to)||(s.to=s.from),super.addValue(t,e)}updateRange(t,e){if(null!==t&&it(t.from)&&it(t.to)){const s=e.series.axis;const i=this.valueAxisRanges[s]=this.valueAxisRanges[s]||{min:C,max:T};const{from:o,to:n}=t;i.min=Math.min(i.min,o,n),i.max=Math.max(i.max,o,n)}}formatPointValue(t,e){const s=t.value;return this.chartService.format.auto(e,s.from,s.to)}animationPoints(){const t=this.points;const e=[];for(let s=0;s<t.length;s++){const i=t[s];i&&(e.push((i.fromPoint||{}).marker),e.push((i.toPoint||{}).marker))}return e.concat(this._segments)}}ut(qa.prototype,Zr,Qr);class Za extends ua{reflow(t){const{options:e,value:s,owner:i}=this;const o=i.seriesValueAxis(e);const n=[];const r=[];const a=[];const l=o.getSlot(s.low,s.high);const h=o.getSlot(s.open,s.open);const c=o.getSlot(s.close,s.close);h.x1=c.x1=l.x1=t.x1,h.x2=c.x2=l.x2=t.x2;const d=l.center().x;n.push([h.x1,h.y1]),n.push([d,h.y1]),r.push([d,c.y1]),r.push([c.x2,c.y1]),a.push([d,l.y1]),a.push([d,l.y2]),this.lines=[n,r,a],this.box=l.clone().wrap(h.clone().wrap(c)),this.reflowNote()}createBody(){}}class $a extends pa{pointType(){return Za}}class Qa extends bs{constructor(t,e,s){super(),this.from=t,this.to=e,this.series=s}linePoints(){const t=this.from;const{from:{box:e},to:{box:s}}=this;const i=[];if(t.isVertical){const o=t.aboveAxis?e.y1:e.y2;i.push([e.x1,o],[s.x2,o])}else{const o=t.aboveAxis?e.x2:e.x1;i.push([o,e.y1],[o,s.y2])}return i}createVisual(){super.createVisual();const t=this.series.line||{};const s=e.a.fromPoints(this.linePoints(),{stroke:{color:t.color,width:t.width,opacity:t.opacity,dashType:t.dashType}});et(s),this.visual.append(s)}}te(Qa,{animation:{type:Mo,delay:Po}});class Ka extends da{render(){super.render(),this.createSegments()}traverseDataPoints(t){const e=this.options.series;const s=Sr(e);const i=!this.options.invertAxes;for(let o=0;o<e.length;o++){const n=e[o];let r=0;let a=0;for(let e=0;e<s;e++){const s=ko.current.bindPoint(n,e);const l=s.valueFields.value;const h=s.fields.summary;let c=r;let d;h?"total"===h.toLowerCase()?(s.valueFields.value=r,c=0,d=r):(s.valueFields.value=a,d=c-a,a=0):it(l)&&(a+=l,r+=l,d=r),t(s,{category:this.categoryAxis.categoryAt(e),categoryIx:e,series:n,seriesIx:o,total:r,runningTotal:a,from:c,to:d,isVertical:i})}}}updateRange(t,e){super.updateRange({value:e.to},e)}aboveAxis(t){return t.value>=0}plotRange(t){return[t.from,t.to]}createSegments(){const t=this.options.series;const e=this.seriesPoints;const s=this.segments=[];for(let i=0;i<t.length;i++){const o=t[i];const n=e[i];if(n){let t;for(let e=0;e<n.length;e++){const i=n[e];if(i&&t){const e=new Qa(t,i,o);s.push(e),this.append(e)}t=i}}}}}function Ja(t,e,s){const i=t[String(e)];return i?i(s):null}function tl(t,e){let s=0;let i=0;let o=0;let n=0;let r=0;let a,l;let h=Number.MAX_VALUE;let c=Number.MIN_VALUE;for(let a=0;a<t.length;a++){const l=t[a];const{xValue:d,yValue:u}=e(l);isFinite(d)&&null!==d&&isFinite(u)&&null!==u&&(h=Math.min(d,h),c=Math.max(d,c),r++,s+=d,i+=u,o+=Math.pow(d,2),n+=d*u)}return r>0&&(a=(r*n-s*i)/(r*o-Math.pow(s,2)),l=(i-a*s)/r),{slope:a,intercept:l,count:r,xMin:h,xMax:c}}const el=(t,e)=>t.every((({valueFields:t})=>!Ir(t[e])||t[e]>0));function sl(t,e){const s=[];const i=e.totalRangeIndices();const o=e.currentRangeIndices();const n={min:Math.floor(Math.max(o.min-1,i.min)),max:Math.ceil(Math.min(o.max+2,i.max))};for(let i=n.min;i<n.max;i++){const o=i+1;s[i]={category:e.categoryAt(i,!0),value:t(o)}}return s}const il=t=>({categoryIx:e,valueFields:s})=>({xValue:e+1,yValue:Math.log(s[t])});const ol=t=>({categoryIx:e,valueFields:s})=>({xValue:e+1,yValue:s[t]});const nl=t=>({categoryIx:e,valueFields:s})=>({xValue:Math.log(e+1),yValue:s[t]});function rl(t,e,s){const i=[];const o=[];const n=Math.max(2,s)-1;let r=0;let a=0;for(let s=0;s<t.length;s++){const l=t[s];const{xValue:h,yValue:c}=e(l);if(isFinite(c)&&null!==c?(o.push(c),a+=c,r=Math.max(s,r)):o.push(null),s>=n){const t=o.filter((t=>null!==t)).length;const e=o.shift()||0;if(t>0){const s=a/t;i.push([h,s]),a-=e;continue}}i.push([h,null])}return i.slice(0,r+1)}const al=t=>({categoryIx:e,valueFields:s})=>({xValue:e,yValue:s[t]});function ll(t,e,s){let i=Math.min(Math.max(s||1,1),6)+1;let o=new _e;let n=new _e;let r=0;let a=Number.MAX_VALUE;let l=Number.MIN_VALUE;let h=t=>t;let c=[];for(let s=0;s<t.length;s++){const h=t[s];let{xValue:c,yValue:d}=e(h);if(isFinite(c)&&null!==c&&isFinite(d)&&null!==d){a=Math.min(c,a),l=Math.max(c,l),r++,n.set(s,0,d),o.set(s,0,1),o.set(s,1,c);for(let t=2;t<=i;t++)o.set(s,t,Math.pow(o.get(s,1),t))}else o.set(s,0,0)}return o.width=Math.min(i,r),r>0&&(c=function(t,e){const s=t.transpose();const i=s.multiply(t).inverse().multiply(s).multiply(e);const o=[];for(let t=0;t<i.height;t++)o.push(i.get(t,0));return o}(o,n),h=t=>c.reduce(((e,s,i)=>e+s*Math.pow(t,i)),0)),{coefficients:c,count:r,valueMapper:h,xMin:a,xMax:l}}const hl=t=>({categoryIx:e,valueFields:s})=>({xValue:e+1,yValue:s[t]});const cl=t=>({categoryIx:e,valueFields:s})=>({xValue:Math.log(e+1),yValue:Math.log(s[t])});const dl={};dl[Sn]=function(t){const{options:e,categoryAxis:s,seriesValues:i}=t;const o=function({seriesValues:t,categoryAxis:e,options:s}){const i=t();if(!el(i,s.field))return null;let{slope:o,intercept:n,count:r}=tl(i,il(s.field));if(r>0){const t=Math.exp(n);const s=o;return sl((e=>t*Math.exp(s*e)),e)}return null}({seriesValues:i,categoryAxis:s,options:e});return o?Object.assign({},e,{type:"line",data:o,categoryField:"category",field:"value"}):null},dl[Cn]=function(t){const{options:e,categoryAxis:s,seriesValues:i}=t;const o=function({seriesValues:t,categoryAxis:e,options:s}){const{slope:i,intercept:o,count:n}=tl(t(),ol(s.field));if(n>0)return sl((t=>i*t+o),e);return null}({seriesValues:i,categoryAxis:s,options:e});return o?Object.assign({},e,{type:"line",data:o,categoryField:"category",field:"value"}):null},dl[Tn]=function(t){const{options:e,categoryAxis:s,seriesValues:i}=t;const o=function({seriesValues:t,categoryAxis:e,options:s}){let{slope:i,intercept:o,count:n}=tl(t(),nl(s.field));if(n>0){const t=i;const s=o;return sl((e=>t*Math.log(e)+s),e)}return null}({seriesValues:i,categoryAxis:s,options:e});return o?Object.assign({},e,{type:"line",data:o,categoryField:"category",field:"value"}):null},dl[Pn]=function(t){const{options:e}=t;const s=function(t){const{categoryAxis:e}=t;const s=function({options:t,categoryAxis:e,seriesValues:s}){const i=(t.trendline||{}).period||2;const o=e.totalRangeIndices();const n=e.currentRangeIndices();const r={min:Math.floor(Math.max(n.min-i,o.min)),max:Math.ceil(Math.min(n.max+i+2,o.max))};return rl(s(r),al(t.field),i)}(t);const i=[];if(s.forEach((([t,s])=>{i[t]={category:e.categoryAt(t,!0),value:s}})),i.length>0)return i;return null}(t);return s?Object.assign({},e,{type:"line",data:s,categoryField:"category",field:"value"}):null},dl[Mn]=function(t){const{options:e,categoryAxis:s,seriesValues:i}=t;const o=function({seriesValues:t,categoryAxis:e,options:s}){const i=(s.trendline||{}).order;const{count:o,valueMapper:n}=ll(t(),hl(s.field),i);if(o>0)return sl((t=>n(t)),e);return null}({seriesValues:i,categoryAxis:s,options:e});return o?Object.assign({},e,{type:"line",data:o,categoryField:"category",field:"value"}):null},dl[En]=function(t){const{options:e,categoryAxis:s,seriesValues:i}=t;const o=function({seriesValues:t,categoryAxis:e,options:s}){const i=t();if(!el(i,s.field))return null;let{slope:o,intercept:n,count:r}=tl(i,cl(s.field));if(r>0){const t=Math.exp(n);const s=o;return sl((e=>t*Math.pow(e,s)),e)}return null}({seriesValues:i,categoryAxis:s,options:e});return o?Object.assign({},e,{type:"line",data:o,categoryField:"category",field:"value"}):null};const ul=[Wo,yn,pn,_n];const pl=[on,wn].concat(ul);class gl extends La{initFields(t){if(this.namedCategoryAxes={},this.namedValueAxes={},this.valueAxisRangeTracker=new ia,this._seriesPointsCache={},this._currentPointsCache={},t.length>0){this.invertAxes=Mt(t[0].type,[Xo,Zo,wn,yn,_n,gn,sn,vn]);for(let e=0;e<t.length;e++){const s=t[e].stack;if(s&&"100%"===s.type){this.stack100=!0;break}}}}render(t=this.panes){this.series=[...this.originalSeries],this.createCategoryAxes(t),this.aggregateCategories(t),this.createTrendlineSeries(t),this.createCategoryAxesLabels(t),this.createCharts(t),this.createValueAxes(t)}removeAxis(t){const e=t.options.name;super.removeAxis(t),t instanceof Di?delete this.namedCategoryAxes[e]:(this.valueAxisRangeTracker.reset(e),delete this.namedValueAxes[e]),t===this.categoryAxis&&delete this.categoryAxis,t===this.valueAxis&&delete this.valueAxis}trendlineFactory(t,e){const s=this.seriesCategoryAxis(t);const i=this.seriesValues.bind(this,e.index);const o=Ja(dl,t.type,{options:t,categoryAxis:s,seriesValues:i});return o?(o.categoryAxis=e.categoryAxis,o.valueAxis=e.valueAxis,this.filterSeries(o,s)):o}trendlineAggregateForecast(){return this.series.map((t=>(t.trendline||{}).forecast)).filter((t=>void 0!==t)).reduce(((t,e)=>({before:Math.max(t.before,e.before||0),after:Math.max(t.after,e.after||0)})),{before:0,after:0})}seriesValues(t,e){const s=[];let i=this.srcSeries[t];const o=this.seriesCategoryAxis(i);Cr(o.options.type,g)&&(this._seriesPointsCache={},this._currentPointsCache={},o.options.dataItems=[],i=this.aggregateSeries(i,o,o.totalRangeIndices()));const n=e?e.min:0;const r=e?e.max:i.data.length;for(let t=n;t<r;t++){const e=this.bindPoint(i,t);s.push({categoryIx:t,category:e.fields.category,valueFields:e.valueFields})}return s}createCharts(t){const e=this.groupSeriesByPane();for(let s=0;s<t.length;s++){const i=t[s];const o=e[i.options.name||"default"]||[];this.addToLegend(o);const n=this.filterVisibleSeries(o);if(!n)continue;const r=this.groupSeriesByCategoryAxis(n);for(let t=0;t<r.length;t++)this.createChartGroup(r[t],i)}}createChartGroup(t,e){this.createAreaChart(Pr(t,[Wo,yn]),e),this.createRangeAreaChart(Pr(t,[pn,_n]),e),this.createBarChart(Pr(t,[Qo,Xo]),e),this.createRangeBarChart(Pr(t,[mn,gn]),e),this.createBulletChart(Pr(t,[Zo,bn]),e),this.createCandlestickChart(Pr(t,$o),e),this.createBoxPlotChart(Pr(t,[Yo,vn]),e),this.createOHLCChart(Pr(t,nn),e),this.createWaterfallChart(Pr(t,[kn,sn]),e),this.createLineChart(Pr(t,[on,wn]),e)}aggregateCategories(t){const e=[...this.series];const s=[];this._currentPointsCache={},this._seriesPointsCache=this._seriesPointsCache||{};for(let i=0;i<e.length;i++){let o=e[i];if(!this.isTrendline(o)){const e=this.seriesCategoryAxis(o);const s=this.findPane(e.options.pane);o=(Cr(e.options.type,g)||o.categoryField)&&Mt(s,t)?this.aggregateSeries(o,e,e.currentRangeIndices()):this.filterSeries(o,e)}s.push(o)}this._seriesPointsCache=this._currentPointsCache,this._currentPointsCache=null,this.srcSeries=e,this.series=s}filterSeries(t,e){const s=(t.data||{}).length;if(e._seriesMax=Math.max(e._seriesMax||0,s),!Ft(e.options.min)&&!Ft(e.options.max))return t;const i=e.currentRangeIndices();const o=Mt(t.type,pl);const n=ut({},t);return n.data=(n.data||[]).slice(i.min,i.max+1),o&&zr(n,i,s,(s=>({item:t.data[s],category:e.categoryAt(s,!0),categoryIx:s-i.min})),(e=>Ft(t.data[e]))),n}clearSeriesPointsCache(){this._seriesPointsCache={}}seriesSourcePoints(t,e){const s=`${t.index};${e.categoriesHash()}`;if(this._seriesPointsCache&&this._seriesPointsCache[s])return this._currentPointsCache[s]=this._seriesPointsCache[s],this._seriesPointsCache[s];const i=e.options;const o=i.srcCategories;const n=Cr(i.type,g);const r=t.data;const a=[];n||e.indexCategories();for(let s=0;s<r.length;s++){let i=ko.current.bindPoint(t,s).fields.category;if(n&&(i=Er(i,r[s],this.chartService.intl)),void 0===i&&(i=o[s]),null!=i){const t=e.totalIndex(i);a[t]=a[t]||{items:[],category:i},a[t].items.push(s)}}return this._currentPointsCache[s]=a,a}aggregateSeries(t,e,s){if(!t.data.length)return t;const i=this.seriesSourcePoints(t,e);const o=ut({},t);const n=new Da(ut({},t),ko.current,Fa.current);const r=o.data=[];const a=e.options.dataItems||[];const l=t=>{const o=t-s.min;let r=i[t];if(r||(r=i[t]={}),r.categoryIx=o,!r.item){const s=e.categoryAt(t,!0);r.category=s,r.item=n.aggregatePoints(r.items,s)}return r};for(let t=s.min;t<=s.max;t++){const e=l(t);r[e.categoryIx]=e.item,e.items&&e.items.length&&(a[e.categoryIx]=e.item)}return Mt(o.type,pl)&&zr(o,s,e.totalCount(),l,(t=>i[t])),e.options.dataItems=a,o}appendChart(t,e){const s=t.options.series;const i=this.seriesCategoryAxis(s[0]);let o=i.options.categories;let n=Math.max(0,Sr(s)-o.length);if(n>0)for(o=i.options.categories=i.options.categories.slice(0);n--;)o.push("");this.valueAxisRangeTracker.update(t.valueAxisRanges),super.appendChart(t,e)}seriesPaneName(t){const e=this.options;const s=t.axis;const i=[].concat(e.valueAxis);const o=Ct(i,(function(t){return t.name===s}))[0];const n=((e.panes||[{}])[0]||{}).name||"default";return(o||{}).pane||n}seriesCategoryAxis(t){const e=t.categoryAxis;const s=e?this.namedCategoryAxes[e]:this.categoryAxis;if(!s)throw new Error("Unable to locate category axis with name "+e);return s}stackableChartOptions(t,e){const s=t.some((t=>t.stack));const i=t.some((t=>t.stack&&"100%"===t.stack.type));const o=e.options.clip;return{defaultStack:t[0].stack,isStacked:s,isStacked100:i,clip:o}}groupSeriesByCategoryAxis(t){const e=[];const s={};for(let i=0;i<t.length;i++){const o=t[i].categoryAxis||"$$default$$";we(s,o)||(s[o]=!0,e.push(o))}const i=[];for(let s=0;s<e.length;s++){const o=fl(t,e[s],s);0!==o.length&&i.push(o)}return i}createBarChart(t,e){if(0===t.length)return;const s=t[0];const i=new da(this,Object.assign({series:t,invertAxes:this.invertAxes,gap:s.gap,spacing:s.spacing},this.stackableChartOptions(t,e)));this.appendChart(i,e)}createRangeBarChart(t,e){if(0===t.length)return;const s=t[0];const i=new Na(this,{series:t,invertAxes:this.invertAxes,gap:s.gap,spacing:s.spacing});this.appendChart(i,e)}createBulletChart(t,e){if(0===t.length)return;const s=t[0];const i=new ka(this,{series:t,invertAxes:this.invertAxes,gap:s.gap,spacing:s.spacing,clip:e.options.clip});this.appendChart(i,e)}createLineChart(t,e){if(0===t.length)return;const s=new Kr(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(t,e)));this.appendChart(s,e)}createAreaChart(t,e){if(0===t.length)return;const s=new sa(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(t,e)));this.appendChart(s,e)}createRangeAreaChart(t,e){if(0===t.length)return;const s=new qa(this,{invertAxes:this.invertAxes,series:t,clip:e.options.clip});this.appendChart(s,e)}createOHLCChart(t,e){if(0===t.length)return;const s=t[0];const i=new $a(this,{invertAxes:this.invertAxes,gap:s.gap,series:t,spacing:s.spacing,clip:e.options.clip});this.appendChart(i,e)}createCandlestickChart(t,e){if(0===t.length)return;const s=t[0];const i=new pa(this,{invertAxes:this.invertAxes,gap:s.gap,series:t,spacing:s.spacing,clip:e.options.clip});this.appendChart(i,e)}createBoxPlotChart(t,e){if(0===t.length)return;const s=t[0];const i=new fa(this,{invertAxes:this.invertAxes,gap:s.gap,series:t,spacing:s.spacing,clip:e.options.clip});this.appendChart(i,e)}createWaterfallChart(t,e){if(0===t.length)return;const s=t[0];const i=new Ka(this,{series:t,invertAxes:this.invertAxes,gap:s.gap,spacing:s.spacing});this.appendChart(i,e)}axisRequiresRounding(t,e){const s=Pr(this.series,An);for(let t=0;t<this.series.length;t++){const e=this.series[t];if(Mt(e.type,ul)){const t=e.line;t&&t.style===Go&&s.push(e)}}for(let i=0;i<s.length;i++){const o=s[i].categoryAxis||"";if(o===t||!o&&0===e)return!0}}aggregatedAxis(t,e){const s=this.series;for(let i=0;i<s.length;i++){const o=s[i].categoryAxis||"";if((o===t||!o&&0===e)&&s[i].categoryField)return!0}}createCategoryAxesLabels(){const t=this.axes;for(let e=0;e<t.length;e++)t[e]instanceof Di&&t[e].createLabels()}createCategoryAxes(t){const e=this.invertAxes;const s=[].concat(this.options.categoryAxis);const i=[];for(let o=0;o<s.length;o++){let n=s[o];if(Mt(this.findPane(n.pane),t)){const{name:t,categories:r=[]}=n;let a;if(n=ut({vertical:e,reverse:!e&&this.chartService.rtl,axisCrossingValue:e?C:0},n),Ft(n.justified)||(n.justified=this.isJustified()),this.axisRequiresRounding(t,o)&&(n.justified=!1),Rr(n,r[0])?(n._forecast=this.trendlineAggregateForecast(),a=new Yi(n,this.chartService)):a=new Di(n,this.chartService),s[o].categories=a.options.srcCategories,t){if(this.namedCategoryAxes[t])throw new Error(`Category axis with name ${t} is already defined`);this.namedCategoryAxes[t]=a}a.axisIndex=o,i.push(a),this.appendAxis(a)}}const o=this.categoryAxis||i[0];this.categoryAxis=o,e?this.axisY=o:this.axisX=o}isJustified(){const t=this.series;for(let e=0;e<t.length;e++){if(!Mt(t[e].type,ul))return!1}return!0}createValueAxes(t){const e=this.valueAxisRangeTracker;const s=e.query();const i=[].concat(this.options.valueAxis);const o=this.invertAxes;const n={vertical:!o,reverse:o&&this.chartService.rtl};const r=[];this.stack100&&(n.roundToMajorUnit=!1,n.labels={format:"P0"});for(let o=0;o<i.length;o++){const a=i[o];if(Mt(this.findPane(a.pane),t)){const t=a.name;const i=Cr(a.type,ar)?{min:.1,max:1}:{min:0,max:1};const l=e.query(t)||s||i;let h;0===o&&l&&s&&(l.min=Math.min(l.min,s.min),l.max=Math.max(l.max,s.max)),h=Cr(a.type,ar)?so:Ki;const c=new h(l.min,l.max,ut({},n,a),this.chartService);if(t){if(this.namedValueAxes[t])throw new Error(`Value axis with name ${t} is already defined`);this.namedValueAxes[t]=c}c.axisIndex=o,r.push(c),this.appendAxis(c)}}const a=this.valueAxis||r[0];this.valueAxis=a,o?this.axisX=a:this.axisY=a}_dispatchEvent(t,e,s){const i=t._eventCoordinates(e);const o=new ps(i.x,i.y);const n=this.pointPane(o);const r=[];const a=[];if(!n)return;const l=n.axes;for(let t=0;t<l.length;t++){const e=l[t];e.getValue?wr(a,e.getValue(o)):wr(r,e.getCategory(o))}0===r.length&&wr(r,this.categoryAxis.getCategory(o)),r.length>0&&a.length>0&&t.trigger(s,{element:Gt(e),originalEvent:e,category:Br(r),value:Br(a)})}pointPane(t){const e=this.panes;for(let s=0;s<e.length;s++){const i=e[s];if(i.contentBox.containsPoint(t))return i}}updateAxisOptions(t,e){ml(this.options,t,e),ml(this.originalOptions,t,e)}_pointsByVertical(t,e=0){return this.invertAxes?this._siblingsBySeriesIndex(t.series.index,e):this._siblingsByPointIndex(t.getIndex())}_pointsByHorizontal(t,e=0){if(this.invertAxes)return this._siblingsByPointIndex(t.getIndex());const s=this._siblingsBySeriesIndex(t.series.index,e);return this.chartService.rtl?s.reverse():s}_siblingsByPointIndex(t){const e=this.charts;const s=[];for(let i=0;i<e.length;i++){let o=e[i];if(o.pane&&"_navigator"===o.pane.options.name)continue;let n=o.points.filter((e=>e&&!1!==e.visible&&e.getIndex()===t));s.push(...n.sort(this._getSeriesCompareFn(n[0])))}return s}_siblingsBySeriesIndex(t,e){const s=lt(t+e,this.series.length);return this.pointsBySeriesIndex(s)}_getSeriesCompareFn(t){const e=this._isInStackedSeries(t);return e&&this.invertAxes||!e&&!this.invertAxes?(t,e)=>t.box.center().x-e.box.center().x:(t,e)=>t.box.center().y-e.box.center().y}_isInStackedSeries(t){const e=Mt(t.series.type,[Wo,yn,pn,_n,on,wn,un,cn]);const s=Mt(t.series.type,[Qo,Xo]);return e||s&&t.options.isStacked}}function ml(t,e,s){ut([].concat(e instanceof Di?t.categoryAxis:t.valueAxis)[e.axisIndex],s)}function fl(t,e,s){return Ct(t,(function(t){return 0===s&&!t.categoryAxis||t.categoryAxis===e}))}te(gl,{categoryAxis:{},valueAxis:{}}),ut(gl.prototype,Va);class xl{constructor(){this._points=[]}destroy(){this._points=[]}show(t,e){const s=[].concat(t);this.hide();for(let t=0;t<s.length;t++){const i=s[t];i&&i.toggleHighlight&&i.hasHighlight()&&(this.togglePointHighlight(i,!0,e),this._points.push(i))}}togglePointHighlight(t,e,s){const i=(t.options.highlight||{}).toggle;if(i){const o={category:t.category,series:t.series,dataItem:t.dataItem,value:t.value,stackValue:t.stackValue,preventDefault:yl,visual:t.highlightVisual(),show:e};i(o),o._defaultPrevented||t.toggleHighlight(e,s)}else t.toggleHighlight(e,s)}hide(){const t=this._points;for(;t.length;)this.togglePointHighlight(t.pop(),!1)}isHighlighted(t){const e=this._points;for(let s=0;s<e.length;s++){if(t===e[s])return!0}return!1}}function yl(){this._defaultPrevented=!0}function vl(t,e){const s=(e||"").toLowerCase();const i=t.event;return"none"===s&&!(i.ctrlKey||i.shiftKey||i.altKey)||i[s+"Key"]}function bl(t){const e={};for(let s=0;s<t.length;s++){const i=t[s];i.axis.options.name&&(e[i.axis.options.name]={min:i.range.min,max:i.range.max})}return e}class wl{constructor(t,e){this.plotArea=t,this.options=ut({},this.options,e)}start(t){return this._active=vl(t,this.options.key),this._active}move(t){if(this._active){const e=this.axisRanges=this._panAxes(t,W).concat(this._panAxes(t,X));if(e.length)return this.axisRanges=e,bl(e)}}end(){const t=this._active;return this._active=!1,t}pan(){const{plotArea:t,axisRanges:e}=this;if(e.length){for(let s=0;s<e.length;s++){const i=e[s];t.updateAxisOptions(i.axis,i.range)}t.redraw(t.panes)}}destroy(){delete this.plotArea}_panAxes(t,e){const s=this.plotArea;const i=-t[e].delta;const o=(this.options.lock||"").toLowerCase();const n=[];if(0!==i&&(o||"").toLowerCase()!==e){const t=s.axes;for(let s=0;s<t.length;s++){const o=t[s];if(e===W&&!o.options.vertical||e===X&&o.options.vertical){const t=o.pan(i);t&&(t.limitRange=!0,n.push({axis:o,range:t}))}}}return n}}wl.prototype.options={key:"none",lock:"none"};class _l{constructor(t,e){this.chart=t,this.options=ut({},this.options,e),this.createElement()}createElement(){const t=this._marquee=document.createElement("div");t.className="k-marquee";const e=document.createElement("div");e.className="k-marquee-color",t.appendChild(e)}removeElement(){this._marquee.parentNode&&this._marquee.parentNode.removeChild(this._marquee)}setStyles(t){xt(this._marquee,t)}start(t){if(vl(t,this.options.key)){const e=this.chart;const s=e._eventCoordinates(t);const i=this._zoomPane=e._plotArea.paneByPoint(s);const o=i?i.chartsBox().clone():null;if(i&&o){const e=this._elementOffset();return o.translate(e.left,e.top),this._zoomPaneClipBox=o,document.body.appendChild(this._marquee),this.setStyles({left:t.pageX+1,top:t.pageY+1,width:0,height:0}),!0}}return!1}_elementOffset(){const t=this.chart.element;const{paddingLeft:e,paddingTop:s}=xt(t,["paddingLeft","paddingTop"]);const i=Nt(t);return{left:e+i.left,top:s+i.top}}move(t){this._zoomPane&&this.setStyles(this._selectionPosition(t))}end(t){if(this._zoomPane){const e=this._elementOffset();const s=this._selectionPosition(t);s.left-=e.left,s.top-=e.top;const i={x:s.left,y:s.top};const o={x:s.left+s.width,y:s.top+s.height};return this._updateAxisRanges(i,o),this.removeElement(),delete this._zoomPane,bl(this.axisRanges)}}zoom(){const t=this.axisRanges;if(t&&t.length){const e=this.chart._plotArea;for(let s=0;s<t.length;s++){const i=t[s];e.updateAxisOptions(i.axis,i.range)}e.redraw(e.panes)}}destroy(){this.removeElement(),delete this._marquee,delete this.chart}_updateAxisRanges(t,e){const s=(this.options.lock||"").toLowerCase();const i=[];const o=this._zoomPane.axes;for(let n=0;n<o.length;n++){const r=o[n];const a=r.options.vertical;if((s!==W||a)&&(s!==X||!a)&&Ft(r.axisIndex)){const s=r.pointsRange(t,e);s&&i.push({axis:r,range:s})}}this.axisRanges=i}_selectionPosition(t){const e=this._zoomPaneClipBox;const s={x:t.x.startLocation,y:t.y.startLocation};const{x:{location:i},y:{location:o}}=t;const n=(this.options.lock||"").toLowerCase();let r=Math.min(s.x,i);let a=Math.min(s.y,o);let l=Math.abs(s.x-i);let h=Math.abs(s.y-o);return n===W&&(r=e.x1,l=e.width()),n===X&&(a=e.y1,h=e.height()),i>e.x2&&(l=e.x2-s.x),i<e.x1&&(l=s.x-e.x1),o>e.y2&&(h=e.y2-s.y),o<e.y1&&(h=s.y-e.y1),{left:Math.max(r,e.x1),top:Math.max(a,e.y1),width:l,height:h}}}_l.prototype.options={key:"shift",lock:"none"};class kl{constructor(t,e){this.chart=t,this.options=ut({rate:.3},this.options,e)}updateRanges(t,e){const s=(this.options.lock||"").toLowerCase();const i=[];const o=this.chart._plotArea.axes;for(let n=0;n<o.length;n++){const r=o[n];const a=r.options.vertical;if((s!==W||a)&&(s!==X||!a)&&r.zoomRange){const s=Yt(this.options.rate,.01,.9);const o=r.zoomRange(-t*s,e);o&&i.push({axis:r,range:o})}}return this.axisRanges=i,bl(i)}zoom(){const t=this.axisRanges;const e=this.chart._plotArea;if(t&&t.length&&e.updateAxisOptions){for(let s=0;s<t.length;s++){const i=t[s];e.updateAxisOptions(i.axis,i.range)}e.redraw(e.panes)}}destroy(){delete this.chart}}class Al extends bs{constructor(t,e){super(t),this.chartService=e}render(){const{children:t,options:s}=this;const i=s.vertical;var o;this.visual=new e.j(null,{spacing:i?0:s.spacing,lineSpacing:i?s.spacing:0,orientation:i?Z:q,reverse:s.rtl,alignItems:i?(o=s.rtl,o?y:V):d});for(let e=0;e<t.length;e++){let s=t[e];s.reflow(new gs),s.renderVisual()}}reflow(t){this.visual.rect(t.toRect()),this.visual.reflow();const e=this.visual.clippedBBox();this.box=e?zs(e):new gs}renderVisual(){this.addVisual()}createVisual(){}}const Sl=10;class Cl extends Es{visualStyle(){const t=this.markerOptions();const e=t.border;return{stroke:{width:e.width,color:e.color,opacity:Kt(e.opacity,t.opacity),dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},cursor:t.cursor}}markerOptions(){return this.options}markerHighlightOptions(){const t=this.markerOptions();const e=t.highlight.border.width;return ut({},t,{background:t.border.color},t.highlight,t.type===p?{background:t.highlight.border.color,border:{color:t.highlight.background,width:e/2},width:t.width,height:t.height,margin:{top:0,left:0}}:{})}createHighlight(){const t=new Es(this.markerHighlightOptions());const e=this.paddingBox.clone();return t.reflow(e.pad(t.options.border.width)),this.highlight=[t.getElement()],this.highlight}}te(Cl,{border:{width:2},width:8,height:8,background:U,margin:{top:-1,left:-1},vAlign:z,align:S,highlight:{width:Sl,height:Sl,border:{color:U,width:2}}});class Tl extends Es{getElement(){const t=new e.G;const s=new e.g(this.visualStyle());const{paddingBox:i}=this;const o=i.height()/2;return s.moveTo(i.x1,i.y1+o).lineTo(i.x1,i.y2).lineTo(i.x2,i.y2),t.append(s),t}}te(Tl,{width:15,height:15,align:B,vAlign:c,margin:{right:-2,bottom:2}});class Pl extends Es{getElement(){const t=new e.G;const s=new e.g({stroke:{color:this.options.border.color,opacity:this.options.opacity,width:this.options.height,dashType:this.options.dashType}});const i=this.paddingBox;const o=i.center().y;return s.moveTo(i.x1,o).lineTo(i.x2,o),t.append(s),t}createHighlight(){return this.highlight=[this.createHighlightLine(),this.createHighlightMarker()],this.highlight}createHighlightLine(){const t=ut({},{border:{color:this.options.border.color,opacity:this.options.border.opacity,dashType:this.options.border.dashType}},this.options.highlight);const e=new Tl(t);return e.reflow(this.parent.paddingBox.clone()),this.highlightLine=e.getElement(),this.highlightLine}createHighlightMarker(){const t=ut({},{background:this.options.background},this.options.highlight.markers);const e=new Es(t);const s=this.parent.paddingBox;const i=t.border.width;const o=this.parent.box.clone();return o.pad({left:i-s.x1,top:i-s.y1}),e.reflow(o),this.highlightMarker=e.getElement(),this.highlightMarker}}te(Pl,{border:{width:0},type:N,align:S,vAlign:d,highlight:{border:{width:2},markers:{type:u,width:Sl,height:Sl,border:{width:2,color:U},align:S,vAlign:z}}});class Ml extends Es{createHighlight(){const t=ut({},{background:this.options.background},this.options.highlight.markers);const e=new Es(t);const s=this.paddingBox.clone();const i=this.parent.box.clone();return s.align(i,W,S),s.align(i,X,z),e.reflow(s),this.highlight=[e.getElement()],this.highlight}}te(Ml,{highlight:{markers:{type:u,width:Sl,height:Sl,border:{width:2,color:U},margin:{top:-3,left:-3}}}});class El extends Ps{constructor(t){super(t),this.createContainer(),t.rtl?(this.createLabel(),this.createMarker()):(this.createMarker(),this.createLabel()),this._id=Me(),this.options.accessibility.ariaChecked=t.active}createContainer(){this.container=new Os({vertical:!1,wrap:!1,align:d,spacing:this.options.spacing}),this.append(this.container)}createMarker(){this.markerWrap=new Ps({vertical:!1,shrinkToFit:!0,wrap:!1,margin:1,width:22,height:22}),this.container.append(this.markerWrap),this.createMarkerArea(),this.options.markers.visible&&(this._marker=this._createMarker(),this.markerWrap.append(this._marker))}createMarkerArea(){const t=this.options;const{markerColor:e,line:s={}}=t;const i={border:{color:s.color||e,opacity:s.opacity,dashType:s.dashType}};return this._createLine(i)||this._createMarkerLine(i,s)||this._createSquare()}markerOptions(){const t=this.options;const{markers:e={},markerColor:s}=t;const{border:i={}}=e;return e.zIndex=void 0,ut({},e,{border:{color:i.color||s},highlight:t.highlight.markers})}_highlightOptions(){const t=this.options;return ut({markers:{type:t.markers.type}},t.highlight)}_createLine(t){const e=this.options;return e.type!==on||e.markers.visible||(this._line=new Pl(ut({},{background:e.markerColor,highlight:this._highlightOptions()},t,e.line)),this.markerWrap.append(this._line)),this._line}_createMarkerLine(t,e){return this.options.type===on&&(this._markerLineArea=new Tl(ut({},{border:{width:e.height}},t)),this.markerWrap.append(this._markerLineArea)),this._markerLineArea}_reduceSize(t,e,s=.6){"number"==typeof t[e]&&(t[e]=t[e]*s)}_createSquare(){const t=this.options;if(t.type===Wo){let e=t.pattern||(t.series||{}).pattern;e&&("function"==typeof e&&(e=e(t.series)),e=Object.assign({},e),this._reduceSize(e,"gap"),this._reduceSize(e,"width"),this._reduceSize(e,"radius")),this._square=new Ml(Object.assign({},{border:t.border,vAlign:t.markers.visible?c:d,highlight:this._highlightOptions()},t.area,{pattern:e,background:t.area.background||t.markerColor})),this.markerWrap.append(this._square)}return this._square}_createMarker(){return new Cl(this.markerOptions())}_highlightMarkers(){this.options.active&&this._toggleHighlight(!0)}_restoreMarkers(){this._toggleHighlight(!1)}_toggleHighlight(t){if(!this.options.highlight.visible)return;const e=this._marker||this._square||this._line;if(e&&e===this._line&&this._line.visual.visible(!t),e){let s=e.highlight;s||(s=e.createHighlight(),s.forEach((t=>t&&this.markerWrap.appendVisual(t)))),s.forEach((e=>e&&e.visible(t)))}}createLabel(){const t=this.options;const e=ut({},t.labels);this.container.append(new Hs(t.text,e))}getAriaLabelText(){return this.options.text}focusVisual(){this.visual.options.set("id",this._id),this.toggleFocusHighlight(!0),this._highlightMarkers()}clearFocusFromVisual(){this.visual.options.set("id",""),this.toggleFocusHighlight(!1),this._restoreMarkers()}renderComplete(){super.renderComplete();const t=this.options.cursor||{};const s=this._itemOverlay=e.a.fromRect(this.container.box.toRect(),{fill:{color:U,opacity:0},stroke:null,cursor:t.style||t});this.appendVisual(s)}click(t,e){const s=this.eventArgs(e);!t.trigger(In,s)&&e&&"contextmenu"===e.type&&e.preventDefault()}over(t,e){const s=this.eventArgs(e);return t.trigger(Rn,s)||(t._legendItemHover(s.seriesIndex,s.pointIndex),this._highlightMarkers()),!0}out(t,e){t._unsetActivePoint(),this._restoreMarkers(),t.trigger(Bn,this.eventArgs(e))}eventArgs(t){const e=this.options;return{element:Gt(t),text:e.text,series:e.series,seriesIndex:e.series.index,pointIndex:e.pointIndex}}createVisual(){super.createVisual();const t=this.options;if(this.options.visible){const e=ut({ariaLabel:void 0!==t.accessibility.ariaLabel?t.accessibility.ariaLabel:t.text},t.accessibility);Ms(this.visual,e)}}renderVisual(){const t=this.options;const e=t.visual;e?(this.visual=e({active:t.active,series:t.series,sender:this.getSender(),pointIndex:t.pointIndex,options:{type:t.type,markers:ut({background:this.options.markerColor},this.markerOptions()),labels:t.labels},createVisual:()=>{this.createVisual(),this.renderChildren(),this.renderComplete();const t=this.visual;return delete this.visual,t}}),this._marker=this._markerLineArea=this._square=this._line=null,this.addVisual()):super.renderVisual()}createFocusHighlight(t){const s=t.stroke.width;return e.a.fromRect(this.container.box.pad(s/2).toRect(),t)}}te(El,{accessibility:{role:or,className:nr,ariaRoleDescription:rr},markers:{},highlight:{visible:!0,markers:{}}});const Ll="custom";let Il=class extends bs{constructor(t,e={}){super(t),this.chartService=e,Mt(this.options.position,[z,B,c,S,Ll])||(this.options.position=B),this.createContainers(),this.createLegendTitle(t.title),this.createItems()}createContainers(){const t=this.options;const{position:e,align:s}=t;let i=e;let o=d;e===Ll?i=S:Mt(e,[z,c])?(i=s===V?S:s===y?B:d,o=e):s&&(s===V?o=z:s===y&&(o=c)),this.container=new Ps({margin:t.margin,padding:t.padding,background:t.background,border:t.border,vAlign:o,align:i,zIndex:t.zIndex,shrinkToFit:!0}),this.hasTitle()?this.itemsContainer=new Ps({vAlign:o,align:i,zIndex:t.zIndex,shrinkToFit:!0}):this.itemsContainer=this.container,this.append(this.container)}createItems(){const t=this.getService();const e=this.options;const s=this.isVertical();const i=new Al({vertical:s,spacing:e.spacing,rtl:t.rtl},t);let o=e.data;e.reverse&&(o=o.slice(0).reverse());const n=o.length;for(let s=0;s<n;s++){let n=o[s];const{markers:r={},dashType:a,legendItem:l,opacity:h}=n.series||{};const c=ut({visible:!1!==r.visible,type:u},r);delete c.size;const d=ut({},{markers:c,labels:e.labels,rtl:t.rtl,line:Object.assign({},{dashType:a},e.line),area:Object.assign({},{opacity:h},e.area),opacity:h,accessibility:e.accessibility,focusHighlight:e.focusHighlight},e.item,l,n,{markers:e.markers});i.append(new El(d))}i.render(),this.itemsContainer.append(i)}isVertical(){const{orientation:t,position:e}=this.options;return e===Ll&&t!==q||(Ft(t)?t!==q:Mt(e,[S,B]))}hasItems(){return this.container.children[0].children.length>0}getItems(){return this.itemsContainer.children[0].children}reflow(t){const e=this.options;const s=t.clone();this.hasItems()?(e.position===Ll?(this.containerCustomReflow(s),this.box=s):this.containerReflow(s),this.hasTitle()&&this.title.reflow(new gs(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2))):this.box=s}containerReflow(t){const{options:e,container:s}=this;const{position:i,width:o,height:n}=e;const r=i===z||i===c?W:X;const a=this.isVertical();const l=t.clone();let h=t.clone();i!==S&&i!==B||(h.y1=l.y1=0),a&&n?(h.y2=h.y1+n,h.align(l,X,s.options.vAlign)):!a&&o&&(h.x2=h.x1+o,h.align(l,W,s.options.align)),s.reflow(h),h=s.box;const d=h.clone();(e.offsetX||e.offsetY)&&(h.translate(e.offsetX,e.offsetY),s.reflow(h)),d[r+1]=t[r+1],d[r+2]=t[r+2],this.box=d}containerCustomReflow(t){const{options:e,container:s}=this;const{offsetX:i,offsetY:o,width:n,height:r}=e;const a=this.isVertical();let l=t.clone();a&&r?l.y2=l.y1+r:!a&&n&&(l.x2=l.x1+n),s.reflow(l),l=s.box,s.reflow(new gs(i,o,i+l.width(),o+l.height()))}renderVisual(){this.hasItems()&&super.renderVisual()}createLegendTitle(t){let e=ut({},{color:h,position:z,align:d},t);let s=e.text;if(t&&!1!==t.visible&&t.text){if(Ft(e)&&e.visible){const t=wt(e);t?s=t({text:s}):e.format&&(s=this.chartService.format.auto(e.format,s))}this.title=new Hs(s,e),this.createTitleLayout(),this.appendTitleLayoutContent()}}createTitleLayout(){this.layout=new Os({vertical:!0,wrap:!1}),this.container.append(this.layout)}hasTitle(){return Boolean(this.options.title&&!1!==this.options.title.visible&&this.options.title.text)}appendTitleLayoutContent(){this.options.title.position===c?(this.layout.append(this.itemsContainer),this.layout.append(this.title)):(this.layout.append(this.title),this.layout.append(this.itemsContainer))}};te(Il,{position:B,data:[],offsetX:0,offsetY:0,margin:yt(2),padding:yt(5),border:{color:h,width:0},item:{cursor:Y,spacing:6},spacing:6,background:"",zIndex:1,markers:{},line:{width:20,height:2,cursor:Y,opacity:1},area:{type:H,align:B,width:15,height:15}});class Rl{constructor(){this._registry=[]}register(t,e){this._registry.push({type:t,seriesTypes:e})}create(t,e,s){const i=this._registry;let o=i[0];let n;for(let e=0;e<i.length;e++){const s=i[e];n=Pr(t,s.seriesTypes);const r=Pr(t,Ln);if(n.length-r.length>0){o=s;break}}return new o.type(n,e,s)}}Rl.current=new Rl;function Bl(t){const e=document.createElement("div");return t&&(e.className=t),e}function Ol(t){let e=t;for(;e&&!Tt(e,"k-handle");)e=e.parentNode;return e}class Vl{constructor(t,e,s,i){const o=t.element;this.options=ut({},this.options,s),this.chart=t,this.observer=i,this.chartElement=o,this.categoryAxis=e,this._dateAxis=this.categoryAxis instanceof Yi,this.initOptions(),this.visible=this.options.visible&&o.offsetHeight,this.visible&&(this.createElements(),this.set(this._index(this.options.from),this._index(this.options.to)),this.bindEvents())}onPane(t){return this.categoryAxis.pane===t}createElements(){const t=this.options;const e=this.wrapper=Bl("k-selector k-pointer-events-none");xt(e,{top:t.offset.top,left:t.offset.left,width:t.width,height:t.height,direction:"ltr"});const s=this.selection=Bl("k-selection k-pointer-events-none");this.leftMask=Bl("k-mask k-pointer-events-none"),this.rightMask=Bl("k-mask k-pointer-events-none"),e.appendChild(this.leftMask),e.appendChild(this.rightMask),e.appendChild(s);const i=this.body=Bl("k-selection-bg k-pointer-events-none");s.appendChild(i);const o=this.leftHandle=Bl("k-handle k-left-handle k-pointer-events-auto");const n=this.rightHandle=Bl("k-handle k-right-handle k-pointer-events-auto");o.appendChild(Bl()),n.appendChild(Bl()),s.appendChild(o),s.appendChild(n),this.chartElement.appendChild(e);const r=xt(s,["borderLeftWidth","borderRightWidth","height"]);const a=xt(o,"height").height;const l=xt(n,"height").height;t.selection={border:{left:r.borderLeftWidth,right:r.borderRightWidth}},xt(o,{top:(r.height-a)/2}),xt(n,{top:(r.height-l)/2}),e.style.cssText=e.style.cssText}bindEvents(){!1!==this.options.mousewheel&&(this._mousewheelHandler=this._mousewheel.bind(this),zt(this.chartElement,{[ur]:this._mousewheelHandler})),this._domEvents=Ks.create(this.chartElement,{stopPropagation:!0,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})}initOptions(){const{options:t,categoryAxis:e}=this;const s=e.pane.chartsBox();const i=this.chart.chartService.intl;this._dateAxis&&ut(t,{min:Bi(i,t.min),max:Bi(i,t.max),from:Bi(i,t.from),to:Bi(i,t.to)});const{paddingLeft:o,paddingTop:n}=xt(this.chartElement,["paddingLeft","paddingTop"]);this.options=ut({},{width:s.width(),height:s.height()+.1,padding:{left:o,top:n},offset:{left:s.x1+o,top:s.y1+n},from:t.min,to:t.max},t)}destroy(){this._domEvents&&(this._domEvents.destroy(),delete this._domEvents),clearTimeout(this._mwTimeout),this._state=null,this.wrapper&&(this._mousewheelHandler&&(Qt(this.chartElement,{[ur]:this._mousewheelHandler}),this._mousewheelHandler=null),this.chartElement.removeChild(this.wrapper),this.wrapper=null)}_rangeEventArgs(t){return{axis:this.categoryAxis.options,from:this._value(t.from),to:this._value(t.to)}}_pointInPane(t,e){const s=this.categoryAxis.pane.box;const i=this.chart._toModelCoordinates(t,e);return s.containsPoint(i)}_start(t){const e=this.options;const s=Gt(t);if(this._state||!s)return;const i=Ut(t);if(!this._pointInPane(i.x,i.y))return;const o=Ol(s);const n=this.body.getBoundingClientRect();const r=!o&&i.x>=n.x&&i.x<=n.x+n.width&&i.y>=n.y&&i.y<=n.y+n.height;this.chart._unsetActivePoint(),this._state={moveTarget:o,startLocation:t.x?t.x.location:0,inBody:r,range:{from:this._index(e.from),to:this._index(e.to)}};const a=this._rangeEventArgs({from:this._index(e.from),to:this._index(e.to)});this.trigger(qn,a)&&(this._state=null)}_press(t){let e;e=this._state?this._state.moveTarget:Ol(Gt(t)),e&&K(e,"k-handle-active")}_move(t){if(!this._state)return;const{_state:e,options:s,categoryAxis:i}=this;const{range:o,moveTarget:n}=e;const r=i.options.reverse;const a=this._index(s.from);const l=this._index(s.to);const h=this._index(s.min);const c=this._index(s.max);const d=e.startLocation-t.x.location;const u=o.from,p=o.to;const g=o.to-o.from;const m=xt(this.wrapper,"width").width/(i.categoriesCount()-1);const f=Math.round(d/m)*(r?-1:1);if(!n&&!e.inBody)return;const x=n&&Tt(n,"k-left-handle");const y=n&&Tt(n,"k-right-handle");e.inBody?(o.from=Math.min(Math.max(h,a-f),c-g),o.to=Math.min(o.from+g,c)):x&&!r||y&&r?(o.from=Math.min(Math.max(h,a-f),c-1),o.to=Math.max(o.from+1,o.to)):(x&&r||y&&!r)&&(o.to=Math.min(Math.max(h+1,l-f),c),o.from=Math.min(o.to-1,o.from)),o.from===u&&o.to===p||(this.move(o.from,o.to),this.trigger(Zn,this._rangeEventArgs(o)))}_end(){if(this._state){const t=this._state.moveTarget;t&&tt(t,"k-handle-active");const e=this._state.range;this.set(e.from,e.to),this.trigger($n,this._rangeEventArgs(e)),delete this._state}}_tap(t){const{options:e,categoryAxis:s}=this;const i=this.chart._eventCoordinates(t);const o=s.pointCategoryIndex(new ps(i.x,s.box.y1));const n=this._index(e.from);const r=this._index(e.to);const a=this._index(e.min);const l=this._index(e.max);const h=r-n;const c=n+h/2;const d={};const u=3===t.event.which;let p=Math.round(c-o);this._state||u||(this.chart._unsetActivePoint(),s.options.justified||p--,d.from=Math.min(Math.max(a,n-p),l-h),d.to=Math.min(d.from+h,l),this._start(t),this._state&&(this._state.range=d,this.trigger(Zn,this._rangeEventArgs(d)),this._end()))}_mousewheel(t){let e=Vt(t);if(this._start(t),this._state){const s=this._state.range;t.preventDefault(),t.stopPropagation(),Math.abs(e)>1&&(e*=3),this.options.mousewheel.reverse&&(e*=-1),this.expand(e)&&this.trigger(Zn,{axis:this.categoryAxis.options,delta:e,originalEvent:t,from:this._value(s.from),to:this._value(s.to)}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((()=>{this._end()}),pr)}}_gesturestart(t){const e=this.options;const s=t.touches[0];if(!this._pointInPane(s.pageX,s.pageY))return;this._state={range:{from:this._index(e.from),to:this._index(e.to)}};const i=this._rangeEventArgs(this._state.range);this.trigger(qn,i)?this._state=null:t.preventDefault()}_gestureend(){this._state&&(this.trigger($n,this._rangeEventArgs(this._state.range)),delete this._state)}_gesturechange(t){if(!this._state)return;const{chart:e,_state:s,options:i,categoryAxis:o}=this;const n=s.range;const r=e._toModelCoordinates(t.touches[0].x.location).x;const a=e._toModelCoordinates(t.touches[1].x.location).x;const l=Math.min(r,a);const h=Math.max(r,a);t.preventDefault(),n.from=o.pointCategoryIndex(new ps(l))||i.min,n.to=o.pointCategoryIndex(new ps(h))||i.max,this.move(n.from,n.to),this.trigger(Zn,this._rangeEventArgs(n))}_index(t){let e=t;return t instanceof Date&&(e=this.categoryAxis.categoryIndex(t)),e}_value(t){let e=t;return this._dateAxis&&(e=this.categoryAxis.categoryAt(t),e>this.options.max&&(e=this.options.max)),e}_slot(t){const e=this.categoryAxis;const s=this._index(t);return e.getSlot(s,s,!0)}move(t,e){const s=this.options;const i=this.categoryAxis.options.reverse;const{offset:o,padding:n,selection:{border:r}}=s;const a=i?e:t;const l=i?t:e;const h="x"+(i?2:1);let c=this._slot(a);const d=$t(c[h]-o.left+n.left);xt(this.leftMask,{width:d}),xt(this.selection,{left:d}),c=this._slot(l);const u=$t(s.width-(c[h]-o.left+n.left));xt(this.rightMask,{width:u});let p=s.width-u;p!==s.width&&(p+=r.right),xt(this.rightMask,{left:p}),xt(this.selection,{width:Math.max(s.width-(d+u)-r.right,0)})}set(t,e){const s=this.options;const i=this._index(s.min);const o=this._index(s.max);const n=Yt(this._index(t),i,o);const r=Yt(this._index(e),n+1,o);s.visible&&this.move(n,r),s.from=this._value(n),s.to=this._value(r)}expand(t){const e=this.options;const s=this._index(e.min);const i=this._index(e.max);const o=e.mousewheel.zoom;const n=this._index(e.from);const r=this._index(e.to);let a={from:n,to:r};const l=ut({},a);if(this._state&&(a=this._state.range),o!==B&&(a.from=Yt(Yt(n-t,0,r-1),s,i)),o!==S&&(a.to=Yt(Yt(r+t,a.from+1,i),s,i)),a.from!==l.from||a.to!==l.to)return this.set(a.from,a.to),!0}zoom(t,e){const s=this.options;const i=this._index(s.min);const o=this._index(s.max);const n=this._index(s.from);const r=this._index(s.to);let a={from:n,to:r};const l=ut({},a);const{reverse:h}=this.categoryAxis.options;const c=W+(h?"2":"1");const d=this.categoryAxis.lineBox();const u=Math.abs(d[c]-e[W]);const p=d.width();const g=$t(u/p,2);const m=$t(g*t);const f=$t((1-g)*t);if(this._state&&(a=this._state.range),a.from=Yt(Yt(n-m,0,r-1),i,o),a.to=Yt(Yt(r+f,a.from+1,o),i,o),a.from!==l.from||a.to!==l.to)return this.set(a.from,a.to),!0}trigger(t,e){return(this.observer||this.chart).trigger(t,e)}}te(Vl,{visible:!0,mousewheel:{zoom:"both"},min:T,max:C});let Dl=class extends Aa{show(t){if(!t||!t.tooltipAnchor||this._current&&this._current===t)return;const e=ut({},this.options,t.options.tooltip);const s=t.tooltipAnchor();s?(this._current=t,super.show({point:t,anchor:s},e,t)):this.hide()}hide(){delete this._current,super.hide()}};let zl=class extends Aa{constructor(t,e){super(t.chartService,e),this.plotArea=t,this.formatService=t.chartService.format}showAt(t,e){const s=Ct(t,(function(t){const e=t.series.tooltip;return!(e&&!1===e.visible)}));if(s.length>0){const i=s[0];const o=this.plotArea.categoryAxis.getSlot(i.categoryIx);const n=e?this._slotAnchor(e,o):this._defaultAnchor(i,o);this.show({anchor:n,shared:!0,points:t,category:i.category,categoryText:this.formatService.auto(this.options.categoryFormat,i.category),series:this.plotArea.series},this.options)}}_slotAnchor(t,e){return this.plotArea.categoryAxis.options.vertical||(t.x=e.center().x),{point:t,align:{horizontal:"left",vertical:"center"}}}_defaultAnchor(t,e){const s=t.owner.pane.chartsBox();const i=this.plotArea.categoryAxis.options.vertical;const o=s.center();const n=e.center();let r;return r=i?new ps(o.x,n.y):new ps(n.x,o.y),{point:r,align:{horizontal:"center",vertical:"center"}}}};te(zl,{categoryFormat:"{0:d}"});class Fl extends e.b{setup(){const{element:t,options:s}=this;if(t.bbox()){this.origin=s.origin;const i=s.vertical?X:W;const o=this.fromScale=new e.P(1,1);o[i]=Lo,t.transform(e.t().scale(o.x,o.y))}else this.abort()}step(t){const s=Et(this.fromScale.x,1,t);const i=Et(this.fromScale.y,1,t);this.element.transform(e.t().scale(s,i,this.origin))}abort(){super.abort(),this.element.transform(null)}}te(Fl,{duration:Po}),e.i.current.register(Xo,Fl);class Hl extends e.b{setup(){const t=this.center=this.element.bbox().center();this.element.transform(e.t().scale(Lo,Lo,t))}step(t){this.element.transform(e.t().scale(t,t,this.center))}}te(Hl,{easing:"easeOutElastic"}),e.i.current.register(qo,Hl);class Nl extends e.b{setup(){this.fadeTo=this.element.opacity(),this.element.opacity(0)}step(t){this.element.opacity(t*this.fadeTo)}}te(Nl,{duration:200,easing:"linear"}),e.i.current.register(Mo,Nl);class jl extends e.b{setup(){this.element.transform(e.t().scale(Lo,Lo,this.options.center))}step(t){this.element.transform(e.t().scale(t,t,this.options.center))}}te(jl,{easing:"easeOutElastic",duration:Po}),e.i.current.register(rn,jl);class Ul extends ya{render(){super.render(),this.renderSegments()}createSegment(t,e,s){let i;return i=e.style===Uo?qr:Gr,new i(t,e,s)}animationPoints(){return super.animationPoints().concat(this._segments)}createMissingValue(t,e){if(e===zo){const e={x:t.x,y:t.y};return Ir(e.x)||(e.x=0),Ir(e.y)||(e.y=0),e}}}function Gl(t,e,s){const i=[];let{xMin:o,xMax:n}=e;const r=(s||{}).forecast;r&&(r.before>0&&(o-=r.before),r.after>0&&(n+=r.after));const a=(s||{}).samplingInterval;let l=Kt(a,us(o,n)/10);a<=0&&(l=n-o);for(let e=o;e<=n;e+=l)i.push([e,t(e)]);return i}ut(Ul.prototype,Zr);const Wl=t=>({valueFields:e})=>({xValue:e.x,yValue:Math.log(e[t])});const Xl=t=>({valueFields:e})=>({xValue:e.x,yValue:e[t]});function Yl(t,e){let s=Number.MAX_VALUE;let i=Number.MIN_VALUE;for(let o=0;o<t.length;o++){const n=t[o];const{xValue:r,yValue:a}=e(n);isFinite(r)&&null!==r&&isFinite(a)&&null!==a&&(s=Math.min(r,s),i=Math.max(r,i))}return{xMin:s,xMax:i}}const ql=t=>({valueFields:e})=>({xValue:e.x,yValue:e[t]});const Zl=t=>({valueFields:e})=>({xValue:Math.log(e.x),yValue:e[t]});const $l=t=>({valueFields:e})=>({xValue:Math.log(e.x),yValue:Math.log(e[t])});const Ql={};Ql[Sn]=function(t){const{options:e,seriesValues:s}=t;const i=function({seriesValues:t,options:e}){const s=t();if(!el(s,e.field))return null;let{slope:i,intercept:o,count:n,xMin:r,xMax:a}=tl(s,Wl(e.field));const l={xMin:r,xMax:a};if(n>0){const t=Math.exp(o);const s=i;return Gl((e=>t*Math.exp(s*e)),l,e.trendline)}return null}({seriesValues:s,options:e});return i?Object.assign({},e,{type:"scatterLine",data:i}):null},Ql[Cn]=function(t){const{options:e,seriesValues:s}=t;const i=function({seriesValues:t,options:e}){let{slope:s,intercept:i,count:o,xMin:n,xMax:r}=tl(t(),Xl(e.field));const a={xMin:n,xMax:r};if(o>0)return Gl((t=>s*t+i),a,e.trendline);return null}({seriesValues:s,options:e});return i?Object.assign({},e,{type:"scatterLine",data:i}):null},Ql[Tn]=function(t){const{options:e,seriesValues:s}=t;const i=function({seriesValues:t,options:e}){const s=t();if(!el(s,"x"))return null;let{slope:i,intercept:o,count:n}=tl(s,Zl(e.field));let r=Yl(s,ql(e.field));if(n>0){const t=i;const s=o;return Gl((e=>t*Math.log(e)+s),r,e.trendline)}return null}({seriesValues:s,options:e});return i?Object.assign({},e,{type:"scatterLine",data:i}):null},Ql[Pn]=function(t){const{options:e}=t;const s=function({options:t,seriesValues:e}){const s=(t.trendline||{}).period||2;const i=rl(e({before:s,after:s}),Xl(t.field),s);if(i.length>0)return i;return null}(t);return s?Object.assign({},e,{type:"scatterLine",data:s}):null},Ql[Mn]=function(t){const{options:e,seriesValues:s}=t;const i=function({seriesValues:t,options:e}){const s=(e.trendline||{}).order;const i=Xl(e.field);const{count:o,valueMapper:n,xMin:r,xMax:a}=ll(t(),i,s);const l={xMin:r,xMax:a};if(o>0)return Gl(n,l,e.trendline);return null}({seriesValues:s,options:e});return i?Object.assign({},e,{type:"scatterLine",data:i}):null},Ql[En]=function(t){const{options:e,seriesValues:s}=t;const i=function({seriesValues:t,options:e}){const s=t();if(!el(s,"x"))return null;let{slope:i,intercept:o,count:n}=tl(s,$l(e.field));let r=Yl(s,Xl(e.field));if(n>0){const t=Math.exp(o);const s=i;return Gl((e=>t*Math.pow(e,s)),r,e.trendline)}return null}({seriesValues:s,options:e});return i?Object.assign({},e,{type:"scatterLine",data:i}):null};class Kl extends La{initFields(){this.namedXAxes={},this.namedYAxes={},this.xAxisRangeTracker=new ia,this.yAxisRangeTracker=new ia}render(t=this.panes){this.series=[...this.originalSeries],this.createTrendlineSeries();const e=this.groupSeriesByPane();for(let s=0;s<t.length;s++){const i=t[s];const o=e[i.options.name||"default"]||[];this.addToLegend(o);const n=this.filterVisibleSeries(o);n&&(this.createScatterChart(Pr(n,fn),i),this.createScatterLineChart(Pr(n,xn),i),this.createBubbleChart(Pr(n,qo),i))}this.createAxes(t)}appendChart(t,e){this.xAxisRangeTracker.update(t.xAxisRanges),this.yAxisRangeTracker.update(t.yAxisRanges),super.appendChart(t,e)}removeAxis(t){const e=t.options.name;super.removeAxis(t),t.options.vertical?(this.yAxisRangeTracker.reset(e),delete this.namedYAxes[e]):(this.xAxisRangeTracker.reset(e),delete this.namedXAxes[e]),t===this.axisX&&delete this.axisX,t===this.axisY&&delete this.axisY}seriesPaneName(t){const e=this.options;const s=t.xAxis;const i=[].concat(e.xAxis);const o=Ct(i,(function(t){return t.name===s}))[0];const n=t.yAxis;const r=[].concat(e.yAxis);const a=Ct(r,(function(t){return t.name===n}))[0];const l=(e.panes||[{}])[0].name||"default";return(o||{}).pane||(a||{}).pane||l}createScatterChart(t,e){t.length>0&&this.appendChart(new ya(this,{series:t,clip:e.options.clip}),e)}createScatterLineChart(t,e){t.length>0&&this.appendChart(new Ul(this,{series:t,clip:e.options.clip}),e)}createBubbleChart(t,e){t.length>0&&this.appendChart(new ba(this,{series:t,clip:e.options.clip}),e)}createXYAxis(t,e,s){const i=t.name;const o=e?this.namedYAxes:this.namedXAxes;const n=e?this.yAxisRangeTracker:this.xAxisRangeTracker;const r=ut({reverse:!e&&this.chartService.rtl},t,{vertical:e});const a=Cr(r.type,ar);const l=n.query();const h=a?{min:.1,max:1}:{min:0,max:1};const c=n.query(i)||l||h;const d=[r.min,r.max];const u=this.series;for(let t=0;t<u.length;t++){const i=u[t];const o=i[e?"yAxis":"xAxis"];if(o===r.name||0===s&&!o){const t=ko.current.bindPoint(i,0).valueFields;d.push(t[e?"y":"x"]);break}}let p;0===s&&l&&(c.min=Math.min(c.min,l.min),c.max=Math.max(c.max,l.max));for(let t=0;t<d.length;t++)if(d[t]instanceof Date){p=!0;break}let m;m=Cr(r.type,g)||!r.type&&p?to:a?so:Ki;const f=new m(c.min,c.max,r,this.chartService);if(f.axisIndex=s,i){if(o[i])throw new Error(`${e?"Y":"X"} axis with name ${i} is already defined`);o[i]=f}return this.appendAxis(f),f}createAxes(t){const e=this.options;const s=[].concat(e.xAxis);const i=[];const o=[].concat(e.yAxis);const n=[];for(let e=0;e<s.length;e++){Mt(this.findPane(s[e].pane),t)&&i.push(this.createXYAxis(s[e],!1,e))}for(let e=0;e<o.length;e++){Mt(this.findPane(o[e].pane),t)&&n.push(this.createXYAxis(o[e],!0,e))}this.axisX=this.axisX||i[0],this.axisY=this.axisY||n[0]}_dispatchEvent(t,e,s){const i=t._eventCoordinates(e);const o=new ps(i.x,i.y);const n=this.axes;const r=n.length;const a=[];const l=[];for(let t=0;t<r;t++){const e=n[t];const s=e.options.vertical?l:a;const i=e.getValue(o);null!==i&&s.push(i)}a.length>0&&l.length>0&&t.trigger(s,{element:Gt(e),originalEvent:e,x:Br(a),y:Br(l)})}updateAxisOptions(t,e){const s=t.options.vertical;const i=this.groupAxes(this.panes);const o=(s?i.y:i.x).indexOf(t);Jl(this.options,o,s,e),Jl(this.originalOptions,o,s,e)}trendlineFactory(t,e){const s=this.seriesValues.bind(this,e.index);const i=Ja(Ql,t.type,{options:t,seriesValues:s});return i&&(i.xAxis=e.xAxis,i.yAxis=e.yAxis),i}seriesValues(t){const e=[];const s=this.series[t];for(let t=0;t<s.data.length;t++){const i=this.bindPoint(s,t);e.push({pointIx:t,valueFields:i.valueFields})}return e}}function Jl(t,e,s,i){ut([].concat(s?t.yAxis:t.xAxis)[e],i)}te(Kl,{xAxis:{},yAxis:{}}),ut(Kl.prototype,Va);class th extends bs{constructor(t,e,s){super(s),this.value=t,this.sector=e}render(){this._rendered||!1===this.visible||(this._rendered=!0,this.createLabel())}createLabel(){const t=this.options.labels;const e=this.owner.chartService;let s=this.getLabelText(t);if(t.visible&&(s||0===s)){if(t.position===d||t.position===hr)t.color||(t.color=ge(this.options.color)),t.background||(t.background=this.options.color);else{const s=e.theme.seriesDefaults.labels;t.color=t.color||s.color,t.background=t.background||s.background}this.label=new Hs(s,ut({},t,{align:d,vAlign:"",animation:{type:Mo,delay:this.animationDelay}}),this.pointData()),this.append(this.label)}}getLabelText(t){let e=wt(t);return e?e(this.pointData()):this.owner.chartService.format.auto(t.format,this.value)}reflow(t){this.render(),this.box=t,this.reflowLabel()}reflowLabel(){const{options:{labels:t},label:e}=this;const s=this.sector.clone();const i=t.distance;const o=s.middle();if(e){const n=e.box.height();const r=e.box.width();let a;if(t.position===d)s.radius=Math.abs((s.radius-n)/2)+n,a=s.point(o),e.reflow(new gs(a.x,a.y-n/2,a.x,a.y));else if(t.position===hr)s.radius=s.radius-n/2,a=s.point(o),e.reflow(new gs(a.x,a.y-n/2,a.x,a.y));else{let t;a=s.clone().expand(i).point(o),a.x>=s.center.x?(t=a.x+r,e.orientation=B):(t=a.x-r,e.orientation=S),e.reflow(new gs(t,a.y-n,a.x,a.y))}}}createVisual(){const{sector:t,options:s}=this;if(super.createVisual(),this.addAccessibilityAttributesToVisual(),this.value)if(s.visual){const i=(t.startAngle+180)%360;const o=s.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new e.P(t.center.x,t.center.y),radius:t.radius,innerRadius:t.innerRadius,startAngle:i,endAngle:i+t.angle,options:s,sender:this.getSender(),createVisual:()=>{const t=new e.G;return this.createSegmentVisual(t),t}});o&&this.visual.append(o)}else this.createSegmentVisual(this.visual)}createSegmentVisual(t){const{sector:e,options:s}=this;const i=s.border||{};const o=i.width>0?{stroke:{color:i.color,width:i.width,opacity:i.opacity,dashType:i.dashType}}:{};const n=s.color;const r=Ts(s.pattern,{color:n,opacity:s.opacity});const a=this.createSegment(e,ut({fill:r,stroke:{opacity:s.opacity},zIndex:s.zIndex},o));t.append(a),Lr(s)&&t.append(this.createGradientOverlay(a,{baseColor:n,fallbackFill:r},ut({center:[e.center.x,e.center.y],innerRadius:e.innerRadius,radius:e.radius,userSpace:!0},s.overlay)))}createSegment(t,s){return s.singleSegment?new e.e(new e.f(new e.P(t.center.x,t.center.y),t.radius),s):vs.current.createRing(t,s)}createAnimation(){const{options:t,sector:{center:e}}=this;ut(t,{animation:{center:[e.x,e.y],delay:this.animationDelay}}),super.createAnimation()}createHighlight(t){const e=this.options.highlight||{};const s=e.border||{};return this.createSegment(this.sector,ut({},t,{fill:{color:e.color,opacity:e.opacity},stroke:{opacity:s.opacity,width:s.width,color:s.color,dashType:s.dashType}}))}highlightVisual(){return this.visual.children[0]}highlightVisualArgs(){const t=this.sector;return{options:this.options,radius:t.radius,innerRadius:t.innerRadius,center:new e.P(t.center.x,t.center.y),startAngle:t.startAngle,endAngle:t.angle+t.startAngle,visual:this.visual}}createFocusHighlight(t){const s=this.options.focusHighlight.border.width;const i=this.createSegment(this.sector,ut({},t,{stroke:{width:2*s}}));const o=new e.g;return o.paths.push(e.a.fromRect(i.bbox())),o.paths.push(this.createSegment(this.sector,{})),i.clip(o),i}tooltipAnchor(){const t=this.sector.clone().expand(5);const e=t.middle();return{point:t.point(e),align:ih(e+180)}}formatValue(t){return this.owner.formatPointValue(this,t)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}}getIndex(){return this.index}}const eh=$t(Zt(30),f);const sh=$t(Zt(60),f);function ih(t){const e=Zt(t);const s=$t(Math.sin(e),f);const i=$t(Math.cos(e),f);let o;let n;return o=Math.abs(s)>sh?d:i<0?B:S,n=Math.abs(s)<eh?d:s<0?c:z,{horizontal:o,vertical:n}}te(th,{color:U,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:m,margin:yt(.5),align:u,zIndex:1,position:dr},animation:{type:rn},highlight:{visible:!0,border:{width:1}},visible:!0,accessibility:{role:er,className:sr,ariaRoleDescription:ir}}),ut(th.prototype,Nr),ut(th.prototype,na);const oh={createLegendItem:function(t,e,s){const i=this.options.legend||{};const o=i.labels||{};const n=i.inactiveItems||{};const r=n.labels||{};if(s&&!1!==s.visibleInLegend){const i=!1!==s.visible;const a=i?wt(o):wt(r)||wt(o);let l=s.category;let h,c;a&&(l=a({text:l,series:s.series,dataItem:s.dataItem,percentage:s.percentage,value:t})),i?(h={},c=e.color):(h={color:r.color,font:r.font},c=(n.markers||{}).color),Ir(l)&&""!==l&&this.legendItems.push({active:i,pointIndex:s.index,text:l,series:s.series,markerColor:c,pattern:e.pattern,labels:h})}}};class nh extends bs{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this.points=[],this.legendItems=[],this.render()}render(){this.traverseDataPoints(this.addValue.bind(this))}traverseDataPoints(t){const{options:e,plotArea:{options:{seriesColors:s=[]}}}=this;const i=s.length;const o=e.series;const n=o.length;for(let r=0;r<n;r++){const a=o[r];const l=a.data;const{total:h,points:c,count:u}=Ar(a);const p=360/h;let g;let m;isFinite(p)||(g=360/u),m=Ft(a.startAngle)?a.startAngle:e.startAngle,r!==n-1&&a.labels.position===dr&&(a.labels.position=d);for(let e=0;e<c.length;e++){const o=c[e];if(!o)continue;const{fields:d,value:u,visible:f}=o;const x=0!==u?g||u*p:0;const y=1!==l.length&&Boolean(d.explode);ht(a.color)||(a.color=d.color||s[e%i]),t(u,new fs(null,0,0,m,x),{owner:this,category:Ft(d.category)?d.category:"",pattern:Ft(d.pattern)?d.pattern:a.pattern,index:e,series:a,seriesIx:r,dataItem:l[e],percentage:0!==h?u/h:0,explode:y,visibleInLegend:d.visibleInLegend,visible:f,zIndex:n-r,animationDelay:this.animationDelay(e,r,n)}),!1!==f&&(m+=x)}}}evalSegmentOptions(t,e,s){const i=s.series;Tr(t,{value:e,series:i,dataItem:s.dataItem,category:s.category,percentage:s.percentage},{defaults:i._defaults,excluded:["data","content","template","visual","toggle","ariaTemplate","ariaContent"]})}addValue(t,e,s){const i=ut({},s.series,{index:s.index});if(i.pattern=s.pattern||i.pattern,this.evalSegmentOptions(i,t,s),this.createLegendItem(t,i,s),!1===s.visible)return;const o=new th(t,e,i);Object.assign(o,s),this.append(o),this.points.push(o)}reflow(t){const{options:e,points:s,seriesConfigs:i=[]}=this;const o=s.length;const n=t.clone();const r=Math.min(n.width(),n.height());const a=r/2;const l=r-.85*r;const h=new gs(n.x1,n.y1,n.x1+r,n.y1+r);const c=h.center();const d=n.center();const u=e.series.length;const p=[];const g=[];let m=Kt(e.padding,l);this.targetBox=t,m=m>a-5?a-5:m,h.translate(d.x-c.x,d.y-c.y);const f=a-m;const x=new ps(f+h.x1+m,f+h.y1+m);for(let t=0;t<o;t++){const e=s[t];const o=e.sector;const n=e.seriesIx;if(o.radius=f,o.center=x,i.length){const t=i[n];o.innerRadius=t.innerRadius,o.radius=t.radius}n===u-1&&e.explode&&(o.center=o.clone().setRadius(.15*o.radius).point(o.middle())),e.reflow(h);const r=e.label;r&&r.options.position===dr&&n===u-1&&(r.orientation===B?g.push(r):p.push(r))}p.length>0&&(p.sort(this.labelComparator(!0)),this.leftLabelsReflow(p)),g.length>0&&(g.sort(this.labelComparator(!1)),this.rightLabelsReflow(g)),this.box=h}leftLabelsReflow(t){const e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)}rightLabelsReflow(t){const e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)}distanceBetweenLabels(t){const e=Xt(this.points);const s=e.sector;const i=t.length-1;const o=s.radius+e.options.labels.distance;const n=[];let r=t[0].box;let a=$t(r.y1-(s.center.y-o-r.height()-r.height()/2));n.push(a);for(let e=0;e<i;e++){const s=t[e+1].box;r=t[e].box,a=$t(s.y1-r.y2),n.push(a)}return a=$t(s.center.y+o-t[i].box.y2-t[i].box.height()/2),n.push(a),n}distributeLabels(t,e){const s=t.length;let i,o,n;for(let e=0;e<s;e++)for(n=-t[e],i=o=e;n>0&&(i>=0||o<s);)n=this._takeDistance(t,e,--i,n),n=this._takeDistance(t,e,++o,n);this.reflowLabels(t,e)}_takeDistance(t,e,s,i){let o=i;if(t[s]>0){const i=Math.min(t[s],o);o-=i,t[s]-=i,t[e]+=i}return o}reflowLabels(t,e){const s=Xt(this.points);const i=s.sector;const o=s.options.labels;const n=e.length;const r=o.distance;let a=i.center.y-(i.radius+r)-e[0].box.height();let l;t[0]+=2;for(let s=0;s<n;s++){const n=e[s];const h=n.box;a+=t[s],l=this.hAlignLabel(h.x2,i.clone().expand(r),a,a+h.height(),n.orientation===B),n.orientation===B?(o.align!==u&&(l=i.radius+i.center.x+r),n.reflow(new gs(l+h.width(),a,l,a))):(o.align!==u&&(l=i.center.x-i.radius-r),n.reflow(new gs(l-h.width(),a,l,a))),a+=h.height()}}createVisual(){const{options:{connectors:t},points:s}=this;const i=s.length;super.createVisual(),this._connectorLines=[];for(let o=0;o<i;o++){const i=s[o];const{sector:n,label:r}=i;const a=n.middle();const l=(i.options.connectors||{}).color||t.color;if(r){const s=new e.a({stroke:{color:l,width:t.width},animation:{type:Mo,delay:i.animationDelay}});if(r.options.position===dr){const e=r.box;const o=n.center;let l=n.point(a);let h=new ps(e.x1,e.center().y);let c,d,u;l=n.clone().expand(t.padding).point(a),s.moveTo(l.x,l.y),r.orientation===B?(d=new ps(e.x1-t.padding,e.center().y),u=rh(o,l,h,d),h=new ps(d.x-4,d.y),u=u||h,u.x=Math.min(u.x,h.x),this.pointInCircle(u,n.center,n.radius+4)||u.x<n.center.x?(c=n.center.x+n.radius+4,i.options.labels.align!==Qo?c<h.x?s.lineTo(c,l.y):s.lineTo(l.x+8,l.y):s.lineTo(c,l.y),s.lineTo(h.x,d.y)):(u.y=d.y,s.lineTo(u.x,u.y))):(d=new ps(e.x2+t.padding,e.center().y),u=rh(o,l,h,d),h=new ps(d.x+4,d.y),u=u||h,u.x=Math.max(u.x,h.x),this.pointInCircle(u,n.center,n.radius+4)||u.x>n.center.x?(c=n.center.x-n.radius-4,i.options.labels.align!==Qo?c>h.x?s.lineTo(c,l.y):s.lineTo(l.x-8,l.y):s.lineTo(c,l.y),s.lineTo(h.x,d.y)):(u.y=d.y,s.lineTo(u.x,u.y))),s.lineTo(d.x,d.y),this._connectorLines.push(s),this.visual.append(s)}}}}renderVisual(){if(super.renderVisual(),he(this.options.series,(t=>t.autoFit))){const t=this.targetBox;const s=this.box.center();const i=this.visual.bbox();if(!i)return;const o=i.bottomRight();const n=Math.min((s.y-t.y1)/(s.y-i.origin.y),(t.y2-s.y)/(o.y-s.y),(s.x-t.x1)/(s.x-i.origin.x),(t.x2-s.x)/(o.x-s.x));n<1&&this.visual.transform(e.t().scale(n,n,[s.x,s.y]))}}labelComparator(t){const e=t?-1:1;return function(t,s){return((t.parent.sector.middle()+270)%360-(s.parent.sector.middle()+270)%360)*e}}hAlignLabel(t,e,s,i,o){const{radius:n,center:{x:r,y:a}}=e;const l=Math.min(Math.abs(a-s),Math.abs(a-i));return l>n?t:r+Math.sqrt(n*n-l*l)*(o?1:-1)}pointInCircle(t,e,s){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(s,2)}formatPointValue(t,e){return this.chartService.format.auto(e,t.value)}animationDelay(t){return 70*t}stackRoot(){return this}}function rh(t,e,s,i){const o=(i.x-s.x)*(t.y-s.y)-(i.y-s.y)*(t.x-s.x);const n=(i.y-s.y)*(e.x-t.x)-(i.x-s.x)*(e.y-t.y);let r;if(0!==n){const s=o/n;r=new ps(t.x+s*(e.x-t.x),t.y+s*(e.y-t.y))}return r}te(nh,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}}),ut(nh.prototype,oh),nh.prototype.isStackRoot=!0;class ah extends La{render(){this.createPieChart(this.series)}createPieChart(t){const e=t[0];const s=new nh(this,{series:t,padding:e.padding,startAngle:e.startAngle,connectors:e.connectors,legend:this.options.legend});this.appendChart(s)}appendChart(t,e){super.appendChart(t,e),Dt(this.options.legend.data,t.legendItems)}getPointBelow(t){return this.getPointToTheRight(t)}getPointAbove(t){return this.getPointToTheLeft(t)}}class lh extends th{reflowLabel(){const{options:{labels:t},label:e}=this;const s=this.sector.clone();const i=s.middle();if(e){const o=e.box.height();if(t.position===d){s.radius-=(s.radius-s.innerRadius)/2;const t=s.point(i);e.reflow(new gs(t.x,t.y-o/2,t.x,t.y))}else super.reflowLabel()}}createSegment(t,e){return vs.current.createRing(t,e)}}te(lh,{overlay:{gradient:"roundedGlass"},labels:{position:d},animation:{type:rn}}),ut(lh.prototype,Nr);class hh extends nh{addValue(t,e,s){const i=ut({},s.series,{index:s.index});if(i.pattern=s.pattern||i.pattern,this.evalSegmentOptions(i,t,s),this.createLegendItem(t,i,s),!1===s.visible)return;const o=new lh(t,e,i);Object.assign(o,s),this.append(o),this.points.push(o)}reflow(t){const e=this.options;const s=t.clone();const i=Math.min(s.width(),s.height());const o=i/2;const n=i-.85*i;const r=e.series;const a=r.length;let l=Kt(e.padding,n);l=l>o-5?o-5:l;let h=o-l;let c=0;let d;for(let t=0;t<a;t++){const e=r[t];0===t&&Ft(e.holeSize)&&(d=e.holeSize,h-=e.holeSize),Ft(e.size)?h-=e.size:c++,Ft(e.margin)&&t!==a-1&&(h-=e.margin)}if(!Ft(d)){d=.75*((o-l)/(a+.75)),h-=d}let u=d;let p=0;let g,m;this.seriesConfigs=[];for(let t=0;t<a;t++){const e=r[t];g=Kt(e.size,h/c),u+=p,m=u+g,this.seriesConfigs.push({innerRadius:u,radius:m}),p=e.margin||0,u=m}super.reflow(t)}animationDelay(t,e,s){return 50*t+Po*(e+1)/(s+1)}}te(hh,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}});class ch extends ah{render(){this.createDonutChart(this.series)}createDonutChart(t){const e=t[0];const s=new hh(this,{series:t,padding:e.padding,connectors:e.connectors,legend:this.options.legend});this.appendChart(s)}getPointBelow(t){return this._getNextPoint(t,this._pointsByVertical,-1)}getPointAbove(t){return this._getNextPoint(t,this._pointsByVertical,1)}}class dh extends La{initFields(){this.valueAxisRangeTracker=new ia}render(){this.addToLegend(this.series),this.createPolarAxis(),this.createCharts(),this.createValueAxis()}alignAxes(){const t=this.valueAxis;const e=t.range();const s=t.options.reverse?e.max:e.min;const i=t.getSlot(s);const o=this.polarAxis.getSlot(0).center;const n=t.box.translate(o.x-i.x1,o.y-i.y1);t.reflow(n)}createValueAxis(){const t=this.valueAxisRangeTracker.query();const e=this.valueAxisOptions({roundToMajorUnit:!1,zIndex:-1});let s,i;e.type===ar?(s=uo,i={min:.1,max:1}):(s=co,i={min:0,max:1});const o=t||i;const n=new s(o.min,o.max,e,this.chartService);this.valueAxis=n,this.appendAxis(n)}reflowAxes(){const{options:{plotArea:t},valueAxis:e,polarAxis:s,box:i}=this;const o=.15*Math.min(i.width(),i.height());const n=yt(t.padding||{},o);const r=i.clone().unpad(n);const a=r.clone();a.y2=a.y1+Math.min(a.width(),a.height()),a.align(r,X,d);const l=a.clone().shrink(0,a.height()/2);s.reflow(a),e.reflow(l);const h=e.lineBox().height()-e.box.height();e.reflow(e.box.unpad({top:h})),this.axisBox=a,this.alignAxes(a)}backgroundBox(){return this.box}detachLabels(){}}class uh extends ya{pointSlot(t,e){const s=t.center.y-e.y1;const i=ps.onCircle(t.center,t.startAngle,s);return new gs(i.x,i.y,i.x,i.y)}}te(uh,{clip:!1});class ph extends Ul{}ph.prototype.pointSlot=uh.prototype.pointSlot,te(ph,{clip:!1});class gh extends ea{fillToAxes(t){const e=this._polarAxisCenter();t.lineTo(e.x,e.y)}_polarAxisCenter(){return this.parent.plotArea.polarAxis.box.center()}strokeSegments(){let t=this._strokeSegments;if(!t){const e=this._polarAxisCenter();const s=new po(!1);const i=this.points();i.push(e),t=this._strokeSegments=s.process(i),t.pop()}return t}}class mh extends Jr{fillToAxes(t){const s=this.parent.plotArea.polarAxis.box.center();const i=new e.S([s.x,s.y]);t.segments.unshift(i),t.segments.push(i)}}class fh extends ph{createSegment(t,e,s){let i;return i=(e.line||{}).style===Uo?new gh(t,e,s):new mh(t,e,s),i}createMissingValue(t,e){let s;return Ir(t.x)&&e!==Fo&&(s={x:t.x,y:t.y},e===zo&&(s.y=0)),s}seriesMissingValues(t){return t.missingValues||zo}_hasMissingValuesGap(){const t=this.options.series;for(let e=0;e<t.length;e++)if(this.seriesMissingValues(t[e])===Ho)return!0}sortPoints(t){if(t.sort(xh),this._hasMissingValuesGap())for(let e=0;e<t.length;e++){const s=t[e];if(s){Ir(s.value.y)||this.seriesMissingValues(s.series)!==Ho||delete t[e]}}return t}}function xh(t,e){return t.value.x-e.value.x}class yh extends dh{createPolarAxis(){const t=new ao(this.options.xAxis,this.chartService);this.polarAxis=t,this.axisX=t,this.appendAxis(t)}render(){this.series=[...this.originalSeries],this.createTrendlineSeries(),super.render()}valueAxisOptions(t){return ut(t,{majorGridLines:{type:s},minorGridLines:{type:s}},this.options.yAxis)}createValueAxis(){super.createValueAxis(),this.axisY=this.valueAxis}trendlineFactory(t,e){const s=Kl.prototype.trendlineFactory.call(this,t,e);return s&&(s.type=ln),s}appendChart(t,e){this.valueAxisRangeTracker.update(t.yAxisRanges),La.prototype.appendChart.call(this,t,e)}createCharts(){const t=this.filterVisibleSeries(this.series);const e=this.panes[0];this.createLineChart(Pr(t,[ln]),e),this.createScatterChart(Pr(t,[hn]),e),this.createAreaChart(Pr(t,[an]),e)}createLineChart(t,e){if(0===t.length)return;const s=new ph(this,{series:t});this.appendChart(s,e)}createScatterChart(t,e){if(0===t.length)return;const s=new uh(this,{series:t});this.appendChart(s,e)}createAreaChart(t,e){if(0===t.length)return;const s=new fh(this,{series:t});this.appendChart(s,e)}_dispatchEvent(t,e,s){const i=t._eventCoordinates(e);const o=new ps(i.x,i.y);const n=this.axisX.getValue(o);const r=this.axisY.getValue(o);null!==n&&null!==r&&t.trigger(s,{element:Gt(e),x:n,y:r})}createCrosshairs(){}}te(yh,{xAxis:{},yAxis:{}}),ut(yh.prototype,Va,{seriesValues:Kl.prototype.seriesValues});class vh extends Kr{pointSlot(t,e){const s=t.center.y-e.y1;const i=ps.onCircle(t.center,t.middle(),s);return new gs(i.x,i.y,i.x,i.y)}renderSegments(){if(super.renderSegments(),this._segments&&this._segments.length>1){const t=function(t){const e=[];for(let s=0;s<t.length;s++){const i=t[s];e[i.seriesIx]=e[i.seriesIx]||[],e[i.seriesIx].push(i)}return e}(this._segments);for(let e=0;e<t.length;e++){const s=t[e];if(s&&s.length>1){const t=s[0].linePoints[0];const e=Xt(s);const i=Xt(e.linePoints);const o=0===t.categoryIx;const n=i.categoryIx===i.categoriesCount-1;o&&n&&Xt(s).linePoints.push(t)}}}}createSegment(t,e,s){let i;i=e.style===Uo?qr:Gr;const o=new i(t,e,s);const n=this.seriesMissingValues(e);return t.length!==e.data.length&&n!==Fo||(o.options.closed=!0),o}}te(vh,{clip:!1,limitPoints:!1});class bh extends ea{fillToAxes(){}}class wh extends Jr{fillToAxes(){}}class _h extends vh{createSegment(t,e,s,i){const o=this.options.isStacked;const n=(e.line||{}).style;let r;let a;let l;return o&&s>0&&i&&(a=i.linePoints.slice(0),r=i),n===Uo?(l=new bh(t,e,s,r,a),l.options.closed=!0):(t.push(t[0]),l=new wh(t,e,s,r,a)),l}seriesMissingValues(t){return t.missingValues||zo}}class kh extends lh{constructor(t,e){super(t,null,e)}getIndex(){return this.categoryIx}}te(kh,{overlay:{gradient:"none"},labels:{distance:10}});class Ah extends bs{constructor(t){super(t),this.forEach=t.rtl?la:aa}reflow(t){const{options:e,children:s}=this;const{gap:i,spacing:o}=e;const n=s.length;const r=n+i+o*(n-1);const a=t.angle/r;let l=t.startAngle+a*(i/2);this.forEach(s,(e=>{const s=t.clone();s.startAngle=l,s.angle=a,e.sector&&(s.radius=e.sector.radius),e.reflow(s),e.sector=s,l+=a+a*o}))}}te(Ah,{gap:1,spacing:0});class Sh extends bs{reflow(t){const{options:{reverse:e},children:s}=this;const i=s.length;const o=e?i-1:0;const n=e?-1:1;this.box=new gs;for(let e=o;e>=0&&e<i;e+=n){const i=s[e].sector;i.startAngle=t.startAngle,i.angle=t.angle}}}class Ch extends da{pointType(){return kh}clusterType(){return Ah}stackType(){return Sh}categorySlot(t,e){return t.getSlot(e)}pointSlot(t,e){const s=t.clone();const i=t.center.y;return s.radius=i-e.y1,s.innerRadius=i-e.y2,s}reflowPoint(t,e){t.sector=e,t.reflow()}createAnimation(){this.options.animation.center=this.box.toRect().center(),super.createAnimation()}}Ch.prototype.reflow=Hr.prototype.reflow,te(Ch,{clip:!1,limitPoints:!1,animation:{type:"pie"}});class Th extends dh{createPolarAxis(){const t=new ro(this.options.categoryAxis,this.chartService);this.polarAxis=t,this.categoryAxis=t,this.appendAxis(t),this.aggregateCategories(),this.createTrendlineSeries(),this.createCategoryAxesLabels()}valueAxisOptions(t){return this._hasBarCharts&&ut(t,{majorGridLines:{type:s},minorGridLines:{type:s}}),this._isStacked100&&ut(t,{roundToMajorUnit:!1,labels:{format:"P0"}}),ut(t,this.options.valueAxis)}aggregateCategories(){gl.prototype.aggregateCategories.call(this,this.panes)}createCategoryAxesLabels(){gl.prototype.createCategoryAxesLabels.call(this,this.panes)}filterSeries(t){return t}trendlineFactory(t,e){const s=gl.prototype.trendlineFactory.call(this,t,e);return s&&(s.type=un),s}createCharts(){const t=this.filterVisibleSeries(this.series);const e=this.panes[0];this.createAreaChart(Pr(t,[cn]),e),this.createLineChart(Pr(t,[un]),e),this.createBarChart(Pr(t,[dn]),e)}chartOptions(t){const e={series:t};const s=t[0];if(s){const i=this.filterVisibleSeries(t);const o=s.stack;e.isStacked=o&&i.length>1,e.isStacked100=o&&"100%"===o.type&&i.length>1,e.isStacked100&&(this._isStacked100=!0)}return e}createAreaChart(t,e){if(0===t.length)return;const s=new _h(this,this.chartOptions(t));this.appendChart(s,e)}createLineChart(t,e){if(0===t.length)return;const s=new vh(this,this.chartOptions(t));this.appendChart(s,e)}createBarChart(t,e){if(0===t.length)return;const s=t[0];const i=this.chartOptions(t);const o=this.filterVisibleSeries(t);const n=o.some((t=>t.stack));const r=o.some((t=>t.stack&&"100%"===t.stack.type));i.gap=s.gap,i.spacing=s.spacing,i.defaultStack=s.stack&&o.length>1,i.isStacked=n&&o.length>1,i.isStacked100=r&&o.length>1;const a=new Ch(this,i);this.appendChart(a,e),this._hasBarCharts=!0}seriesCategoryAxis(){return this.categoryAxis}_dispatchEvent(t,e,s){const i=t._eventCoordinates(e);const o=new ps(i.x,i.y);const n=this.categoryAxis.getCategory(o);const r=this.valueAxis.getValue(o);null!==n&&null!==r&&t.trigger(s,{element:Gt(e),category:n,value:r})}createCrosshairs(){}_pointsByVertical(t){return super._pointsByVertical(t).sort(this._getSeriesCompareFn())}_getSeriesCompareFn(){return(t,e)=>e.value-t.value}}ut(Th.prototype,Va,{appendChart:gl.prototype.appendChart,aggregateSeries:gl.prototype.aggregateSeries,seriesSourcePoints:gl.prototype.seriesSourcePoints,seriesValues:gl.prototype.seriesValues}),te(Th,{categoryAxis:{categories:[]},valueAxis:{}});class Ph extends bs{constructor(t,e,s){super(e),this.value=t,this.options.index=s.index}getLabelText(t){let e=wt(t);return e?e(this.pointData()):t.format?this.formatValue(t.format):this.value}reflow(t){const e=this.points;const s=this.children[0];const i=Math.min(e[0].x,e[3].x);const o=Math.max(e[1].x,e[2].x);this.box=new gs(i,e[0].y,o,e[2].y),s&&s.reflow(new gs(t.x1,e[0].y,t.x2,e[2].y))}createVisual(){const t=this.options;let e;super.createVisual(),this.addAccessibilityAttributesToVisual(),e=t.visual?t.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:t,sender:this.getSender(),createVisual:()=>this.createPath()}):this.createPath(),e&&this.visual.append(e)}createPath(){const t=this.options;const s=t.border;return e.a.fromPoints(this.points,{fill:Ts(t.pattern,{color:t.color,opacity:t.opacity}),stroke:{color:s.color,opacity:s.opacity,width:s.width}}).close()}createHighlight(t){return e.a.fromPoints(this.points,t)}highlightVisual(){return this.visual.children[0]}highlightVisualArgs(){const t=e.a.fromPoints(this.points).close();return{options:this.options,path:t}}createFocusHighlight(t){const s=this.options.focusHighlight.border.width;const i=e.a.fromPoints(this.points,ut({},t,{stroke:{width:2*s}})).close();const o=new e.g;return o.paths.push(e.a.fromRect(this.box.clone().pad(s).toRect())),o.paths.push(e.a.fromPoints(this.points)),i.clip(o),i}tooltipAnchor(){const t=this.box;return{point:new ps(t.center().x,t.y1),align:{horizontal:"center",vertical:"top"}}}formatValue(t){return this.owner.formatPointValue(this,t)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}}getIndex(){return this.index}}te(Ph,{color:U,border:{width:1},labels:{format:""},accessibility:{role:er,className:sr,ariaRoleDescription:ir}}),ut(Ph.prototype,Nr),ut(Ph.prototype,na);class Mh extends bs{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this.points=[],this.labels=[],this.legendItems=[],this.render()}formatPointValue(t,e){return this.plotArea.chartService.format.auto(e,t.value)}render(){const{options:t,plotArea:{options:{seriesColors:e=[]}}}=this;const s=t.series[0];const i=s.data;if(!i)return;const{total:o,points:n}=Ar(s);for(let t=0;t<n.length;t++){const r=n[t];if(!r)continue;let a=r.fields;ht(s.color)||(s.color=a.color||e[t%e.length]),a=ut({index:t,owner:this,series:s,seriesIx:0,dataItem:i[t],percentage:r.value/o},a,{visible:r.visible});const l=r.valueFields.value;const h=this.createSegment(l,a);const c=this.createLabel(l,a);h&&c&&h.append(c)}}evalSegmentOptions(t,e,s){const i=s.series;Tr(t,{value:e,series:i,dataItem:s.dataItem,index:s.index},{defaults:i._defaults,excluded:["data","content","template","toggle","visual","ariaTemplate","ariaContent"]})}createSegment(t,e){const s=ut({},e.series);if(s.pattern=e.pattern||s.pattern,this.evalSegmentOptions(s,t,e),this.createLegendItem(t,s,e),!1!==e.visible){const i=new Ph(t,s,e);return Object.assign(i,e),this.append(i),this.points.push(i),i}}createLabel(t,e){const{series:s,dataItem:i}=e;const o=ut({},this.options.labels,s.labels);let n=t;if(o.visible){const r=wt(o);const a={dataItem:i,value:t,percentage:e.percentage,category:e.category,series:s};r?n=r(a):o.format&&(n=this.chartService.format.auto(o.format,n)),o.color||(o.color=ge(s.color),o.background||(o.background=s.color)),this.evalSegmentOptions(o,t,e);const l=new Hs(n,ut({vAlign:o.position},o),a);return this.labels.push(l),l}}labelPadding(){const t=this.labels;const e={left:0,right:0};for(let s=0;s<t.length;s++){const i=t[s].options.align;if(i!==d){const o=t[s].box.width();i===S?e.left=Math.max(e.left,o):e.right=Math.max(e.right,o)}}return e}dynamicSlopeReflow(t,s,i){const{options:o,points:n}=this;const r=n.length;const a=n[0];let l=a;for(let t=0;t<n.length;t++)n[t].percentage>l.percentage&&(l=n[t]);let h=a.percentage/l.percentage*s;let c=(s-h)/2;let d=0;for(let a=0;a<r;a++){const l=n[a].percentage;const u=n[a+1];const p=u?u.percentage:l;const g=n[a].points=[];const m=o.dynamicHeight?i*l:i/r;let f;f=l?(s-h*(p/l))/2:p?0:s/2,f=Yt(f,0,s),g.push(new e.P(t.x1+c,t.y1+d)),g.push(new e.P(t.x1+s-c,t.y1+d)),g.push(new e.P(t.x1+s-f,t.y1+m+d)),g.push(new e.P(t.x1+f,t.y1+m+d)),c=f,d+=m+o.segmentSpacing,h=Yt(s-2*f,0,s)}}constantSlopeReflow(t,s,i){const{options:o,points:n}=this;const r=n.length;const a=o.neckRatio<=1;const l=a?o.neckRatio*s:s;let h=a?0:(s-s/o.neckRatio)/2;const c=((a?s:s-2*h)-l)/2;let d=0;for(let a=0;a<r;a++){const l=n[a].points=[];const u=n[a].percentage;const p=o.dynamicHeight?c*u:c/r;const g=o.dynamicHeight?i*u:i/r;l.push(new e.P(t.x1+h,t.y1+d)),l.push(new e.P(t.x1+s-h,t.y1+d)),l.push(new e.P(t.x1+s-h-p,t.y1+g+d)),l.push(new e.P(t.x1+h+p,t.y1+g+d)),h+=p,d+=g+o.segmentSpacing}}reflow(t){const e=this.points;const s=e.length;if(!s)return;const i=this.options;const o=t.clone().unpad(this.labelPadding());const n=o.height()-i.segmentSpacing*(s-1);const r=o.width();i.dynamicSlope?this.dynamicSlopeReflow(o,r,n):this.constantSlopeReflow(o,r,n);for(let i=0;i<s;i++)e[i].reflow(t)}}te(Mh,{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:d,position:d,zIndex:1}}),ut(Mh.prototype,oh);class Eh extends Mh{constructor(t,e){e.dynamicSlope=!1,e.neckRatio=1e6,super(t,e)}}class Lh extends bs{constructor(t,e){super(),this.options=e,this.color=e.color||U,this.value=t}render(){this._rendered||(this._rendered=!0,this.createMarker(),this.createLabel(),this.createNote())}createLabel(){const t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))}createLabelElement(t){let e=t.color;return e||(e=ge(this.color)),new Hs(this.getLabelText(t),ut({align:d,vAlign:d,margin:{left:5,right:5},zIndex:Kt(t.zIndex,this.series.zIndex)},t,{color:e}),this.pointData())}getLabelText(t){let e=wt(t);return e?e(this.pointData()):this.formatValue(t.format)}formatValue(t){return this.owner.formatPointValue(this,t)}reflow(t){this.render();const e=this.label;this.box=t,e&&e.reflow(this.markerBox()),this.note&&this.note.reflow(t),this.marker.reflow(this.markerBox())}createVisual(){super.createVisual(),this.addAccessibilityAttributesToVisual()}markerBox(){const t=this.options.markers;const e=t.border;const s=this.box.toRect();const i=Kt(t.type,"rect")===O;let o=Kt(e.width,i?1:0);const n=Math.round(o/2);if(t.size){const e=s.center();s.size.width=s.size.height=t.size,s.origin.x=Math.round(e.x-s.size.width/2),s.origin.y=Math.round(e.y-s.size.height/2)}return s.size.width-=o,s.size.height-=o,s.origin.y+=n+.5,s.origin.x+=n+.5,zs(s)}markerBorder(){const t=this.options;const e=t.markers.border;const s=Kt(e.opacity,t.opacity);return{color:e.color||this.color,width:e.width,opacity:s,dashType:e.dashType}}createMarker(){const t=this.options;const e=t.markers;const s=new Es({type:Kt(e.type,"rect"),width:e.size,height:e.size,rotation:e.rotation,background:this.color,border:this.markerBorder(),pattern:t.pattern,borderRadius:e.borderRadius,opacity:this.series.opacity||t.opacity,zIndex:Kt(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});this.marker=s,this.append(s)}createHighlight(t){const e=this.options;const s=this.options.highlight.markers||this.options.markers;const i=new Es({type:Kt(s.type,"rect"),width:s.size,height:s.size,rotation:s.rotation,background:s.color||this.color,border:this.markerBorder(),borderRadius:s.borderRadius,opacity:this.series.opacity||e.opacity,zIndex:Kt(e.zIndex,this.series.zIndex)});i.reflow(this.markerBox());const o=i.getElement();return o.options.fill=t.fill,o.options.stroke=t.stroke,o}highlightVisual(){return this.rectVisual}highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}}createFocusHighlight(){const t=this.options.markers;const e=this.options.focusHighlight;const s=new Es({type:Kt(t.type,"rect"),width:t.size,height:t.size,rotation:t.rotation,background:e.color,border:e.border,borderRadius:t.borderRadius,padding:e.border.width/2,zIndex:e.zIndex});return s.reflow(this.markerBox()),s.getElement()}tooltipAnchor(){const t=this.box.center().x;const e=this.box.y1-5;return{point:new ps(t,e),align:{horizontal:d,vertical:c}}}overlapsBox(t){return this.box.overlaps(t)}unclipElements(){}pointData(){return{x:this.value.x,y:this.value.y,value:this.value.value,dataItem:this.dataItem,series:this.series}}}ut(Lh.prototype,Nr),ut(Lh.prototype,jr),ut(Lh.prototype,na),Lh.prototype.defaults={markers:{type:"rect",borderRadius:4,border:{color:"transparent"}},padding:{top:1},labels:{visible:!1,padding:3},opacity:1,notes:{label:{}},accessibility:{role:er,className:sr,ariaRoleDescription:ir}};class Ih extends bs{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this._initFields(),this.render()}_initFields(){this.points=[],this.seriesOptions=[],this.valueRange={min:C,max:T},this._evalSeries=[]}render(){this.setRange(),this.traverseDataPoints(this.addValue.bind(this))}setRange(){const{options:{series:t}}=this;for(let e=0;e<t.length;e++){const s=t[e];for(let t=0;t<s.data.length;t++){const{valueFields:e}=this.plotArea.bindPoint(s,t);Ft(e.value)&&null!==e.value&&(this.valueRange.min=Math.min(this.valueRange.min,e.value),this.valueRange.max=Math.max(this.valueRange.max,e.value))}}}addValue(t,e){let s;t&&Ft(t.value)&&null!==t.value&&(s=this.createPoint(t,e),s&&Object.assign(s,e)),this.points.push(s)}evalPointOptions(t,e,s){const{series:i,seriesIx:o}=s;const n={defaults:i._defaults,excluded:["data","tooltip","content","template","visual","toggle","drilldownSeriesFactory","ariaTemplate","ariaContent"]};let r=this._evalSeries[o];Ft(r)||(this._evalSeries[o]=r=Tr(t,{},n,!0));let a=t;return r&&(a=ut({},t),Tr(a,{value:e,series:i,dataItem:s.dataItem,min:this.valueRange.min,max:this.valueRange.max},n)),a}pointType(){return Lh}pointOptions(t,e){let s=this.seriesOptions[e];if(!s){const i=this.pointType().prototype.defaults;this.seriesOptions[e]=s=ut({},i,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return Object.assign({},s)}createPoint(t,s){const i=s.series;let o=this.pointOptions(i,s.seriesIx);let n=s.color||i.color;if(o.pattern=s.pattern||o.pattern,o=this.evalPointOptions(o,t,s),ht(i.color))n=o.color;else if(0!==this.valueRange.max){const s=((t,s=.05)=>{const i=e.p(t);const o=1-s;return t=>{const e=i.toHSL();const s=100-e.l;const n=o-t;return e.l+=Math.min(n*s,s),e.toCss()}})(n);n=s(t.value/this.valueRange.max)}const r=new Lh(t,o);return r.color=n,this.append(r),r}seriesAxes(t){const{xAxis:e,yAxis:s}=t;const i=this.plotArea;const o=e?i.namedXAxes[e]:i.axisX;const n=s?i.namedYAxes[s]:i.axisY;if(!o)throw new Error("Unable to locate X axis with name "+e);if(!n)throw new Error("Unable to locate Y axis with name "+s);return{xAxis:o,yAxis:n}}reflow(t){const e=this.points;const s=!this.options.clip;let i=0;this.traverseDataPoints(((t,o)=>{const n=e[i++];const{xAxis:r,yAxis:a}=this.seriesAxes(o.series);const l=r.categoryIndex(t.x);const h=a.categoryIndex(t.y);const c=r.getSlot(l,l,s);const d=a.getSlot(h,h,s);if(n)if(c&&d){const t=this.pointSlot(c,d);n.reflow(t)}else n.visible=!1})),this.box=t}pointSlot(t,e){return new gs(t.x1,e.y1,t.x2,e.y2)}traverseDataPoints(t){const{options:{series:e}}=this;for(let s=0;s<e.length;s++){const i=e[s];const{xAxis:o,yAxis:n}=this.seriesAxes(i);const r=o.currentRangeIndices();const a=n.currentRangeIndices();for(let e=0;e<i.data.length;e++){const{valueFields:l,fields:h}=this.plotArea.bindPoint(i,e);const c=o.totalIndex(l.x);const d=n.totalIndex(l.y);const u=r.min<=c&&c<=r.max;const p=a.min<=d&&d<=a.max;u&&p&&t(l,ut({pointIx:e,series:i,seriesIx:s,dataItem:i.data[e],owner:this},h))}}}formatPointValue(t,e){const s=t.value;return this.chartService.format.auto(e,s.x,s.y,s.value)}animationPoints(){const t=this.points;const e=[];for(let s=0;s<t.length;s++)e.push((t[s]||{}).marker);return e}}te(Ih,{series:[],tooltip:{format:"{0}, {1}: {2}"},labels:{format:"{2}"},clip:!0});class Rh extends La{initFields(){this.namedXAxes={},this.namedYAxes={}}render(t=this.panes){this.bindCategories(),this.createAxes(t),this.createCharts(t),this.createAxisLabels()}bindCategories(){const t=this.srcSeries||this.series;for(let e=0;e<t.length;e++){const s=t[e];const i=s.data||[];const{xAxis:o,yAxis:n}=this.seriesAxes(s);const r=ye(o.categories||[]);const a=ye(n.categories||[]);for(let t=0;t<i.length;t++){const{x:e,y:i}=ko.current.bindPoint(s,t).valueFields;r.has(e)||r.add(e),a.has(i)||a.add(i)}o.categories=r.values(),n.categories=a.values()}}createCharts(t){const e=this.groupSeriesByPane();for(let s=0;s<t.length;s++){const i=t[s];const o=e[i.options.name||"default"]||[];this.addToLegend(o);const n=this.filterVisibleSeries(o);n&&this.createHeatmapChart(Pr(n,[en]),i)}}createHeatmapChart(t,e){const s=new Ih(this,{series:t});this.appendChart(s,e)}seriesPaneName(t){const e=this.options;const s=t.xAxis;const i=[].concat(e.xAxis);const o=Ct(i,(function(t){return t.name===s}))[0];const n=t.yAxis;const r=[].concat(e.yAxis);const a=Ct(r,(function(t){return t.name===n}))[0];const l=(e.panes||[{}])[0].name||"default";return(o||{}).pane||(a||{}).pane||l}seriesAxes(t){let e;let s;const i=this.options;const o=[].concat(i.xAxis);const n=t.xAxis;e=n?o.find((t=>t.name===n)):o[0];const r=[].concat(i.yAxis);const a=t.yAxis;if(s=a?r.find((t=>t.name===a)):r[0],!e)throw new Error("Unable to locate X axis with name "+n);if(!s)throw new Error("Unable to locate Y axis with name "+a);return{xAxis:e,yAxis:s}}createAxisLabels(){const t=this.axes;for(let e=0;e<t.length;e++)t[e].createLabels()}createXYAxis(t,e,s){const i=t.name;const o=e?this.namedYAxes:this.namedXAxes;const n=Object.assign({axisCrossingValue:0},t,{vertical:e,reverse:e||this.chartService.rtl?!t.reverse:t.reverse,justified:!1});const r=n.categories?n.categories[0]:null;const a=[n.min,n.max,r];const l=this.series;for(let t=0;t<l.length;t++){const i=l[t];const o=i[e?"yAxis":"xAxis"];if(o===n.name||0===s&&!o){const t=ko.current.bindPoint(i,0).valueFields;a.push(t[e?"y":"x"]);break}}let h;for(let t=0;t<a.length;t++)if(a[t]instanceof Date){h=!0;break}let c;c=Cr(n.type,g)||!n.type&&h?Yi:Di;const d=new c(n,this.chartService);if(d.axisIndex=s,i){if(o[i])throw new Error(`${e?"Y":"X"} axis with name ${i} is already defined`);o[i]=d}return this.appendAxis(d),d.indexCategories(),d}createAxes(t){const e=this.options;const s=[].concat(e.xAxis);const i=[];const o=[].concat(e.yAxis);const n=[];for(let e=0;e<s.length;e++){Mt(this.findPane(s[e].pane),t)&&i.push(this.createXYAxis(s[e],!1,e))}for(let e=0;e<o.length;e++){Mt(this.findPane(o[e].pane),t)&&n.push(this.createXYAxis(o[e],!0,e))}this.axisX=this.axisX||i[0],this.axisY=this.axisY||n[0]}removeAxis(t){const e=t.options.name;super.removeAxis(t),t.options.vertical?delete this.namedYAxes[e]:delete this.namedXAxes[e],t===this.axisX&&delete this.axisX,t===this.axisY&&delete this.axisY}_dispatchEvent(t,e,s){const i=t._eventCoordinates(e);const o=new ps(i.x,i.y);const n=this.axes;const r=n.length;const a=[];const l=[];for(let t=0;t<r;t++){const e=n[t];wr(e.options.vertical?l:a,e.getCategory(o))}a.length>0&&l.length>0&&t.trigger(s,{element:Gt(e),originalEvent:e,x:Br(a),y:Br(l)})}updateAxisOptions(t,e){const s=t.options.vertical;const i=this.groupAxes(this.panes);const o=(s?i.y:i.x).indexOf(t);Oh(this.options,o,s,e),Oh(this.originalOptions,o,s,e)}crosshairOptions(t){return Object.assign({},t.options.crosshair,{zIndex:0})}_pointsByVertical(t,e=0){const s=this.axisX.options.reverse?-1*e:e;const i=this.axisX.children;let o=this._getPointAxisXIndex(t)+s;o=lt(o,i.length);const n=i[o].value;const r=this.filterPoints((t=>Bh(t.pointData().x,n))).sort(((t,e)=>this._getPointAxisYIndex(t)-this._getPointAxisYIndex(e)));return this.axisY.options.reverse?r.reverse():r}_pointsByHorizontal(t,e=0){const s=this.axisY.options.reverse?-1*e:e;const i=this.axisY.children;let o=this._getPointAxisYIndex(t)+s;o=lt(o,i.length);const n=i[o].value;const r=this.filterPoints((t=>Bh(t.pointData().y,n))).sort(((t,e)=>this._getPointAxisXIndex(t)-this._getPointAxisXIndex(e)));return this.axisX.options.reverse?r.reverse():r}_getPointAxisXIndex(t){return this._getPointAxisIndex(this.axisX,t.pointData().x)}_getPointAxisYIndex(t){return this._getPointAxisIndex(this.axisY,t.pointData().y)}_getPointAxisIndex(t,e){return t.children.findIndex((t=>Bh(e,t.value)))}}function Bh(t,e){return t instanceof Date&&e instanceof Date?Ei(t,e):t===e}function Oh(t,e,s,i){ut([].concat(s?t.yAxis:t.xAxis)[e],i)}te(Rh,{xAxis:{},yAxis:{}}),ut(Rh.prototype,Va);const Vh="color";const Dh="first";const zh="max";const Fh="min";const Hh="noteText";Rl.current.register(gl,[Xo,Qo,on,wn,Wo,yn,$o,nn,Zo,bn,Yo,vn,mn,gn,kn,sn,pn,_n,...Ln]),Rl.current.register(Kl,[fn,xn,qo,...Ln]),Rl.current.register(ah,[rn]),Rl.current.register(ch,[Ko]),Rl.current.register(class extends La{render(){this.createChart(Mh,Pr(this.series,[Jo])),this.createChart(Eh,Pr(this.series,[tn]))}createChart(t,e){const s=e[0];if(!s)return;const i=new t(this,{series:e,legend:this.options.legend,neckRatio:s.neckRatio,dynamicHeight:s.dynamicHeight,dynamicSlope:s.dynamicSlope,segmentSpacing:s.segmentSpacing,highlight:s.highlight});this.appendChart(i)}appendChart(t,e){super.appendChart(t,e),Dt(this.options.legend.data,t.legendItems)}_pointsByVertical(t){return this.pointsBySeriesIndex(t.series.index)}getPointToTheRight(t){return this.getPointBelow(t)}getPointToTheLeft(t){return this.getPointAbove(t)}},[Jo,tn]),Rl.current.register(yh,[an,ln,hn,...Ln]),Rl.current.register(Th,[cn,dn,un,...Ln]),Rl.current.register(Rh,[en]),ko.current.register([Xo,Qo,on,wn,Wo,yn],[j],[lr,Vh,Hh,Io,Ro,mr,fr]),ko.current.register([mn,gn,pn,_n],["from","to"],[lr,Vh,Hh,mr,fr]),ko.current.register([kn,sn],[j],[lr,Vh,Hh,"summary",mr,fr]),ko.current.register([an,ln,hn],[W,X],[Vh,mr,fr]),ko.current.register([cn,dn,un],[j],[lr,Vh,mr,fr]),ko.current.register([Jo,tn],[j],[lr,Vh,"visibleInLegend","visible",mr,fr]),Fa.current.register([Xo,Qo,on,wn,Wo,yn,kn,sn],{value:zh,color:Dh,noteText:Dh,errorLow:Fh,errorHigh:zh}),Fa.current.register([mn,gn,pn,_n],{from:Fh,to:zh,color:Dh,noteText:Dh}),Fa.current.register([cn,dn,un],{value:zh,color:Dh}),ko.current.register([fn,xn,qo],[W,X],[Vh,Hh,Bo,Oo,Vo,Do]),ko.current.register([qo],[W,X,"size"],[Vh,lr,Hh,fr]),ko.current.register([en],[W,X,j],[Vh,Hh,fr]),ko.current.register([$o,nn],["open","high","low","close"],[lr,Vh,"downColor",Hh,fr]),Fa.current.register([$o,nn],{open:zh,high:zh,low:Fh,close:zh,color:Dh,downColor:Dh,noteText:Dh}),ko.current.register([Yo,vn],["lower","q1","median","q3","upper","mean","outliers"],[lr,Vh,Hh,mr,fr]),Fa.current.register([Yo,vn],{lower:zh,q1:zh,median:zh,q3:zh,upper:zh,mean:zh,outliers:Dh,color:Dh,noteText:Dh}),ko.current.register([Zo,bn],["current","target"],[lr,Vh,"visibleInLegend",Hh,mr,fr]),Fa.current.register([Zo,bn],{current:zh,target:zh,color:Dh,noteText:Dh}),ko.current.register([rn,Ko],[j],[lr,Vh,"explode","visibleInLegend","visible",mr,fr]);const Nh=[lr,j,W,X];const jh="mousedown";const Uh="mousemove";const Gh="contextmenu";const Wh="mouseleave";const Xh="keydown";const Yh="focus";const qh="blur";const Zh="k-chart-overlay-top";class $h{constructor(t,s,i,o={}){this.observers=[],this.addObserver(o.observer),this.chartService=new $s(this,o),this.chartService.theme=i,this._initElement(t);const n=ut({},this.options,s);this._originalOptions=ut({},n),this._theme=i,this._initTheme(n,i),this._focusState={},this._initHandlers(),this._createSurface=o.createSurface||e.k.create.bind(e.k),this._initSurface(),this.bindCategories(),Jt.preloadFonts(s,(()=>{this.fontLoaded=!0,this._destroyed||(this.trigger("init"),this._redraw(),this._attachEvents(),this._restoreOverlayElement())}))}_initElement(t){this._setElementClass(t),t.style.position="relative",t.tabIndex=t.getAttribute("tabindex")?t.getAttribute("tabindex"):0,t.setAttribute("role","graphics-document document");for(let e=t.childNodes.length-1;e>=0;e--){const s=t.childNodes[e];Tt(s,"k-chart-overlay")?this.overlayElement=s:t.removeChild(s)}this.element=t}_setElementClass(t){K(t,"k-chart")}_restoreOverlayElement(){this.overlayElement&&(this._hasSeriesData()?this.overlayElement.style.display="none":(!this.options.title||this.options.title&&this.options.title.position!==c?K(this.overlayElement,Zh):tt(this.overlayElement,Zh),this.overlayElement.style.display=""),this.overlayElement.parentElement!==this.element&&this.element.appendChild(this.overlayElement))}_hasSeriesData(){const t=this.options.series||[];return t.length>0&&t.some((t=>t.data&&t.data.length>0))}_initTheme(t,e){const s=[];const i=t.series||[];for(let t=0;t<i.length;t++)s.push(Object.assign({},i[t]));t.series=s,function(t){const e=Nh;for(let s=0;s<e.length;s++){const i=e[s]+"Axes";t[i]&&(t[e[s]+"Axis"]=t[i],delete t[i])}}(t),this.applyDefaults(t,e),null===t.seriesColors&&delete t.seriesColors,ot(t.title)&&(t.title={text:t.title}),this.options=ut({},e,t),this.applySeriesColors()}getSize(){const t=this.options.chartArea||{};return{width:t.width?parseInt(t.width,10):Math.floor(this.element.offsetWidth),height:t.height?parseInt(t.height,10):Math.floor(this.element.offsetHeight)}}resize(t){const e=this.getSize();const s=this._size;const i=e.width>0||e.height>0;t||i&&(!s||e.width!==s.width||e.height!==s.height)?(this._size=e,this._resize(e,t),this.trigger("resize",e)):i&&this._selections&&he(this._selections,(t=>!t.visible))&&(this._destroySelections(),this._setupSelection())}_resize(){this._noTransitionsRedraw()}redraw(t){if(this.applyDefaults(this.options),this.applySeriesColors(),t){const e=this._model._plotArea;const s=e.findPane(t);e.redraw(s)}else this._redraw()}getAxis(t){return xo(t,this._plotArea.axes)}findAxisByName(t){return this.getAxis(t)}findPaneByName(t){const e=this._plotArea.panes;for(let s=0;s<e.length;s++)if(e[s].options.name===t)return new yo(e[s])}findPaneByIndex(t){const e=this._plotArea.panes;if(e[t])return new yo(e[t])}plotArea(){return new vo(this._plotArea)}toggleHighlight(t,e){const s=this._plotArea;const i=(s.srcSeries||s.series||[])[0];let o;if(ht(e))o=s.filterPoints(e);else{let t,n;pt(e)?(t=e.series,n=e.category):t=n=e,o=i.type===Ko?Qh(s.pointsBySeriesName(t),n):Mt(i.type,[rn,Jo,tn])?Qh((s.charts[0]||{}).points,n):s.pointsBySeriesName(t)}o&&this.togglePointsHighlight(t,o)}togglePointsHighlight(t,e){const s=this._highlight;for(let i=0;i<e.length;i++)s.togglePointHighlight(e[i],t)}showTooltip(t){const e=this._sharedTooltip();const{_tooltip:s,_plotArea:i}=this;let o,n;if(ht(t)?(o=i.findPoint(t),o&&e&&(n=o.categoryIx)):e&&Ft(t)&&(n=i.categoryAxis.categoryIndex(t)),e){if(n>=0){const t=this._plotArea.pointsByCategoryIndex(n);s.showAt(t)}}else o&&s.show(o)}hideTooltip(){this._tooltip.hide()}_initSurface(){const t=this.surface;const e=this._surfaceWrap();const s=this.options.chartArea||{};s.width&&jt(e,{width:s.width}),s.height&&jt(e,{height:s.height}),t&&t.options.type===this.options.renderAs?(this.surface.clear(),this.surface.resize()):(this._destroySurface(),this.surface=this._createSurface(e,{type:this.options.renderAs}),this.surface.bind("mouseenter",this._surfaceMouseenterHandler),this.surface.bind("mouseleave",this._surfaceMouseleaveHandler)),this.element._kendoExportVisual=this._kendoExportVisual.bind(this)}_surfaceWrap(){return this.element}_redraw(){const t=this._getModel();this._size={width:t.options.width,height:t.options.height},this._destroyView(),this._setElementAccessibilityAttributes(),this._model=t,this._plotArea=t._plotArea,this._legend=t._legend,t.renderVisual();const e=this.options.transitions;!1!==e&&t.traverse((function(t){if(t.animation){const s=e&&!0!==e?e.loading:e;t.animation.options=Object.assign({},t.animation.options,s),t.animation.setup()}})),this._initSurface(),this.surface.draw(t.visual),!1!==e&&t.traverse((function(t){t.animation&&t.animation.play()})),this._tooltip=this._createTooltip(),this._highlight=new xl,this._setupSelection(),this._createPannable(),this._createZoomSelection(),this._createMousewheelZoom(),this._setComputedStyles(),this.trigger(Qn),sc(this._plotArea.panes),this._navState||this._cancelDomEvents(),this._redrawFocusHighlight()}_setComputedStyles(){const t=this.titleHeight();this.element.style.setProperty("--kendo-chart-computed-title-height",`${t}px`)}_redrawFocusHighlight(){if(this._destroyed)return;const{_focusState:{legendInFocus:t,preserveHighlight:e}}=this;t&&e&&(this._focusElement(this._getFocusedLegendItem(),!1),this._focusState.preserveHighlight=!1)}_setElementAccessibilityAttributes(){let t=this.options.title;let e=ot(t)?t:t.description||t.text;e&&this.element.setAttribute("aria-roledescription",e)}_kendoExportVisual(t){if(t&&t.width&&t.height){const e=this._originalOptions.chartArea||{};const s={width:e.width||t.width,height:e.height||t.height};return this.exportVisual(s)}return this.exportVisual()}exportVisual(t){let e;if(t&&(t.width||t.height||t.options)){const s=this.options;const i=ut({},t.options,{chartArea:{width:t.width,height:t.height}});ec(this._originalOptions,i),this.options=ut({},this._originalOptions,i),this._initTheme(this.options,this._theme),this.bindCategories();const o=this._getModel();o.renderVisual(),sc(o._plotArea.panes),e=o.visual,this.options=s}else e=this.surface.exportVisual();return e}_sharedTooltip(){return this._plotArea instanceof gl&&this.options.tooltip&&this.options.tooltip.shared}_createPannable(){const t=this.options;!1!==t.pannable&&(this._pannable=new wl(this._plotArea,t.pannable))}_createZoomSelection(){const t=this.options.zoomable;const e=(t||{}).selection;!1!==t&&!1!==e&&(this._zoomSelection=new _l(this,e))}_createMousewheelZoom(){const t=this.options.zoomable;const e=(t||{}).mousewheel;!1!==t&&!1!==e&&(this._mousewheelZoom=new kl(this,e))}_toggleDragZoomEvents(){const t=this.options.pannable;const e=this.options.zoomable;const s=(e||{}).selection;const i=(e||{}).mousewheel;const o=!(t||!1!==e&&!1!==s||this.requiresHandlers([Gn,jn,Un]));const n=(!1===e||!1===i)&&!this.requiresHandlers([Wn,Xn,Yn]);const r=this.element;this._dragZoomEnabled&&o&&n?(r.style.touchAction=this._touchAction||"",this._dragZoomEnabled=!1):this._dragZoomEnabled||o&&n||(r.style.touchAction="none",this._dragZoomEnabled=!0),this._toggleDomEvents(!o,!n)}_toggleDomEvents(t,e){const s=this.domEvents;s&&(s.toggleDrag&&s.toggleDrag(t),s.toggleZoom&&s.toggleZoom(e))}_createTooltip(){const{options:{tooltip:t}}=this;let e;return e=this._sharedTooltip()?this._createSharedTooltip(t):new Dl(this.chartService,t),e}_createSharedTooltip(t){return new zl(this._plotArea,t)}applyDefaults(t,e){!function(t,e){const s=(e||{}).axisDefaults||{};let i,o,n;function r(t){const e=(t||{}).color||o.color;const n=ut({},s,s[i],o,o[i],{line:{color:e},labels:{color:e},title:{color:e}},t);return delete n[i],n}for(let e=0;e<Nh.length;e++)i=Nh[e]+"Axis",o=t.axisDefaults||{},n=[].concat(t[i]),n=n.map(r),t[i]=n.length>1?n:n[0]}(t,e),function(t,e){const s=t.series;const i=s.length;const o=t.seriesDefaults;const n=ut({},t.seriesDefaults);const r=e?ut({},e.seriesDefaults):{};const a=ut({},r);Kh(n),Kh(a);for(let e=0;e<i;e++){const i=s[e].type||t.seriesDefaults.type;const l=ut({data:[]},a,r[i],{tooltip:t.tooltip},n,o[i]);s[e]._defaults=l,s[e]=ut({},l,s[e]),s[e].data=s[e].data||[]}}(t,e)}applySeriesColors(){const t=this.options;const e=t.series;const s=t.seriesColors||[];for(let t=0;t<e.length;t++){const i=e[t];const o=s[t%s.length];const n=i._defaults;i.color=i.color||o,n&&(n.color=n.color||o)}}_getModel(){const t=this.options;const e=this._createPlotArea();const s=new Bs(this._modelOptions());s.chart=this,s._plotArea=e;const i=Ns.buildTitle(t.title);const o=Ns.buildTitle(t.subtitle,{align:t.title.align,position:t.title.position});if(s.append.apply(s,Ns.orderTitles([i,o])),t.legend&&t.legend.visible){const t=new Il(e.options.legend,this.chartService);s.append(t),s._legend=t}return s.append(e),s.reflow(),this._setTitleBox(i,o),s}_setTitleBox(t,e){if(!t&&!e)return;this._titleBox=(t||e).box.clone();const s=t?t.options.position:"";const i=e?e.options.position:"";const o=i!==c;s===i&&e?this._titleBox.wrap(e.box):t&&e&&o&&(this._titleBox=e.box.clone())}_modelOptions(){const t=this.options;const e=this.getSize();return ut({transitions:t.transitions,width:e.width||x,height:e.height||400},t.chartArea)}_createPlotArea(t){const e=this.options;return Rl.current.create(t?[]:e.series,e,this.chartService)}_setupSelection(){const{_plotArea:{axes:t}}=this;const e=this._selections=[];for(let s=0;s<t.length;s++){const i=t[s];const o=i.options;if(i instanceof Di&&o.select&&!o.vertical){const t=i.range();const s=new Vl(this,i,ut({min:t.min,max:t.max},o.select));e.push(s)}}}_selectStart(t){return this.trigger(qn,t)}_select(t){return this.trigger(Zn,t)}_selectEnd(t){return this.trigger($n,t)}_initHandlers(){this._clickHandler=this._click.bind(this),this._keydownHandler=this._keydown.bind(this),this._focusHandler=this._focus.bind(this),this._blurHandler=this._blur.bind(this),this._mousedownHandler=this._mousedown.bind(this),this._mousewheelHandler=this._mousewheel.bind(this),this._mouseleaveHandler=this._mouseleave.bind(this),this._surfaceMouseenterHandler=this._mouseover.bind(this),this._surfaceMouseleaveHandler=this._mouseout.bind(this),this._mousemoveThrottled=e.n(this._mousemove.bind(this),20)}addObserver(t){t&&this.observers.push(t)}removeObserver(t){const e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)}requiresHandlers(t){const e=this.observers;for(let s=0;s<e.length;s++)if(e[s].requiresHandlers(t))return!0}trigger(t,e={}){e.sender=this,t===Kn?e.anchor.point=this._toDocumentCoordinates(e.anchor.point):t===Dn?this._updateDrilldownPoint(e.point):t===zn?this._resetDrilldownPoint():t===On?(this._focusPoint(e.point),this._startDrilldown(e.point)):t===In&&this._focusLegendItem(e);const s=this.observers;let i=!1;for(let o=0;o<s.length;o++)s[o].trigger(t,e)&&(i=!0);return i}titleHeight(){return this._titleBox?this._titleBox.height():0}_attachEvents(){const t=this.element;this._touchAction=t.style.touchAction,zt(t,{[Gh]:this._clickHandler,[ur]:this._mousewheelHandler,[Wh]:this._mouseleaveHandler,[Xh]:this._keydownHandler,[jh]:this._mousedownHandler,[Yh]:this._focusHandler,[qh]:this._blurHandler}),this._shouldAttachMouseMove()&&zt(t,{[Uh]:this._mousemoveThrottled}),this.domEvents=Ks.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)}),this._toggleDragZoomEvents()}_mouseleave(t){this._hoveredPoint&&(this._hoveredPoint.out(this,t),this._hoveredPoint=null),this._plotAreaHovered&&(this._plotAreaHovered=!1,this.trigger(Nn)),this._hasInactiveOpacity()&&this._activeChartInstance&&(this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._updateSeriesOpacity(null,!0))}_cancelDomEvents(){this.domEvents&&this.domEvents.cancel&&this.domEvents.cancel()}_gesturestart(t){this._mousewheelZoom&&!this._stopChartHandlers(t)&&(this._gestureDistance=t.distance,this._unsetActivePoint(),this._clearFocusedElement(),this.surface.suspendTracking())}_gestureend(t){this._zooming&&!this._stopChartHandlers(t)&&(this.surface&&this.surface.resumeTracking(),this._zooming=!1,this.trigger(Yn,{}))}_gesturechange(t){const e=this._mousewheelZoom;if(e&&!this._stopChartHandlers(t)){t.preventDefault();const s=this._gestureDistance;let i=-t.distance/s+1;if(Math.abs(i)>=.1){i=Math.round(10*i),this._gestureDistance=t.distance;const s={delta:i,axisRanges:Jh(this._plotArea.axes),originalEvent:t};if(this._zooming||!this.trigger(Wn,s)){const o=this._eventCoordinates(t);this._zooming||(this._zooming=!0);(s.axisRanges=e.updateRanges(i,o))&&!this.trigger(Xn,s)&&e.zoom()}}}}_mouseout(t){if(t.element){const e=this._drawingChartElement(t.element,t);e&&e.leave&&e.leave(this,t.originalEvent)}}_start(t){const e=this._eventCoordinates(t);!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(e)&&(this.requiresHandlers([Gn,jn,Un])&&this._startNavigation(t,e,Gn),this._pannable&&this._pannable.start(t)&&(this.surface.suspendTracking(),this._unsetActivePoint(),this._clearFocusedElement(),this._suppressHover=!0,this.chartService.panning=!0),this._zoomSelection&&this._zoomSelection.start(t)&&this.trigger(Wn,{axisRanges:Jh(this._plotArea.axes),originalEvent:t}))}_move(t){let{_navState:e,_pannable:s}=this;if(!this._stopChartHandlers(t)){if(s){const e=s.move(t);e&&!this.trigger(jn,{axisRanges:e,originalEvent:t})&&s.pan()}else if(e){const s={};const i=e.axes;for(let e=0;e<i.length;e++){const o=i[e];if(o.options.name){const e=o.options.vertical?t.y:t.x;const i=e.startLocation-e.location;0!==i&&(s[o.options.name]=o.translateRange(i))}}e.axisRanges=s,this.trigger(jn,{axisRanges:s,originalEvent:t})}this._zoomSelection&&this._zoomSelection.move(t)}}_end(t){if(this._stopChartHandlers(t))return;const e=this._pannable;if(e&&e.end(t)?(this.surface.resumeTracking(),this.trigger(Un,{axisRanges:Jh(this._plotArea.axes),originalEvent:t}),this._suppressHover=!1,this.chartService.panning=!1):this._endNavigation(t,Un),this._zoomSelection){const e=this._zoomSelection.end(t);e&&!this.trigger(Xn,{axisRanges:e,originalEvent:t})&&(this._zoomSelection.zoom(),this.trigger(Yn,{axisRanges:e,originalEvent:t}))}}_stopChartHandlers(t){const e=this._selections||[];if(!e.length)return!1;const s=this._eventCoordinates(t);const i=this._plotArea.paneByPoint(s);if(i)for(let t=0;t<e.length;t++)if(e[t].onPane(i))return!0}_mousewheelZoomRate(){const t=(this.options.zoomable||{}).mousewheel||{};return Kt(t.rate,.3)}_mousewheel(t){const e=Vt(t);const s=this._mousewheelZoom;const i=this._eventCoordinates(t);if(!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(i))if(s){const o={delta:e,axisRanges:Jh(this._plotArea.axes),originalEvent:t};!this._zooming&&this.trigger(Wn,o)||(t.preventDefault(),this._zooming||(this._unsetActivePoint(),this._clearFocusedElement(),this.surface.suspendTracking(),this._zooming=!0),this._mwTimeout&&clearTimeout(this._mwTimeout),o.axisRanges=s.updateRanges(e,i),o.axisRanges&&!this.trigger(Xn,o)&&s.zoom(),this._mwTimeout=setTimeout((()=>{this.trigger(Yn,o),this._zooming=!1,this.surface&&this.surface.resumeTracking()}),pr))}else{let s=this._navState;if(!s){this._startNavigation(t,i,Wn)||(s=this._navState)}if(s){const o=s.totalDelta||e;s.totalDelta=o+e;const n=this._navState.axes;const r={};for(let t=0;t<n.length;t++){const e=n[t];const s=e.options.name;s&&(r[s]=e.scaleRange(-o*this._mousewheelZoomRate(),i))}this.trigger(Xn,{delta:e,axisRanges:r,originalEvent:t}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((()=>{this._endNavigation(t,Yn)}),pr)}}}_startNavigation(t,e,s){const i=this._model._plotArea;const o=i.findPointPane(e);const n=i.axes.slice(0);if(!o)return;const r=Jh(n);this.trigger(s,{axisRanges:r,originalEvent:t})?this._cancelDomEvents():(this._suppressHover=!0,this._unsetActivePoint(),this._clearFocusedElement(),this._navState={axisRanges:r,pane:o,axes:n})}_endNavigation(t,e){this._navState&&(this.trigger(e,{axisRanges:this._navState.axisRanges,originalEvent:t}),this._suppressHover=!1,this._navState=null)}_getChartElement(t,e){const s=this.surface.eventTarget(t);if(s)return this._drawingChartElement(s,t,e)}_drawingChartElement(t,e,s){let i=t;let o;for(;i&&!o;)o=i.chartElement,i=i.parent;if(o)return o.aliasFor&&(o=o.aliasFor(e,this._eventCoordinates(e))),s&&(o=o.closest(s),o&&o.aliasFor&&(o=o.aliasFor())),o}_eventCoordinates(t){const e=Ut(t);return this._toModelCoordinates(e.x,e.y)}_elementPadding(){if(!this._padding){const{paddingLeft:t,paddingTop:e}=xt(this.element,["paddingLeft","paddingTop"]);this._padding={top:e,left:t}}return this._padding}_toDocumentCoordinates(t){const e=this._elementPadding();const s=Nt(this.element);return{left:$t(t.x+e.left+s.left),top:$t(t.y+e.top+s.top)}}_toModelCoordinates(t,s){const i=this.element;const o=Nt(i);const n=this._elementPadding();const r=pe(i).invert();const a=new e.P(t-o.left-n.left,s-o.top-n.top).transform(r);return new ps(a.x,a.y)}_tap(t){const e=this.surface.eventTarget(t);const s=this._drawingChartElement(e,t);const i=this._sharedTooltip();this._startHover(e,t)||i||this._unsetActivePoint(),i&&this._trackSharedTooltip(this._eventCoordinates(t),t,!0),this._propagateClick(s,t),this.handlingTap=!0,setTimeout((()=>{this.handlingTap=!1}),0)}_click(t){const e=this._getChartElement(t);this._propagateClick(e,t)}_propagateClick(t,e){let s=t;for(;s;)s.click&&s.click(this,e),s=s.parent}_isLegendBeforeChart(){const{options:{legend:{position:t}},_legend:e}=this;return e&&e.hasItems()&&(t===z||t===S)}_focus(){this._preventInitialPointFocus||(this._isLegendBeforeChart()?this._focusFirstLegendItem():this._focusFirstPoint()),this._preventInitialPointFocus=!1}_keydown(t){const{_focusState:{legendInFocus:e,focusedElement:s},_legend:i}=this;if("Tab"===t.key){this._clearFocusedElement();const s=this._isLegendBeforeChart();e&&s!==t.shiftKey?this._navigatePoints(t):!e&&s===t.shiftKey&&i.hasItems()&&this._navigateLegend(t)}else t.key===b?(s&&t.stopPropagation(),this._tooltip&&this._tooltip.visible?this._hideTooltip():this._blur()):t.key===v?s&&(this._focusState.preserveHighlight=!0,this._propagateClick(s,t),this._focusElement(s)):e?this._navigateLegend(t):this._navigatePoints(t)}_navigatePoints(t){const{_focusState:e,_plotArea:s}=this;if(e.legendInFocus=!1,!e.focusedElement)return this._focusFirstPoint(),void t.preventDefault();const a=s=>{e.focusedPoint=s,this._focusElement(e.focusedPoint),this._displayTooltip(s),t.preventDefault()};switch(t.key){case r:a(s.getPointToTheRight(e.focusedPoint));break;case n:a(s.getPointToTheLeft(e.focusedPoint));break;case o:a(s.getPointBelow(e.focusedPoint));break;case i:a(s.getPointAbove(e.focusedPoint))}}_navigateLegend(t){const{_focusState:e,_legend:s,chartService:{rtl:a}}=this;if(e.legendInFocus=!0,!e.focusedElement)return this._focusFirstLegendItem(),void t.preventDefault();const l=s.getItems().length;const h=s=>{e.focusedLegendItemIndex=s(e.focusedLegendItemIndex,l),this._focusElement(this._getFocusedLegendItem()),t.preventDefault()};switch(t.key){case i:case n:h(a?rt:at);break;case o:case r:h(a?at:rt)}}_focusFirstPoint(){const t=this._focusState.focusedPoint=this._plotArea.getFirstPoint();t&&(this._focusElement(t),this._displayTooltip(t))}_hasFocus(){return this.element.ownerDocument.activeElement===this.element}_mousedown(){this._hasFocus()||(this._preventInitialPointFocus=!0)}_focusChart(){this._hasFocus()||(this._preventInitialPointFocus=!0,this.element.focus())}_focusPoint(t){this._focusState.focusedPoint=t,this._focusChart(),this._focusElement(t,!0)}_focusFirstLegendItem(){const{_focusState:t}=this;t.focusedLegendItemIndex=0,this._focusElement(this._getFocusedLegendItem()),t.legendInFocus=!0,this._hideTooltip()}_focusLegendItem(t){const{_focusState:e}=this;e.focusedLegendItemIndex=this._legend.getItems().findIndex((e=>e.options.series.index===t.seriesIndex&&e.options.pointIndex===t.pointIndex)),e.legendInFocus=!0,this._focusChart(),this._focusElement(this._getFocusedLegendItem(),!0)}_getFocusedLegendItem(){const{_focusState:t,_legend:e}=this;return e.getItems()[t.focusedLegendItemIndex]}_focusElement(t,e){const{_focusState:s}=this;if(this._clearFocusedElement(),t&&(s.focusedElement=t,this._setElementActiveDescendant(t),!e))if(t.focusVisual(),s.legendInFocus){const e=t.options;this._showSeriesInactiveOpacity(e.series.index,e.pointIndex)}else this._showInactiveOpacity(t)}_clearFocusedElement(){const{_focusState:t}=this;t&&(t.focusedElement&&t.focusedElement.clearFocusFromVisual&&(t.focusedElement.clearFocusFromVisual(),this._clearElementActiveDescendant()),t.focusedElement=null)}_setElementActiveDescendant(t){"canvas"===this.options.renderAs&&(this._pseudoFocusedElement=this._createPseudoFocusedElement(t),this.element.append(this._pseudoFocusedElement)),this.element.setAttribute(a,t._id)}_clearElementActiveDescendant(){this._pseudoFocusedElement&&(this._pseudoFocusedElement.remove(),this._pseudoFocusedElement=null),this.element.removeAttribute(a)}_createPseudoFocusedElement(t){const e=document.createElement("div");const s=t.options.accessibility;e.id=t._id,e.setAttribute("aria-label",t.getAriaLabelText()),e.setAttribute("role",s.role),e.setAttribute("aria-roledescription",s.ariaRoleDescription);const i=s.ariaChecked;return Ft(i)&&e.setAttribute("aria-checked",i),e}_blur(){this._focusState.legendInFocus=!1,this._clearFocusedElement(),this._hideInactiveOpacity()}_startHover(t,e){if(this._suppressHover)return!1;let s=this._drawingChartElement(t,e,(function(t){return(t.hover||t.over)&&!(t instanceof La)}));const i=this._activePoint;return this._updateHoveredPoint(s,e),s&&i!==s&&s.hover&&(this._activePoint=s,this._sharedTooltip()||s.hover(this,e)||(this._displayTooltip(s),this._showInactiveOpacity(s))),s}_displayTooltip(t){ut({},this.options.tooltip,t.options.tooltip).visible&&(this._sharedTooltip()&&t.box?this._trackSharedTooltip(t.box.center(),{}):this._tooltip.show(t))}_hideTooltip(){this._tooltip&&this._tooltip.hide()}_displayInactiveOpacity(t,e,s){const i=this._activeChartInstance=this._chartInstanceFromPoint(t);if(i)if(e)this._updateSeriesOpacity(t),this._applySeriesOpacity(i.children,null,!0),this._applySeriesOpacity(i.children,t.series),this._highlight.show(s||t);else{let e;if(!i.supportsPointInactiveOpacity())return void this._highlight.show(t);e=this._getInactivePoints(t,i),e&&e.length&&this._highlight.show(e,1-this._getInactiveOpacityForSeries(t.series))}}_getInactivePoints(t,e){return this._getAllPointsOfType(e,t.constructor).filter((e=>e!==t))}_getAllPointsOfType(t,e){let s=[];for(let i=0;i<t.children.length;i++){const o=t.children[i];o.constructor===e?s.push(o):o.children&&o.children.length&&(s=s.concat(this._getAllPointsOfType(o,e)))}return s}_updateHoveredPoint(t,e){const s=this._hoveredPoint;s&&s!==t&&(s.out(this,e),this._hoveredPoint=null),t&&s!==t&&t.over&&(this._hoveredPoint=t,t.over(this,e))}_updateDrilldownPoint(t){if(!t||!t.series)return;const{fields:e}=ko.current.bindPoint(t.series,null,t.dataItem);e.drilldown&&(this._drilldownState={cursor:this.element.style.cursor},this.element.style.cursor="pointer")}_resetDrilldownPoint(){this._drilldownState&&(this.element.style.cursor=this._drilldownState.cursor,this._drilldownState=null)}_startDrilldown(t){if(!t||!t.series)return;const e=t.series;const{fields:s}=ko.current.bindPoint(e,null,t.dataItem);const i=s.drilldown;if(i){const s={series:e,point:t,value:i,sender:this};this.trigger(gr,s)}}_updateSeriesOpacity(t,e){const s=this._plotArea;const i=s.series.length;for(let o=0;o<i;o++){const i=s.series[o];const n=this._getDefaultOpacityForSeries(i);const r=this._getInactiveOpacityForSeries(i);e||i===t.series?(i.opacity=n,i.line&&(i.line.opacity=n)):(i.defaultOpacity=n,i.opacity=r,i.line&&(i.line.opacity=r))}}_applySeriesOpacity(t,e,s,i){for(let o=0;o<t.length;o++){const n=t[o];const r=n.series||i;if(r&&(r.highlight||{}).visible&&n.visual){const t=i?i.opacity:n.series.opacity;(r!==e||s)&&n.visual.opacity(s?1:t)}n.children&&n.children.length&&this._applySeriesOpacity(n.children,e,s,n.series)}}_chartInstanceFromPoint(t){let e=t.parent;for(;e&&!e.plotArea;)e=e.parent;return e}_showInactiveOpacity(t){const e=this._plotArea.series.length>1;this._hasInactiveOpacity()?this._displayInactiveOpacity(t,e):this._highlight.show(t)}_hideInactiveOpacity(t){const e=this._plotArea.series.length>1;this._hasInactiveOpacity()&&(e&&this._activeChartInstance&&(this._updateSeriesOpacity(t,!0),this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._activeChartInstance=null),this._highlight&&this._highlight.hide(),this._activePoint=null)}_hasInactiveOpacity(){let t=void 0!==this.options.seriesDefaults.highlight.inactiveOpacity;let e=this.options.series.filter((t=>void 0!==t.highlight.inactiveOpacity)).length>0;return t||e}_getInactiveOpacityForSeries(t){let e=this.options.seriesDefaults.highlight.inactiveOpacity;return t.highlight.inactiveOpacity||e||t.opacity||1}_getDefaultOpacityForSeries(t){return t.defaultOpacity||t.opacity||1}_mouseover(t){const e=this._startHover(t.element,t.originalEvent);e&&e.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()&&(this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this),zt(document,{[Uh]:this._mouseMoveTrackHandler}))}_mouseMoveTracking(t){const{options:e,_tooltip:s,_highlight:i,_activePoint:o}=this;const n=this._eventCoordinates(t);if(this._plotArea.box.containsPoint(n)){if(o&&o.tooltipTracking&&o.series&&o.parent.getNearestPoint){const r=o.parent.getNearestPoint(n.x,n.y,o.seriesIx);if(r&&r!==o&&(this._activePoint=r,!r.hover(this,t))){ut({},e.tooltip,r.options.tooltip).visible&&s.show(r),i.show(r)}}}else Qt(document,{[Uh]:this._mouseMoveTrackHandler}),this._unsetActivePoint(),this._clearFocusedElement(),this._mouseMoveTrackHandler=null,this._hideInactiveOpacity(o)}_mousemove(t){const e=this._eventCoordinates(t);const s=this._plotArea;if(this._trackCrosshairs(e),s.hover){const i=s.backgroundContainsPoint(e);i?(this._plotAreaHovered=!0,this._plotArea.hover(this,t)):this._plotAreaHovered&&!i&&(this._plotAreaHovered=!1,this.trigger(Nn))}this._sharedTooltip()&&this._trackSharedTooltip(e,t)}_trackCrosshairs(t){const e=this._plotArea.crosshairs;for(let s=0;s<e.length;s++){const i=e[s];i.box.containsPoint(t)?i.showAt(t):i.hide()}}_trackSharedTooltip(t,e,s){if(this._suppressHover)return;const{options:{tooltip:i},_plotArea:o,_plotArea:{categoryAxis:n},_tooltip:r,_highlight:a}=this;if(o.backgroundContainsPoint(t)){const l=n.pointCategoryIndex(t);if(l!==this._tooltipCategoryIx||!this._sharedHighlight&&s){const s=o.pointsByCategoryIndex(l);const n=s.map((function(t){return t.eventArgs(e)}));const h=n[0]||{};h.categoryPoints=n,s.length>0&&!this.trigger(Vn,h)?(i.visible&&r.showAt(s,t),a.show(s),this._sharedHighlight=!0):r.hide(),this._tooltipCategoryIx=l}else s&&this._sharedHighlight&&(a.hide(),r.hide(),this._sharedHighlight=!1)}else this._sharedHighlight&&(a.hide(),r.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1)}hideElements(t){const e=this._plotArea;this._mousemoveThrottled.cancel(),e.hideCrosshairs(),this._unsetActivePoint(t)}_unsetActivePoint(t){const{_highlight:e}=this;this._activePoint=null,this._hoveredPoint=null,t&&t.keepTooltipOpen||this._hideTooltip(),this._tooltipCategoryIx=null,this._sharedHighlight=!1,e&&e.hide()}_deferRedraw(){this._redraw()}_clearRedrawTimeout(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)}bindCategories(){const t=this.options;const e=[].concat(t.categoryAxis);for(let t=0;t<e.length;t++){const s=e[t];!1!==s.autoBind&&this.bindCategoryAxisFromSeries(s,t)}}bindCategoryAxisFromSeries(t,e){const s=new Set;const i=this.options.series.filter((s=>s.categoryAxis===t.name||!s.categoryAxis&&0===e));const o=i.some((t=>Boolean(t.categoryField)));const n=i.filter((t=>t.data&&t.data.length>0));const r=n.map((t=>ko.current.bindPoint(t,0).fields.category));const a=r.reduce(((e,s)=>e||Rr(t,s)),!1);if(n.filter(((t,e)=>t.categoryField||Ft(r[e]))).forEach((t=>t.data.forEach(((e,i)=>{let o=ko.current.bindPoint(t,i).fields.category;if(a){const t=Er(o,e,this.chartService.intl);o=t?t.getTime():void 0}s.add(o)})))),s.size>0){let e=Array.from(s.values());a&&(e=e.sort().map((t=>t&&new Date(t)))),t.categories=e}else o&&(t.categories=[])}_isBindable(t){const e=ko.current.valueFields(t);let s=!0;for(let i=0;i<e.length;i++){let o=e[i];if(o===j?o="field":o+="Field",!Ft(t[o])){s=!1;break}}return s}_noTransitionsRedraw(){const t=this.options;let e;!1!==t.transitions&&(e=t.transitions,t.transitions=!1),this._redraw(),e&&(t.transitions=e)}_legendItemHover(t,e){this._showSeriesInactiveOpacity(t,e)}_showSeriesInactiveOpacity(t,e){const{_plotArea:s,_highlight:i}=this;const o=(s.srcSeries||s.series)[t];let n;if(n=Mt(o.type,[rn,Ko,Jo,tn])?s.findPoint((function(s){return s.series.index===t&&s.index===e})):s.pointsBySeriesIndex(t),this._hasInactiveOpacity()&&o.visible&&n){const t=s.series.length>1;const e=n.length?n[0]:n;this._displayInactiveOpacity(e,t,n)}else i.show(n)}_shouldAttachMouseMove(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([Hn,Nn])}updateMouseMoveHandler(){Qt(this.element,{[Uh]:this._mousemoveThrottled}),this._shouldAttachMouseMove()&&zt(this.element,{[Uh]:this._mousemoveThrottled})}applyOptions(t,e){ec(this._originalOptions,t),this._originalOptions=ut(this._originalOptions,t),this.options=ut({},this._originalOptions),e&&(this._theme=e,this.chartService.theme=e),this._initTheme(this.options,this._theme),this._toggleDragZoomEvents()}setOptions(t,e){this.applyOptions(t,e),this.bindCategories(),this.redraw(),this.updateMouseMoveHandler(),this._restoreOverlayElement()}setDirection(t){this.chartService.rtl=Boolean(t),this.surface&&"svg"===this.surface.type&&this._destroySurface()}setIntlService(t){this.chartService.intl=t}noTransitionsRedraw(){this._noTransitionsRedraw()}destroy(){this._destroyed=!0,Qt(this.element,{[Gh]:this._clickHandler,[ur]:this._mousewheelHandler,[Uh]:this._mousemoveThrottled,[Wh]:this._mouseleaveHandler,[jh]:this._mousedownHandler,[Xh]:this._keydownHandler,[Yh]:this._focusHandler,[qh]:this._blurHandler}),this.domEvents&&(this.domEvents.destroy(),delete this.domEvents),this._mouseMoveTrackHandler&&Qt(document,{[Uh]:this._mouseMoveTrackHandler}),this._focusState=null,this.element._kendoExportVisual=null,this._destroyView(),this._destroySurface(),this._clearRedrawTimeout()}_destroySurface(){const t=this.surface;t&&(t.unbind("mouseenter",this._surfaceMouseenterHandler),t.unbind("mouseleave",this._surfaceMouseleaveHandler),t.destroy(),this.surface=null)}_destroySelections(){const t=this._selections;if(t)for(;t.length>0;)t.shift().destroy()}_destroyView(){const t=this._model;t&&(t.destroy(),this._model=null),this._unsetActivePoint(),this._clearFocusedElement(),this._resetDrilldownPoint(),this._destroySelections(),this._tooltip&&this._tooltip.destroy(),this._highlight&&this._highlight.destroy(),this._zoomSelection&&(this._zoomSelection.destroy(),delete this._zoomSelection),this._pannable&&(this._pannable.destroy(),delete this._pannable),this._mousewheelZoom&&(this._mousewheelZoom.destroy(),delete this._mousewheelZoom)}}function Qh(t,e){if(t)for(let s=0;s<t.length;s++)if(t[s].category===e)return[t[s]]}function Kh(t){delete t.bar,delete t.column,delete t.rangeColumn,delete t.line,delete t.verticalLine,delete t.pie,delete t.donut,delete t.area,delete t.verticalArea,delete t.scatter,delete t.scatterLine,delete t.bubble,delete t.candlestick,delete t.ohlc,delete t.boxPlot,delete t.bullet,delete t.verticalBullet,delete t.polarArea,delete t.polarLine,delete t.radarArea,delete t.radarLine,delete t.waterfall}function Jh(t){const e={};for(let s=0;s<t.length;s++){const i=t[s];const o=i.options.name;o&&(e[o]=i.range())}return e}const tc=["data","categories"];function ec(t,e){for(let s in e)if(!Mt(s,tc)&&we(e,s)){const i=e[s];const o=t[s];if(Ft(o)){const n=null===i;n||!Ft(i)?(delete t[s],n&&delete e[s]):o&&pt(i)&&pt(o)&&ec(o,i)}}}function sc(t){for(let e=0;e<t.length;e++)t[e].notifyRender()}te($h,{renderAs:"",chartArea:{},legend:{visible:!0,labels:{},accessibility:{},focusHighlight:{border:{opacity:1,color:h,width:2}}},categoryAxis:{},seriesDefaults:{type:Qo,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1},accessibility:{},focusHighlight:{border:{opacity:1,width:2},zIndex:200}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{narrowRange:!1},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1});class ic extends zl{_slotAnchor(t,e){const s=this.plotArea.categoryAxis.options.vertical;const i=s?{horizontal:"left",vertical:"center"}:{horizontal:"center",vertical:"bottom"};let o;return o=s?new ps(this.plotArea.box.x2,e.center().y):new ps(e.center().x,-2),{point:o,align:i}}_defaultAnchor(t,e){return this._slotAnchor({},e)}}const oc=[Xo,Zo];function nc(t){const e=[];for(let s=0;s<t.length;s++){const i=t[s];e[s]=i.style.display,i.style.display="none"}return e}function rc(t,e){for(let s=0;s<t.length;s++)t[s].style.display=e[s]}function ac(t){return it(t)?[t]:t}class lc extends $h{_setElementClass(t){K(t,"k-sparkline")}_initElement(t){super._initElement(t),this._initialWidth=Math.floor(jt(t).width)}_resize(){const t=this.element;const e=nc(t.childNodes);this._initialWidth=Math.floor(jt(t).width),rc(t.childNodes,e),super._resize()}_modelOptions(){const t=this.options;const e=this._surfaceWrap();const s=nc(e.childNodes);const i=document.createElement("span");i.innerHTML="&nbsp;",e.appendChild(i);const o=ut({width:this._autoWidth,height:jt(e).height,transitions:t.transitions},t.chartArea,{inline:!0,align:!1});return jt(e,{width:o.width,height:o.height}),e.removeChild(i),rc(e.childNodes,s),this.surface&&this.surface.resize(),o}_surfaceWrap(){if(!this.stage){const t=this.stage=document.createElement("span");this.element.appendChild(t)}return this.stage}_createPlotArea(t){const e=super._createPlotArea(t);return this._autoWidth=this._initialWidth||this._calculateWidth(e),e}_calculateWidth(t){const e=this.options;const s=yt(e.chartArea.margin);const i=t.charts;const o=this._surfaceWrap();let n=0;for(let t=0;t<i.length;t++){const e=i[t];const s=(e.options.series||[])[0];if(!s)continue;if(s.type===Xo)return 150;if(s.type===Zo)return 150;if(s.type===rn)return jt(o).height;const r=e.categoryAxis;if(r){const t=r.categoriesCount()*(!e.options.isStacked&&Mt(s.type,[Qo,bn])?e.seriesOptions.length:1);n=Math.max(n,t)}}let r=n*e.pointWidth;return r>0&&(r+=s.left+s.right),r}_createSharedTooltip(t){return new ic(this._plotArea,t)}static normalizeOptions(t){let e=ac(t);return e=Q(e)?{seriesDefaults:{data:e}}:ut({},e),e.series||(e.series=[{data:ac(e.data)}]),ut(e,{seriesDefaults:{type:e.type}}),(Mt(e.series[0].type,oc)||Mt(e.seriesDefaults.type,oc))&&(e=ut({},{categoryAxis:{crosshair:{visible:!1}}},e)),e}}te(lc,{chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5,panes:[{clip:!1}]});class hc extends e.b{setup(){this._initialOpacity=parseFloat(xt(this.element,"opacity").opacity)}step(t){xt(this.element,{opacity:String(Et(this._initialOpacity,0,t))})}abort(){super.abort(),xt(this.element,{display:"none",opacity:String(this._initialOpacity)})}cancel(){super.abort(),xt(this.element,{opacity:String(this._initialOpacity)})}}function cc(t,e){const s=document.createElement("div");return s.className=t,e&&(s.style.cssText=e),s}class dc{constructor(t,e,s){this.options=ut({},this.options,s),this.container=t,this.chartService=e;const i=xt(t,["paddingLeft","paddingTop"]);this.chartPadding={top:i.paddingTop,left:i.paddingLeft},this.createElements(),t.appendChild(this.element)}createElements(){const t=this.element=cc("k-navigator-hint","display: none; position: absolute; top: 1px; left: 1px;");const e=this.tooltip=cc("k-tooltip k-chart-tooltip");const s=this.scroll=cc("k-scroll");e.innerHTML="&nbsp;",t.appendChild(e),t.appendChild(s)}show(t,e,s){const{element:i,options:o,scroll:n,tooltip:r}=this;const a=wi(Mi(t)+Mi(e-t)/2);const l=.4*s.width();const h=s.center().x-l;const c=(s.center().x-h)/(o.max-o.min);const d=a-o.min;let u=this.chartService.intl.format(o.format,t,e);const p=wt(o);this.clearHideTimeout(),this._visible||(xt(i,{visibility:"hidden",display:"block"}),this._visible=!0),p&&(u=p({from:t,to:e})),r.innerHTML=u,xt(r,{left:s.center().x-r.offsetWidth/2,top:s.y1});const g=xt(r,["marginTop","borderTopWidth","height"]);xt(n,{width:l,left:h+d*c,top:s.y1+g.marginTop+g.borderTopWidth+g.height/2}),xt(i,{visibility:"visible"})}clearHideTimeout(){this._hideTimeout&&clearTimeout(this._hideTimeout),this._hideAnimation&&this._hideAnimation.cancel()}hide(){this.clearHideTimeout(),this._hideTimeout=setTimeout((()=>{this._visible=!1,this._hideAnimation=new hc(this.element),this._hideAnimation.setup(),this._hideAnimation.play()}),this.options.hideDelay)}destroy(){this.clearHideTimeout(),this.container&&this.container.removeChild(this.element),delete this.container,delete this.chartService,delete this.element,delete this.tooltip,delete this.scroll}}te(dc,{format:"{0:d} - {1:d}",hideDelay:500});const uc="_navigator";const pc=uc;const gc="_default";var mc=Object.freeze({__proto__:null,DEFAULT_PANE:gc,NAVIGATOR_AXIS:pc,NAVIGATOR_PANE:uc});let fc=class t{constructor(t){this.chart=t;const e=this.options=ut({},this.options,t.options.navigator);const s=e.select;s&&(s.from=this.parseDate(s.from),s.to=this.parseDate(s.to)),Ft(e.hint.visible)||(e.hint.visible=e.visible),this.chartObserver=new It(this,{[jn]:"_drag",[Un]:"_dragEnd",[Xn]:"_zoom",[Yn]:"_zoomEnd"}),t.addObserver(this.chartObserver)}parseDate(t){return Bi(this.chart.chartService.intl,t)}clean(){this.selection&&(this.selection.destroy(),this.selection=null),this.hint&&(this.hint.destroy(),this.hint=null)}destroy(){this.chart&&(this.chart.removeObserver(this.chartObserver),delete this.chart),this.clean()}redraw(){this._redrawSelf(),this.initSelection()}initSelection(){const{chart:t,options:e}=this;const s=this.mainAxis();const{min:i,max:o}=s.roundedRange();const{from:n,to:r,mousewheel:a}=e.select;const l=(h=s,xc.prototype=h,new xc);var h;0!==s.categoriesCount()&&(this.clean(),l.box=s.box,this.selection=new Vl(t,l,{min:i,max:o,from:n||i,to:r||o,mousewheel:Kt(a,{zoom:"left"}),visible:e.visible},new It(this,{selectStart:"_selectStart",select:"_select",selectEnd:"_selectEnd"})),e.hint.visible&&(this.hint=new dc(t.element,t.chartService,{min:i,max:o,template:wt(e.hint),format:e.hint.format})))}setRange(){const t=this.chart._createPlotArea(!0).namedCategoryAxes[pc];const{min:e,max:s}=t.roundedRange();const i=this.options.select||{};let o=i.from||e;o<e&&(o=e);let n=i.to||s;n>s&&(n=s),this.options.select=ut({},i,{from:o,to:n}),this.filterAxes()}_redrawSelf(t){const e=this.chart._plotArea;e&&e.redraw(Xt(e.panes),t)}redrawSlaves(){const t=this.chart;const e=t._plotArea;const s=e.panes.filter((t=>t.options.name!==uc));e.srcSeries=t.options.series,e.options.categoryAxis=t.options.categoryAxis,e.clearSeriesPointsCache(),e.redraw(s)}_drag(t){const{chart:e,selection:s}=this;const i=e._eventCoordinates(t.originalEvent);const o=this.mainAxis();const n=o.roundedRange();const r=o.pane.box.containsPoint(i);const a=e._plotArea.categoryAxis;const l=t.axisRanges[a.options.name];const h=this.options.select;let c;if(!l||r||!s)return;c=h.from&&h.to?Mi(h.to)-Mi(h.from):Mi(s.options.to)-Mi(s.options.from);const d=wi(Yt(Mi(l.min),n.min,Mi(n.max)-c));const u=wi(Yt(Mi(d)+c,Mi(n.min)+c,n.max));this.options.select={from:d,to:u},this.options.liveDrag&&(this.filterAxes(),this.redrawSlaves()),s.set(d,u),this.showHint(d,u)}_dragEnd(){this.filterAxes(),this.filter(),this.redrawSlaves(),this.hint&&this.hint.hide()}readSelection(){const{selection:{options:{from:t,to:e}},options:{select:s}}=this;s.from=t,s.to=e}filterAxes(){const{options:{select:t={}},chart:e}=this;const s=e.options.categoryAxis;const{from:i,to:o}=t;for(let t=0;t<s.length;t++){const e=s[t];e.pane!==uc&&(e.min=i,e.max=o)}}filter(){const{chart:t,options:{select:e}}=this;if(!t.requiresHandlers(["navigatorFilter"]))return;const s=this.mainAxis();const i={from:e.from,to:e.to};if("category"!==s.options.type){const s=new Yi(ut({baseUnit:"fit"},t.options.categoryAxis[0],{categories:[e.from,e.to]}),t.chartService).options;i.from=Ai(s.min,-s.baseUnitStep,s.baseUnit),i.to=Ai(s.max,s.baseUnitStep,s.baseUnit)}this.chart.trigger("navigatorFilter",i)}_zoom(t){const{chart:{_plotArea:{categoryAxis:e}},selection:s,options:{select:i,liveDrag:o}}=this;const n=this.mainAxis();let r=t.delta;if(!s)return;const a=n.categoryIndex(s.options.from);const l=n.categoryIndex(s.options.to);const h=this.chart._eventCoordinates(t.originalEvent);t.originalEvent.preventDefault(),Math.abs(r)>1&&(r*=3),l-a>1?(s.zoom(r,h),this.readSelection()):(e.options.min=i.from,i.from=e.scaleRange(-t.delta*this.chart._mousewheelZoomRate(),h).min),o&&(this.filterAxes(),this.redrawSlaves()),s.set(i.from,i.to),this.showHint(this.options.select.from,this.options.select.to)}_zoomEnd(t){this._dragEnd(t)}showHint(t,e){const s=this.chart._plotArea;this.hint&&this.hint.show(t,e,s.backgroundBox())}_selectStart(t){return this.chart._selectStart(t)}_select(t){return this.showHint(t.from,t.to),this.chart._select(t)}_selectEnd(t){return this.hint&&this.hint.hide(),this.readSelection(),this.filterAxes(),this.filter(),this.redrawSlaves(),this.chart._selectEnd(t)}mainAxis(){const t=this.chart._plotArea;if(t)return t.namedCategoryAxes[pc]}select(t,e){const s=this.options.select;return t&&e&&(s.from=this.parseDate(t),s.to=this.parseDate(e),this.filterAxes(),this.filter(),this.redrawSlaves(),this.selection.set(t,e)),{from:s.from,to:s.to}}static setup(e={},s={}){if(e.__navi)return;e.__navi=!0;const i=ut({},s.navigator,e.navigator);const o=e.panes=[].concat(e.panes);const n=ut({},i.pane,{name:uc});i.visible||(n.visible=!1,n.height=.1),"top"!==e.navigator.position?o.push(n):o.unshift(n),o.forEach((t=>{t.name=t.name||gc})),t.attachAxes(e,i),t.attachSeries(e,i,s)}static attachAxes(t,e){const s=e.series||[];const i=t.categoryAxis=[].concat(t.categoryAxis);const o=t.valueAxis=[].concat(t.valueAxis);i.concat(o).forEach((t=>{t.pane=t.pane||gc}));const n=0===Pr(s,An).length;const r=ut({type:"date",pane:uc,roundToBaseUnit:!n,justified:n,_collapse:!1,majorTicks:{visible:!0},tooltip:{visible:!1},labels:{step:1},autoBind:e.autoBindElements,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]}});const a=e.categoryAxis;i.push(ut({},r,{maxDateGroups:200},a,{name:pc,title:null,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),ut({},r,a,{name:pc+"_labels",maxDateGroups:20,baseUnitStep:"auto",labels:{position:""},plotBands:[],autoBaseUnitSteps:{minutes:[]},_overlap:!0}),ut({},r,a,{name:pc+"_ticks",maxDateGroups:200,majorTicks:{width:.5},plotBands:[],title:null,labels:{visible:!1,mirror:!0},_overlap:!0})),o.push(ut({name:pc,pane:uc,majorGridLines:{visible:!1},visible:!1},e.valueAxis))}static attachSeries(t,e,s){const i=t.series=t.series||[];const o=[].concat(e.series||[]);const n=s.seriesColors;const r=e.seriesDefaults;for(let t=0;t<o.length;t++)i.push(ut({color:n[t%n.length],categoryField:e.dateField,visibleInLegend:!1,tooltip:{visible:!1}},r,o[t],{axis:pc,categoryAxis:pc,autoBind:e.autoBindElements}))}};function xc(){}class yc extends $h{applyDefaults(t,e){const s=jt(this.element).width||x;let i=e;const o={seriesDefaults:{categoryField:t.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:Math.floor(s/28)}}};i&&(i=ut({},i,o)),fc.setup(t,i),super.applyDefaults(t,i)}_setElementClass(t){K(t,"k-chart k-stockchart")}setOptions(t){this.destroyNavigator(),super.setOptions(t)}noTransitionsRedraw(){const t=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=t}_resize(){this.noTransitionsRedraw()}_redraw(){const t=this.navigator;!this._dirty()&&t&&t.options.partialRedraw?t.redrawSlaves():this._fullRedraw()}_dirty(){const t=this.options;const e=[].concat(t.series,t.navigator.series);const s=Ct(e,(function(t){return t&&t.visible})).length;const i=this._seriesCount!==s;return this._seriesCount=s,i}_fullRedraw(){let t=this.navigator;t||(t=this.navigator=new fc(this),this.trigger("navigatorCreated",{navigator:t})),t.clean(),t.setRange(),super._redraw(),t.initSelection()}_trackSharedTooltip(t){const e=this._plotArea.paneByPoint(t);e&&e.options.name===uc?this._unsetActivePoint():super._trackSharedTooltip(t)}bindCategories(){super.bindCategories(),this.copyNavigatorCategories()}copyNavigatorCategories(){const t=[].concat(this.options.categoryAxis);let e;for(let s=0;s<t.length;s++){const i=t[s];i.name===pc?e=i.categories:e&&i.pane===uc&&(i.categories=e)}}destroyNavigator(){this.navigator&&(this.navigator.destroy(),this.navigator=null)}destroy(){this.destroyNavigator(),super.destroy()}_stopChartHandlers(t){const e=this._eventCoordinates(t);const s=this._plotArea.paneByPoint(e);return super._stopChartHandlers(t)||s&&s.options.name===uc}_toggleDragZoomEvents(){this._dragZoomEnabled||(this.element.style.touchAction="none",this._dragZoomEnabled=!0)}}te(yc,{dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!1},highlight:{visible:!1},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}});const vc=150;const bc="arrowPointer";const wc="barPointer";const _c=.5;const kc=Math.PI/180;const Ac="inside";const Sc="linear";const Cc="outside";const Tc="radialPointer";const Pc="radialRangePointer";function Mc(t,e){const s=t.getOrigin();const i=t.getSize();const o=yt(e);return t.setOrigin([s.x-o.left,s.y-o.top]),t.setSize([i.width+(o.left+o.right),i.height+(o.top+o.bottom)]),t}const{Group:Ec,Path:Lc,Text:Ic}=e.c;function Rc(t,s){const i=t.box;const o=t.children[0].box;const n=s.border||{};const r=s.background||"";const a=Lc.fromRect(new e.R([i.x1,i.y1],[i.width(),i.height()]),{stroke:{}});const l=new Ic(t.text,new e.P(o.x1,o.y1),{font:s.font,fill:{color:s.color}});const h=Mc(l.bbox().clone(),s.padding);const c=Lc.fromRect(h,{stroke:{color:n.width?n.color:"",width:n.width,opacity:n.opacity,dashType:n.dashType,lineJoin:"round",lineCap:"round"},fill:{color:r}});const d=new Ec;return d.append(a),d.append(c),d.append(l),d}function Bc(t,e,s){const i=Ft(t.from)?t.from:T;const o=Ft(t.to)?t.to:C;return t.from=Math.max(Math.min(o,i),e),t.to=Math.min(Math.max(o,i),s),t}function Oc(t,e){const s=yt(e);return s.left=-s.left,s.top=-s.top,s.right=-s.right,s.bottom=-s.bottom,Mc(t,s)}const{Path:Vc,Surface:Dc}=e.c;class zc{constructor(t,e,s,i={}){this.element=t,this.theme=s,this.contextService=new $s(this,i),this._originalOptions=ut({},this.options,e),this.options=ut({},this._originalOptions),this._initTheme(s),this.redraw()}destroy(){this.surface&&(this.surface.destroy(),this.surface=null),delete this.element,delete this.surfaceElement}value(t){const e=this.pointers[0];if(0===arguments.length)return e.value();e.value(t),this._setValueOptions(t)}_draw(){const t=this.surface;t.clear(),t.draw(this._visuals)}exportVisual(){return this._visuals}allValues(t){const e=this.pointers;const s=[];if(0===arguments.length){for(let t=0;t<e.length;t++)s.push(e[t].value());return s}if(Q(t))for(let s=0;s<t.length;s++)it(t[s])&&e[s].value(t[s]);this._setValueOptions(t)}_setValueOptions(t){const e=[].concat(this.options.pointer);const s=[].concat(t);for(let t=0;t<s.length;t++)e[t].value=s[t]}resize(){this.noTransitionsRedraw()}noTransitionsRedraw(){const t=this.options.transitions;this._toggleTransitions(!1),this.redraw(),this._toggleTransitions(t)}redraw(){const t=this._surfaceSize();const s=new e.R([0,0],[t.width,t.height]);this._initSurface(),this.gaugeArea=this._createGaugeArea(),this._createModel();const i=Oc(s.bbox(),this._gaugeAreaMargin);this.reflow(i)}setOptions(t,e){this._originalOptions=ut(this._originalOptions,t),this.options=ut({},this._originalOptions),this._initTheme(e),this.redraw()}setDirection(t){this.contextService.rtl=Boolean(t),this.surface&&"svg"===this.surface.type&&(this.surface.destroy(),this.surface=null)}setIntlService(t){this.contextService.intl=t}_initTheme(t){let e=t||this.theme||{};this.theme=e,this.options=ut({},e,this.options);const s=this.options;const i=s.pointer;if(Q(i)){const t=[];for(let s=0;s<i.length;s++)t.push(ut({},e.pointer,i[s]));s.pointer=t}}_createGaugeArea(){const t=this.options.gaugeArea;const s=this.surface.size();const i=t.border||{};let o=new e.R([0,0],[s.width,s.height]);this._gaugeAreaMargin=t.margin||5,i.width>0&&(o=Oc(o,i.width));return Vc.fromRect(o,{stroke:{color:i.width?i.color:"",width:i.width,opacity:i.opacity,dashType:i.dashType,lineJoin:"round",lineCap:"round"},fill:{color:t.background}})}_initSurface(){const{options:t,surface:e}=this;const s=this._surfaceElement();const i=this._surfaceSize();jt(s,i),e&&e.options.type===t.renderAs?(this.surface.clear(),this.surface.resize()):(e&&e.destroy(),this.surface=Dc.create(s,{type:t.renderAs}))}_surfaceSize(){const t=this.options;const e=this._getSize();return t.gaugeArea&&ut(e,t.gaugeArea),e}_surfaceElement(){return this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement)),this.surfaceElement}getSize(){return this._getSize()}_getSize(){const t=this.element;const e=this._defaultSize();let s=t.offsetWidth;let i=t.offsetHeight;return s||(s=e.width),i||(i=e.height),{width:s,height:i}}_defaultSize(){return{width:200,height:200}}_toggleTransitions(t){this.options.transitions=t;for(let e=0;e<this.pointers.length;e++)this.pointers[e].options.animation.transitions=t}}te(zc,{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}});const{Path:Fc,Group:Hc}=e.c;const Nc=e.P;function jc(t,e){const{position:s,tickX:i,tickY:o}=t;let n,r;t.vertical?(n=new Nc(i,s),r=new Nc(i+e.size,s)):(n=new Nc(s,o),r=new Nc(s,o+e.size));return new Fc({stroke:{color:e.color,width:e.width}}).moveTo(n).lineTo(r)}function Uc(t,e,s,i){const o=e.length;if(i.visible){const{mirror:n,lineBox:r}=s;for(let a=i.skip;a<o;a+=i.step)a%i.skipUnit!=0&&(s.tickX=n?r.x2:r.x2-i.size,s.tickY=n?r.y1-i.size:r.y1,s.position=e[a],t.append(jc(s,i)))}}class Gc extends Ki{constructor(t,e){let s=t||{};!Ft(s.reverse)&&!1===s.vertical&&(e||{}).rtl&&(s=Object.assign({},s,{reverse:!0})),super(0,1,s,e),this.options.minorUnit=this.options.minorUnit||this.options.majorUnit/10}initUserOptions(t){let e=ut({},this.options,t);return e=ut({},e,{labels:{mirror:e.mirror}}),e.majorUnit=e.majorUnit||us(e.min,e.max),e}initFields(){}render(){const t=this.elements=new Hc;const e=this.renderLabels();const s=this.renderLine();const i=this.renderTicks();const o=this.renderRanges();return t.append(s,e,i,o),t}renderRanges(){const t=this.options;const{min:s,max:i,vertical:o,labels:{mirror:n}}=t;const r=t.ranges||[];const a=new Hc;const l=r.length;const h=t.rangeSize||t.minorTicks.size/2;for(let t=0;t<l;t++){const l=Bc(r[t],s,i);const c=this.getSlot(l.from,l.to);const d=o?this.lineBox():c;const u=o?c:this.lineBox();o?d.x1-=h*(n?-1:1):u.y2+=h*(n?-1:1),a.append(Fc.fromRect(new e.R([d.x1,u.y1],[d.x2-d.x1,u.y2-u.y1]),{fill:{color:l.color,opacity:l.opacity},stroke:{}}))}return a}renderLabels(){const{labels:t,options:e}=this;const s=new Hc;for(let i=0;i<t.length;i++)s.append(Rc(t[i],e.labels));return s}renderLine(){const t=this.options.line;const e=this.lineBox();const s=new Hc;if(t.width>0&&t.visible){const i=new Fc({stroke:{color:t.color,dashType:t.dashType,width:t.width}});i.moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),s.append(i)}return s}renderTicks(){const t=new Hc;const e=this.options;const s=e.majorTicks.visible?e.majorUnit:0;const i={vertical:e.vertical,mirror:e.labels.mirror,lineBox:this.lineBox()};return Uc(t,this.getMajorTickPositions(),i,e.majorTicks),Uc(t,this.getMinorTickPositions(),i,ut({},{skipUnit:s/e.minorUnit},e.minorTicks)),t}}te(Gc,{min:0,max:50,majorTicks:{size:15,align:Ac,color:h,width:_c,visible:!0},minorTicks:{size:10,align:Ac,color:h,width:_c,visible:!0},line:{width:_c},labels:{position:Ac,padding:2},mirror:!1,_alignLines:!1});class Wc{constructor(t,e){const{min:s,max:i}=t.options;const o=this.options=ut({},this.options,e);o.fill=o.color,this.scale=t,Ft(o.value)?o.value=Yt(o.value,s,i):o.value=s}value(t){const e=this.options;const s=e.value;if(0===arguments.length)return s;const{min:i,max:o}=this.scale.options;e._oldValue=Ft(e._oldValue)?e.value:i,e.value=Yt(t,i,o),this.elements&&this.repaint()}}te(Wc,{color:h});class Xc extends Wc{constructor(t,e){super(t,e),this.options=ut({track:{visible:Ft(e.track)}},this.options)}reflow(){const{options:t,scale:e}=this;const{mirror:s,vertical:i}=e.options;const o=e.lineBox();const n=t.track.size||t.size;const r=t.size/2;const a=yt(t.margin);let l=i?a[s?"left":"right"]:a[s?"bottom":"top"];let h,c,d;l=s?-l:l,i?(d=new gs(o.x1+l,o.y1,o.x1+l,o.y2),s?d.x1-=n:d.x2+=n,t.shape!==wc&&(c=new gs(o.x2+l,o.y1-r,o.x2+l,o.y2+r),h=c)):(d=new gs(o.x1,o.y1-l,o.x2,o.y1-l),s?d.y2+=n:d.y1-=n,t.shape!==wc&&(c=new gs(o.x1-r,o.y1-l,o.x2+r,o.y1-l),h=c)),this.trackBox=d,this.pointerRangeBox=c,this.box=h||d.clone().pad(t.border.width)}getElementOptions(){const t=this.options;return{fill:{color:t.color,opacity:t.opacity},stroke:Ft(t.border)?{color:t.border.width?t.border.color||t.color:"",width:t.border.width,dashType:t.border.dashType,opacity:t.opacity}:null}}_margin(){const{scale:t,options:e}=this;const{mirror:s,vertical:i}=t.options;const o=yt(e.margin);return i?o[s?"left":"right"]:o[s?"bottom":"top"]}}te(Xc,{shape:wc,track:{border:{width:1}},color:h,border:{width:1},opacity:1,margin:yt(3),animation:{type:wc},visible:!0});class Yc extends e.b{setup(){const t=this.options;const{margin:s,from:i,to:o,vertical:n}=t;const r=n?"x1":"y1";t.mirror===n?(i[r]-=s,o[r]-=s):(i[r]+=s,o[r]+=s);const a=this.fromScale=new e.P(i.x1,i.y1);const l=this.toScale=new e.P(o.x1,o.y1);0!==t.duration&&(t.duration=Math.max(a.distanceTo(l)/t.duration*1e3,1))}step(t){const s=Et(this.fromScale.x,this.toScale.x,t);const i=Et(this.fromScale.y,this.toScale.y,t);this.element.transform(e.t().translate(s,i))}}te(Yc,{easing:Sc,duration:250}),e.i.current.register(bc,Yc);const qc=e.P;const Zc=e.a;class $c extends Xc{constructor(t,e){super(t,e),Ft(this.options.size)||(this.options.size=.6*this.scale.options.majorTicks.size)}pointerShape(){const{scale:t,options:{size:e}}=this;const s=e/2;const i=t.options.mirror?-1:1;let o;return o=t.options.vertical?[new qc(0,0-s),new qc(0-i*e,0),new qc(0,0+s)]:[new qc(0-s,0),new qc(0,0+i*e),new qc(0+s,0)],o}repaint(){const{scale:t,options:e}=this;const s=new Yc(this.elements,ut(e.animation,{vertical:t.options.vertical,mirror:t.options.mirror,margin:this._margin(e.margin),from:t.getSlot(e._oldValue),to:t.getSlot(e.value)}));!1===e.animation.transitions&&(s.options.duration=0),s.setup(),s.play()}render(){const{scale:t,options:s}=this;const i=this.getElementOptions();const o=this.pointerShape(s.value);s.animation.type=bc;const n=new Zc({stroke:i.stroke,fill:i.fill}).moveTo(o[0]).lineTo(o[1]).lineTo(o[2]).close();const r=t.getSlot(s.value);return n.transform(e.t().translate(r.x1,r.y1)),this.elements=n,n}}class Qc extends e.b{setup(){const t=this.options;const e=this.axis=t.vertical?X:W;const s=this.to=t.newPoints[0][e];const i=this.from=t.oldPoints[0][e];0!==t.duration&&(t.duration=Math.max(Math.abs(s-i)/t.speed*1e3,1)),this._set(i)}step(t){const e=Et(this.from,this.to,t);this._set(e)}_set(t){const e="set"+this.axis.toUpperCase();const s=this.options.newPoints;s[0][e](t),s[1][e](t)}}te(Qc,{easing:Sc,speed:250}),e.i.current.register(wc,Qc);const{Group:Kc,Path:Jc}=e.c;class td extends Xc{constructor(t,e){super(t,e),Ft(this.options.size)||(this.options.size=.3*this.scale.options.majorTicks.size)}pointerShape(t){const{scale:s,options:i}=this;const{mirror:o,vertical:n}=s.options;const r=o===n?-1:1;const a=i.size*r;const l=s.getSlot(s.options.min);const h=s.getSlot(t);const c=n?X:W;const d=n?W:X;const u=this._margin()*r;const p=new e.P;p[c]=l[c+"1"],p[d]=l[d+"1"];const g=new e.P;g[c]=h[c+"1"],g[d]=h[d+"1"],n?(p.translate(u,0),g.translate(u,0)):(p.translate(0,u),g.translate(0,u));const m=g.clone();const f=p.clone();return n?(m.translate(a,0),f.translate(a,0)):(m.translate(0,a),f.translate(0,a)),[p,g,m,f]}repaint(){const{scale:t,options:e}=this;const s=this.pointerShape(e.value);const i=this.pointerPath;const o=this.pointerShape(e._oldValue);i.moveTo(s[0]).lineTo(s[1]).lineTo(s[2]).lineTo(s[3]).close();const n=new Qc(i,ut(e.animation,{reverse:t.options.reverse,vertical:t.options.vertical,oldPoints:[o[1],o[2]],newPoints:[s[1],s[2]]}));!1===e.animation.transitions&&(n.options.duration=0),n.setup(),n.play()}render(){const t=new Kc;const e=this.getElementOptions();this.options.track.visible&&t.append(this.renderTrack());const s=this.pointerPath=new Jc({stroke:e.stroke,fill:e.fill});return t.append(s),this.elements=t,t}renderTrack(){const t=this.options.track;const e=t.border||{};const s=this.trackBox.clone().pad(e.width||0);return Jc.fromRect(s.toRect(),{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.width?e.color||t.color:"",width:e.width,dashType:e.dashType}})}}const ed=e.G;class sd extends zc{reflow(t){const e=this.pointers;const s=t.origin.x;const i=t.origin.y;const o=new gs(s,i,s+t.width(),i+t.height());this.scale.reflow(o),this._shrinkScaleWidth(o);for(let t=0;t<e.length;t++)e[t].reflow();this.bbox=this._getBox(o),this._alignElements(),this._shrinkElements(),this._buildVisual(),this._draw()}_buildVisual(){const t=new ed;const e=this.scale.render();const s=this.pointers;t.append(this.gaugeArea),t.append(e);for(let e=0;e<s.length;e++){const i=s[e];t.append(i.render()),i.value(i.options.value)}this._visuals=t}_createModel(){const t=this.options;const e=this.scale=new Gc(t.scale,this.contextService);this.pointers=[];let s=t.pointer;s=Q(s)?s:[s];for(let i=0;i<s.length;i++){const o=ut({},s[i],{animation:{transitions:t.transitions}});const n="arrow"===o.shape?$c:td;this.pointers.push(new n(e,o))}}_defaultSize(){const t=this.options.scale.vertical;return{width:t?60:200,height:t?200:60}}_getBox(t){const{scale:e,pointers:s}=this;const i=t.center();let o=s[0].box.clone().wrap(e.box);for(let t=0;t<s.length;t++)o.wrap(s[t].box.clone());let n;return e.options.vertical?(n=o.width()/2,o=new gs(i.x-n,t.y1,i.x+n,t.y2)):(n=o.height()/2,o=new gs(t.x1,i.y-n,t.x2,i.y+n)),o}_alignElements(){const{scale:t,pointers:e}=this;const s=t.box;const i=e[0].box.clone().wrap(t.box);const o=this.bbox;for(let t=0;t<e.length;t++)i.wrap(e[t].box.clone());let n;t.options.vertical?(n=o.center().x-i.center().x,t.reflow(new gs(s.x1+n,o.y1,s.x2+n,o.y2))):(n=o.center().y-i.center().y,t.reflow(new gs(s.x1,s.y1+n,s.x2,s.y2+n)));for(let t=0;t<e.length;t++)e[t].reflow(this.bbox)}_shrinkScaleWidth(t){const{scale:e}=this;if(!e.options.vertical){const s=e.contentBox().width()-t.width();s>0&&(e.box.shrink(s,0),e.box.alignTo(t,"center"),e.reflow(e.box))}}_shrinkElements(){const{scale:t,pointers:e}=this;const s=t.box.clone();const i=t.options.vertical?"y":"x";const o=e[0].box;for(let t=0;t<e.length;t++)o.wrap(e[t].box.clone());s[i+1]+=Math.max(s[i+1]-o[i+1],0),s[i+2]-=Math.max(o[i+2]-s[i+2],0),t.reflow(s);for(let t=0;t<e.length;t++)e[t].reflow(this.bbox)}}te(sd,{transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}});const id=180;const{Arc:od,Path:nd,Group:rd}=e.c;function ad(t,s,i,o){const n=new rd;const r=t.center;const a=t.getRadiusX();if(o.visible)for(let i=0;i<s.length;i++){const l=t.pointAt(s[i]);const h=new e.P(r.x+a-o.size,r.y).rotate(s[i],r);n.append(new nd({stroke:{color:o.color,width:o.width}}).moveTo(l).lineTo(h))}return n}function ld(t,e,s,i){return{from:t,to:e,color:s,opacity:i}}class hd extends Ki{constructor(t,e){super(0,1,t,e)}initUserOptions(t){const e=ut({},this.options,t);return e.majorUnit=e.majorUnit||us(e.min,e.max),e.minorUnit=e.minorUnit||e.majorUnit/10,e}initFields(){}render(t,e){const s=this.renderArc(t,e);this.bbox=s.bbox(),this.labelElements=this.renderLabels(),this.ticks=this.renderTicks(),this.ranges=this.renderRanges()}reflow(t){const e=t.center();const s=Math.min(t.height(),t.width())/2;if(!Ft(this.bbox))return this.render(e,s);this.bbox=this.arc.bbox(),this.radius(this.arc.getRadiusX()),this.repositionRanges(),this.renderLabels()}slotAngle(t){const{min:e,max:s,reverse:i,startAngle:o,endAngle:n}=this.options;const r=n-o;let a;return a=i?n-(t-e)/(s-e)*r:(t-e)/(s-e)*r+o,a+id}hasRanges(){const t=this.options.ranges;return t&&t.length}ticksSize(){const{majorTicks:t,minorTicks:e}=this.options;let s=0;return t.visible&&(s=t.size),e.visible&&(s=Math.max(e.size,s)),s}labelsCount(){let t=super.labelsCount();const e=this.options;return e.endAngle-e.startAngle>=360&&e.max%e.majorUnit==0&&(t-=1),t}renderLabels(){const t=this.options;const s=this.arc.clone();let i=s.getRadiusX();const o=this.tickAngles(s,t.majorUnit);const n=t.rangeSize=t.rangeSize||.1*i;const r=new rd;let a=.05*i;Ft(t.rangeDistance)?a=t.rangeDistance:t.rangeDistance=a;const l=t.labels;const h=l.position===Ac;const c=Ft(this.labelElements);h&&(i-=this.ticksSize(),this.hasRanges()&&!c&&(i-=n+a),s.setRadiusX(i).setRadiusY(i));const d=this.labels;const u=d.length;const p=yt(l.padding);const g=(p.left+p.right)/2;const m=(p.top+p.bottom)/2;for(let i=0;i<u;i++){const n=d[i];const a=n.box.width()/2;const l=n.box.height()/2;const u=o[i];const p=(u-id)*kc;const f=s.pointAt(u);const x=f.x+Math.cos(p)*(a+g)*(h?1:-1);const y=f.y+Math.sin(p)*(l+m)*(h?1:-1);n.reflow(new gs(x-a,y-l,x+a,y+l));const v=new e.P(n.box.x1,n.box.y1);let b;if(c){b=this.labelElements.children[i];const t=b.bbox().origin;const s=b.transform()||e.t();s.translate(v.x-t.x,v.y-t.y),b.transform(s)}else b=Rc(n,t.labels),r.append(b);this.bbox=e.R.union(this.bbox,b.bbox())}return r}repositionRanges(){const t=this.ranges.children;if(t.length>0){const{rangeDistance:s,rangeSize:i}=this.options;let o=this.getRangeRadius();this.options.labels.position===Ac&&(o+=i+s);const n=o+i/2;for(let e=0;e<t.length;e++)t[e]._geometry.setRadiusX(n).setRadiusY(n);this.bbox=e.R.union(this.bbox,this.ranges.bbox())}}renderRanges(){const t=this.rangeSegments();const e=t.length;const s=new rd;if(e){const{rangeSize:i,reverse:o,rangeDistance:n}=this.options;const r=this.getRangeRadius();this.radius(this.radius()-i-n);for(let i=0;i<e;i++){const e=t[i];const n=this.slotAngle(e[o?"to":"from"]);const a=this.slotAngle(e[o?"from":"to"]);a-n!=0&&s.append(this.createRange(n,a,r,e))}}return s}createRange(t,s,i,o){const n=this.options.rangeSize;const r=new e.A(this.arc.center,{radiusX:i+n/2,radiusY:i+n/2,startAngle:t,endAngle:s});return new od(r,{stroke:{width:n,color:o.color,opacity:o.opacity,lineCap:o.lineCap}})}rangeSegments(){const t=this.options;const e=t.ranges||[];const s=e.length;const i=[];if(s){const{min:o,max:n,rangePlaceholderColor:r}=t;i.push(ld(o,n,r));for(let t=0;t<s;t++){const s=Bc(e[t],o,n);const a=i.length;for(let t=0;t<a;t++){const e=i[t];if(e.from<=s.from&&s.from<=e.to){i.push(ld(s.from,s.to,s.color,s.opacity)),e.from<=s.to&&s.to<=e.to&&i.push(ld(s.to,e.to,r,s.opacity)),e.to=s.from;break}}}}return i}getRangeRadius(){const{arc:t,options:e}=this;const{rangeSize:s,rangeDistance:i,majorTicks:{size:o}}=e;let n;return n=e.labels.position===Cc?t.getRadiusX()-o-i-s:t.getRadiusX()-s,n}renderArc(t,s){const i=this.options;return this.arc=new e.A(t,{radiusX:s,radiusY:s,startAngle:i.startAngle+id,endAngle:i.endAngle+id})}renderTicks(){const{arc:t,options:e}=this;const s=t.clone();this.majorTickAngles=this.tickAngles(t,e.majorUnit),this.majorTicks=ad(s,this.majorTickAngles,e.majorUnit,e.majorTicks);const i=new rd;i.append(this.majorTicks);const o=e.majorTicks.size;const n=e.minorTicks.size;if(this._tickDifference=o-n,e.labels.position===Cc){const t=s.getRadiusX();s.setRadiusX(t-o+n).setRadiusY(t-o+n)}return this.minorTickAngles=this.normalizeTickAngles(this.tickAngles(t,e.minorUnit)),this.minorTicks=ad(s,this.minorTickAngles,e.minorUnit,e.minorTicks),i.append(this.minorTicks),i}normalizeTickAngles(t){const e=this.options;const s=e.majorUnit/e.minorUnit;for(let e=t.length-1;e>=0;e--)e%s==0&&t.splice(e,1);return t}tickAngles(t,e){const s=this.options;const i=s.reverse;const o=s.max-s.min;const n=t.endAngle-t.startAngle;let r=o/e;let a=t.startAngle;let l=n/r;i&&(a+=n,l=-l),n>=360&&s.max%e==0&&(r-=1);const h=[];for(let t=0;t<r;t++)h.push($t(a,3)),a+=l;return $t(a)<=t.endAngle&&h.push(a),h}radius(t){if(!t)return this.arc.getRadiusX();this.arc.setRadiusX(t).setRadiusY(t),this.repositionTicks(this.majorTicks.children,this.majorTickAngles),this.repositionTicks(this.minorTicks.children,this.minorTickAngles,!0)}repositionTicks(t,s,i){const o=i&&this._tickDifference||0;let n=this.arc;const r=n.getRadiusX();i&&this.options.labels.position===Cc&&0!==o&&(n=this.arc.clone(),n.setRadiusX(r-o).setRadiusY(r-o));for(let i=0;i<t.length;i++){const o=n.pointAt(s[i]);const r=t[i].segments;const a=o.x-r[0].anchor().x;const l=o.y-r[0].anchor().y;t[i].transform((new e.t).translate(a,l))}}}te(hd,{min:0,max:100,majorTicks:{size:15,align:Ac,color:h,width:_c,visible:!0},minorTicks:{size:10,align:Ac,color:h,width:_c,visible:!0},startAngle:-30,endAngle:210,labels:{position:Ac,padding:2}});class cd extends e.b{constructor(t,e){super(t,e);const s=this.options;s.duration=Math.max(Math.abs(s.newAngle-s.oldAngle)/s.duration*1e3,1)}step(t){const s=this.options;const i=Et(s.oldAngle,s.newAngle,t);this.element.transform(e.t().rotate(i,s.center))}}te(cd,{easing:Sc,duration:vc}),e.i.current.register(Tc,cd);const{Circle:dd,Group:ud,Path:pd}=e.c;class gd extends Wc{setAngle(t){this.elements.transform(e.t().rotate(t,this.center))}repaint(){const{scale:t,options:e}=this;const s=t.slotAngle(e._oldValue);const i=t.slotAngle(e.value);!1===e.animation.transitions?this.setAngle(i):new cd(this.elements,ut(e.animation,{oldAngle:s,newAngle:i})).play()}render(){const{scale:t,options:e}=this;const s=new ud;return!1!==e.animation&&ut(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),s.append(this._renderNeedle(),this._renderCap()),this.elements=s,this.setAngle(kc),s}reflow(t){const s=this.center=t.center;const i=Yt(this.options.length||1,.1,1.5);const o=this.radius=t.getRadiusX()*i;const n=this.capSize=Math.round(o*this.options.cap.size);this.bbox=e.R.fromPoints(new e.P(s.x-n,s.y-n),new e.P(s.x+n,s.y+n))}_renderNeedle(){const t=this.scale.options.minorTicks.size;const e=this.center;const s=this.options.color;const i=new pd({fill:{color:s},stroke:{color:s,width:_c}});return i.moveTo(e.x+this.radius-t,e.y).lineTo(e.x,e.y-this.capSize/2).lineTo(e.x,e.y+this.capSize/2).close(),i}_renderCap(){const t=this.options;const s=t.cap.color||t.color;const i=new e.f(this.center,this.capSize);return new dd(i,{fill:{color:s},stroke:{color:s}})}}te(gd,{cap:{size:.05},arrow:{width:16,height:14},animation:{type:Tc,duration:vc}});const md=e.G;class fd extends zc{reflow(t){const s=this.pointers;this.scale.reflow(t),this._initialPlotArea=this.scale.bbox;for(let t=0;t<s.length;t++)s[t].reflow(this.scale.arc),this._initialPlotArea=e.R.union(this._initialPlotArea,s[t].bbox);this.fitScale(t),this.alignScale(t),this._buildVisual(this.gaugeArea,s,this.scale),this._draw()}_buildVisual(t,e,s){const i=this._visuals=new md;i.append(t),i.append(s.ticks),i.append(s.ranges),this._buildPointers(e),i.append(s.labelElements)}_buildPointers(t){for(let e=0;e<t.length;e++){const s=t[e];s.render(),this._visuals.append(s.elements),s.value(s.options.value)}}fitScale(t){const e=this.scale.arc;const s=this._initialPlotArea;const i=Math.abs(this.getDiff(s,t));let o=$t(i,3);let n=$t(-i,3);let r,a,l,h,c;let d=0;let u=0;for(;!(!(u++<100)||(d=c===l?d+1:0,d>5)||o!==h&&(r=this.getPlotBox(o,t,e),0<=r&&r<=2)||n!==h&&(l=this.getPlotBox(n,t,e),0<=l&&l<=2)||(h=r>0&&l>0?2*o:r<0&&l<0?2*n:$t((o+n)/2||1,3),a=this.getPlotBox(h,t,e),0<=a&&a<=2));)c=l,a>0?(n=h,l=a):(o=h,r=a)}getPlotBox(t,s,i){const o=this.scale;const n=this.pointers;const r=i.getRadiusX();const a=i.clone();a.setRadiusX(r+t).setRadiusY(r+t),o.arc=a,o.reflow(s),this.plotBbox=o.bbox;for(let t=0;t<n.length;t++)n[t].reflow(a),this.plotBbox=e.R.union(this.plotBbox,n[t].bbox);return this.getDiff(this.plotBbox,s)}getDiff(t,e){return Math.min(e.width()-t.width(),e.height()-t.height())}alignScale(t){const s=this.plotBbox.center();const i=t.center();const o=s.x-i.x;const n=s.y-i.y;const{scale:r,pointers:a}=this;r.arc.center.x-=o,r.arc.center.y-=n,r.reflow(t);for(let t=0;t<a.length;t++)a[t].reflow(r.arc),this.plotBbox=e.R.union(r.bbox,a[t].bbox)}_createModel(){const t=this.options;const e=t.pointer;const s=this.scale=new hd(t.scale,this.contextService);this.pointers=[];const i=Q(e)?e:[e];for(let e=0;e<i.length;e++){const o=new gd(s,ut({},i[e],{animation:{transitions:t.transitions}}));this.pointers.push(o)}}}te(fd,{transitions:!0,gaugeArea:{background:""}});class xd extends hd{rangeSegments(){const{min:t,max:e,rangePlaceholderColor:s,rangeLineCap:i}=this.options;return[{from:t,to:e,color:s,lineCap:i}]}hasRanges(){return!0}placeholderRangeAngle(t){const e=this.ranges.children[0].geometry();this.options.reverse?e.setEndAngle(t):e.setStartAngle(t)}addRange(t,e,s){const i=this.options.reverse;const o=this.slotAngle(i?e:t);const n=this.slotAngle(i?t:e);const r=this.createRange(o,n,this.getRangeRadius(),s);return this.ranges.append(r),r}}te(xd,{min:0,max:100,majorTicks:{visible:!1},minorTicks:{visible:!1},labels:{visible:!1},startAngle:0,endAngle:180,rangeLineCap:"round"});class yd extends e.b{constructor(t,s){super(t,s);const i=this.options;const o=Math.abs(i.newAngle-i.oldAngle)/i.duration*1e3;i.duration=Yt(o,vc,800);const n=t.elements.options.get("stroke.color");const r=t.currentColor();n!==r&&(this.startColor=new e.C(n),this.color=new e.C(r))}step(t){const{options:s,startColor:i,color:o}=this;const n=Et(s.oldAngle,s.newAngle,t);if(this.element.angle(n),o){const s=$t(Et(i.r,o.r,t));const n=$t(Et(i.g,o.g,t));const r=$t(Et(i.b,o.b,t));this.element.stroke(new e.C(s,n,r).toHex())}}}te(yd,{easing:Sc,duration:vc}),e.i.current.register(Pc,yd);class vd extends Wc{repaint(){const{scale:t,options:e}=this;const s=t.slotAngle(e._oldValue);const i=t.slotAngle(e.value);this.animation&&this.animation.abort(),!1===e.animation.transitions?(this.angle(i),this.stroke(this.currentColor())):(this.animation=new yd(this,ut(e.animation,{oldAngle:s,newAngle:i})),this.animation.play())}angle(t){const e=this.elements.geometry();this.scale.options.reverse?e.setStartAngle(t):e.setEndAngle(t),this.scale.placeholderRangeAngle(t)}stroke(t){this.elements.stroke(t)}render(){if(this.elements)return;const{scale:t,options:e}=this;!1!==e.animation&&ut(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),this.elements=t.addRange(t.options.min,this.options.value,{color:this.currentColor(),opacity:e.opacity,lineCap:t.options.rangeLineCap})}currentColor(){const{min:t,max:e}=this.scale.options;const{colors:s,color:i,value:o}=this.options;const n=it(o)?o:t;if(s)for(let i=0;i<s.length;i++){const{color:o,from:r=t,to:a=e}=s[i];if(r<=n&&n<=a)return o}return i}reflow(){this.render(),this.bbox=this.elements.bbox()}}te(vd,{animation:{type:Pc,duration:vc}});class bd extends fd{_initTheme(t){super._initTheme(t),this.options.color=this.options.color||(this.theme.pointer||{}).color}_createModel(){const t=this.options;const e=this.scale=new xd(t.scale,this.contextService);const s=new vd(e,ut({},{colors:t.colors,color:t.color,value:t.value,opacity:t.opacity,animation:{transitions:t.transitions}}));this.pointers=[s]}_buildPointers(t){for(let e=0;e<t.length;e++){const s=t[e];s.render(),s.value(s.options.value)}}_setValueOptions(t){this.options.value=t}currentColor(){const t=this.pointers[0];if(t)return t.currentColor()}centerLabelPosition(t,e){const s=this.getSize();const i=this.scale.arc.center;let o=i.x-t/2;let n=i.y-e/2;if(t<s.width){const e=o+t;o=Math.max(o,0),e>s.width&&(o-=e-s.width)}if(e<s.height){const t=this.scale.bbox;const s=t.bottomRight().y;const i=n+e;n=Math.max(n,t.origin.y),i>s&&(n-=i-s)}return{left:o,top:n}}}class wd{constructor(t){this.setOptions(t),this.initProperties()}initProperties(){}setOptions(t){this.options=Object.assign({},this.options,t),this.quietZoneLength=this.options.addQuietZone?2*this.options.quietZoneLength:0}encode(t,e,s){const i=Ft(t)?String(t):t;return this.initValue(i,e,s),this.options.addQuietZone&&this.addQuietZone(),this.addData(),this.options.addQuietZone&&this.addQuietZone(),{baseUnit:this.baseUnit,pattern:this.pattern}}initValue(){}addQuietZone(){this.pattern.push(this.options.quietZoneLength||10)}addData(){}invalidCharacterError(t){throw new Error(`Character "${t}" is not valid for symbology ${this.name}.`)}}te(wd,{quietZoneLength:10,addQuietZone:!0,addCheckSum:!0});const _d=Object.assign;class kd extends wd{initProperties(){super.initProperties(),_d(this,{name:"Code 11",characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221"})}initValue(t,e){this.pattern=[],this.value=t,this.width=e,this.totalUnits=0}addData(){const t=this.value;this.addPattern(this.START);for(let e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()}setBaseUnit(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)}addCheckSum(){const t=this.value;let e=t.length;const s=this.getWeightedSum(t,e,this.cCheckSumTotal)%this.checkSumMod;if(this.checksum=String(s),this.addPattern(this.characterMap[s]),e++,e>=this.kCheckSumMinLength){let i=(s+this.getWeightedSum(t,e,this.kCheckSumTotal))%this.checkSumMod;this.checksum+=i,this.addPattern(this.characterMap[i])}}getWeightedSum(t,e,s){let i=0;for(let o=0;o<t.length;o++)i+=this.weightedValue(this.getValue(t.charAt(o)),e,o,s);return i}weightedValue(t,e,s,i){return((e-s)%i||i)*t}getValue(t){return isNaN(t)?(t!==this.DASH&&this.invalidCharacterError(t),this.DASH_VALUE):parseInt(t,10)}addCharacter(t){const e=this.getValue(t);const s=this.characterMap[e];this.addPattern(s)}addPattern(t){let e;for(let s=0;s<t.length;s++)e=parseInt(t.charAt(s),10),this.pattern.push(e),this.totalUnits+=e}}te(kd,{addCheckSum:!0});const Ad=Object.assign;class Sd extends wd{initProperties(){super.initProperties(),Ad(this,{minBaseUnitLength:.7})}addData(){const t=this.value;this.addStart();for(let e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.pushCheckSum(),this.addStop(),this.prepareValues()}addCharacter(t){const e=this.characterMap[t];e||this.invalidCharacterError(t),this.addBase(e)}addBase(){}}class Cd extends Sd{initProperties(){super.initProperties(),Ad(this,{name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}}})}initValue(t,e,s){this.width=e,this.height=s,this.value=t,this.dataLength=t.length,this.pattern=[],this.patternString=""}prepareValues(){const t=this.minBaseUnitLength;const e=this.minRatio;const s=Math.ceil(Math.max(.15*this.width,24));let i;let o=this.maxRatio;if(this.height<s)throw new Error(`Insufficient height for Code39 encoding: the current height is ${this.height}px and the minimum height is ${s}px.`);for(i=this.getBaseUnit(o);i<t&&o>e;)o=parseFloat((o-.1).toFixed(1)),i=this.getBaseUnit(o);if(i<t){let s=Math.ceil(this.getBaseWidth(e)*t);throw new Error(`Insufficient width for Code39 encoding: the current width is ${this.width}px and the minimum width for value "${this.value}" is ${s}px.`)}this.ratio=o,this.baseUnit=i,this.patternString=this.patternString.substring(0,this.patternString.length-1),this.pattern=this.pattern.concat(this.patternString.replace(/ratio/g,o).split(this.splitCharacter))}getBaseUnit(t){return this.width/this.getBaseWidth(t)}getBaseWidth(t){const e=3*(t+2);return this.quietZoneLength+e*(this.dataLength+2)+this.gapWidth*(this.dataLength+1)}addStart(){this.addPattern(this.characterMap.START.pattern),this.addCharacterGap()}addBase(t){this.addPattern(t.pattern),this.addCharacterGap()}addStop(){this.addPattern(this.characterMap.START.pattern)}addPattern(t){for(let e=0;e<t.length;e++)this.patternString+=this.patternMappings[t.charAt(e)]}addCharacterGap(){this.patternString+=this.gapWidth+this.splitCharacter}}te(Cd,{addCheckSum:!1});const Td={addCharacter(t){this.characterMap[t]?this.addBase(this.characterMap[t]):t.charCodeAt(0)>127?this.invalidCharacterError(t):this.addExtended(t.charCodeAt(0))},addExtended(t){let e;for(let s=0;s<this.extendedMappings.length;s++)if(e=this.extendedMappings[s].call(this,t),e){for(let t=0;t<e.length;t++){const s=e[t];this.addBase(s)}return void(this.dataLength+=e.length-1)}},extendedMappings:[function(t){if(97<=t&&t<=122)return[this.characterMap[this.shiftCharacters[0]],this.characterMap[String.fromCharCode(t-32)]]},function(t){if(33<=t&&t<=58)return[this.characterMap[this.shiftCharacters[1]],this.characterMap[String.fromCharCode(t+32)]]},function(t){if(1<=t&&t<=26)return[this.characterMap[this.shiftCharacters[2]],this.characterMap[String.fromCharCode(t+64)]]},function(t){let e;let s;if(this.specialAsciiCodes[t]){e=[];for(let s=0;s<this.specialAsciiCodes[t].length;s++)e.push(this.characterMap[this.shiftCharacters[3]]),e.push(this.characterMap[this.specialAsciiCodes[t][s]])}else s=6*Math.floor(t/32)+(t-27)%32+64,e=[this.characterMap[this.shiftCharacters[3]],this.characterMap[String.fromCharCode(s)]];return e}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]};const Pd=Object.assign;class Md extends Sd{initProperties(){super.initProperties(),Pd(this,{name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}})}initValue(t,e,s){this.value=t,this.width=e,this.height=s,this.pattern=[],this.values=[],this.dataLength=t.length}prepareValues(){let t=Math.ceil(Math.max(.15*this.width,24));if(this.height<t)throw new Error(`Insufficient height for Code93 encoding: the current height is ${this.height}px, the minimum required height is ${t}px.`);if(this.setBaseUnit(),this.baseUnit<this.minBaseUnitLength){const t=Math.ceil(this.minBaseUnitLength*(this.width/this.baseUnit));throw new Error(`Insufficient width for Code93 encoding: the current width is ${this.width}px and the minimum required width for value "${this.value}" is ${t}px.`)}}setBaseUnit(){this.baseUnit=this.width/(9*(this.dataLength+2+2)+this.quietZoneLength+1)}addStart(){let t=this.characterMap.START.pattern;this.addPattern(t)}addStop(){this.addStart(),this.pattern.push(this.characterMap.TERMINATION_BAR)}addBase(t){this.addPattern(t.pattern),this.values.push(t.value)}pushCheckSum(){const t=this._getCheckValues();let e;this.checksum=t.join("");for(let s=0;s<t.length;s++)e=this.characterMap[this._findCharacterByValue(t[s])],this.addPattern(e.pattern)}_getCheckValues(){const t=this.values;const e=t.length;let s=0;let i;let o;let n;for(n=e-1;n>=0;n--)s+=this.weightedValue(t[n],e-n,this.cCheckSumTotal);for(i=s%this.checkSumMod,s=this.weightedValue(i,1,this.kCheckSumTotal),n=e-1;n>=0;n--)s+=this.weightedValue(t[n],e-n+1,this.kCheckSumTotal);return o=s%this.checkSumMod,[i,o]}_findCharacterByValue(t){for(let e in this.characterMap)if(this.characterMap[e].value===t)return e}weightedValue(t,e,s){return(e%s||s)*t}addPattern(t){let e;for(let s=0;s<t.length;s++)e=parseInt(t.charAt(s),10),this.pattern.push(e)}}const Ed=/^\d+$/;const Ld=Object.assign;const Id=/^\d+$/;const Rd=/^[a-z0-9]+$/i;const Bd=Object.assign;class Od{constructor(t){this.encoding=t,this.initProperties()}initProperties(){}addStart(){}is(){}isCode(){return!1}move(){}pushState(){}}class Vd extends Od{constructor(t,e){super(t),this.states=e,this._initMoves(e)}initProperties(){super.initProperties(),ut(this,{FNC4:"FNC4",SHIFT:98})}addStart(){this.encoding.addPattern(this.START)}is(t,e){let s=t.charCodeAt(e);return this.isCode(s)}move(t){let e=0;for(;!this._moves[e].call(this,t)&&e<this._moves.length;)e++}pushState(t){let e,s=this.states,i=t.value,o=i.length;if(Mt("C",s)){let e=i.substr(t.index).match(/\d{4,}/g);e&&(o=i.indexOf(e[0],t.index))}for(;(e=t.value.charCodeAt(t.index))>=0&&this.isCode(e)&&t.index<o;)this.encoding.addPattern(this.getValue(e)),t.index++}_initMoves(t){this._moves=[],Mt(this.FNC4,t)&&this._moves.push(this._moveFNC),Mt(this.shiftKey,t)&&this._moves.push(this._shiftState),this._moves.push(this._moveState)}_moveFNC(t){if(t.fnc)return t.fnc=!1,t.previousState===this.key}_shiftState(t){if(t.previousState===this.shiftKey&&(t.index+1>=t.value.length||this.encoding[this.shiftKey].is(t.value,t.index+1)))return this.encoding.addPattern(this.SHIFT),t.shifted=!0,!0}_moveState(){return this.encoding.addPattern(this.MOVE),!0}}const Dd={};Dd.A=class extends Vd{initProperties(){super.initProperties(),Bd(this,{key:"A",shiftKey:"B",MOVE:101,START:103})}isCode(t){return 0<=t&&t<96}getValue(t){return t<32?t+64:t-32}},Dd.B=class extends Vd{initProperties(){super.initProperties(),Bd(this,{key:"B",shiftKey:"A",MOVE:100,START:104})}isCode(t){return 32<=t&&t<128}getValue(t){return t-32}},Dd.C=class extends Od{initProperties(){super.initProperties(),Bd(this,{key:"C",MOVE:99,START:105})}addStart(){this.encoding.addPattern(this.START)}is(t,e){let s=Fd(t,e,4);return(e+4<=t.length||2===t.length)&&Id.test(s)}move(){this.encoding.addPattern(this.MOVE)}pushState(t){let e;for(;(e=Fd(t.value,t.index,2))&&Id.test(e)&&2===e.length;)this.encoding.addPattern(parseInt(e,10)),t.index+=2}getValue(t){return t}},Dd.FNC4=class extends Od{constructor(t,e){super(t),this._initSubStates(e)}initProperties(){super.initProperties(),Bd(this,{key:"FNC4",dependentStates:["A","B"]})}addStart(t){let e=t.value.charCodeAt(0)-128,s=this._getSubState(e);this.encoding[s].addStart()}is(t,e){let s=t.charCodeAt(e);return this.isCode(s)}isCode(t){return 128<=t&&t<256}pushState(t){let e=this._initSubState(t),s=this.encoding,i=e.value.length;let o;if(t.index+=i,i<3)for(;e.index<i;e.index++)o=e.value.charCodeAt(e.index),e.state=this._getSubState(o),e.previousState!==e.state&&(e.previousState=e.state,s[e.state].move(e)),s.addPattern(s[e.state].MOVE),s.addPattern(s[e.state].getValue(o));else e.state!==e.previousState&&s[e.state].move(e),this._pushStart(e),s.pushData(e,this.subStates),t.index<t.value.length&&this._pushStart(e);t.fnc=!0,t.state=e.state}_pushStart(t){this.encoding.addPattern(this.encoding[t.state].MOVE),this.encoding.addPattern(this.encoding[t.state].MOVE)}_initSubState(t){const e={value:this._getAll(t.value,t.index),index:0};return e.state=this._getSubState(e.value.charCodeAt(0)),e.previousState=t.previousState===this.key?e.state:t.previousState,e}_initSubStates(t){this.subStates=[];for(let e=0;e<t.length;e++)Mt(t[e],this.dependentStates)&&this.subStates.push(t[e])}_getSubState(t){for(let e=0;e<this.subStates.length;e++)if(this.encoding[this.subStates[e]].isCode(t))return this.subStates[e]}_getAll(t,e){let s;let i="";let o=e;for(;(s=t.charCodeAt(o++))&&this.isCode(s);)i+=String.fromCharCode(s-128);return i}},Dd.FNC1=class extends Od{constructor(t,e){super(t),this.states=e}initProperties(){super.initProperties(),Bd(this,{key:"FNC1",startState:"C",startAI:"(",endAI:")",dependentStates:["C","B"],applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102})}addStart(){this.encoding[this.startState].addStart()}is(){return Mt(this.key,this.states)}pushState(t){let e,s,i,o=this.encoding,n=t.value.replace(/\s/g,""),r=new RegExp("["+this.startAI+this.endAI+"]","g"),a=t.index,l={state:this.startState};o.addPattern(this.START);for(;;){if(l.index=0,i=n.charAt(a)===this.startAI?2:0,e=i>0?this.getBySeparator(n,a):this.getByLength(n,a),e.ai.length)s=a+i+e.id.length+e.ai.length;else if(s=n.indexOf(this.startAI,a+1),s<0){if(a+e.ai.max+e.id.length+i<n.length)throw new Error("Separators are required after variable length identifiers");s=n.length}if(l.value=n.substring(a,s).replace(r,""),this.validate(e,l.value),o.pushData(l,this.dependentStates),s>=n.length)break;a=s,l.state!==this.startState&&(o[this.startState].move(l),l.state=this.startState),e.ai.length||o.addPattern(this.START)}t.index=t.value.length}validate(t,e){let s=e.substr(t.id.length),i=t.ai;if(!i.type&&!Id.test(s))throw new Error("Application identifier "+t.id+" is numeric only but contains non numeric character(s).");if("alphanumeric"===i.type&&!Rd.test(s))throw new Error("Application identifier "+t.id+" is alphanumeric only but contains non alphanumeric character(s).");if(i.length&&i.length!==s.length)throw new Error("Application identifier "+t.id+" must be "+i.length+" characters long.");if(i.min&&i.min>s.length)throw new Error("Application identifier "+t.id+" must be at least "+i.min+" characters long.");if(i.max&&i.max<s.length)throw new Error("Application identifier "+t.id+" must be at most "+i.max+" characters long.")}getByLength(t,e){let s;let i;for(let o=2;o<=4;o++)if(s=Fd(t,e,o),i=this.getApplicationIdentifier(s)||this.getApplicationIdentifier(s.substring(0,s.length-1)),i)return{id:s,ai:i};this.unsupportedAIError(s)}unsupportedAIError(t){throw new Error("'"+t+"' is not a supported Application Identifier")}getBySeparator(t,e){let s=t.indexOf(this.startAI,e),i=t.indexOf(this.endAI,s),o=t.substring(s+1,i),n=this.getApplicationIdentifier(o)||this.getApplicationIdentifier(o.substr(o.length-1));return n||this.unsupportedAIError(o),{ai:n,id:o}}getApplicationIdentifier(t){let e=this.applicationIdentifiers,s=e.multiKey;if(e[t])return e[t];for(let e=0;e<s.length;e++){if(s[e].ids&&Mt(t,s[e].ids))return s[e].type;if(s[e].ranges){let i=s[e].ranges;for(let o=0;o<i.length;o++)if(i[o][0]<=t&&t<=i[o][1])return s[e].type}}}};class zd extends wd{constructor(t){super(t),this._initStates()}initProperties(){super.initProperties(),Bd(this,{characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106})}_initStates(){for(let t=0;t<this.states.length;t++)this[this.states[t]]=new Dd[this.states[t]](this,this.states)}initValue(t,e,s){this.pattern=[],this.value=t,this.width=e,this.height=s,this.checkSum=0,this.totalUnits=0,this.index=0,this.position=1}addData(){let t={value:this.value,index:0,state:""};0!==this.value.length&&(t.state=t.previousState=this.getNextState(t,this.states),this.addStart(t),this.pushData(t,this.states),this.addCheckSum(),this.addStop(),this.setBaseUnit())}pushData(t,e){for(;this[t.state].pushState(t),!(t.index>=t.value.length);)if(t.shifted){let e=t.state;t.state=t.previousState,t.previousState=e,t.shifted=!1}else t.previousState=t.state,t.state=this.getNextState(t,e),this[t.state].move(t)}addStart(t){this[t.state].addStart(t),this.position=1}addCheckSum(){this.checksum=this.checkSum%103,this.addPattern(this.checksum)}addStop(){this.addPattern(this.STOP)}setBaseUnit(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)}addPattern(t){const e=this.characterMap[t].toString();let s;for(let t=0;t<e.length;t++)s=parseInt(e.charAt(t),10),this.pattern.push(s),this.totalUnits+=s;this.checkSum+=t*this.position++}getNextState(t,e){for(let s=0;s<e.length;s++)if(this[e[s]].is(t.value,t.index))return e[s];this.invalidCharacterError(t.value.charAt(t.index))}}function Fd(t,e,s){return t.substring(e,e+s)}const Hd=Object.assign;class Nd extends wd{initProperties(){super.initProperties(),Hd(this,{characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:"",checkSums:jd})}initValue(t,e){this.pattern=[],this.value=t,this.checkSumLength=0,this.width=e}setBaseUnit(){this.baseUnit=this.width/(12*(this.value.length+this.checkSumLength)+this.quietZoneLength+7)}addData(){const t=this.value;this.addPattern(this.START);for(let e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()}addCharacter(t){const e=this.characterMap[t];e||this.invalidCharacterError(t),this.addPattern(e)}addPattern(t){for(let e=0;e<t.length;e++)this.pattern.push(parseInt(t.charAt(e),10))}addCheckSum(){const t=this.checkSums[this.checkSumType].call(this.checkSums,this.value);this.checksum=t.join("");for(let e=0;e<t.length;e++)this.checkSumLength++,this.addPattern(this.characterMap[t[e]])}}const jd={Modulo10(t){let e,s,i,o=[0,""],n=t.length%2;for(e=0;e<t.length;e++)o[(e+n)%2]+=parseInt(t.charAt(e),10);for(i=o[0],s=(2*o[1]).toString(),e=0;e<s.length;e++)i+=parseInt(s.charAt(e),10);return[(10-i%10)%10]},Modulo11(t){let e,s,i=0,o=t.length;for(let s=0;s<o;s++)e=((o-s)%6||6)+1,i+=e*t.charAt(s);return s=(11-i%11)%11,10!==s?[s]:[1,0]},Modulo11Modulo10(t){let e,s=this.Modulo11(t);return e=t+s[0],s.concat(this.Modulo10(e))},Modulo10Modulo10(t){let e,s=this.Modulo10(t);return e=t+s[0],s.concat(this.Modulo10(e))}};const Ud=Object.assign;class Gd extends wd{initProperties(){super.initProperties(),Ud(this,{name:"EAN 13",keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}})}initValue(t,e,s){const i=String(t);if(12!==i.length||/\D/.test(i))throw new Error('The value of the "EAN13" encoding should be 12 symbols');this.pattern=[],this.options.height=s,this.baseUnit=e/(95+this.quietZoneLength),this.value=i,this.checksum=this.calculateChecksum(),this.leftKey=i[0],this.leftPart=i.substr(1,6),this.rightPart=i.substr(7)+this.checksum}addData(){this.addPieces(this.characterMap.start),this.addSide(this.leftPart,this.leftKey),this.addPieces(this.characterMap.middle),this.addSide(this.rightPart),this.addPieces(this.characterMap.start)}addSide(t,e){for(let s=0;s<t.length;s++)e&&parseInt(this.keyTable[e].charAt(s),10)?this.addPieces(Array.prototype.slice.call(this.characterMap.digits[t.charAt(s)]).reverse(),!0):this.addPieces(this.characterMap.digits[t.charAt(s)],!0)}addPieces(t,e){for(let s=0;s<t.length;s++)e?this.pattern.push({y1:0,y2:.95*this.options.height,width:t[s]}):this.pattern.push(t[s])}calculateChecksum(){let t=0,e=0,s=this.value.split("").reverse().join("");for(let i=0;i<s.length;i++)i%2?e+=parseInt(s.charAt(i),10):t+=parseInt(s.charAt(i),10);return(10-(3*t+e)%10)%10}}const Wd=Object.assign;const Xd={code11:kd,code39:Cd,code39extended:class extends Cd{initProperties(){super.initProperties(),ut(this,Td,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})}},code93:Md,code93extended:class extends Md{initProperties(){super.initProperties(),ut(this,Td,{name:"Code 93 extended",pushCheckSum:function(){const t=this._getCheckValues();let e;this.checksum=t.join("");for(let s=0;s<t.length;s++)if(e=t[s],this.shiftValuesAsciiCodes[e])this.addExtended(this.shiftValuesAsciiCodes[e]);else{const t=this._findCharacterByValue(e);this.addPattern(this.characterMap[t].pattern)}}})}},code128:class extends zd{initProperties(){super.initProperties(),Bd(this,{name:"Code 128",states:["C","B","A","FNC4"]})}},code128a:class extends zd{initProperties(){super.initProperties(),Bd(this,{name:"Code 128 A",states:["A"]})}},code128b:class extends zd{initProperties(){super.initProperties(),Bd(this,{name:"Code 128 B",states:["B"]})}},code128c:class extends zd{initProperties(){super.initProperties(),Bd(this,{name:"Code 128 C",states:["C"]})}},"gs1-128":class extends zd{initProperties(){super.initProperties(),Bd(this,{name:"Code GS1-128",states:["FNC1","C","B"]})}},msimod10:class extends Nd{initProperties(){super.initProperties(),Hd(this,{name:"MSI Modulo10",checkSumType:"Modulo10"})}},msimod11:class extends Nd{initProperties(){super.initProperties(),Hd(this,{name:"MSI Modulo11",checkSumType:"Modulo11"})}},msimod1010:class extends Nd{initProperties(){super.initProperties(),Hd(this,{name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"})}},msimod1110:class extends Nd{initProperties(){super.initProperties(),Hd(this,{name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"})}},postnet:class extends wd{initProperties(){super.initProperties(),Ld(this,{name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]})}initValue(t,e,s){this.height=s,this.width=e,this.baseHeight=s/2,this.value=t.replace(new RegExp(this.DIGIT_SEPARATOR,"g"),""),this.pattern=[],this.validate(this.value),this.checkSum=0,this.setBaseUnit()}addData(){const t=this.value;this.addPattern(this.START);for(let e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.START),this.pattern.pop()}addCharacter(t){const e=this.characterMap[t];this.checkSum+=parseInt(t,10),this.addPattern(e)}addCheckSum(){this.checksum=(10-this.checkSum%10)%10,this.addCharacter(this.checksum)}setBaseUnit(){this.baseUnit=this.width/(10*(this.value.length+1)+3+this.quietZoneLength)}validate(t){if(Ed.test(t)||this.invalidCharacterError(t.match(/[^0-9]/)[0]),!Mt(t.length,this.VALID_CODE_LENGTHS))throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+this.VALID_CODE_LENGTHS.join(",")+".")}addPattern(t){let e;for(let s=0;s<t.length;s++)e=this.height-this.baseHeight*t.charAt(s),this.pattern.push({width:1,y1:e,y2:this.height}),this.pattern.push(1)}},ean8:class extends Gd{initProperties(){super.initProperties(),Wd(this,{name:"EAN 8"})}initValue(t,e,s){if(7!==t.length||/\D/.test(t))throw new Error("Invalid value provided");this.value=t,this.options.height=s,this.checksum=this.calculateChecksum(this.value),this.leftPart=this.value.substr(0,4),this.rightPart=this.value.substr(4)+this.checksum,this.pattern=[],this.baseUnit=e/(67+this.quietZoneLength)}},ean13:Gd};function Yd(t,e){const s=t.style.display;"canvas"===e&&(t.style.display="block");const i={width:t.clientWidth,height:t.clientHeight};return t.style.display=s,i}te(class{constructor(t,e,s=ve){this.options=ut({},this.options,e),this.element=t,this.onError=s,this._initElement(),this._initSurface(),this._setOptions(e),e&&Ft(e.value)&&this.redraw()}destroy(){this._destroySurface()}_initElement(){K(this.element,"k-barcode")}_initSurface(){const{options:t,surface:e}=this;e&&e.options.type===t.renderAs||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())}_createSurface(){return e.k.create(this.surfaceElement,{type:this.options.renderAs})}_destroySurface(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())}_initSurfaceElement(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))}_destroySurfaceElement(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)}setOptions(t){this._setOptions(t),this._initSurface(),this.redraw()}redraw(){let t=this._getSize();this.surface.clear(),this.surface.setSize({width:t.width,height:t.height}),this.createVisual(),this.surface.draw(this.visual)}getSize(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}}_resize(){this.redraw()}createVisual(){this.visual=this._render()}_render(){const t=this.options;const s=t.value;const i=t.text;const o=yt(i.margin);const n=this._getSize();const r=t.border||{};const a=this.encoding;const l=new gs(0,0,n.width,n.height).unpad(r.width).unpad(t.padding);let h=l.height();let c;let d;let u;const p=new e.G;this.contentBox=l,p.append(this._getBackground(n)),i.visible&&(u=e.m(s,{font:i.font}).height,h-=u+o.top+o.bottom);try{c=a.encode(s,l.width(),h)}catch(t){return this.onError(t),p}return i.visible&&(d=s,t.checksum&&Ft(a.checksum)&&(d+=" "+a.checksum),p.append(this._getText(d))),this.barHeight=h,this._bandsGroup=this._getBands(c.pattern,c.baseUnit),p.append(this._bandsGroup),p}exportVisual(){return this._render()}_getSize(){const t=Yd(this.element,this.options.renderAs);const s=new e.o(300,100);return t.width>0&&(s.width=t.width),t.height>0&&(s.height=t.height),this.options.width&&(s.width=this.options.width),this.options.height&&(s.height=this.options.height),s}value(t){if(!Ft(t))return this.options.value;this.options.value=String(t),this.redraw()}_getBands(t,s){const i=this.contentBox;let o=i.x1;let n;let r;const a=new e.G;for(let l=0;l<t.length;l++){if(r=pt(t[l])?t[l]:{width:t[l],y1:0,y2:this.barHeight},n=r.width*s,l%2){const t=e.R.fromPoints(new e.P(o,r.y1+i.y1),new e.P(o+n,r.y2+i.y1));const s=e.a.fromRect(t,{fill:{color:this.options.color},stroke:null});a.append(s)}o+=n}return a}_getBackground(t){const s=this.options;const i=s.border||{};const o=new gs(0,0,t.width,t.height).unpad(i.width/2);return e.a.fromRect(o.toRect(),{fill:{color:s.background},stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType}})}_getText(t){const e=this.options.text;const s=this._textbox=new Hs(t,{font:e.font,color:e.color,align:"center",vAlign:"bottom",margin:e.margin});return s.reflow(this.contentBox),s.renderVisual(),s.visual}_setOptions(t){if(this.type=(t.type||this.options.type).toLowerCase(),"upca"===this.type&&(this.type="ean13",t.value="0"+t.value),"upce"===this.type&&(this.type="ean8",t.value="0"+t.value),!Xd[this.type])throw new Error(`Encoding '${this.type}' is not supported.`);this.encoding=new Xd[this.type],this.options=ut({},this.options,t)}},{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}});const qd=Object.assign;function Zd(t,e){let s=[];let i=0;for(;i<t.length;)s.push(t.substring(i,i+e)),i+=e;return s}function $d(t,e){let s=Number(t).toString(2);return s.length<e&&(s=new Array(e-s.length+1).join(0)+s),s}function Qd(t){return parseInt(t,2)}class Kd{constructor(t){this.matrix=t,this.row=t.length-1,this.column=t.length-1,this.startColumn=this.column,this.dir=-1,this.c=0}move(){this.row+=this.dir*this.c,this.c^=1,this.column=this.startColumn-this.c}getNextCell(){for(;void 0!==this.matrix[this.row][this.column];)this.move(),(this.row<0||this.row>=this.matrix.length)&&(this.dir=-this.dir,this.startColumn-=8!==this.startColumn?2:3,this.column=this.startColumn,this.row=this.dir<0?this.matrix.length-1:0);return{row:this.row,column:this.column}}getNextRemainderCell(){if(this.move(),void 0===this.matrix[this.row][this.column])return{row:this.row,column:this.column}}}class Jd{constructor(t,e){this.dataString=t,this.version=e}}const tu="alphanumeric";const eu=/^\d+/;const su="A-Z0-9 $%*+./:-";const iu=new RegExp("^[A-Z $%*+./:-]+");const ou=new RegExp("^["+su+"]+");const nu=new RegExp("^[^"+su+"]+");function ru(t,e,s,i,o){let n,r,a=eu.exec(t),l=a?a[0]:"",h=iu.exec(t),c=h?h[0]:"",d=ou.exec(t),u=d?d[0]:"";return l&&(l.length>=e||t.length===l.length||l.length>=s&&!ou.test(t.charAt(l.length)))?(n="numeric",r=l):u&&(t.length===u.length||u.length>=i||o===tu)?(n=tu,r=l||c):(n="byte",r=u?u+nu.exec(t.substring(u.length))[0]:nu.exec(t)[0]),{mode:n,modeString:r}}class au{constructor(){this.initProperties()}initProperties(){qd(this,{modeIndicator:"",bitsInCharacterCount:[]})}getVersionIndex(t){return t<10?0:t>26?2:1}getBitsCharacterCount(t){return this.bitsInCharacterCount[this.getVersionIndex(t||40)]}getModeCountString(t,e){return this.modeIndicator+$d(t,this.getBitsCharacterCount(e))}encode(){}getStringBitsLength(){}getValue(){}}const lu="numeric";const hu="alphanumeric";const cu="byte";let du={[lu]:new class extends au{initProperties(){super.initProperties(),qd(this,{bitsInCharacterCount:[10,12,14],modeIndicator:"0001"})}getValue(t){return parseInt(t,10)}encode(t,e){let s=Zd(t,3),i=this.getModeCountString(t.length,e);let o;for(o=0;o<s.length-1;o++)i+=$d(s[o],10);return i+$d(s[o],1+3*s[o].length)}getStringBitsLength(t,e){let s=t%3;return 4+this.getBitsCharacterCount(e)+10*Math.floor(t/3)+3*s+(0===s?0:1)}},[hu]:new class extends au{initProperties(){super.initProperties(),qd(this,{characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010"})}getValue(t){return this.characters[t]}encode(t,e){let s,i=Zd(t,2),o=this.getModeCountString(t.length,e);let n;for(n=0;n<i.length-1;n++)s=45*this.getValue(i[n].charAt(0))+this.getValue(i[n].charAt(1)),o+=$d(s,11);return s=2===i[n].length?45*this.getValue(i[n].charAt(0))+this.getValue(i[n].charAt(1)):this.getValue(i[n].charAt(0)),o+$d(s,1+5*i[n].length)}getStringBitsLength(t,e){return 4+this.getBitsCharacterCount(e)+11*Math.floor(t/2)+t%2*6}},[cu]:new class extends au{initProperties(){super.initProperties(),qd(this,{bitsInCharacterCount:[8,16,16],modeIndicator:"0100"})}getValue(t){let e=t.charCodeAt(0);if(e<=127||160<=e&&e<=255)return e;throw new Error(`Unsupported character in QR Code: "${t}".`)}encode(t,e){let s=this,i=s.getModeCountString(t.length,e);for(let e=0;e<t.length;e++)i+=$d(s.getValue(t.charAt(e)),8);return i}getStringBitsLength(t,e){return 4+this.getBitsCharacterCount(e)+8*t}}};const uu=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}];function pu(t,e){let s=0,i=uu.length-1,o=Math.floor(uu.length/2);do{t<uu[o][e].totalDataCodewords?i=o:s=o,o=s+Math.floor((i-s)/2)}while(i-s>1);return t<=uu[s][e].totalDataCodewords?o+1:i+1}class gu{getEncodingResult(t,e){let s=function(t){let e,s=[],i=0;let o=t;for(s.push(ru(o,8,5,8,e)),e=s[0].mode,o=o.substr(s[0].modeString.length);o.length>0;){let t=ru(o,17,9,16,e);t.mode!==e?(e=t.mode,s.push(t),i++):s[i].modeString+=t.modeString,o=o.substr(t.modeString.length)}return s}(t),i=function(t){let e,s=0;for(let i=0;i<t.length;i++)e=du[t[i].mode],s+=e.getStringBitsLength(t[i].modeString.length);return Math.ceil(s/8)}(s),o=pu(i,e),n=function(t,e){let s,i="";for(let o=0;o<t.length;o++)s=du[t[o].mode],i+=s.encode(t[o].modeString,e);return i}(s,o);return new Jd(n,o)}}class mu{constructor(){this.initProperties(),this.mode=du[this.encodingMode]}initProperties(){qd(this,{encodingMode:"byte",utfBOM:"111011111011101110111111",initialModeCountStringLength:20,ranges:[128,2048,65536,2097152,67108864]})}getEncodingResult(t,e){let s=this.encode(t),i=pu(this.getDataCodewordsCount(s),e),o=this.mode.getModeCountString(s.length/8,i)+s;return new Jd(o,i)}getDataCodewordsCount(t){let e=t.length;return Math.ceil((this.initialModeCountStringLength+e)/8)}encode(t){let e=this.utfBOM;for(let s=0;s<t.length;s++)e+=this.encodeCharacter(t.charCodeAt(s));return e}encodeCharacter(t){let e=this.getBytesCount(t),s=e-1,i="";if(1===e)i=$d(t,8);else{let o=8-e;for(let e=0;e<s;e++)i=$d(t>>6*e&63|128,8)+i;i=(t>>6*s|255>>o<<o).toString(2)+i}return i}getBytesCount(t){let e=this.ranges;for(let s=0;s<e.length;s++)if(t<e[s])return s+1}}let fu="0000",xu={1:0},yu={0:1},vu={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},bu=[1,0,1,1,1],wu=[1,0,1],_u={L:"01",M:"00",Q:"11",H:"10"},ku=["11101100","00010001"],Au=[(t,e)=>(t+e)%2==0,(t,e)=>t%2==0,(t,e)=>e%3==0,(t,e)=>(t+e)%3==0,(t,e)=>(Math.floor(t/2)+Math.floor(e/3))%2==0,(t,e)=>t*e%2+t*e%3==0,(t,e)=>(t*e%2+t*e%3)%2==0,(t,e)=>((t+e)%2+t*e%3)%2==0];const Su=[[1,0],[1,25,0]];function Cu(t,e,s,i){for(let o=0;o<t.length;o++)t[o][s][i]=e}function Tu(t,e,s,i){for(let o=0;o<Au.length;o++)t[o][s][i]=Au[o](s,i)?1^e:parseInt(e,10)}function Pu(t,e){let s=[];for(let i=t.length-2;i>=0;i--)s[i]=t[i]^e[i];return s}function Mu(t,e){let s=[];for(let i=0;i<t.length;i++)for(let o=0;o<e.length;o++)void 0===s[i+o]?s[i+o]=(t[i]+(e[o]>=0?e[o]:0))%255:s[i+o]=xu[yu[s[i+o]]^yu[(t[i]+e[o])%255]];return s}function Eu(t,e){let s=[],i=t.length-1;do{s[i]=yu[(t[i]+e)%255],i--}while(void 0!==t[i]);return s}function Lu(t,e){let s,i,o=Su[e-1],n=new Array(e).concat(t),r=new Array(n.length-o.length).concat(o),a=t.length,l=[];for(i=0;i<a;i++)s=Eu(r,xu[n[n.length-1]]),r.splice(0,1),n=Pu(s,n);for(i=n.length-1;i>=0;i--)l[e-1-i]=$d(n[i],8);return l}function Iu(t,e,s){let i=Qd(e),o=e.length-1,n=t<<o,r=$d(t,s-o),a=function(t,e){let s=e.toString(2).length,i=t.toString(2).length;let o=t;do{o^=e<<i-s,i=o.toString(2).length}while(i>=s);return o}(n,i);return a=r+$d(a,o),a}function Ru(t,e){return parseInt(t.charAt(e),10)}function Bu(t,e){let s,i,o=t[0],n=0,r=e.length;for(s=0,i=8;s<=8;s++)6!==s&&Cu(t,Ru(e,r-1-n++),s,i);for(s=8,i=7;i>=0;i--)6!==i&&Cu(t,Ru(e,r-1-n++),s,i);for(n=0,i=o.length-1,s=8;i>=o.length-8;i--)Cu(t,Ru(e,r-1-n++),s,i);for(Cu(t,1,o.length-8,8),s=o.length-7,i=8;s<o.length;s++)Cu(t,Ru(e,r-1-n++),s,i)}function Ou(t,e){let s,i,o,n=t[0].length,r=n-11,a=n-11;for(let n=0;n<e.length;n++)s=Math.floor(n/3),i=n%3,o=Ru(e,e.length-n-1),Cu(t,o,0+s,r+i),Cu(t,o,a+i,0+s)}function Vu(t,e,s,i){let o,n=e.length+2,r=e.length+1;for(let a=0;a<e.length;a++)for(let l=a;l<n-a;l++)o=e[a],Cu(t,o,s+l,i+a),Cu(t,o,s+a,i+l),Cu(t,o,s+r-l,i+r-a),Cu(t,o,s+r-a,i+r-l)}function Du(t,e,s,i){let o=s,n=i,r=t[0];do{Cu(t,0,o,i),Cu(t,0,s,n),o+=e[0],n+=e[1]}while(o>=0&&o<r.length)}function zu(t,e,s,i,o){e[t][i]=(e[t][i]<<1^o)%128,93===e[t][i]&&(s[t]+=40)}function Fu(t,e,s,i,o,n){s[t][n]===i?o[t][n]++:(s[t][n]=i,o[t][n]>=5&&(e[t]+=3+o[t][n]-5),o[t][n]=1)}function Hu(t,e){let s=Math.floor(t/e*100),i=s%5,o=Math.abs(s-i-50),n=Math.abs(s+5-i-50);return 10*Math.min(o/5,n/5)}function Nu(t,e,s){let i=function(t){return t&&t.toLowerCase().indexOf("utf_8")>=0?new mu:new gu}(s),o=i.getEncodingResult(t,e),n=o.version,r=uu[n-1][e],a=function(t,e){let s,i,o,n,r,a=0,l=[],h=[],c=e.groups;for(let d=0;d<c.length;d++){o=c[d][0];for(let u=0;u<o;u++){i=c[d][1],s=[],n=[];for(let e=1;e<=i;e++)r=t.substring(a,a+8),s.push(r),n[i-e]=Qd(r),a+=8;l.push(s),h.push(Lu(n,e.errorCodewordsPerBlock))}}return[l,h]}(function(t,e){let s=8*e,i=0,o=0;let n=t;for(;n.length<s&&i<4;)n+=fu.charAt(i++);for(n.length%8!=0&&(n+=new Array(9-n.length%8).join("0"));n.length<s;)n+=ku[o],o^=1;return n}(o.dataString,r.totalDataCodewords),r),l=function(t){let e=[],s=17+4*t;for(let t=0;t<Au.length;t++){e[t]=new Array(s);for(let i=0;i<s;i++)e[t][i]=new Array(s)}return e}(n);!function(t){let e=t[0].length;Vu(t,bu,0,0),Du(t,[-1,-1],7,7),Vu(t,bu,e-7,0),Du(t,[1,-1],e-8,7),Vu(t,bu,0,e-7),Du(t,[-1,1],7,e-8)}(l),function(t,e){if(e<2)return;let s,i,o=t[0],n=o.length,r=Math.floor(e/7),a=[6],l=0;for((s=vu[e])?i=(n-13-s)/r:s=i=(n-13)/(r+1),a.push(a[l++]+s);a[l]+i<n;)a.push(a[l++]+i);for(let e=0;e<a.length;e++)for(let s=0;s<a.length;s++)void 0===o[a[e]][a[s]]&&Vu(t,wu,a[e]-2,a[s]-2)}(l,n),function(t){let e=1,s=t[0].length;for(let i=8;i<s-8;i++)Cu(t,e,6,i),Cu(t,e,i,6),e^=1}(l),n>=7&&Ou(l,$d(0,18)),Bu(l,$d(0,15)),function(t,e){let s,i,o,n=new Kd(t[0]);for(let r=0;r<e.length;r++)for(s=e[r],i=0;s.length>0;){for(let e=0;e<s.length;e++)for(let r=0;r<8;r++)o=n.getNextCell(),Tu(t,s[e][i].charAt(r),o.row,o.column);for(i++;s[0]&&i===s[0].length;)s.splice(0,1)}for(;o=n.getNextRemainderCell();)Tu(t,0,o.row,o.column)}(l,a);let h=function(t){let e,s,i=[],o=[],n=[],r=[],a=[],l=t[0].length;for(s=0;s<t.length;s++)i[s]=0,n[s]=0,a[s]=[0,0],r[s]=[0,0],o[s]=[];for(let s=0;s<l;s++)for(let h=0;h<l;h++)for(let c=0;c<t.length;c++)e=t[c],n[c]+=parseInt(e[s][h],10),o[c][0]===e[s][h]&&s+1<l&&h-1>=0&&e[s+1][h]===o[c][0]&&e[s+1][h-1]===o[c][0]&&(i[c]+=3),zu(c,r,i,0,e[s][h]),zu(c,r,i,1,e[h][s]),Fu(c,i,o,e[s][h],a,0),Fu(c,i,o,e[h][s],a,1);let h,c=l*l,d=Number.MAX_VALUE;for(s=0;s<i.length;s++)i[s]+=Hu(n[s],c),i[s]<d&&(d=i[s],h=s);return h}(l),c=l[h];return n>=7&&Ou([c],function(t){return Iu(t,"1111100100101",18)}(n)),Bu([c],function(t){let e,s="";if(0===Qd(t))return"101010000010010";e=Iu(Qd(t),"10100110111",15);for(let t=0;t<e.length;t++)s+=e.charAt(t)^"101010000010010".charAt(t);return s}(_u[e]+$d(h,3))),c}!function(){let t;let e;for(e=1;e<255;e++)t=2*yu[e-1],t>255&&(t^=285),yu[e]=t,xu[t]=e;t=2*yu[e-1]^285,yu[e]=t,yu[-1]=0}(),function(){for(let t=2;t<=68;t++){let e=Su[t-1],s=[t,0];Su[t]=Mu(e,s)}}();const ju=Math.round;const Uu=[[0,1],[1,1],[1,2],[2,2],[2,1],[3,1],[3,0],[2,0],[2,-1],[1,-1],[1,0]];const Gu=[[0,1],[1,1],[1,0]];const Wu=200,Xu="L",Yu="#fff",qu="#000",Zu=1,$u=7;te(class{constructor(t,e,s=ve){this.options=ut({},this.options,e),this.element=t,this.wrapper=this.element,this.onError=s,this._initElement(),this._initSurface(),this.setOptions(e)}destroy(){this._destroySurface()}_initElement(){K(this.element,"k-qrcode")}_initSurface(){const{options:t,surface:e}=this;e&&e.options.type===t.renderAs||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())}_createSurface(){return e.k.create(this.surfaceElement,{type:this.options.renderAs})}_destroySurface(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())}_initSurfaceElement(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))}_destroySurfaceElement(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)}redraw(){let t=this._getSize();this.surface.clear(),this.surface.setSize({width:t,height:t}),this.createVisual(),this.surface.draw(this.visual)}getSize(){const t=this.element;const e=t.clientWidth;const s=t.clientHeight;const i={width:0,height:0};return e>0&&(i.width=e),s&&(i.height=s),i}_resize(){this.redraw()}createVisual(){this.visual=this._render()}exportVisual(){return this._render()}_render(){let t,s,i,o,n,r,a=this._value,l=this.options.border||{},h=this.options.padding||0,c=l.width||0;l.width=c;let d=new e.G;try{a&&(i=Nu(a,this.options.errorCorrection,this.options.encoding),o=this._getSize(),r=o-2*(c+h),t=this._calculateBaseUnit(r,i.length),n=i.length*t,s=c+h+(r-n)/2,d.append(this._renderBackground(o,l)),d.append(this._renderMatrix(i,t,s)),this._hasCustomLogo()?d.append(this._renderLogo(o,t)):this._isSwiss()&&d.append(this._renderSwissCode(o,t)))}catch(t){this.onError(t)}return d}_renderLogo(t,s){let i;let o;let n=ju(t/2);let r=this._getLogoSize(s*$u);let a=this.options.overlay.imageUrl;let l={x:n-r.width/2,y:n-r.height/2};return o=new e.R(new e.P(l.x,l.y),new e.o(r.width,r.height)),i=new e.I(a,o),i}_renderSwissCode(t,s){let i=this._getLogoSize(s*$u);i=Math.max(i.width,i.height);let o=i/4;let n=o/2;let r=t/2;let a={};let l=new e.G;return a.x=a.y=Math.ceil(r-s-i/2),l.append(this._renderShape(a,Math.ceil(i+2*s),Gu,"#fff")),a.x=a.y=r-i/2,l.append(this._renderShape(a,i,Gu,this.options.color)),a.x=r+n-i/2,a.y=r+n+o-i/2,l.append(this._renderShape(a,o,Uu,"#fff")),l}_renderShape(t,s,i,o){let n=new e.g({fill:{color:o},stroke:null});n.moveTo(t.x,t.y);for(let e=0;e<i.length;e++)n.lineTo(t.x+s*i[e][0],t.y+s*i[e][1]);return n.close(),n}_getSize(){let t;if(this.options.size)t=parseInt(this.options.size,10);else{const e=Yd(this.element,this.options.renderAs);const s=Math.min(e.width,e.height);t=s>0?s:Wu}return t}_calculateBaseUnit(t,e){let s=Math.floor(t/e);if(s<Zu){const s=Math.ceil(e*Zu);this.onError(new Error(`Insufficient size for QR Code: the current size is ${t}px and the minimum size is ${s}px.`))}else s*e>=t&&s-1>=Zu&&s--;return s}_renderMatrix(t,s,i){let o=new e.g({fill:{color:this.options.color},stroke:null});for(let e=0;e<t.length;e++){let n=i+e*s;let r=0;for(;r<t.length;){for(;0===t[e][r]&&r<t.length;)r++;if(r<t.length){let a=r;for(;1===t[e][r];)r++;let l=ju(i+a*s);let h=ju(n);let c=ju(i+r*s);let d=ju(n+s);o.moveTo(l,h).lineTo(l,d).lineTo(c,d).lineTo(c,h).close()}}}return o}_renderBackground(t,s){const i=new gs(0,0,t,t).unpad(s.width/2);return e.a.fromRect(i.toRect(),{fill:{color:this.options.background},stroke:{color:s.color,width:s.width}})}setOptions(t){let e=t||{};this.options=qd(this.options,e),void 0!==t.value&&(this._value=String(this.options.value)),this._initSurface(),this.redraw()}value(t){if(void 0===t)return this._value;this._value=String(t),this.redraw()}_hasCustomLogo(){return Boolean(this.options.overlay.imageUrl)}_isSwiss(){return"swiss"===this.options.overlay.type}_getLogoSize(t){let e=this.options.overlay.width;let s=this.options.overlay.height;return e||s?e&&!s?s=e:!e&&s&&(e=s):e=s=t,{width:e,height:s}}},{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:Xu,background:Yu,color:qu,size:"",padding:0,border:{color:"",width:0},overlay:{type:"image",imageUrl:"",width:0,height:0}});const Qu={WGS84:{a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149}};function Ku(t){return t*t}let Ju=Math,tp=Ju.abs,ep=Ju.atan,sp=Ju.atan2,ip=Ju.cos,op=Ju.sin,np=Ju.tan;class rp{constructor(t,e){this.initProperties(),1===arguments.length?(this.lat=t[0],this.lng=t[1]):(this.lat=t,this.lng=e)}initProperties(){ut(this,{DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6}{1:N6}"})}toArray(){return[this.lat,this.lng]}equals(t){return t&&t.lat===this.lat&&t.lng===this.lng}clone(){return new rp(this.lat,this.lng)}round(t){return this.lng=$t(this.lng,t),this.lat=$t(this.lat,t),this}wrap(){return this.lng=this.lng%180,this.lat=this.lat%90,this}distanceTo(t,e){return this.greatCircleTo(t,e).distance}destination(t,e,s){let i=Zt(e);let o=s||Qu.WGS84;let n=Zt(this.lat);let r=Zt(this.lng);let a=t/o.a;let l=Ju.asin(op(n)*ip(a)+ip(n)*op(a)*ip(i));let h=r+sp(op(i)*op(a)*ip(n),ip(a)-op(n)*op(l));return new rp(Ht(l),Ht(h))}greatCircleTo(t,e){let s=rp.create(s);let i=e||Qu.WGS84;if(!s||this.clone().round(8).equals(s.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};let o=i.a;let n=i.b;let r=i.f;let a=Zt(s.lng-this.lng);let l=ep((1-r)*np(Zt(this.lat)));let h=op(l);let c=ip(l);let d=ep((1-r)*np(Zt(s.lat)));let u=op(d);let p=ip(d);let g=a;let m;let f=this.DISTANCE_ITERATIONS;let x=!1;let y;let v;let b;let w;let _;let k;let A;for(;!x&&f-- >0;){y=op(g),v=ip(g),b=Ju.sqrt(Ku(p*y)+Ku(c*u-h*p*v)),_=h*u+c*p*v,A=sp(b,_);let t=c*p*y/b;w=1-Ku(t),k=0,0!==w&&(k=_-2*h*u/w),m=g;let e=r/16*w*(4+r*(4-3*w));g=a+(1-e)*r*t*(A+e*b*(k+e*_*(2*Ku(k)-1))),x=tp(g-m)<=this.DISTANCE_CONVERGENCE}let S=w*(Ku(o)-Ku(n))/Ku(n);let C=1+S/16384*(4096+S*(S*(320-175*S)-768));let T=S/1024*(256+S*(S*(74-47*S)-128));let P=T*b*(k+T/4*(_*(2*Ku(k)-1)-T/6*k*(4*Ku(b)-3)*(4*Ku(k)-3)));let M=sp(p*y,c*u-h*p*v);let E=sp(c*y,-h*p+c*u*v);return{distance:$t(n*C*(A-P),this.DISTANCE_PRECISION),azimuthFrom:Ht(M),azimuthTo:Ht(E)}}toString(){return String(this.lat)+","+String(this.lng)}static fromLngLat(t){return new rp(t[1],t[0])}static fromLatLng(t){return new rp(t[0],t[1])}static create(t,e){if(Ft(t))return t instanceof rp?t.clone():1===arguments.length&&2===t.length?rp.fromLatLng(t):new rp(t,e)}}let ap=Math,lp=ap.atan,hp=ap.exp,cp=ap.pow,dp=ap.sin,up=ap.log,pp=ap.tan,gp=e.P;let mp=ap.PI,fp=mp/2,xp=mp/4,yp=mp/180;let vp=Qu.WGS84;class bp{constructor(t){this.initProperties(),this._initOptions(t)}_initOptions(t){this.options=ut({},this.options,t)}initProperties(){ut(this,{MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12})}forward(t,e){let s=this,i=s.options,o=i.datum.a,n=i.centralMeridian,r=Yt(t.lat,-s.MAX_LAT,s.MAX_LAT),a=e?Yt(t.lng,-s.MAX_LNG,s.MAX_LNG):t.lng,l=Zt(a-n)*o,h=s._projectLat(r);return new gp(l,h)}_projectLat(t){let e=this.options.datum,s=e.e,i=e.a,o=Zt(t),n=pp(xp+o/2),r=s*dp(o),a=cp((1-r)/(1+r),s/2);return i*up(n*a)}inverse(t,e){let s=this,i=s.options,o=i.datum.a,n=i.centralMeridian,r=t.x/(yp*o)+n,a=Yt(s._inverseY(t.y),-s.MAX_LAT,s.MAX_LAT);return e&&(r=Yt(r,-s.MAX_LNG,s.MAX_LNG)),new rp(a,r)}_inverseY(t){let e,s=this,i=s.options.datum,o=i.a,n=i.e,r=n/2,a=hp(-t/o),l=fp-2*lp(a);for(e=0;e<=s.INVERSE_ITERATIONS;e++){let t=n*dp(l),e=cp((1-t)/(1+t),r),i=fp-2*lp(a*e)-l;if(l+=i,ap.abs(i)<=s.INVERSE_CONVERGENCE)break}return Ht(l)}}te(bp,{centralMeridian:0,datum:vp});class wp extends bp{initProperties(){super.initProperties(),ut(this,{MAX_LAT:85.0511287798})}_projectLat(t){let e=this.options.datum.a,s=Zt(t),i=pp(xp+s/2);return e*up(i)}_inverseY(t){let e=this.options.datum.a,s=hp(-t/e);return Ht(fp-2*lp(s))}}class _p{constructor(){let t=this._proj=new wp;let s=this.c=2*mp*t.options.datum.a;this._tm=e.t().translate(.5,.5).scale(1/s,-1/s),this._itm=e.t().scale(s,-s).translate(-.5,-.5)}toPoint(t,e,s){return this._proj.forward(t,s).transform(this._tm).scale(e||1)}toLocation(t,e,s){let i=t.clone().scale(1/(e||1)).transform(this._itm);return this._proj.inverse(i,s)}}Object.assign;const kp=(t,e)=>t.bind(e);let Ap=t=>{const e=document.createElement("div");return e.innerHTML=t,e.firstChild};let Sp=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)};let Cp=(t,e)=>{e.insertBefore(t,e.firstChild)};let Tp=t=>t.replace(/([a-z][A-Z])/g,(function(t){return t.charAt(0)+"-"+t.charAt(1).toLowerCase()}));let Pp=t=>{let e;return e=t&&String(t).endsWith("px")?t:String(t)+"px",e};const Mp=(t,e)=>{const s=t.prototype;s.events?e.forEach((t=>{s.events.indexOf(t)<0&&s.events.push(t)})):s.events=e};const Ep=t=>{let e=[];if(t){let s=Tp(t).split("-");for(let t=0;t<s.length;t++)e.push("k-pos-"+s[t])}return e.join(" ")};class Lp extends je{constructor(t,e){super(),this.element=t,this._initOptions(e),this.items=[],K(this.element,"k-widget k-attribution")}_initOptions(t){this.options=ut({},this.options,t)}filter(t,e){this._extent=t,this._zoom=e,this._render()}add(t){let e=t;Ft(t)&&("string"==typeof t&&(e={text:t}),this.items.push(e),this._render())}remove(t){let e=[];for(let s=0;s<this.items.length;s++){let i=this.items[s];i.text!==t&&e.push(i)}this.items=e,this._render()}clear(){this.items=[],Sp(this.element)}_render(){let t=[];for(let e=0;e<this.items.length;e++){let s=this.items[e];let i=this._itemText(s);""!==i&&t.push(i)}if(t.length>0){Sp(this.element);((t,e)=>{const s=document.createElement("div");for(s.innerHTML=t;s.childNodes.length>0;)e.appendChild(s.childNodes[0])})(t.join(this.options.separator),this.element),this.showElement()}else this.hideElement()}hideElement(){this.element.style.display="none"}showElement(){this.element.style.display=""}_itemText(t){let e="";let s=this._inZoomLevel(t.minZoom,t.maxZoom);let i=this._inArea(t.extent);return s&&i&&(e+=t.text),e}_inZoomLevel(t,e){let s=!0;let i=Kt(t,-Number.MAX_VALUE);let o=Kt(e,Number.MAX_VALUE);return s=this._zoom>i&&this._zoom<o,s}_inArea(t){let e=!0;return t&&(e=t.contains(this._extent)),e}}te(Lp,{name:"Attribution",separator:"&nbsp;|&nbsp;"});const Ip={up:{className:"k-navigator-n",iconClass:"k-i-caret-alt-up"},down:{className:"k-navigator-s",iconClass:"k-i-caret-alt-down"},right:{className:"k-navigator-e",iconClass:"k-i-caret-alt-right"},left:{className:"k-navigator-w",iconClass:"k-i-caret-alt-left"}};function Rp(t,e){const s='<button type="button" class="k-button k-button-square k-rounded-full k-button-flat k-button-flat-base k-icon-button '+Ip[t].className+'" aria-label="move '+t+'">'+ae({icon:`caret-alt-${t}`,iconClass:"k-button-icon",svgIcons:e.svgIcons,type:e.type})+"</button>";return Ap(s)}class Bp extends je{constructor(t,e){super(),this.element=t,this._initOptions(e);const s=Rp("up",e.icons);const i=Rp("right",e.icons);const o=Rp("down",e.icons);const n=Rp("left",e.icons);this.element.appendChild(s),this.element.appendChild(i),this.element.appendChild(o),this.element.appendChild(n),K(this.element,"k-widget k-navigator"),Ie(this.element,"click",".k-button",kp(this._click,this));let r=this.element.parentNode.closest("[data-role]");this._keyroot=r||this.element,this._tabindex(this._keyroot),this._keydownHandler=kp(this._keydown,this),Ie(this._keyroot,"keydown",this._keydownHandler)}destroy(){this.dispose()}dispose(){Re(this._keyroot,"keydown",this._keydownHandler)}_tabindex(t){const e=t||this.wrapper||this.element;let s=this.element,i="tabindex",o=e.getAttribute(i)||s.getAttribute(i);s.removeAttribute(i),e.setAttribute(i,isNaN(o)?0:o)}_initOptions(t){this.options=ut({},this.options,t)}_pan(t,e){let s=this.options.panStep;this.trigger("pan",{x:t*s,y:e*s})}_click(t){let e=0;let s=0;let i=t.currentTarget;i.matches(".k-navigator-n")?s=1:i.matches(".k-navigator-s")?s=-1:i.matches(".k-navigator-e")?e=1:i.matches(".k-navigator-w")&&(e=-1),this._pan(e,s),t.preventDefault()}_keydown(t){switch(t.which){case be.UP:this._pan(0,1),t.preventDefault();break;case be.DOWN:this._pan(0,-1),t.preventDefault();break;case be.RIGHT:this._pan(1,0),t.preventDefault();break;case be.LEFT:this._pan(-1,0),t.preventDefault()}}}function Op(t,e,s){const i='<button type="button" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-zoom-'+t+'" title="zoom-'+t+'" aria-label="zoom-'+t+'">'+ae({icon:e,iconClass:"k-button-icon",svgIcons:s.svgIcons,type:s.type})+"</button>";return Ap(i)}te(Bp,{name:"Navigator",panStep:1}),Mp(Bp,["pan"]);const Vp="change";class Dp extends je{constructor(t,e,s){super(),this.element=t,this._initOptions(e);const i=Op("in","plus",s);const o=Op("out","minus",s);this.element.appendChild(i),this.element.appendChild(o),this.element.setAttribute("role","group"),K(this.element,"k-widget k-zoom-control k-button-group k-group-horizontal"),this._clickHandler=this._click.bind(this),Ie(this.element,"click",".k-button",this._clickHandler);let n=this.element.parentNode.closest("[data-role]");this._keyroot=n||this.element,this._tabindex(this._keyroot),this._keydownHandler=this._keydown.bind(this),Ie(this._keyroot,"keydown",this._keydownHandler)}destroy(){this.element&&Re(this.element,"click",this._clickHandler),this._keyroot&&Re(this._keyroot,"keydown",this._keydownHandler)}_tabindex(t){const e=t||this.wrapper||this.element;let s=this.element,i="tabindex",o=e.getAttribute(i)||s.getAttribute(i);s.removeAttribute(i),e.setAttribute(i,isNaN(o)?0:o)}_initOptions(t){this.options=ut({},this.options,t)}_change(t){let e=this.options.zoomStep;this.trigger(Vp,{delta:t*e})}_click(t){let e=1;Tt(t.currentTarget,"k-zoom-out")&&(e=-1),this._change(e),t.preventDefault()}_keydown(t){switch(t.which){case be.NUMPAD_PLUS:case 187:case 61:this._change(1);break;case be.NUMPAD_MINUS:case 189:case 173:this._change(-1)}}}te(Dp,{name:"ZoomControl",zoomStep:1}),Mp(Dp,[Vp]);let zp=Math,Fp=zp.max,Hp=zp.min;class Np{constructor(t,e){let s=rp.create(t);let i=rp.create(e);s.lng+180>i.lng+180&&s.lat+90<i.lat+90?(this.se=s,this.nw=i):(this.se=i,this.nw=s)}contains(t){let e=this.nw,s=this.se,i=Kt(t.lng,t[1]),o=Kt(t.lat,t[0]);return t&&i+180>=e.lng+180&&i+180<=s.lng+180&&o+90>=s.lat+90&&o+90<=e.lat+90}center(){let t=this.nw;let e=this.se;let s=t.lng+(e.lng-t.lng)/2;let i=t.lat+(e.lat-t.lat)/2;return new rp(i,s)}containsAny(t){let e=!1;for(let s=0;s<t.length;s++)e=e||this.contains(t[s]);return e}include(t){let e=this.nw,s=this.se,i=Kt(t.lng,t[1]),o=Kt(t.lat,t[0]);e.lng=Hp(e.lng,i),e.lat=Fp(e.lat,o),s.lng=Fp(s.lng,i),s.lat=Hp(s.lat,o)}includeAll(t){for(let e=0;e<t.length;e++)this.include(t[e])}edges(){let t=this.nw,e=this.se;return{nw:this.nw,ne:new rp(t.lat,e.lng),se:this.se,sw:new rp(e.lat,t.lng)}}toArray(){let t=this.nw,e=this.se;return[t,new rp(t.lat,e.lng),e,new rp(e.lat,t.lng)]}overlaps(t){return this.containsAny(t.toArray())||t.containsAny(this.toArray())}static create(t,e){return t instanceof Np?t:t&&e?new Np(t,e):t&&4===t.length&&!e?new Np([t[0],t[1]],[t[2],t[3]]):void 0}static get World(){return new Np([90,-180],[-90,180])}}const jp="centerChange";class Up{constructor(t,e){this.widgetService=t,this.options=ut({},this.options,e),this.offset={x:0,y:0}}show(t,e){this.location!==e.location&&(this.anchor=t,this.location=e.location,this.widgetService.notify("showTooltip",Object.assign({anchor:this.anchor},e)),this.visible=!0)}hide(){this.widgetService&&this.widgetService.notify("hideTooltip"),this.visible=!1,this.location=null}get anchor(){return this._anchor}set anchor(t){const e=this.widgetService.widget._toDocumentCoordinates({x:t.left-this.offset.x,y:t.top-this.offset.y});this._anchor={left:e.left,top:e.top}}destroy(){this.widgetService=null}}te(Up,{border:{width:1},opacity:1});class Gp{constructor(t,e){this.support=Be(),this._initOptions(e),this.map=t;let s=document.createElement("div");K(s,"k-layer"),s.style.zIndex=this.options.zIndex,s.style.opacity=this.options.opacity,this.element=s,t.scrollElement.appendChild(this.element),this._beforeReset=this._beforeReset.bind(this),this._reset=this._reset.bind(this),this._resize=this._resize.bind(this),this._panEnd=this._panEnd.bind(this),this._activate(),this._updateAttribution()}destroy(){this._deactivate()}_initOptions(t){this.options=ut({},this.options,t)}show(){this.reset(),this._activate(),this._applyExtent(!0)}hide(){this._deactivate(),this._setVisibility(!1)}reset(){this._beforeReset(),this._reset()}_reset(){this._applyExtent()}_beforeReset(){}_resize(){}_panEnd(){this._applyExtent()}_applyExtent(){let t=this.options;let e=this.map.zoom();let s=!Ft(t.minZoom)||e>=t.minZoom;let i=!Ft(t.maxZoom)||e<=t.maxZoom;let o=Np.create(t.extent);let n=!o||o.overlaps(this.map.extent());this._setVisibility(s&&i&&n)}_setVisibility(t){this.element.style.display=t?"":"none"}_activate(){let t=this.map;this._deactivate(),t.bind("beforeReset",this._beforeReset),t.bind("reset",this._reset),t.bind("resize",this._resize),t.bind("panEnd",this._panEnd)}_deactivate(){let t=this.map;t.unbind("beforeReset",this._beforeReset),t.unbind("reset",this._reset),t.unbind("resize",this._resize),t.unbind("panEnd",this._panEnd)}_updateAttribution(){const t=this.map.attribution;t&&t.add(this.options.attribution)}_readData(){return this.options.data||[]}_hasData(){return this._data&&this._data.length>0}_layerIndex(){return(this.map.layers||[]).indexOf(this)}}let Wp=Math,Xp=e.P;function Yp(t){return ht(t)?t:bt.compile(t)}function qp(t){return new Xp($t(t.x),$t(t.y))}function Zp(t){let e=t;return"string"!=typeof t&&(e+="px"),e}class $p extends Gp{constructor(t,e){super(t,e),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));let s=this._viewType();this._view=new s(this.element,this.options)}destroy(){super.destroy(),this._view.destroy(),this._view=null}_beforeReset(){let t=this.map;let e=t.locationToLayer(t.extent().nw).round();this._view.viewOrigin(e)}_reset(){super._reset(),this._updateView(),this._view.reset()}_viewType(){return Qp}_activate(){super._activate(),this.support.mobileOS||(this._pan||(this._pan=e.n(this._render.bind(this),100)),this.map.bind("pan",this._pan))}_deactivate(){super._deactivate(),this._pan&&this.map.unbind("pan",this._pan)}_updateView(){let t=this._view,e=this.map,s=e.extent(),i={nw:e.locationToLayer(s.nw).round(),se:e.locationToLayer(s.se).round()};t.center(e.locationToLayer(e.center())),t.extent(i),t.zoom(e.zoom())}_resize(){this._render()}_panEnd(t){super._panEnd(t),this._render()}_render(){this._updateView(),this._view.render()}}te($p,{tileSize:256,subdomains:["a","b","c"],urlTemplate:"",zIndex:1});class Qp{constructor(t,e){this.element=t,this._initOptions(e),this.pool=new Jp}_initOptions(t){this.options=ut({},this.options,t)}center(t){this._center=t}extent(t){this._extent=t}viewOrigin(t){this._viewOrigin=t}zoom(t){this._zoom=t}pointToTileIndex(t){return new Xp(Wp.floor(t.x/this.options.tileSize),Wp.floor(t.y/this.options.tileSize))}tileCount(){let t=this.size(),e=this.pointToTileIndex(this._extent.nw),s=this._extent.nw,i=this.indexToPoint(e).translate(-s.x,-s.y);return{x:Wp.ceil((Wp.abs(i.x)+t.width)/this.options.tileSize),y:Wp.ceil((Wp.abs(i.y)+t.height)/this.options.tileSize)}}size(){let t=this._extent.nw,e=this._extent.se.clone().translate(-t.x,-t.y);return{width:e.x,height:e.y}}indexToPoint(t){let e=t.x,s=t.y;return new Xp(e*this.options.tileSize,s*this.options.tileSize)}subdomainText(){let t=this.options.subdomains;return t[this.subdomainIndex++%t.length]}destroy(){Sp(this.element),this.pool.empty()}reset(){this.pool.reset(),this.subdomainIndex=0,this.render()}render(){let t,e,s,i=this.tileCount(),o=this.pointToTileIndex(this._extent.nw);for(e=0;e<i.x;e++)for(s=0;s<i.y;s++)t=this.createTile({x:o.x+e,y:o.y+s}),t.visible||t.show()}createTile(t){let e=this.tileOptions(t);let s=this.pool.get(this._center,e);return s.element.parentNode||this.element.append(s.element),s}tileOptions(t){let e=this.wrapIndex(t),s=this.indexToPoint(t),i=this._viewOrigin,o=s.clone().translate(-i.x,-i.y);return{index:e,currentIndex:t,point:s,offset:qp(o),zoom:this._zoom,size:this.options.tileSize,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}}wrapIndex(t){let e=Wp.pow(2,this._zoom);return{x:this.wrapValue(t.x,e),y:Yt(t.y,0,e-1)}}wrapValue(t,e){let s=Wp.abs(t)%e;let i=t;return i=t>=0?s:e-(0===s?e:s),i}}class Kp{constructor(t,e){this.id=t,this.visible=!0,this._initOptions(e),this.createElement(),this.show()}destroy(){const t=this.element;const e=t?t.parentNode:null;t&&(e&&e.removeChild(t),this.element=null)}_initOptions(t){this.options=ut({},this.options,t)}createElement(){let t=document.createElement("img");const e=this.options.size+"px";t.setAttribute("alt",""),t.style.position="absolute",t.style.display="block",t.style.width=t.style.maxWidth=e,t.style.height=t.style.maxHeight=e,this.element=t}show(){let t=this.element;t.style.top=Zp(this.options.offset.y),t.style.left=Zp(this.options.offset.x);let e=this.url();e&&t.setAttribute("src",e),t.style.visibility="visible",this.visible=!0}hide(){this.element.style.visibility="hidden",this.visible=!1}url(){return Yp(this.options.urlTemplate)(this.urlOptions())}errorUrl(){return Yp(this.options.errorUrlTemplate)(this.urlOptions())}urlOptions(){let t=this.options;return{zoom:t.zoom,subdomain:t.subdomain,z:t.zoom,x:t.index.x,y:t.index.y,s:t.subdomain,quadkey:t.quadkey,q:t.quadkey,culture:t.culture,c:t.culture}}}te(Kp,{urlTemplate:"",errorUrlTemplate:""});class Jp{constructor(){this._items=[]}get(t,e){return this._items.length>=this.options.maxSize&&this._remove(t),this._create(e)}empty(){let t=this._items;for(let e=0;e<t.length;e++)t[e].destroy();this._items=[]}reset(){let t=this._items;for(let e=0;e<t.length;e++)t[e].hide()}_create(t){let e=this._items;let s;let i=Wt(t.point.toString()+t.offset.toString()+t.zoom+t.urlTemplate);for(let t=0;t<e.length;t++)if(e[t].id===i){s=e[t];break}return s?s.show():(s=new Kp(i,t),this._items.push(s)),s}_remove(t){let e=this._items;let s=-1;let i=-1;for(let o=0;o<e.length;o++){let n=e[o].options.point.distanceTo(t);n>s&&!e[o].visible&&(i=o,s=n)}-1!==i&&(e[i].destroy(),e.splice(i,1))}}te(Jp,{maxSize:100});const tg=Object.assign;const eg="change";class sg extends je{constructor(t,e){super();let s=this,i=t[0]||t;s.capture=!1,i.addEventListener?(Ae.down.split(" ").forEach((function(t){i.addEventListener(t,kp(s._press,s),!0)})),Ae.up.split(" ").forEach((function(t){i.addEventListener(t,kp(s._release,s),!0)}))):(Ae.down.split(" ").forEach((function(t){i.attachEvent(t,kp(s._press,s))})),Ae.up.split(" ").forEach((function(t){i.attachEvent(t,kp(s._release,s))}))),s.bind(["press","release"],e||{})}captureNext(){this.capture=!0}cancelCapture(){this.capture=!1}_press(t){this.trigger("press"),this.capture&&t.preventDefault()}_release(t){let e=this;e.trigger("release"),e.capture&&(t.preventDefault(),e.cancelCapture())}}class ig extends je{constructor(t){super();let e=this;e.forcedEnabled=!1,tg(e,t),e.scale=1,e.horizontal?(e.measure="offsetWidth",e.scrollSize="scrollWidth",e.axis="x"):(e.measure="offsetHeight",e.scrollSize="scrollHeight",e.axis="y")}makeVirtual(){tg(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})}virtualSize(t,e){this._virtualMin===t&&this._virtualMax===e||(this._virtualMin=t,this._virtualMax=e,this.update())}outOfBounds(t){return t>this.max||t<this.min}forceEnabled(){this.forcedEnabled=!0}getSize(){return this.container[this.measure]}getTotal(){return this.element[this.scrollSize]}rescale(t){this.scale=t}update(t){let e=this,s=e.virtual?e._virtualMax:e.getTotal(),i=s*e.scale,o=e.getSize();(0!==s||e.forcedEnabled)&&(e.max=e.virtual?-e._virtualMin:0,e.size=o,e.total=i,e.min=Math.min(e.max,o-i),e.minScale=o/s,e.centerOffset=(i-o)/2,e.enabled=e.forcedEnabled||i>o,t||e.trigger(eg,e))}}class og extends je{constructor(t){super();let e=this;e.x=new ig(tg({horizontal:!0},t)),e.y=new ig(tg({horizontal:!1},t)),e.container=t.container,e.forcedMinScale=t.minScale,e.maxScale=t.maxScale||100,e.bind(eg,t)}rescale(t){this.x.rescale(t),this.y.rescale(t),this.refresh()}centerCoordinates(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}}refresh(){let t=this;t.x.update(),t.y.update(),t.enabled=t.x.enabled||t.y.enabled,t.minScale=t.forcedMinScale||Math.min(t.x.minScale,t.y.minScale),t.fitScale=Math.max(t.x.minScale,t.y.minScale),t.trigger(eg)}}class ng extends je{constructor(t){super(),tg(this,t)}outOfBounds(){return this.dimension.outOfBounds(this.movable[this.axis])}dragMove(t){let e=this,s=e.dimension,i=e.axis,o=e.movable,n=o[i]+t;if(!s.enabled)return;let r=t;(n<s.min&&t<0||n>s.max&&t>0)&&(r*=e.resistance),o.translateAxis(i,r),e.trigger(eg,e)}}class rg{constructor(t){let e,s,i,o,n=this;tg(n,{elastic:!0},t),i=n.elastic?.5:0,o=n.movable,n.x=e=new ng({axis:"x",dimension:n.dimensions.x,resistance:i,movable:o}),n.y=s=new ng({axis:"y",dimension:n.dimensions.y,resistance:i,movable:o}),n.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart(t){n.gesture=t,n.offset=Nt(n.dimensions.container)},press(t){const e=t.event.target.closest("a");e&&e.matches("[data-navigate-on-press=true]")&&t.sender.cancel()},gesturechange(t){let i,r=n.gesture,a=r.center,l=t.center,h=t.distance/r.distance,c=n.dimensions.minScale,d=n.dimensions.maxScale;o.scale<=c&&h<1&&(h+=.8*(1-h)),o.scale*h>=d&&(h=d/o.scale);let u=o.x+n.offset.left,p=o.y+n.offset.top;i={x:(u-a.x)*h+l.x-u,y:(p-a.y)*h+l.y-p},o.scaleWith(h),e.dragMove(i.x),s.dragMove(i.y),n.dimensions.rescale(o.scale),n.gesture=t,t.preventDefault()},move(t){t.event.target.tagName.match(/textarea|input/i)||(e.dimension.enabled||s.dimension.enabled?(e.dragMove(t.x.delta),s.dragMove(t.y.delta),t.preventDefault()):t.touch.skip())},end(t){t.preventDefault()}})}}let ag=function(t,e,s){return"translate3d("+t+"px,"+e+"px,0) scale("+s+")"};class lg extends je{constructor(t){super();let e=this;e.element=t,e.element.style.transformOrigin="left top",e.x=0,e.y=0,e.scale=1;const s=ag(e.x,e.y,e.scale);e.element.style.transform=s,e._saveCoordinates(s)}translateAxis(t,e){this[t]+=e,this.refresh()}scaleTo(t){this.scale=t,this.refresh()}scaleWith(t){this.scale*=t,this.refresh()}translate(t){this.x+=t.x,this.y+=t.y,this.refresh()}moveAxis(t,e){this[t]=e,this.refresh()}moveTo(t){tg(this,t),this.refresh()}refresh(){let t,e=this,s=e.x,i=e.y;e.round&&(s=Math.round(s),i=Math.round(i)),t=ag(s,i,e.scale),t!==e.coordinates&&(e.element.style.transform=t,e._saveCoordinates(t),e.trigger(eg))}_saveCoordinates(t){this.coordinates=t}}const hg=e.G;class cg extends Gp{constructor(t,s){super(t,s),this._pan=kp(this._pan,this),this.surface=e.k.create(this.element,{width:t.scrollElement.clientWidth,height:t.scrollElement.clientHeight}),this._initRoot(),this.movable=new lg(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this.surface.bind("mouseenter",this._mouseenter.bind(this))}destroy(){super.destroy(),this.surface.destroy()}_reset(){super._reset(),this._translateSurface(),this._data=this._readData(),this._hasData()&&this._load(this._data)}_initRoot(){this._root=new hg,this.surface.draw(this._root)}_beforeReset(){this.surface.clear(),this._initRoot()}_resize(){this.surface.size(this.map.size())}_readData(){const t=super._readData();return"FeatureCollection"===t.type?t.features:"GeometryCollection"===t.type?t.geometries:t}_load(t){this._data=t,this._clearMarkers(),this._loader||(this._loader=new dg(this.map,this.options.style,this));let e=new hg;for(let s=0;s<t.length;s++){let i=this._loader.parse(t[s]);i&&e.append(i)}this._root.clear(),this._root.append(e)}shapeCreated(t){let s=!1;if(t instanceof e.e&&this.map.options.renderPointsAsMarkers&&(s=Ft(this._createMarker(t))),!s){let e={layer:this,shape:t};s=this.map.trigger("shapeCreated",e)}return s}featureCreated(t){t.layer=this,this.map.trigger("shapeFeatureCreated",t)}_createMarker(t){let e=this.map.markers.bind({location:t.location},t.dataItem);return e&&this._markers.push(e),e}_clearMarkers(){for(let t=0;t<this._markers.length;t++)this.map.markers.remove(this._markers[t]);this._markers=[]}_pan(){this._panning||(this._panning=!0,this.surface.suspendTracking())}_panEnd(t){super._panEnd(t),this._translateSurface(),this.surface.resumeTracking(),this._panning=!1}_translateSurface(){let t=this.map;let e=t.locationToView(t.extent().nw);this.surface.translate&&(this.surface.translate(e),this.movable.moveTo({x:e.x,y:e.y}))}_eventArgs(t){return{layer:this,layerIndex:this._layerIndex(),shape:t.element,shapeIndex:(this._data||[]).indexOf(t.element.dataItem),originalEvent:t.originalEvent}}_handler(t){return e=>{e.element&&this.map.trigger(t,this._eventArgs(e))}}_mouseenter(t){if(!t.element)return;this.map.trigger("shapeMouseEnter",this._eventArgs(t));const e=t.element;const s=this._tooltipAnchor(t);this.map._tooltip.show(s,this._tooltipContext(e))}_tooltipContext(t){return{type:"shape",layerIndex:this._layerIndex(),className:"k-map-shape-tooltip",dataItem:t.dataItem,location:t.location}}_tooltipAnchor(t){const e=this.map.eventOffset(t.originalEvent);return{top:e.y,left:e.x}}_activate(){super._activate(),this._panHandler=kp(this._pan,this),this.map.bind("pan",this.panHandler)}_deactivate(){super._deactivate(),this.map.unbind("pan",this._panHandler)}}te(cg,{autoBind:!0,zIndex:100});class dg{constructor(t,e,s){this.observer=s,this.locator=t,this.style=e}parse(t){let e=new hg;let s=!0;return"Feature"===t.type?(s=!1,this._loadGeometryTo(e,t.geometry,t),this._featureCreated(e,t)):this._loadGeometryTo(e,t,t),s&&e.children.length<2&&(e=e.children[0]),e}_shapeCreated(t){let e=!1;return this.observer&&this.observer.shapeCreated&&(e=this.observer.shapeCreated(t)),e}_featureCreated(t,e){this.observer&&this.observer.featureCreated&&this.observer.featureCreated({group:t,dataItem:e,properties:e.properties})}_loadGeometryTo(t,e,s){let i=e.coordinates;let o;let n;switch(e.type){case"LineString":n=this._loadPolygon(t,[i],s),this._setLineFill(n);break;case"MultiLineString":for(o=0;o<i.length;o++)n=this._loadPolygon(t,[i[o]],s),this._setLineFill(n);break;case"Polygon":this._loadPolygon(t,i,s);break;case"MultiPolygon":for(o=0;o<i.length;o++)this._loadPolygon(t,i[o],s);break;case"Point":this._loadPoint(t,i,s);break;case"MultiPoint":for(o=0;o<i.length;o++)this._loadPoint(t,i[o],s)}}_setLineFill(t){let e=t.segments;(e.length<4||!e[0].anchor().equals(Xt(e).anchor()))&&(t.options.fill=null)}_loadShape(t,e){return this._shapeCreated(e)||t.append(e),e}_loadPolygon(t,e,s){let i=this._buildPolygon(e);return i.dataItem=s,i.location=this.locator.viewToLocation(i.bbox().center()),this._loadShape(t,i)}_buildPolygon(t){let s=new(t.length>1?e.g:e.a)(this.style);for(let e=0;e<t.length;e++)for(let i=0;i<t[e].length;i++){let o=this.locator.locationToView(rp.fromLngLat(t[e][i]));0===i?s.moveTo(o.x,o.y):s.lineTo(o.x,o.y)}return s}_loadPoint(t,s,i){let o=rp.fromLngLat(s);let n=this.locator.locationToView(o);let r=new e.f(n,10);let a=new e.e(r,this.style);return a.dataItem=i,a.location=o,this._loadShape(t,a)}}class ug extends cg{_readData(){return this.options.data||[]}_load(t){if(this._data=t,this.surface.clear(),0===t.length)return;let e=this.options;let s=St(e.valueField);let i=t.slice(0);i.sort((function(t,e){return s(e)-s(t)}));let o=this._scaleType();let n;let r=St(this.options.locationField);for(let t=0;t<i.length;t++){let a=i[t];let l=r(a);let h=s(a);if(Ft(l)&&Ft(h)){n||(n=new o([0,h],[e.minSize,e.maxSize])),l=rp.create(l);let t=this.map.locationToView(l);let s=n.map(h);let i=this._createSymbol({center:t,size:s,style:e.style,dataItem:a,location:l});i.dataItem=a,i.location=l,i.value=h,this._drawSymbol(i)}}}_scaleType(){let t=this.options.scale;return ht(t)?t:pg[t]}_createSymbol(t){let e=this.options.symbol;return ht(e)||(e=gg[e]),e(t)}_drawSymbol(t){let e={layer:this,shape:t};this.map.trigger("shapeCreated",e)||this.surface.draw(t)}_tooltipContext(t){return{type:"bubble",layerIndex:this._layerIndex(),className:"k-map-bubble-tooltip",dataItem:t.dataItem,location:t.location,value:t.value}}_tooltipAnchor(t){const e=t.element.bbox().center();return{top:e.y,left:e.x}}}te(ug,{locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle",zIndex:200});let pg={sqrt:class{constructor(t,e){this._domain=t,this._range=e;let s=Math.sqrt(t[1])-Math.sqrt(t[0]);let i=e[1]-e[0];this._ratio=i/s}map(t){let e=(Math.sqrt(t)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+e}}};let gg={circle:function(t){let s=new e.f(t.center,t.size/2);return new e.e(s,t.style)},square:function(t){let s=new e.a(t.style);let i=t.size/2;let o=t.center;return s.moveTo(o.x-i,o.y-i).lineTo(o.x+i,o.y-i).lineTo(o.x+i,o.y+i).lineTo(o.x-i,o.y+i).close(),s}};const mg="click";const fg="mouseenter";const xg="mouseleave";const yg=Object.assign;const vg="k-marker";const bg="."+vg;class wg extends Gp{constructor(t,e){super(t,e),this._markerClickHandler=kp(this._markerClick,this),Ie(this.element,mg,bg,this._markerClickHandler),this.items=[],this._load(this._readData())}destroy(){super.destroy(),Re(this.element,mg,this._markerClickHandler),this.clear()}add(t){if(!Q(t))return this._addOne(t);for(let e=0;e<t.length;e++)this._addOne(t[e])}remove(t){t.destroy();let e=(this.items||[]).indexOf(t);e>-1&&this.items.splice(e,1)}clear(){for(let t=0;t<this.items.length;t++)this.items[t].destroy();this.items=[]}update(t){let e=t.location();if(e){t.showAt(this.map.locationToView(e));let s={marker:t,layer:this};this.map.trigger("markerActivate",s)}}_reset(){super._reset();let t=this.items;for(let e=0;e<t.length;e++)this.update(t[e])}bind(t,e){let s=_g.create(t,this.options);s.dataItem=e;let i={marker:s,layer:this};if(!this.map.trigger("markerCreated",i))return this.add(s),s}_addOne(t){let e=_g.create(t,this.options);return e.addTo(this),e}_readData(){return this.options.data||[]}_load(t){this._data=t,this.clear();let e=St(this.options.locationField);let s=St(this.options.titleField);for(let i=0;i<t.length;i++){let o=t[i];this.bind({location:e(o),title:s(o)},o)}}_markerClick(t){const e=t.currentTarget._kendoNode;let s={layer:this,layerIndex:this._layerIndex(),marker:e,markerIndex:(this.items||[]).indexOf(e),originalEvent:t};this.map.trigger("markerClick",s)}_markerMouseEnter(t){const e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseEnter",e)}_markerMouseLeave(t){const e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseLeave",e)}_createMarkerEventArgs(t){const e=t.marker;return yg({},{layer:this,layerIndex:this._layerIndex(),marker:e,markerIndex:(this.items||[]).indexOf(e)},t)}}te(wg,{zIndex:1e3,autoBind:!0,locationField:"location",titleField:"title",template:""});class _g{constructor(t){this.options=t||{}}destroy(){this.layer=null,this.unbindEvents(),this.hide()}addTo(t){this.layer=t.markers||t,this.layer.items.push(this),this.layer.update(this)}location(t){return t?(this.options.location=rp.create(t).toArray(),this.layer&&this.layer.update(this),this):rp.create(this.options.location)}showAt(t){this.render(),this._anchor={left:Math.round(t.x),top:Math.round(t.y)},this.element.style.left=Pp(this._anchor.left),this.element.style.top=Pp(this._anchor.top)}hide(){this.element&&(this.element.remove(),this.element=null)}bindEvents(){this.element&&(this._mouseEnterHandler=kp(this._mouseEnter,this),Ie(this.element,fg,bg,this._mouseEnterHandler),this._mouseLeaveHandler=kp(this._mouseLeave,this),Ie(this.element,xg,bg,this._mouseLeaveHandler))}unbindEvents(){this.element&&(Re(this.element,fg,this._mouseEnterHandler),Re(this.element,xg,this._mouseLeaveHandler))}render(){if(!this.element){let t=this.options;let e=this.layer;let s=document.createElement("span");if(K(s,vg),this.options.template){const t=this._compileTemplate(this.options.template)(this.dataItem);const e=Ap(t);s.appendChild(e)}else if(t.svgIcon)ae(s,{icon:t.svgIcon,iconClass:"k-icon-xxl",svgIcons:this.options.icons.svgIcons,type:"svg"});else{let e={icon:"map-marker",iconClass:"k-icon-xxl",svgIcons:this.options.icons.svgIcons,type:this.options.icons.type};t.shape?"pinTarget"===t.shape?(e.icon="map-marker-target",ae(s,e)):"pin"===t.shape?ae(s,e):K(s,"k-icon k-icon-xxl k-i-marker-"+Tp(t.shape||"pin")):ae(s,e)}t.title&&s.setAttribute("title",t.title);const i=t.attributes||{};Object.keys(i).forEach((function(t){s.setAttribute(t,i[t])})),s._kendoNode=this,s.style.zIndex=t.zIndex,this.element=s,e&&e.element.appendChild(this.element),this.bindEvents()}}_mouseEnter(t){const e=this._createEventArgs(t);this.layer._markerMouseEnter(e),this.layer.map._tooltip.show({top:this._anchor.top-this.element.offsetHeight,left:this._anchor.left},this._tooltipContext())}_tooltipContext(){return{type:"marker",layerIndex:this.layer._layerIndex(),className:"k-map-marker-tooltip",dataItem:this.dataItem,title:this.options.title,location:this.location()}}_mouseLeave(t){const e=this._createEventArgs(t);this.layer._markerMouseLeave(e)}_createEventArgs(t){return{marker:this,originalEvent:t}}_compileTemplate(t){return bt.compile(t,{paramName:"dataItem",useWithBlock:!1})}static create(t,e){return t instanceof _g?t:new _g(ut({},e,t))}}const kg=Object.assign;function Ag(t){window.requestAnimationFrame(t)}class Sg{constructor(){let t=this;t._tickProxy=kp(t._tick,t),t._started=!1}tick(){}done(){}onEnd(){}onCancel(){}start(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,Ag(this._tickProxy)))}enabled(){return!0}cancel(){this._started=!1,this.onCancel()}_tick(){let t=this;t._started&&(t.tick(),t.done()?(t._started=!1,t.onEnd()):Ag(t._tickProxy))}}class Cg extends Sg{constructor(t){super(),kg(this,t)}done(){return this.timePassed()>=this.duration}timePassed(){return Math.min(this.duration,De()-this.startDate)}moveTo(t){let e=this,s=e.movable;e.initial=s[e.axis],e.delta=t.location-e.initial,e.duration="number"==typeof t.duration?t.duration:300,e.tick=e._easeProxy(t.ease),e.startDate=De(),e.start()}_easeProxy(t){let e=this;return function(){e.movable.moveAxis(e.axis,t(e.timePassed(),e.initial,e.delta,e.duration))}}static easeOutExpo(t,e,s,i){return t===i?e+s:s*(1-Math.pow(2,-10*t/i))+e}}let Tg=Object.assign,Pg=Math.abs,Mg="change",Eg="scroll";class Lg extends Sg{constructor(t){super(t);let e=this;Tg(e,t),e.userEvents.bind("gestureend",e.start.bind(this)),e.tapCapture.bind("press",e.cancel.bind(this))}enabled(){return this.movable.scale<this.dimensions.minScale}done(){return this.dimensions.minScale-this.movable.scale<.01}tick(){let t=this.movable;t.scaleWith(1.1),this.dimensions.rescale(t.scale)}onEnd(){let t=this.movable;t.scaleTo(this.dimensions.minScale),this.dimensions.rescale(t.scale)}}class Ig extends Sg{constructor(t){super();let e=this;Tg(e,t,{transition:new Cg({axis:t.axis,movable:t.movable,onEnd(){e._end()}})}),e.tapCapture.bind("press",(function(){e.cancel()})),e.userEvents.bind("end",kp(e.start,e)),e.userEvents.bind("gestureend",kp(e.start,e)),e.userEvents.bind("tap",kp(e.onEnd,e))}onCancel(){this.transition.cancel()}freeze(t){this.cancel(),this._moveTo(t)}onEnd(){let t=this;t.paneAxis.outOfBounds()?t._snapBack():t._end()}done(){return Pg(this.velocity)<1}start(t){let e,s=this;s.dimension.enabled&&(s.paneAxis.outOfBounds()?s.transition._started?(s.transition.cancel(),s.velocity=Math.min(t.touch[s.axis].velocity*s.velocityMultiplier,55),super.start()):s._snapBack():(e=2===t.touch.id?0:t.touch[s.axis].velocity,s.velocity=Math.max(Math.min(e*s.velocityMultiplier,55),-55),s.tapCapture.captureNext(),super.start()))}tick(){let t=this,e=t.dimension,s=t.paneAxis.outOfBounds()?.5:t.friction,i=t.velocity*=s,o=t.movable[t.axis]+i;!t.elastic&&e.outOfBounds(o)&&(o=Math.max(Math.min(o,e.max),e.min),t.velocity=0),t.movable.moveAxis(t.axis,o)}_end(){this.tapCapture.cancelCapture(),this.end()}_snapBack(){let t=this,e=t.dimension,s=t.movable[t.axis]>e.max?e.max:e.min;t._moveTo(s)}_moveTo(t){this.transition.moveTo({location:t,duration:500,ease:Cg.easeOutExpo})}}class Rg extends Sg{constructor(t){super(t);Tg(this,t,{origin:{},destination:{},offset:{}})}tick(){this._updateCoordinates(),this.moveTo(this.origin)}done(){return Pg(this.offset.y)<5&&Pg(this.offset.x)<5}onEnd(){this.moveTo(this.destination),this.callback&&this.callback.call()}setCoordinates(t,e){this.offset={},this.origin=t,this.destination=e}setCallback(t){t&&ht(t)?this.callback=t:t=void 0}_updateCoordinates(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}class Bg{constructor(t){let e=this,s="x"===t.axis;const i=Ap('<div class="km-touch-scrollbar km-'+(s?"horizontal":"vertical")+'-scrollbar" />');Tg(e,t,{element:i,elementSize:0,movable:new lg(i),scrollMovable:t.movable,alwaysVisible:t.alwaysVisible,size:s?"width":"height"}),e.scrollMovable.bind(Mg,e.refresh.bind(e)),e.container.appendChild(i),t.alwaysVisible&&e.show()}refresh(){let t=this,e=t.axis,s=t.dimension,i=s.size,o=t.scrollMovable,n=i/s.total,r=Math.round(-o[e]*n),a=Math.round(i*n);this.element.style.display=n>=1?"none":"",r+a>i?a=i-r:r<0&&(a+=r,r=0),t.elementSize!==a&&(t.element.style[t.size]=a+"px",t.elementSize=a),t.movable.moveAxis(e,r)}show(){this.element.style.opacity=.7,this.element.style.visibility="visible"}hide(){this.alwaysVisible||(this.element.style.opacity=0)}}class Og extends je{constructor(t,e){super();let s=this;this.element=t,this._initOptions(e);const i=(()=>{const{mobileOS:t}=Be();return t.ios||t.android})(navigator.userAgent);s._native=s.options.useNative&&i;const o=Ap('<div class="km-scroll-header"/>');if(s._native)return K(t,"km-native-scroller"),Cp(o,t),void Tg(s,{scrollElement:t,fixedContainer:t.children[0]});t.style.overflow="hidden",K(t,"km-scroll-wrapper");((t,e)=>{for(t.appendChild(e);t.firstChild!==e;)e.appendChild(t.firstChild)})(t,Ap('<div class="km-scroll-container"/>')),Cp(o,t);let n=t.children[1],r=new sg(t),a=new lg(n),l=new og({element:n,container:t,forcedEnabled:s.options.zoom}),h=this.options.avoidScrolling,c=new ds(t,{touchAction:"none",allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:s.options.zoom,supportDoubleTap:s.options.supportDoubleTap,start(t){l.refresh();let e=Pg(t.x.velocity),i=Pg(t.y.velocity),o=2*e>=i,n=2*i>=e;!s.fixedContainer.contains(t.event.target)&&!h(t)&&s.enabled&&(l.x.enabled&&o||l.y.enabled&&n)?c.capture():c.cancel()}}),d=new rg({movable:a,dimensions:l,userEvents:c,elastic:s.options.elastic}),u=new Lg({movable:a,dimensions:l,userEvents:c,tapCapture:r}),p=new Rg({moveTo(t){s.scrollTo(t.x,t.y)}});a.bind(Mg,(function(){s.scrollTop=-a.y,s.scrollLeft=-a.x,s.trigger(Eg,{scrollTop:s.scrollTop,scrollLeft:s.scrollLeft})})),s.options.mousewheelScrolling&&(this._wheelScrollHandler=this._wheelScroll.bind(this),Ie(t,"wheel",this._wheelScrollHandler)),Tg(s,{movable:a,dimensions:l,zoomSnapBack:u,animatedScroller:p,userEvents:c,pane:d,tapCapture:r,pulled:!1,enabled:!0,scrollElement:n,scrollTop:0,scrollLeft:0,fixedContainer:t.children[0]}),s._initAxis("x"),s._initAxis("y"),s._wheelEnd=function(){s._wheel=!1,s.userEvents.end(0,s._wheelY)},l.refresh(),s.options.pullToRefresh&&s._initPullToRefresh()}_initOptions(t){this.options=ut({},this.options,t)}_wheelScroll(t){if(t.ctrlKey)return;this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);let e=(t=>{const e=t.wheelDeltaY;let s;return t.wheelDelta?(void 0===e||e)&&(s=t.wheelDelta):t.detail&&t.axis===t.VERTICAL_AXIS&&(s=10*-t.detail),s})(t);e&&(this._wheelY+=e,this.userEvents.move(0,this._wheelY)),t.preventDefault()}makeVirtual(){this.dimensions.y.makeVirtual()}virtualSize(t,e){this.dimensions.y.virtualSize(t,e)}height(){return this.dimensions.y.size}scrollHeight(){return this.scrollElement.scrollHeight}scrollWidth(){return this.scrollElement.scrollWidth}_resize(){this._native||this.contentResized()}setOptions(t){let e=this;this._initOptions(t),t.pullToRefresh&&e._initPullToRefresh()}reset(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))}contentResized(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)}zoomOut(){let t=this.dimensions;t.refresh(),this._scale(t.fitScale),this.movable.moveTo(t.centerCoordinates())}enable(){this.enabled=!0}disable(){this.enabled=!1}scrollTo(t,e){this._native?(this.scrollElement.scrollLeft(Pg(t)),this.scrollElement.scrollTop(Pg(e))):(this.dimensions.refresh(),this.movable.moveTo({x:t,y:e}))}animatedScrollTo(t,e,s){let i,o;this._native?this.scrollTo(t,e):(i={x:this.movable.x,y:this.movable.y},o={x:t,y:e},this.animatedScroller.setCoordinates(i,o),this.animatedScroller.setCallback(s),this.animatedScroller.start())}pullHandled(){}destroy(){Re(this.element,"wheel",this._wheelScrollHandler),this.userEvents&&this.userEvents.destroy()}_scale(t){this.dimensions.rescale(t),this.movable.scaleTo(t)}_initPullToRefresh(){}_dragEnd(){}_paneChange(){}_initAxis(t){let e=this,s=e.movable,i=e.dimensions[t],o=e.tapCapture,n=e.pane[t],r=new Bg({axis:t,movable:s,dimension:i,container:e.element,alwaysVisible:e.options.visibleScrollHints});i.bind(Mg,(function(){r.refresh()})),n.bind(Mg,(function(){r.show()})),e[t+"inertia"]=new Ig({axis:t,paneAxis:n,movable:s,tapCapture:o,userEvents:e.userEvents,dimension:i,elastic:e.options.elastic,friction:e.options.friction||.96,velocityMultiplier:e.options.velocityMultiplier||10,end(){r.hide(),e.trigger("scrollEnd",{axis:t,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})}})}}te(Og,{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:()=>!1,pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}}),Mp(Og,["pull",Eg,"resize"]);class Vg{constructor(t,e={}){this.sender=e.sender||t,this.widget=t,this.rtl=Boolean(e.rtl)}notify(t,e){this.widget&&this.widget.trigger(t,e)}}let Dg=Math,zg=Dg.min,Fg=Dg.pow,Hg=e.P,Ng="marker",jg="location",Ug="wheel";const Gg={bubble:ug,shape:cg,tile:$p,[Ng]:wg};let Wg=class extends je{constructor(t,e={},s={},i={}){super(),this._init(t,e,s,i)}destroy(){this.scroller.destroy(),this._tooltip&&this._tooltip.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),Q(this.markers)?this.markers.forEach((t=>{t.destroy()})):this.markers.destroy();for(let t=0;t<this.layers.length;t++)this.layers[t].destroy();Re(this.element,Ug,this._mousewheelHandler),super.destroy()}_init(t,s={},i={},o={}){this.support=Be(),this.context=o,this.initObserver(o),this.initServices(o),this._notifyObserver("init"),this._initOptions(s),this._setEvents(s),this.crs=new _p,this._initElement(t),this._viewOrigin=this._getOrigin(),this._tooltip=this._createTooltip(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset();const n=e.n(this._mousewheel.bind(this),50);this._mousewheelHandler=t=>{t.preventDefault(),n(t)},Ie(this.element,Ug,this._mousewheelHandler)}_initOptions(t){this.options=ut({},this.options,t)}_initElement(t){this.element=t,K(t,"k-map"),t.style.position="relative",t.setAttribute("data-role","map"),Sp(t);const e=Ap("<div />");this.element.appendChild(e)}initServices(t={}){this.widgetService=new Vg(this,t)}initObserver(t={}){this.observers=[],this.addObserver(t.observer)}addObserver(t){t&&this.observers.push(t)}removeObserver(t){const e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)}requiresHandlers(t){const e=this.observers;for(let s=0;s<e.length;s++)if(e[s].requiresHandlers(t))return!0}trigger(t,e={}){e.sender=this;const s=this.observers;let i=!1;for(let o=0;o<s.length;o++)s[o].trigger(t,e)&&(i=!0);return i||super.trigger(t,e),i}_notifyObserver(t,e={}){e.sender=this;const s=this.observers;let i=!1;for(let o=0;o<s.length;o++)s[o].trigger(t,e)&&(i=!0);return i}zoom(t){let e=this.options;let s;if(Ft(t)){const i=Dg.round(Yt(t,e.minZoom,e.maxZoom));e.zoom!==i&&(e.zoom=i,this.widgetService.notify("zoomChange",{zoom:e.zoom}),this._reset()),s=this}else s=e.zoom;return s}center(t){let e;if(t){const s=rp.create(t);const i=rp.create(this.options.center);s.equals(i)||(this.options.center=s.toArray(),this.widgetService.notify(jp,{center:this.options.center}),this._reset()),e=this}else e=rp.create(this.options.center);return e}extent(t){let e;return t?(this._setExtent(t),e=this):e=this._getExtent(),e}setOptions(t={}){const e=this.element;this.destroy(),Sp(e),this._init(e,t,{},this.context),this._reset()}locationToLayer(t,e){let s=!this.options.wraparound;const i=rp.create(t);return this.crs.toPoint(i,this._layerSize(e),s)}layerToLocation(t,e){let s=!this.options.wraparound;const i=Hg.create(t);return this.crs.toLocation(i,this._layerSize(e),s)}locationToView(t){const e=rp.create(t);let s=this.locationToLayer(this._viewOrigin);return this.locationToLayer(e).translateWith(s.scale(-1))}viewToLocation(t,e){const s=this.locationToLayer(this._getOrigin(),e);const i=Hg.create(t).clone().translateWith(s);return this.layerToLocation(i,e)}eventOffset(t){let s;let i;let o=Nt(this.element);if(t.x&&t.x[jg]||t.y&&t.y[jg])s=t.x[jg]-o.left,i=t.y[jg]-o.top;else{let e=t.originalEvent||t;s=Kt(e.pageX,e.clientX)-o.left,i=Kt(e.pageY,e.clientY)-o.top}return new e.P(s,i)}eventToView(t){let e=this.eventOffset(t);return this.locationToView(this.viewToLocation(e))}eventToLayer(t){return this.locationToLayer(this.eventToLocation(t))}eventToLocation(t){let e=this.eventOffset(t);return this.viewToLocation(e)}viewSize(){let t=this.element;let e=this._layerSize();let s=t.clientWidth;return this.options.wraparound||(s=zg(e,s)),{width:s,height:zg(e,t.clientHeight)}}exportVisual(){return this._reset(),!1}hideTooltip(){this._tooltip&&this._tooltip.hide()}_setOrigin(t,e){let s,i=this.viewSize();const o=this._origin=rp.create(t);return s=this.locationToLayer(o,e),s.x+=i.width/2,s.y+=i.height/2,this.options.center=this.layerToLocation(s,e).toArray(),this.widgetService.notify(jp,{center:this.options.center}),this}_getOrigin(t){let e,s=this.viewSize();return!t&&this._origin||(e=this.locationToLayer(this.center()),e.x-=s.width/2,e.y-=s.height/2,this._origin=this.layerToLocation(e)),this._origin}_setExtent(t){let e=Np.create(t);let s=e.se.clone();this.options.wraparound&&s.lng<0&&t.nw.lng>0&&(s.lng=180+(180+s.lng));const i=new Np(e.nw,s);this.center(i.center());let o=this.element.clientWidth;let n=this.element.clientHeight;let r;for(r=this.options.maxZoom;r>=this.options.minZoom;r--){let t=this.locationToLayer(i.nw,r);let e=this.locationToLayer(i.se,r);let s=Dg.abs(e.x-t.x);let a=Dg.abs(e.y-t.y);if(s<=o&&a<=n)break}this.zoom(r)}_getExtent(){let t=this._getOrigin();let e=this.locationToLayer(t);let s=this.viewSize();e.x+=s.width,e.y+=s.height;let i=this.layerToLocation(e);return new Np(t,i)}_zoomAround(t,e){this._setOrigin(this.layerToLocation(t,e),e),this.zoom(e)}_initControls(){let t=this.options.controls;t.attribution&&this._createAttribution(t.attribution),this.support.mobileOS||(t.navigator&&this._createNavigator(t.navigator),t.zoom&&this._createZoomControl(t.zoom))}_createControlElement(t,e){let s=t.position||e;let i="."+Ep(s).replace(" ",".");let o=this.element.querySelector(".k-map-controls"+i)||[];if(0===o.length){let t=document.createElement("div");K(t,"k-map-controls "+Ep(s)),o=t,this.element.appendChild(o)}let n=document.createElement("div");return o.appendChild(n),n}_createAttribution(t){let e=this._createControlElement(t,"bottomRight");this.attribution=new Lp(e,t)}_createNavigator(t){let e=this._createControlElement(t,"topLeft");let s=this.navigator=new Bp(e,ut({},t,{icons:this.options.icons}));this._navigatorPan=this._navigatorPan.bind(this),s.bind("pan",this._navigatorPan),this._navigatorCenter=this._navigatorCenter.bind(this),s.bind("center",this._navigatorCenter)}_navigatorPan(t){let e=this.scroller;let s=e.scrollLeft+t.x;let i=e.scrollTop-t.y;let o=this._virtualSize;let n=this.element.clientWidth;let r=this.element.clientHeight;s=Yt(s,o.x.min,o.x.max-n),i=Yt(i,o.y.min,o.y.max-r),this.scroller.one("scroll",kp(this._scrollEnd,this)),this.scroller.scrollTo(-s,-i)}_navigatorCenter(){this.center(this.options.center)}_createZoomControl(t){let e=this._createControlElement(t,"topLeft");let s=this.zoomControl=new Dp(e,t,this.options.icons);this._zoomControlChange=this._zoomControlChange.bind(this),s.bind("change",this._zoomControlChange)}_zoomControlChange(t){this.trigger("zoomStart",{originalEvent:t})||(this.zoom(this.zoom()+t.delta),this.trigger("zoomEnd",{originalEvent:t}))}_initScroller(){let t=this.support.mobileOS?.93:.9;let e=!1!==this.options.zoomable;let s=this.scroller=new Og(this.element.children[0],{friction:t,velocityMultiplier:5,zoom:e,mousewheelScrolling:!1,supportDoubleTap:!0});s.bind("scroll",kp(this._scroll,this)),s.bind("scrollEnd",kp(this._scrollEnd,this)),s.userEvents.bind("gesturestart",kp(this._scaleStart,this)),s.userEvents.bind("gestureend",kp(this._scale,this)),s.userEvents.bind("doubleTap",kp(this._doubleTap,this)),s.userEvents.bind("tap",kp(this._tap,this)),this.scrollElement=s.scrollElement}_initLayers(){let t=this.options.layers,e=this.layers=[];for(let s=0;s<t.length;s++){let i=t[s];const o=this._createLayer(i);e.push(o)}}_createLayer(t){let e=t.type||"shape";let s=this.options.layerDefaults[e];let i=e===Ng?ut({},this.options.markerDefaults,t,{icons:this.options.icons}):ut({},s,t);let o=new(0,Gg[e])(this,i);return e===Ng&&(this.markers=o),o}_createTooltip(){return new Up(this.widgetService,this.options.tooltip)}_initMarkers(){(this.options.layers||[]).filter((t=>t&&t.type===Ng)).length>0||(this.markers=new wg(this,ut({},this.options.markerDefaults,{icons:this.options.icons})),this.markers.add(this.options.markers))}_scroll(t){let s=this.locationToLayer(this._viewOrigin).round();let i=t.sender.movable;let o=new e.P(i.x,i.y).scale(-1).scale(1/i.scale);s.x+=o.x,s.y+=o.y,this._scrollOffset=o,this._tooltip.offset=o,this.hideTooltip(),this._setOrigin(this.layerToLocation(s)),this.trigger("pan",{originalEvent:t,origin:this._getOrigin(),center:this.center()})}_scrollEnd(t){this._scrollOffset&&this._panComplete()&&(this._scrollOffset=null,this._panEndTimestamp=De(),this.trigger("panEnd",{originalEvent:t,origin:this._getOrigin(),center:this.center()}))}_panComplete(){return De()-(this._panEndTimestamp||0)>50}_scaleStart(t){if(this.trigger("zoomStart",{originalEvent:t})){let e=t.touches[1];e&&e.cancel()}}_scale(t){let s=this.scroller.movable.scale;let i=this._scaleToZoom(s);let o=new e.P(t.center.x,t.center.y);let n=this.viewToLocation(o,i);let r=this.locationToLayer(n,i).translate(-o.x,-o.y);this._zoomAround(r,i),this.trigger("zoomEnd",{originalEvent:t})}_scaleToZoom(t){let e=this._layerSize()*t/this.options.minSize;let s=Dg.log(e)/Dg.log(2);return Dg.round(s)}_reset(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.hideTooltip(),this.trigger("beforeReset"),this.trigger("reset")}_resetScroller(){let t=this.scroller;let e=t.dimensions.x;let s=t.dimensions.y;let i=this._layerSize();let o=this.extent().nw;let n=this.locationToLayer(o).round();t.movable.round=!0,t.reset(),t.userEvents.cancel();let r=this.zoom();t.dimensions.forcedMinScale=Fg(2,this.options.minZoom-r),t.dimensions.maxScale=Fg(2,this.options.maxZoom-r);let a={min:-n.x,max:i-n.x};let l={min:-n.y,max:i-n.y};if(this.options.wraparound&&(a.max=20*i,a.min=-a.max),!1===this.options.pannable){let t=this.viewSize();a.min=l.min=0,a.max=t.width,l.max=t.height}e.makeVirtual(),s.makeVirtual(),e.virtualSize(a.min,a.max),s.virtualSize(l.min,l.max),this._virtualSize={x:a,y:l}}_renderLayers(){}_layerSize(t){const e=Kt(t,this.options.zoom);return this.options.minSize*Fg(2,e)}_tap(t){if(!this._panComplete())return;let e=this.eventOffset(t);this.hideTooltip(),this.trigger("click",{originalEvent:t,location:this.viewToLocation(e)})}_doubleTap(t){if(!1!==this.options.zoomable&&!this.trigger("zoomStart",{originalEvent:t})){let e=this.zoom()+1;let s=this.eventOffset(t);let i=this.viewToLocation(s);let o=this.locationToLayer(i,e).translate(-s.x,-s.y);this._zoomAround(o,e),this.trigger("zoomEnd",{originalEvent:t})}}_mousewheel(t){let e=Vt(t)>0?-1:1;let s=this.options;let i=this.zoom();let o=Yt(i+e,s.minZoom,s.maxZoom);if(!1!==s.zoomable&&o!==i&&!this.trigger("zoomStart",{originalEvent:t})){let e=this.eventOffset(t);let s=this.viewToLocation(e);let i=this.locationToLayer(s,o).translate(-e.x,-e.y);this._zoomAround(i,o),this.trigger("zoomEnd",{originalEvent:t})}}_toDocumentCoordinates(t){const e=Nt(this.element);return{left:$t(t.x+e.left),top:$t(t.y+e.top)}}};te(Wg,{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],icons:{type:"font",svgIcons:{}},zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0,renderPointsAsMarkers:!1}),Mp(Wg,["beforeReset","click","markerActivate","markerClick","markerCreated","markerMouseEnter","markerMouseLeave","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"]);const Xg=(t,e)=>t.map(e).reduce(((t,e)=>t+e),0);const Yg=(t,e)=>t.y0===e.y0?t.index-e.index:t.y0+t.y1-e.y0-e.y1;const qg=(t,e)=>Yg(t.source,e.source);const Zg=(t,e)=>Yg(t.target,e.target);const $g=t=>t.value;function Qg(t){t.forEach((t=>{t.targetLinks.forEach((t=>{t.source.sourceLinks.sort(Zg)})),t.sourceLinks.forEach((t=>{t.target.targetLinks.sort(qg)}))}))}const Kg=(t,e)=>"left"===t.align?t.depth:"right"===t.align?e-t.height:t.sourceLinks.length?t.depth:e;let Jg=class{constructor(t){const{offset:e={},align:s}=t.nodesOptions;this.data={nodes:t.nodes.map((t=>ut({},{offset:e,align:s},t))),links:t.links.map((t=>ut({},t)))},this.width=t.width,this.height=t.height,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.nodeWidth=t.nodesOptions.width,this.nodePadding=t.nodesOptions.padding,this.reverse=t.reverse,this.targetColumnIndex=t.targetColumnIndex,this.loops=t.loops,this.autoLayout=t.autoLayout}calculate(){const{nodes:t,links:e}=this.data;this.connectLinksToNodes(t,e),this.calculateNodeValues(t);const s=this.calculateNodeHeights(t);if(s)return{nodes:[],links:[],columns:[],circularLinks:s};this.calculateNodeDepths(t);const i=this.calculateNodeColumns(t);return this.calculateNodeBreadths(i),this.applyNodesOffset(t),this.calculateLinkBreadths(t),Object.assign({},this.data,{columns:i})}connectLinksToNodes(t,e){const s=new Map;t.forEach(((t,e)=>{t.index=e,t.sourceLinks=[],t.targetLinks=[],t.id=void 0!==t.id?t.id:t.label.text,s.set(t.id,t)})),e.forEach((t=>{t.source=s.get(t.sourceId),t.target=s.get(t.targetId),t.source.sourceLinks.push(t),t.target.targetLinks.push(t)}))}calculateNodeValues(t){t.forEach((t=>{t.value=Math.max(Xg(t.sourceLinks,$g),Xg(t.targetLinks,$g))}))}calculateNodeDepths(t){let e=new Set(t);let s=new Set;let i=0;for(;e.size;){const t=Array.from(e);for(let e=0;e<t.length;e++){const o=t[e];o.depth=i;for(let t=0;t<o.sourceLinks.length;t++){const e=o.sourceLinks[t];s.add(e.target)}}i++,e=s,s=new Set}}calculateNodeHeights(t){const e=t.length;let s=new Set(t);let i=new Set;let o=0;const n=t=>{t.height=o,t.targetLinks.forEach((t=>{i.add(t.source)}))};for(;s.size;){if(s.forEach(n),o++,o>e)return!0;s=i,i=new Set}return!1}calculateNodeColumns(t){const e=(s=t,i=t=>t.depth,Math.max.apply(null,s.map(i)));var s,i;const o=(this.width-this.offsetX-this.nodeWidth)/e;const n=new Array(e+1);for(let s=0;s<t.length;s++){const i=t[s];const r=Math.max(0,Math.min(e,Kg(i,e)));i.x0=this.offsetX+r*o,i.x1=i.x0+this.nodeWidth,i.layer=r,n[r]=n[r]||[],n[r].push(i)}return n}calculateNodeBreadths(t){const e=(s=t,i=t=>(this.height-this.offsetY-(t.length-1)*this.nodePadding)/Xg(t,$g),Math.min.apply(null,s.map(i)));var s,i;if(t.forEach((t=>{let s=this.offsetY;t.forEach((t=>{t.y0=s,t.y1=s+t.value*e,s=t.y1+this.nodePadding,t.sourceLinks.forEach((t=>{t.width=t.value*e}))})),s=(this.height-s+this.nodePadding)/(t.length+1),t.forEach(((t,e)=>{t.y0+=s*(e+1),t.y1+=s*(e+1)}))})),!1!==this.autoLayout){const e=void 0!==this.loops?this.loops:t.length-1;const s=this.targetColumnIndex||1;for(let i=0;i<e;i++)this.reverse?(this.uncurlLinksToRight(t,s),this.uncurlLinksToLeft(t,s)):(this.uncurlLinksToLeft(t,s),this.uncurlLinksToRight(t,s))}t.forEach(Qg)}applyNodesOffset(t){t.forEach((t=>{const e=(t.offset?t.offset.left:0)||0;const s=(t.offset?t.offset.top:0)||0;t.x0+=e,t.x1+=e,t.y0+=s,t.y1+=s}))}calculateLinkBreadths(t){t.forEach((t=>{const{sourceLinks:e,targetLinks:s}=t;let i=t.y0;let o=i;e.forEach((t=>{t.x0=t.source.x1,t.y0=i+t.width/2,i+=t.width})),s.forEach((t=>{t.x1=t.target.x0,t.y1=o+t.width/2,o+=t.width}))}))}uncurlLinksToRight(t,e){const s=t.length;for(let i=e;i<s;i++){const e=t[i];e.forEach((t=>{let e=0;let s=0;t.targetLinks.forEach((i=>{let o=i.value*(t.layer-i.source.layer);e+=this.targetTopPos(i.source,t)*o,s+=o}));let i=0===e?0:e/s-t.y0;t.y0+=i,t.y1+=i,Qg([t])})),e.sort(Yg),this.arrangeNodesVertically(e)}}uncurlLinksToLeft(t,e){for(let s=t.length-1-e;s>=0;s--){const e=t[s];for(let t=0;t<e.length;t++){const s=e[t];let i=0;let o=0;s.sourceLinks.forEach((t=>{let e=t.value*(t.target.layer-s.layer);i+=this.sourceTopPos(s,t.target)*e,o+=e}));let n=0===i?0:i/o-s.y0;s.y0+=n,s.y1+=n,Qg([s])}e.sort(Yg),this.arrangeNodesVertically(e)}}arrangeNodesVertically(t){const e=t.length-1;this.arrangeUp(t,this.height,e),this.arrangeDown(t,this.offsetY,0)}arrangeDown(t,e,s){let i=e;for(let e=s;e<t.length;e++){const s=t[e];const o=Math.max(0,i-s.y0);s.y0+=o,s.y1+=o,i=s.y1+this.nodePadding}}arrangeUp(t,e,s){let i=e;for(let e=s;e>=0;--e){const s=t[e];const o=Math.max(0,s.y1-i);s.y0-=o,s.y1-=o,i=s.y0-this.nodePadding}}sourceTopPos(t,e){let s=e.y0-(e.targetLinks.length-1)*this.nodePadding/2;for(let i=0;i<e.targetLinks.length;i++){const o=e.targetLinks[i];if(o.source===t)break;s+=o.width+this.nodePadding}for(let i=0;i<t.sourceLinks.length;i++){const o=t.sourceLinks[i];if(o.target===e)break;s-=o.width}return s}targetTopPos(t,e){let s=t.y0-(t.sourceLinks.length-1)*this.nodePadding/2;for(let i=0;i<t.sourceLinks.length;i++){const o=t.sourceLinks[i];if(o.target===e)break;s+=o.width+this.nodePadding}for(let i=0;i<e.targetLinks.length;i++){const o=e.targetLinks[i];if(o.source===t)break;s-=o.width}return s}};const tm=t=>new Jg(t).calculate();function em(t,e,s,i,o,n){const r=(n-e)*(s-t);const a=(i-e)*(o-t);return r>a?1:r===a?0:-1}function sm(t,e){const s=em(t.x0,t.y0,t.x1,t.y1,e.x1,e.y1);const i=em(t.x0,t.y0,t.x1,t.y1,e.x0,e.y0);const o=em(t.x0,t.y0,e.x0,e.y0,e.x1,e.y1);const n=em(t.x1,t.y1,e.x0,e.y0,e.x1,e.y1);return s!==i&&o!==n}class im{constructor(t){this.options=ut({},this.options,t),this.createVisual()}createVisual(){this.visual=this.createElement()}exportVisual(){return this.visual}createElement(){const t=this.options.visual;let e;return e=t?t({sender:this.getSender(),options:this.visualOptions(),createVisual:()=>this.getElement()}):this.getElement(),e}getSender(){return this}}class om extends im{getElement(){return e.a.fromRect(this.getRect(),this.visualOptions())}getRect(){const t=this.options.node;return new e.R([t.x0,t.y0],[t.x1-t.x0,t.y1-t.y0])}getLabelText(t){let e=t.labels.ariaTemplate;if(e)return e({node:t.node})}visualOptions(){const t=ut({},this.options,this.options.node);const e=this.getLabelText(t);return{fill:{color:t.color,opacity:t.opacity},stroke:{width:0},className:"k-sankey-node",role:"graphics-symbol",ariaRoleDescription:"Node",ariaLabel:e}}createFocusHighlight(){if(this.options.navigatable)return this._highlight=e.a.fromRect(this.getRect(),{stroke:this.options.focusHighlight.border,visible:!1}),this._highlight}focus(t){if(this._highlight){const{highlight:e=!0}=t||{};e&&this._highlight.options.set("visible",!0);const s=this.options.node.id;this.visual.options.set("id",s),this.options.root()&&this.options.root().setAttribute(a,s)}}blur(){this._highlight&&(this._highlight.options.set("visible",!1),this.visual.options.set("id",""),this.options.root()&&this.options.root().removeAttribute(a))}}const nm=(t,e,s)=>t.color||e[s%e.length];const rm=(t,e,s,i)=>{const o=ut({},e,e.node);return ut({},{color:nm(t,s,i)},o,{node:t},{visual:t.visual,opacity:t.opacity,offset:t.offset,color:t.color})};const am=(t,e,s,i,o)=>{const n=1-o;const r=n*n;const a=o*o;return t*r*n+3*e*o*r+3*s*a*n+i*a*o};const lm=(t,e)=>{const s=t.width/2;const i=e?t.x1:t.x0;const o=e?t.x0:t.x1;const n=e?t.y1:t.y0;const r=e?t.y0:t.y1;const a=(i+o)/2;const l=[a,am(n,n,r,r,.5)];const h=.4999;const c=[am(i,a,a,o,h),am(n,n,r,r,h)];const d=function(t,e,s,i,o){let n=(t+s)/2;let r=(e+i)/2;let a,l;if(e===i)a=0,l=o/2;else if(t===s)a=o/2,l=0;else{let n=-1/((i-e)/(s-t));a=o/2/Math.sqrt(1+n*n),l=n*a}return{P1:{x:n-a,y:r-l},P2:{x:n+a,y:r+l}}}(l[0],l[1],c[0],c[1],t.width);const u=[a,am(n+s,n+s,r+s,r+s,.5)];const p=d.P1.y>d.P2.y?d.P1:d.P2;const g=(n>r?1:-1)*s;const m=function(t,e,s,i,o){const n=(t.x+e.x)/2,r=(t.y+e.y)/2;const a=e.x-t.x;let l=-(e.y-t.y);let h=a;const c=Math.sqrt(l*l+h*h);l=l/c*s,h=h/c*s;const d=n+l,u=r+h;const p=n-l,g=r-h;const m=o.x-i.x;const f=o.y-i.y;const x=f*(d-p)-m*(u-g);if(Math.abs(x)<1e-10)return null;const y=(m*(g-i.y)-f*(p-i.x))/x;const v=((d-p)*(g-i.y)-(u-g)*(p-i.x))/x;if(y>=0&&y<=1&&v>=0&&v<=1)return{x:p+y*(d-p)};return null}(p,{x:u[0],y:u[1]},s,{x:u[0],y:u[1]},{x:Math.max(1,u[0]+g),y:u[1]})||{x:(u[0]+p.x)/2};const f=i;const x=o;return a-(m.x-.125*f-.125*x)/.75};class hm extends im{getElement(){const t=this.options.link;const{x0:s,x1:i,y0:o,y1:n}=t;const r=(s+i)/2;return new e.a(this.visualOptions()).moveTo(s,o).curveTo([r,o],[r,n],[i,n])}getLabelText(t){let e=t.labels.ariaTemplate;if(e)return e({link:t.link})}visualOptions(){const t=this.options;const e=this.options.link;const s=this.getLabelText(t);return{stroke:{width:t.link.width,color:e.color||t.color,opacity:Ft(e.opacity)?e.opacity:t.opacity},role:"graphics-symbol",ariaRoleDescription:"Link",ariaLabel:s}}createFocusHighlight(){if(!this.options.navigatable)return;const{link:t}=this.options;const{x0:s,x1:i,y0:o,y1:n}=t;const r=(s+i)/2;const a=t.width/2;const l=lm(t,this.options.rtl);this._highlight=new e.a({stroke:this.options.focusHighlight.border,visible:!1}).moveTo(s,o+a).lineTo(s,o-a).curveTo([r+l,o-a],[r+l,n-a],[i,n-a]).lineTo(i,n+a).curveTo([r-l,n+a],[r-l,o+a],[s,o+a])}focus(t){if(this._highlight){const{highlight:e=!0}=t||{};e&&this._highlight.options.set("visible",!0);const s=`${this.options.link.sourceId}->${this.options.link.targetId}`;this.visual.options.set("id",s),this.options.root()&&this.options.root().setAttribute(a,s)}}blur(){this._highlight&&(this._highlight.options.set("visible",!1),this.visual.options.set("id",""),this.options.root()&&this.options.root().removeAttribute(a))}}const cm="inside";const dm="before";const um="after";class pm extends im{getElement(){const t=ut({},this.options,this.options.node.label);const{node:e,diagramMinX:s,diagramMaxX:i,text:o,offset:n,rtl:r}=t;let a=t.position;if(r&&a!==cm&&(a=a===dm?um:dm),!t.visible||!o)return null;const l=new gs(e.x0,e.y0,e.x1,e.y1);const h=this.visualOptions();r&&!h.align&&(h.align="right");const c=new Hs(o,h);c.reflow(new gs);const d=c.box;const u=l.center().y-d.height()/2;const p=e.x1+d.width()>i;const g=e.x0-d.width()<s;let m=a===dm||a===cm&&p?dm:um;r&&(m=a===um||a===cm&&g?um:dm);const f=[m===dm?e.x0-d.width():e.x1,u];const x=new gs(f[0],f[1],f[0]+d.width(),f[1]+d.height());return x.translate(n.left||0,n.top||0),c.reflow(x),c.renderVisual(),c.visual}visualOptions(){const t=ut({},this.options,this.options.node.label);return{color:t.color,font:t.font,border:t.border,margin:t.margin,padding:t.padding,align:t.align,paintOrder:t.paintOrder,stroke:t.stroke}}}te(pm,{position:cm});const gm=(t,e,s,i,o)=>ut({},e,{node:t,diagramMinX:i,diagramMaxX:o,rtl:s,visual:t.label.visual,visible:t.label.visible,margin:t.label.margin,padding:t.label.padding,border:t.label.border,align:t.label.align,offset:t.label.offset});class mm extends im{getElement(){const t=this.options;const{drawingRect:e,text:s}=t;if(!1===t.visible||!s)return null;const i=Ns.buildTitle(s,t);return i.reflow(e),i.renderVisual(),i.visual}createElement(){return this.getElement()}}te(mm,{align:d,border:{width:0},margin:yt(5),padding:yt(5)});const fm=(t,e)=>t.node.x0-e.node.x0!=0?t.node.x0-e.node.x0:t.node.y0-e.node.y0;const xm=(t,e)=>t.node.x1-e.node.x1!=0?t.node.x1-e.node.x1:e.node.y0-t.node.y0;class ym extends im{getElement(){const t=this.options;const{drawingRect:e,rtl:s,nodes:i=[],item:o,position:n}=t;if(!1===t.visible||!i.length)return null;const r=t.labels||{};let a;r.content&&(a=wt(r));const l=i.map((t=>{const e=t.label&&t.label.text||"";return{text:a?a({text:e,node:t}):e,area:{background:void 0!==o.areaBackground?o.areaBackground:t.color,opacity:void 0!==o.areaOpacity?o.areaOpacity:t.opacity},node:t}}));l.sort((t=>t?xm:fm)(s));const h=s&&n!==S&&n!==B;const c=new Il(Object.assign({},t,{data:l,reverse:h}),{rtl:s});return c.reflow(e),c.renderVisual(),c.visual}createElement(){return this.getElement()}}te(ym,{markers:{visible:!1},item:{type:Wo,cursor:Y,opacity:1},position:c,align:d,accessibility:{role:"presentation",ariaLabel:null,ariaRoleDescription:null},border:{width:0}});const vm="link";const bm="node";class wm extends je{constructor(t,e,s){super(),this._initTheme(s),this._setOptions(e),this._initElement(t),this._initSurface(),e&&e.data&&(this._redraw(),this._initResizeObserver(),this._initNavigation(t))}destroy(){this.unbind(),this._destroySurface(),this._destroyResizeObserver(),this.element&&(this.element.removeEventListener("keydown",this._keydownHandler),this.element.removeEventListener("focus",this._focusHandler),this.element.removeEventListener("mousedown",this._onDownHandler),this.element.removeEventListener("touchstart",this._onDownHandler),this.element.removeEventListener("pointerdown",this._onDownHandler)),this._focusState=null,this.element=null}_initElement(t){this.element=t,K(t,["k-chart","k-sankey"]),t.setAttribute("role","graphics-document");const{title:e}=this.options;e.text&&t.setAttribute("aria-label",e.text),e.description&&t.setAttribute("aria-roledescription",e.description)}_initSurface(){this.surface||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())}_initNavigation(t){t.tabIndex=t.getAttribute("tabindex")||0,this.options.disableKeyboardNavigation||(this._keydownHandler=this._keydown.bind(this),this._focusHandler=this._focus.bind(this),this._blurHandler=this._blur.bind(this),this._onDownHandler=this._onDown.bind(this),t.addEventListener("keydown",this._keydownHandler),t.addEventListener("focus",this._focusHandler),t.addEventListener("blur",this._blurHandler),t.addEventListener("mousedown",this._onDownHandler),t.addEventListener("touchstart",this._onDownHandler),t.addEventListener("pointerdown",this._onDownHandler),this._focusState={node:this.firstFocusableNode(),link:null})}firstFocusableNode(){return this.columns[0][0]}_initResizeObserver(){const t=new ResizeObserver((t=>{t.forEach((t=>{const{width:e,height:s}=t.contentRect;t.target!==this.element||this.size&&this.size.width===e&&this.size.height===s||(this.size={width:e,height:s},this.surface.setSize(this.size),this.resize=!0,this._redraw())}))}));this._resizeObserver=t,t.observe(this.element)}_createSurface(){return e.k.create(this.surfaceElement,{mouseenter:this._mouseenter.bind(this),mouseleave:this._mouseleave.bind(this),mousemove:this._mousemove.bind(this),click:this._click.bind(this)})}_initTheme(t){let e=t||this.theme||{};this.theme=e,this.options=ut({},e,this.options)}setLinksOpacity(t){this.linksVisuals.forEach((e=>{this.setOpacity(e,t,e.linkOptions.opacity)}))}setLinksInactivityOpacity(t){this.linksVisuals.forEach((e=>{this.setOpacity(e,t,e.linkOptions.highlight.inactiveOpacity)}))}setOpacity(t,e,s){t.options.set("stroke",Object.assign({},t.options.stroke,{opacity:Ft(s)?s:e}))}trigger(t,e){let s=e.element.dataItem;const i=e.element.type;const o=Object.assign({},e,{type:t,targetType:i,dataItem:s});return super.trigger(t,o)}_mouseenter(t){const e=t.element;const s=e.type===vm;const i=e.type===bm;const o=Boolean(e.chartElement&&e.chartElement.options.node);if(s&&this.trigger("linkEnter",t)||i&&this.trigger("nodeEnter",t))return;const{highlight:n}=this.options.links;if(s)this.setLinksInactivityOpacity(n.inactiveOpacity),this.setOpacity(e,n.opacity,e.linkOptions.highlight.opacity);else if(i)this.highlightLinks(e,n);else if(o){const t=this.nodesVisuals.get(e.chartElement.options.node.id);this.highlightLinks(t,n)}}_mouseleave(t){const e=t.element;const s=e.type===vm;const i=e.type===bm;const o=Boolean(e.chartElement&&e.chartElement.options.node);const n=t.originalEvent.relatedTarget;s&&n&&"text"===n.nodeName||((s||i)&&(this.tooltipTimeOut&&(clearTimeout(this.tooltipTimeOut),this.tooltipTimeOut=null),this.tooltipShown=!1,this.trigger("tooltipHide",t)),s&&this.trigger("linkLeave",t)||i&&this.trigger("nodeLeave",t)||(s||i||o)&&this.linksVisuals.forEach((t=>{this.setOpacity(t,this.options.links.opacity,t.linkOptions.opacity)})))}_mousemove(t){const{followPointer:e,delay:s}=this.options.tooltip;const i=t.element;const o=i.type;if(o!==vm&&o!==bm||this.tooltipShown&&!e)return;const n=t.originalEvent;const r=this.element.getBoundingClientRect();const a=n.clientX-r.left<r.width/2;const l=n.clientY-r.top<r.height/2;if(t.tooltipData={popupOffset:{left:n.pageX,top:n.pageY},popupAlign:{horizontal:a?"left":"right",vertical:l?"top":"bottom"}},o===bm){const{sourceLinks:e,targetLinks:s}=i.dataItem;const o=s.length?s:e;t.nodeValue=o.reduce(((t,e)=>t+e.value),0)}this.tooltipTimeOut&&(clearTimeout(this.tooltipTimeOut),this.tooltipTimeOut=null);const h=e&&this.tooltipShown?0:s;this.tooltipTimeOut=setTimeout((()=>{this.trigger("tooltipShow",t),this.tooltipShown=!0,this.tooltipTimeOut=null}),h)}_click(t){const e=t.element;const s=e.dataItem;const i=e.type===vm;const o=e.type===bm;const n=this._focusState||{};if(o){!n.link&&this.sameNode(n.node,s)||(this._focusState={node:s,link:null},this._focusNode({highlight:!1})),this.trigger("nodeClick",t)}else if(i){const e={sourceId:s.source.id,targetId:s.target.id,value:s.value};this.sameLink(n.link,e)||(this._focusState={node:s.source,link:e},this._focusLink({highlight:!1})),this.trigger("linkClick",t)}}sameNode(t,e){return t&&e&&t.id===e.id}sameLink(t,e){return t&&e&&t.sourceId===e.sourceId&&t.targetId===e.targetId}_focusNode(t){this._cleanFocusHighlight();const e=this._focusState.node;this.models.map.get(e.id).focus(t)}_focusLink(t){this._cleanFocusHighlight();const e=this._focusState.link;this.models.map.get(`${e.sourceId}-${e.targetId}`).focus(t)}_focusNextNode(t=1){const e=this._focusState.node;const s=this.columns.findIndex((t=>t.find((t=>t.id===e.id))));const i=this.columns[s];const o=i.findIndex((t=>t.id===e.id));const n=i[o+t];n&&(this._focusState.node=n,this._focusNode())}_focusNextLink(t=1){const e=this._focusState.node;const s=this._focusState.link;const i=e.sourceLinks.findIndex((t=>t.sourceId===s.sourceId&&t.targetId===s.targetId));const o=e.targetLinks.findIndex((t=>t.sourceId===s.sourceId&&t.targetId===s.targetId));if(-1!==i){const s=e.sourceLinks[i+t];s&&(this._focusState.link=s,this._focusLink())}else if(-1!==o){const s=e.targetLinks[o+t];s&&(this._focusState.link=s,this._focusLink())}}_focusSourceNode(){const t=this._focusState.link;const e=this.models.map.get(t.sourceId);this._focusState={node:e.options.node,link:null},this._focusNode()}_focusTargetNode(){const t=this._focusState.link;const e=this.models.map.get(t.targetId);this._focusState={node:e.options.node,link:null},this._focusNode()}_focusSourceLink(){const t=this._focusState.node.sourceLinks[0];t&&(this._focusState.link=t,this._focusLink())}_focusTargetLink(){const t=this._focusState.node.targetLinks[0];t&&(this._focusState.link=t,this._focusLink())}_focus(){this._skipFocusHighlight||(this._focusState.link?this._focusLink():this._focusNode()),this._skipFocusHighlight=!1}_blur(){this._cleanFocusHighlight()}_onDown(){this._hasFocus()||(this._skipFocusHighlight=!0)}_hasFocus(){return this.element.ownerDocument.activeElement===this.element}_cleanFocusHighlight(){this.models.nodes.forEach((t=>t.blur())),this.models.links.forEach((t=>t.blur()))}_keydown(t){let e=this["on"+t.key];const s=this.options.rtl;s&&"ArrowLeft"===t.key?e=this.onArrowRight:s&&"ArrowRight"===t.key&&(e=this.onArrowLeft),e&&e.call(this,t)}onEscape(t){t.preventDefault(),this._focusState={node:this.firstFocusableNode(),link:null},this._focusNode()}onArrowDown(t){t.preventDefault(),this._focusState.link?this._focusNextLink(1):this._focusNextNode(1)}onArrowUp(t){t.preventDefault(),this._focusState.link?this._focusNextLink(-1):this._focusNextNode(-1)}onArrowLeft(t){t.preventDefault(),this._focusState.link?this._focusSourceNode():this._focusTargetLink()}onArrowRight(t){t.preventDefault(),this._focusState.link?this._focusTargetNode():this._focusSourceLink()}highlightLinks(t,e){t&&(this.setLinksInactivityOpacity(e.inactiveOpacity),t.links.forEach((t=>{this.setOpacity(t,e.opacity,t.linkOptions.highlight.opacity)})))}_destroySurface(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())}_destroyResizeObserver(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}_initSurfaceElement(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement))}_destroySurfaceElement(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)}setOptions(t,e){this._setOptions(t),this._initTheme(e),this._initSurface(),this._redraw()}_redraw(){this.surface.clear();const{width:t,height:e}=this._getSize();this.size={width:t,height:e},this.surface.setSize(this.size),this.createVisual(),this.surface.draw(this.visual)}_getSize(){return this.element.getBoundingClientRect()}createVisual(){this.visual=this._render()}titleBox(t,e){if(!t||!1===t.visible||!t.text)return null;return new mm(Object.assign({},{drawingRect:e},t)).exportVisual().chartElement.box}legendBox(t,e,s){if(!t||!1===t.visible)return null;return new ym(Object.assign({},{nodes:e},t,{drawingRect:s})).exportVisual().chartElement.box}calculateSankey(t,e){const{title:s,legend:i,data:o,nodes:n,labels:r,nodeColors:a,disableAutoLayout:l,disableKeyboardNavigation:h,rtl:d}=e;const u=!l;const p=((n.focusHighlight||{}).border||{}).width||0;const g=h?0:p/2;const m=new gs(0,0,t.width,t.height);m.unpad(g);const f=this.titleBox(s,m);let x=m.clone();if(f){const e=f.height();s.position===z?(m.unpad({top:e}),x=new gs(0,e,t.width,t.height)):(m.shrink(0,e),x=new gs(0,0,t.width,t.height-e))}const y=this.legendBox(i,o.nodes,x);const v=i&&i.position||ym.prototype.options.position;y&&(v===S&&m.unpad({left:y.width()}),v===B&&m.shrink(y.width(),0),v===z&&m.unpad({top:y.height()}),v===c&&m.shrink(0,y.height()));const{nodes:b,circularLinks:w}=tm(Object.assign({},t,{offsetX:0,offsetY:0,width:m.width(),height:m.height()}));if(w)return console.warn("Circular links detected. Kendo Sankey diagram does not support circular links."),{sankey:{nodes:[],links:[],columns:[[]],circularLinks:w},legendBox:y,titleBox:f};const _=new gs;const k=b.reduce(((t,e)=>Math.min(t,e.x0)),1/0);const A=b.reduce(((t,e)=>Math.max(t,e.x1)),0);b.forEach(((t,e)=>{if(d){const{x0:e,x1:s}=t;t.x0=A-s,t.x1=A-e}const s=rm(t,n,a,e);const i=new om(s);_.wrap(zs(i.exportVisual().rawBBox()));const o=new pm(gm(t,r,d,k,A)).exportVisual();o&&_.wrap(zs(o.rawBBox()))}));let C=m.x1;let T=m.y1;let P=m.width()+C;let M=m.height()+T;if(P-=_.x2>m.width()?_.x2-m.width():0,M-=_.y2>m.height()?_.y2-m.height():0,C+=_.x1<0?-_.x1:0,T+=_.y1<0?-_.y1:0,!1===u)return{sankey:tm(Object.assign({},t,{offsetX:C,offsetY:T,width:P,height:M,autoLayout:!1})),legendBox:y,titleBox:f};if(this.resize&&u&&this.permutation)return this.resize=!1,{sankey:tm(Object.assign({},t,{offsetX:C,offsetY:T,width:P,height:M},this.permutation)),legendBox:y,titleBox:f};const E=tm(Object.assign({},t,{offsetX:C,offsetY:T,width:P,height:M,autoLayout:!1})).columns.length;const L=[];const I=(e,s)=>{let i=(t=>{let e=0;const s=t.length;for(let i=0;i<s;i++){const o=t[i];for(let n=i+1;n<s;n++){const s=t[n];sm(o,s)&&(e+=Math.min(o.value,s.value))}}return e})(tm(Object.assign({},t,{offsetX:C,offsetY:T,width:P,height:M,loops:2,targetColumnIndex:e,reverse:s})).links);return L.push({crosses:i,reverse:s,targetColumnIndex:e}),0===i};for(let t=1;t<=E-1&&(!I(t,!1)&&!I(t,!0));t++);const R=Math.min.apply(null,L.map((t=>t.crosses)));const O=L.find((t=>t.crosses===R));this.permutation={targetColumnIndex:O.targetColumnIndex,reverse:O.reverse};return{sankey:tm(Object.assign({},t,{offsetX:C,offsetY:T,width:P,height:M},this.permutation)),legendBox:y,titleBox:f}}_render(t,s){const i=t||this.options;const o=s||this;const{labels:n,nodes:r,links:a,nodeColors:l,title:h,legend:c,rtl:d,disableKeyboardNavigation:u}=i;let p=i.data;const{width:g,height:m}=o.size;const f=Object.assign({},p,{width:g,height:m,nodesOptions:r,title:h,legend:c});const{sankey:x,titleBox:y,legendBox:v}=this.calculateSankey(f,i);d&&(t=>{const{nodes:e,links:s}=t;const i=Math.min(...e.map((t=>t.x0)));const o=Math.max(...e.map((t=>t.x1)))-i;e.forEach((t=>{const e=o-(t.x1-2*i);const s=o-(t.x0-2*i);t.x0=e,t.x1=s})),s.forEach((t=>{const e=o-(t.x1-2*i);const s=o-(t.x0-2*i);t.x1=e,t.x0=s}))})(x);const{nodes:b,links:w,columns:_}=x;o.columns=_.map((t=>{const e=t.slice();return e.sort(((t,e)=>t.y0-e.y0)),e}));const k=new e.G({clip:e.a.fromRect(new e.R([0,0],[g,m]))});if(y){const t=new mm(Object.assign({},h,{drawingRect:y})).exportVisual();k.append(t)}if(x.circularLinks)return k;const A=new Map;o.nodesVisuals=A;const S={nodes:[],links:[],map:new Map};o.models=S;const C=[];b.forEach(((t,e)=>{const s=rm(t,r,l,e);s.root=()=>o.element,s.navigatable=!0!==u;const i=new om(s);const n=i.exportVisual();n.links=[],n.type=bm,t.color=s.color,t.opacity=s.opacity,n.dataItem=Object.assign({},p.nodes[e],{color:s.color,opacity:s.opacity,sourceLinks:t.sourceLinks.map((t=>({sourceId:t.sourceId,targetId:t.targetId,value:t.value}))),targetLinks:t.targetLinks.map((t=>({sourceId:t.sourceId,targetId:t.targetId,value:t.value})))}),A.set(t.id,n),S.nodes.push(i),S.map.set(t.id,i),k.append(n),i.createFocusHighlight(),i._highlight&&C.push(i._highlight)}));const T=w.slice().sort(((t,e)=>e.value-t.value));const P=[];o.linksVisuals=P,T.forEach((t=>{const{source:e,target:s}=t;const i=A.get(e.id);const n=A.get(s.id);const r=((t,e,s,i)=>{const o=ut({},e,{link:t,opacity:t.opacity,color:t.color,colorType:t.colorType,visual:t.visual,highlight:t.highlight});return"source"===o.colorType?o.color=s.options.fill.color:"target"===o.colorType&&(o.color=i.options.fill.color),o})(t,a,i,n);r.root=()=>o.element,r.navigatable=!0!==u,r.rtl=d;const l=new hm(r);const h=l.exportVisual();h.type=vm,h.dataItem={source:Object.assign({},i.dataItem),target:Object.assign({},n.dataItem),value:t.value},h.linkOptions=r,P.push(h),i.links.push(h),n.links.push(h),S.links.push(l),S.map.set(`${e.id}-${s.id}`,l),l.createFocusHighlight(),l._highlight&&C.push(l._highlight),k.append(h)}));const M=b.reduce(((t,e)=>Math.min(t,e.x0)),1/0);const E=b.reduce(((t,e)=>Math.max(t,e.x1)),0);if(b.forEach((t=>{const e=gm(t,n,d,M,E);const s=new pm(e).exportVisual();s&&k.append(s)})),v){const t=new ym(Object.assign({},c,{rtl:d,drawingRect:v,nodes:b})).exportVisual();k.append(t)}if(0!==C.length){const t=new e.G;t.append(...C),k.append(t)}return k}exportVisual(t){const e=t&&t.options?ut({},this.options,t.options):this.options;const s={size:{width:Ft(t&&t.width)?t.width:this.size.width,height:Ft(t&&t.height)?t.height:this.size.height}};return this._render(e,s)}_setOptions(t){this.options=ut({},this.options,t)}}const _m={opacity:1,width:2,color:h};te(wm,{title:{position:z},labels:{visible:!0,margin:{left:8,right:8},padding:0,border:{width:0},paintOrder:"stroke",stroke:{lineJoin:"round",width:1},offset:{left:0,top:0}},nodes:{width:24,padding:16,opacity:1,align:"stretch",offset:{left:0,top:0},focusHighlight:{border:Object.assign({},_m)},labels:{ariaTemplate:({node:t})=>t.label.text}},links:{colorType:"static",opacity:.4,highlight:{opacity:.8,inactiveOpacity:.2},focusHighlight:{border:Object.assign({},_m)},labels:{ariaTemplate:({link:t})=>`${t.source.label.text} to ${t.target.label.text}`}},tooltip:{followPointer:!1,delay:200}});const km=Object.freeze({seriesType:0,stacked:1,categoryAxisX:2,valueAxisY:3,seriesChange:4,areaMarginLeft:5,areaMarginRight:6,areaMarginTop:7,areaMarginBottom:8,areaBackground:9,titleText:10,titleFontName:11,titleFontSize:12,titleColor:13,subtitleText:14,subtitleFontName:15,subtitleFontSize:16,subtitleColor:17,seriesColor:18,seriesLabel:19,legendVisible:20,legendFontName:21,legendFontSize:22,legendColor:23,legendPosition:24,categoryAxisTitleText:25,categoryAxisTitleFontName:26,categoryAxisTitleFontSize:27,categoryAxisTitleColor:28,categoryAxisLabelsFontName:29,categoryAxisLabelsFontSize:30,categoryAxisLabelsColor:31,categoryAxisLabelsRotation:32,categoryAxisReverseOrder:33,valueAxisTitleText:34,valueAxisTitleFontName:35,valueAxisTitleFontSize:36,valueAxisTitleColor:37,valueAxisLabelsFormat:38,valueAxisLabelsFontName:39,valueAxisLabelsFontSize:40,valueAxisLabelsColor:41,valueAxisLabelsRotation:42});const Am="12px";const Sm="16px";const Cm=[{text:"Arial",value:"Arial, Helvetica, sans-serif",style:{fontFamily:"Arial, Helvetica, sans-serif"}},{text:"Courier New",value:"'Courier New', Courier, monospace",style:{fontFamily:"'Courier New', Courier, monospace"}},{text:"Georgia",value:"Georgia, serif",style:{fontFamily:"Georgia, serif"}},{text:"Impact",value:"Impact, Charcoal, sans-serif",style:{fontFamily:"Impact, Charcoal, sans-serif"}},{text:"Lucida Console",value:"'Lucida Console', Monaco, monospace",style:{fontFamily:"'Lucida Console', Monaco, monospace"}},{text:"Tahoma",value:"Tahoma, Geneva, sans-serif",style:{fontFamily:"Tahoma, Geneva, sans-serif"}},{text:"Times New Roman",value:"'Times New Roman', Times,serif",style:{fontFamily:"'Times New Roman', Times,serif"}},{text:"Trebuchet MS",value:"'Trebuchet MS', Helvetica, sans-serif",style:{fontFamily:"'Trebuchet MS', Helvetica, sans-serif"}},{text:"Verdana",value:"Verdana, Geneva, sans-serif",style:{fontFamily:"Verdana, Geneva, sans-serif"}}];const Tm=Cm[0].value;const Pm="line";const Mm="scatter";const Em=["column","bar",Pm,Mm];const Lm={type:Pm,width:0};function Im(t){return t&&Em.includes(t)}const Rm=["string","date","number"];const Bm=["number"];const Om={bar:[{axisType:"category",types:Rm},{axisType:"value",types:Bm}],column:[{axisType:"category",types:Rm},{axisType:"value",types:Bm}],line:[{axisType:"category",types:Rm},{axisType:"value",types:Bm}],pie:[{axisType:"category",types:Rm},{axisType:"value",types:Bm,count:1}],scatter:[{axisType:"category",types:Rm},{axisType:"value",types:Bm}]};function Vm(t,e){return`${e||""} ${t||""}`.trim()}function Dm(t){const e=(t||"").indexOf(" ");return{size:t&&t.substring(0,e),name:t&&t.substring(e+1)}}const zm=(t,e,s)=>{const{size:i}=Dm(s);return t?Vm(t,i||e):""};const Fm=(t,e,s)=>{const{name:i}=Dm(s);return t?Vm(i||e,t):""};const Hm=t=>null!=t;const Nm=t=>{const e=structuredClone(t[0]);return e.forEach(((e,s)=>{if(!Hm(e.value))for(let i=0;i<t.length;i++){const o=t[i][s].value;if(Hm(o)){e.value=o;break}}})),e};const jm=(t,e)=>{const s=[];const i=Nm(t);e.types.forEach((t=>{i.forEach(((e,i)=>{typeof e.value===t&&s.push(i)}))}));const o=s.findIndex((e=>{const s=t.map((t=>t[e].value));return new Set(s).size===s.length}));return Math.max(o,0)};const Um=(t,e)=>{const s=[];const i=Nm(t);return e.forEach((t=>{t.types.forEach((t=>{i.forEach(((e,i)=>{typeof e.value===t&&s.push(i)}))}))})),s};const Gm=()=>structuredClone({columns:[],data:[],series:[],initialSeries:[],categoryAxis:[{categories:[],labels:{visible:!0,rotation:"auto"},title:{text:""}}],valueAxis:[{labels:{visible:!0,rotation:"auto"}}],area:{margin:{left:void 0,right:void 0,top:void 0,bottom:void 0}},title:{text:""},subtitle:{text:""},stack:!1});const Wm=(t,e,s)=>{const i=Gm();i.seriesType=e,i.data=t||[],i.legend={visible:!0,position:"bottom"};const o=Om[e];if(!o||!t.length)return i;const n=t[0].slice();i.columns=t[0].map((t=>String(t.field)));const r=o.find((t=>"category"===t.axisType));let a=-1;r&&(a=s&&s.categoryAxis?i.columns.indexOf(s.categoryAxis):jm(t,r));const l=o.filter((t=>"value"===t.axisType));let h=Um(t,l);h.includes(a)&&(h.length>1?h=h.filter((t=>t!==a)):a=-1);const c=[];h.forEach((s=>{const i=n[s];const o=[];t.forEach((t=>{o.push(t[s].value)})),c.push(Object.assign({},{name:i.field,type:e,data:o,stack:!1,labels:{visible:!1}},e===Mm?Lm:{}))}));const d=a>-1?t.map((t=>String(Hm(t[a].value)?t[a].value:" "))):[];return c.length&&(i.series=c.map(((t,e)=>Object.assign({},t,{id:e}))),i.initialSeries=structuredClone(i.series)),i.categoryAxis=[{categories:d,labels:{visible:!0,rotation:"auto"}}],i.categoryField=i.columns[a],i};const Xm=(t,e,s)=>{const i=Gm();i.seriesType=e,i.data=t||[];const o=Om[e];if(!o||!t.length)return i;const n=t[0].map((t=>t.field));const r=o.find((t=>"category"===t.axisType));let a=-1;r&&(a=s&&s.categoryAxis?n.indexOf(s.categoryAxis):jm(t,r));const l=o.filter((t=>"value"===t.axisType));let h=[];h=s&&s.valueAxis?[n.indexOf(s.valueAxis)]:Um(t,l),h.includes(a)&&h.length>1&&(h=h.filter((t=>t!==a))),"number"==typeof l[0].count&&(h=h.slice(0,l[0].count));const c=a>-1?t.map((t=>String(t[a].value))):[];const d=[];return t.forEach((t=>{const e={};h.forEach((s=>{const i=t[s];e[i.field]=i.value||0,e[t[a].field]=t[a].value||" "})),d.push(e)})),i.columns=n,i.categoryAxis=[{categories:c,title:{text:""}}],i.series=[{id:0,data:d,type:e,name:n[a],labels:{visible:!0},categoryField:n[a],field:n[h[0]]}],i.categoryField=n[a],i.valueField=n[h[0]],i.initialSeries=structuredClone(i.series),i};function Ym(t,e){return(Im(e)?Wm:Xm)(t,e)}function qm(t,e){const s=structuredClone(e);if(s.legend=t.legend,s.area=t.area,s.title=t.title,s.subtitle=t.subtitle,s.series.length===t.series.length)for(let e=0;e<s.series.length;e++)s.series[e].color=t.series[e].color,s.series[e].labels=t.series[e].labels;return t.series.every((t=>t.labels&&t.labels.visible))&&Im(s.seriesType)&&Im(t.seriesType)&&s.series.forEach((t=>{t.labels=t.labels||{},t.labels.visible=!0})),s}function Zm(t,e,s){const i=Object.assign({},t);switch(e){case km.seriesType:return Ym(i.data,s);case km.stacked:return i.series=i.series.map((t=>Object.assign({},t,{stack:s}))),i.stack=s,i;case km.categoryAxisX:if(i.seriesType&&Im(i.seriesType)){return qm(i,Wm(i.data,i.seriesType,{categoryAxis:s}))}if("pie"===i.seriesType){return qm(i,Xm(i.data,i.seriesType,{categoryAxis:s}))}return i;case km.valueAxisY:if("pie"===i.seriesType){return qm(i,Xm(i.data,i.seriesType,{categoryAxis:i.categoryField,valueAxis:s}))}return i;case km.seriesChange:return i.series=s,i;case km.areaMarginLeft:return i.area=Object.assign({},i.area,{margin:Object.assign({},i.area&&i.area.margin||{},{left:s})}),i;case km.areaMarginRight:return i.area=Object.assign({},i.area,{margin:Object.assign({},i.area&&i.area.margin||{},{right:s})}),i;case km.areaMarginTop:return i.area=Object.assign({},i.area,{margin:Object.assign({},i.area&&i.area.margin||{},{top:s})}),i;case km.areaMarginBottom:return i.area=Object.assign({},i.area,{margin:Object.assign({},i.area&&i.area.margin||{},{bottom:s})}),i;case km.areaBackground:return i.area=Object.assign({},i.area,{background:s}),i;case km.titleText:return i.title=Object.assign({},i.title,{text:s}),i;case km.titleFontName:return i.title=Object.assign({},i.title,{font:zm(s,"20px",i.title&&i.title.font)}),i;case km.titleFontSize:return i.title=Object.assign({},i.title,{font:Fm(s,Tm,i.title&&i.title.font)}),i;case km.titleColor:return i.title=Object.assign({},i.title,{color:s}),i;case km.subtitleText:return i.subtitle=Object.assign({},i.subtitle,{text:s}),i;case km.subtitleFontName:return i.subtitle=Object.assign({},i.subtitle,{font:zm(s,"16px",i.subtitle&&i.subtitle.font)}),i;case km.subtitleFontSize:return i.subtitle=Object.assign({},i.subtitle,{font:Fm(s,Tm,i.subtitle&&i.subtitle.font)}),i;case km.subtitleColor:return i.subtitle=Object.assign({},i.subtitle,{color:s}),i;case km.seriesColor:return i.series=i.series.map((t=>Object.assign({},t,{color:s.seriesName===t.name?s.color:t.color}))),i;case km.seriesLabel:return i.series=i.series.map((t=>s.all||s.seriesName===t.name?Object.assign({},t,{labels:{visible:s.visible}}):t)),i;case km.legendVisible:return i.legend=Object.assign({},i.legend,{visible:s}),i;case km.legendFontName:{const t=i.legend||{};return i.legend=Object.assign({},t,{labels:Object.assign({},t.labels,{font:zm(s,Am,t.labels&&t.labels.font)})}),i}case km.legendFontSize:{const t=i.legend||{};return i.legend=Object.assign({},t,{labels:Object.assign({},t.labels,{font:Fm(s,Tm,t.labels&&t.labels.font)})}),i}case km.legendColor:{const t=i.legend||{};return i.legend=Object.assign({},t,{labels:Object.assign({},t.labels,{color:s})}),i}case km.legendPosition:return i.legend=Object.assign({},i.legend,{position:s}),i;case km.categoryAxisTitleText:return i.categoryAxis=(i.categoryAxis||[]).map((t=>Object.assign({},t,{title:Object.assign({},t.title,{text:s})}))),i;case km.categoryAxisTitleFontName:return i.categoryAxis=(i.categoryAxis||[]).map((t=>Object.assign({},t,{title:Object.assign({},t.title,{font:zm(s,Sm,t.title&&t.title.font)})}))),i;case km.categoryAxisTitleFontSize:return i.categoryAxis=(i.categoryAxis||[]).map((t=>Object.assign({},t,{title:Object.assign({},t.title,{font:Fm(s,Tm,t.title&&t.title.font)})}))),i;case km.categoryAxisTitleColor:return i.categoryAxis=(i.categoryAxis||[]).map((t=>Object.assign({},t,{title:Object.assign({},t.title,{color:s})}))),i;case km.categoryAxisLabelsFontName:return i.categoryAxis=(i.categoryAxis||[]).map((t=>Object.assign({},t,{labels:Object.assign({},t.labels,{font:zm(s,Am,t.labels&&t.labels.font)})}))),i;case km.categoryAxisLabelsFontSize:return i.categoryAxis=(i.categoryAxis||[]).map((t=>Object.assign({},t,{labels:Object.assign({},t.labels,{font:Fm(s,Tm,t.labels&&t.labels.font)})}))),i;case km.categoryAxisLabelsColor:return i.categoryAxis=(i.categoryAxis||[]).map((t=>Object.assign({},t,{labels:Object.assign({},t.labels,{color:s})}))),i;case km.categoryAxisLabelsRotation:{const t=Hm(s)?s:"auto";return i.categoryAxis=(i.categoryAxis||[]).map((e=>Object.assign({},e,{labels:Object.assign({},e.labels,{rotation:t})}))),i}case km.categoryAxisReverseOrder:return i.categoryAxis=(i.categoryAxis||[]).map((t=>Object.assign({},t,{reverse:s}))),i;case km.valueAxisTitleText:return i.valueAxis&&0!==i.valueAxis.length?i.valueAxis=(i.valueAxis||[]).map((t=>Object.assign({},t,{title:Object.assign({},t.title,{text:s})}))):i.valueAxis=[{title:{text:s}}],i;case km.valueAxisTitleFontName:return i.valueAxis=(i.valueAxis||[]).map((t=>Object.assign({},t,{title:Object.assign({},t.title,{font:zm(s,Sm,t.title&&t.title.font)})}))),i;case km.valueAxisTitleFontSize:return i.valueAxis=(i.valueAxis||[]).map((t=>Object.assign({},t,{title:Object.assign({},t.title,{font:Fm(s,Tm,t.title&&t.title.font)})}))),i;case km.valueAxisTitleColor:return i.valueAxis=(i.valueAxis||[]).map((t=>Object.assign({},t,{title:Object.assign({},t.title,{color:s})}))),i;case km.valueAxisLabelsFormat:return i.valueAxis=(i.valueAxis||[]).map((t=>Object.assign({},t,{labels:Object.assign({},t.labels,{format:s})}))),i;case km.valueAxisLabelsFontName:return i.valueAxis=(i.valueAxis||[]).map((t=>Object.assign({},t,{labels:Object.assign({},t.labels,{font:zm(s,Am,t.labels&&t.labels.font)})}))),i;case km.valueAxisLabelsFontSize:return i.valueAxis=(i.valueAxis||[]).map((t=>Object.assign({},t,{labels:Object.assign({},t.labels,{font:Fm(s,Tm,t.labels&&t.labels.font)})}))),i;case km.valueAxisLabelsColor:return i.valueAxis=(i.valueAxis||[]).map((t=>Object.assign({},t,{labels:Object.assign({},t.labels,{color:s})}))),i;case km.valueAxisLabelsRotation:{const t=Hm(s)?s:"auto";return i.valueAxis=(i.valueAxis||[]).map((e=>Object.assign({},e,{labels:Object.assign({},e.labels,{rotation:t})}))),i}default:return i}}const $m=Object.freeze({windowTitle:"Chart Preview",exportButton:"Export",exportPDFButton:"PDF File",exportSVGButton:"SVG File",exportPNGButton:"PNG File",tabChart:"Chart",tabData:"Data",tabFormat:"Format",barChart:"Bar Chart",barChartBar:"Bar",barChartStackedBar:"Stacked Bar",barChart100StackedBar:"100% Stacked Bar",pieChart:"Pie Chart",pieChartPie:"Pie",columnChart:"Column Chart",columnChartColumn:"Column",columnChartStackedColumn:"Stacked Column",columnChart100StackedColumn:"100% Stacked Column",lineChart:"Line Chart",lineChartLine:"Line",lineChartStackedLine:"Stacked Line",lineChart100StackedLine:"100% Stacked Line",scatterChart:"Scatter Chart",scatterChartScatter:"Scatter",configuration:"Configuration",configurationCategoryAxis:"Category Axis",configurationXAxis:"X Axis",configurationValueAxis:"Value Axis",configurationSeries:"Series",configurationSeriesAdd:"Add",formatChartArea:"Chart Area",formatChartAreaMargins:"Margins",formatChartAreaMarginsAuto:"Auto",formatChartAreaMarginsLeft:"Left",formatChartAreaMarginsRight:"Right",formatChartAreaMarginsTop:"Top",formatChartAreaMarginsBottom:"Bottom",formatChartAreaBackground:"Background",formatChartAreaBackgroundColor:"Color",formatTitle:"Title",formatTitleApplyTo:"Apply to",formatTitleChartTitle:"Chart Title",formatTitleChartSubtitle:"Chart Subtitle",formatTitleLabel:"Title",formatTitleFont:"Font",formatTitleFontPlaceholder:"(inherited font)",formatTitleSize:"Size",formatTitleSizePlaceholder:"px",formatTitleColor:"Color",formatSeries:"Series",formatSeriesApplyTo:"Apply to",formatSeriesAllSeries:"All Series",formatSeriesColor:"Color",formatSeriesShowLabels:"Show Labels",formatLegend:"Legend",formatLegendShowLegend:"Show Legend",formatLegendFont:"Font",formatLegendFontPlaceholder:"(inherited font)",formatLegendSize:"Size",formatLegendSizePlaceholder:"px",formatLegendColor:"Color",formatLegendPosition:"Position",formatLegendPositionTop:"Top",formatLegendPositionBottom:"Bottom",formatLegendPositionLeft:"Left",formatLegendPositionRight:"Right",formatCategoryAxis:"Category Axis",formatXAxis:"X Axis",formatCategoryAxisTitle:"Title",formatCategoryAxisTitlePlaceholder:"Axis Title",formatCategoryAxisTitleFont:"Font",formatCategoryAxisTitleFontPlaceholder:"(inherited font)",formatCategoryAxisTitleSize:"Size",formatCategoryAxisTitleSizePlaceholder:"px",formatCategoryAxisTitleColor:"Color",formatCategoryAxisLabels:"Labels",formatCategoryAxisLabelsFont:"Font",formatCategoryAxisLabelsFontPlaceholder:"(inherited font)",formatCategoryAxisLabelsSize:"Size",formatCategoryAxisLabelsSizePlaceholder:"px",formatCategoryAxisLabelsColor:"Color",formatCategoryAxisLabelsRotation:"Rotation",formatCategoryAxisLabelsRotationAuto:"Auto",formatCategoryAxisLabelsReverseOrder:"Reverse Order",formatValueAxis:"Value Axis",formatYAxis:"Y Axis",formatValueAxisTitle:"Title",formatValueAxisTitlePlaceholder:"Axis Title",formatValueAxisTitleFont:"Font",formatValueAxisTitleFontPlaceholder:"(inherited font)",formatValueAxisTitleSize:"Size",formatValueAxisTitleSizePlaceholder:"px",formatValueAxisTitleColor:"Color",formatValueAxisLabels:"Labels",formatValueAxisLabelsFormat:"Label Format",formatValueAxisLabelsFormatText:"Text",formatValueAxisLabelsFormatNumber:"Number",formatValueAxisLabelsFormatCurrency:"Currency",formatValueAxisLabelsFormatPercent:"Percent",formatValueAxisLabelsFont:"Font",formatValueAxisLabelsFontPlaceholder:"(inherited font)",formatValueAxisLabelsSize:"Size",formatValueAxisLabelsSizePlaceholder:"px",formatValueAxisLabelsColor:"Color",formatValueAxisLabelsRotation:"Rotation",formatValueAxisLabelsRotationAuto:"Auto"});const Qm=Object.freeze({getWizardDataFromDataRows:function(t){const e=[];return t.forEach((t=>{const{dataItem:s,dataColumns:i}=t;const o=[];i.forEach((t=>{o.push({field:t.title||t.field,value:St(t.field)(s)})})),e.push(o)})),e},ActionTypes:km,createInitialState:function(t,e,s){const i=Ym(t,s&&s.seriesType||e);return void 0!==(s&&s.stack)?Zm(i,km.stacked,s.stack):i},createState:Ym,fontNames:Cm,fontSizes:[{text:"10",value:"10px"},{text:"12",value:"12px"},{text:"14",value:"14px"},{text:"16",value:"16px"},{text:"20",value:"20px"},{text:"28",value:"28px"},{text:"42",value:"42px"},{text:"56",value:"56px"}],isCategorical:Im,mergeStates:qm,parseFont:Dm,updateState:Zm,messages:$m});const Km=1.5;const Jm=.4;const tf="#000";const ef="Arial, Helvetica, sans-serif";const sf="11px "+ef;const of="12px "+ef;const nf="16px "+ef;const rf="transparent";const af="#fff";const lf={type:on};const hf={type:Wo};const cf=Object.assign({},hf,{markers:{visible:!1},highlight:{visible:!1}});const df=()=>({icon:{border:{width:1}},label:{font:of,padding:3},line:{length:10,width:2},legendItem:cf,visible:!0});const uf=()=>({highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:hf,opacity:.4});const pf=()=>({highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:hf,opacity:.4});const gf=()=>({outliersField:"",meanField:"",border:{_brightness:.8,width:1},downColor:af,gap:1,highlight:{border:{opacity:1,width:2},whiskers:{width:3},mean:{width:2},median:{width:2}},mean:{width:2},median:{width:2},spacing:.3,whiskers:{width:2},legendItem:cf});const mf=()=>({gap:Km,spacing:Jm,target:{color:"#ff0000"},legendItem:cf});const ff=()=>({width:2,legendItem:lf});const xf=()=>({line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:hf,opacity:.5});const yf=()=>({markers:{visible:!1},legendItem:lf,width:2});const vf=()=>({gap:.5,line:{color:tf,width:1},legendItem:cf,spacing:Jm});const bf=()=>({labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}},legendItem:cf});const wf=bf;const _f=t=>Object.assign({color:A,trendline:{},markers:{visible:!1},width:1,dashType:"longDash",legendItem:lf},t);const kf=t=>({visible:!0,labels:{font:sf},overlay:t.gradients?{}:{gradient:"none"},area:uf(),rangeArea:pf(),verticalRangeArea:pf(),bar:{gap:Km,spacing:Jm,legendItem:cf},boxPlot:gf(),bubble:{border:{width:0},labels:{background:rf},legendItem:cf,opacity:.6},bullet:mf(),candlestick:{border:{_brightness:.8,width:1},downColor:af,gap:1,highlight:{border:{opacity:1,width:2},line:{width:2}},line:{color:tf,width:1},legendItem:cf,spacing:.3},column:{gap:Km,spacing:Jm,legendItem:cf},heatmap:{labels:{color:"",background:rf,visible:!0},highlight:{border:{width:0}},legendItem:cf},pie:{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}},legendItem:cf},donut:{margin:1,legendItem:cf},funnel:bf(),pyramid:wf(),horizontalWaterfall:vf(),line:ff(),notes:df(),ohlc:{gap:1,highlight:{line:{opacity:1,width:3}},line:{width:1},legendItem:cf,spacing:.3},radarArea:xf(),radarLine:yf(),radarColumn:{legendItem:cf},polarArea:xf(),polarLine:yf(),polarScatter:{legendItem:lf},rangeBar:{gap:Km,spacing:Jm,legendItem:cf},rangeColumn:{gap:Km,spacing:Jm,legendItem:cf},scatter:{legendItem:lf},scatterLine:{width:1,legendItem:lf},verticalArea:uf(),verticalBoxPlot:gf(),verticalBullet:mf(),verticalLine:ff(),waterfall:vf(),linearTrendline:_f(),exponentialTrendline:_f({style:"smooth"}),logarithmicTrendline:_f({style:"smooth"}),polynomialTrendline:_f({style:"smooth"}),powerTrendline:_f({style:"smooth"}),movingAverageTrendline:_f()});const Af="--kendo-chart-series-";const Sf=t=>t.ownerDocument.defaultView.getComputedStyle(t);const Cf={};const Tf=(t,e)=>{let s=Sf(t).getPropertyValue(e);return/^color-mix/i.test(s)&&(s=((t,e)=>{if(Cf[t])return Cf[t];const s=e.style.color;e.style.color=t;const i=Sf(e).color;return e.style.color=s,Cf[t]=i,i})(s,t)),s};const Pf=(t,e)=>parseFloat(Sf(t).getPropertyValue(e));const Mf=(t,e,s,i)=>{const o=Sf(t);return[o.getPropertyValue(e),o.getPropertyValue(s),o.getPropertyValue(i)||o.fontFamily].join(" ")};const Ef=t=>{const e=Sf(t);const s=[];let i=1;let o=e.getPropertyValue(`${Af}${i}`);for(;o||i<=30;)s.push(o),i++,o=e.getPropertyValue(`${Af}${i}`);return s};const Lf=t=>Mf(t,"--kendo-font-weight","--kendo-chart-font-size","--kendo-font-family");const If=t=>Mf(t,"--kendo-chart-pane-title-font-weight","--kendo-chart-pane-title-font-size","--kendo-font-family");const Rf=t=>Tf(t,"--kendo-chart-text");const Bf=t=>({color:Rf(t),font:Mf(t,"--kendo-font-weight","--kendo-chart-title-font-size","--kendo-font-family")});const Of=t=>{const e=Rf(t);return{labels:{color:e,font:Lf(t)},title:{color:e}}};const Vf=t=>{const e=Tf(t,"--kendo-chart-inactive");return Object.assign({},{inactiveItems:{labels:{color:e},markers:{color:e}}},Of(t))};var Df=Object.freeze({__proto__:null,Aggregates:wo,AreaChart:sa,AreaSegment:Jr,AxisGroupRangeTracker:ia,Bar:ra,BarChart:da,BarLabel:oa,BoxPlot:ga,BoxPlotChart:fa,BubbleChart:ba,Bullet:_a,BulletChart:ka,Candlestick:ua,CandlestickChart:pa,CategoricalChart:Hr,CategoricalErrorBar:vr,CategoricalPlotArea:gl,Chart:$h,ChartAxis:fo,ChartContainer:Ta,ChartPane:yo,ChartPlotArea:vo,ClipAnimation:$r,ClusterLayout:ha,Crosshair:Ca,CrosshairTooltip:Sa,DefaultAggregates:Fa,DonutChart:hh,DonutPlotArea:ch,DonutSegment:lh,ErrorBarBase:yr,ErrorRangeCalculator:Co,Highlight:xl,Legend:Il,LegendItem:El,LegendLayout:Al,LineChart:Kr,LinePoint:Ur,LineSegment:Gr,MousewheelZoom:kl,OHLCChart:$a,OHLCPoint:Za,Pane:Pa,Pannable:wl,PieAnimation:jl,PieChart:nh,PieChartMixin:oh,PiePlotArea:ah,PieSegment:th,PlotAreaBase:La,PlotAreaEventsMixin:Va,PlotAreaFactory:Rl,PointEventsMixin:Nr,RangeAreaChart:qa,RangeAreaPoint:Ga,RangeBar:Ha,RangeBarChart:Na,ScatterChart:ya,ScatterErrorBar:xa,ScatterLineChart:Ul,Selection:Vl,SeriesAggregator:Da,SeriesBinder:ko,SharedTooltip:zl,SplineAreaSegment:ea,SplineSegment:qr,StackWrap:ca,Tooltip:Dl,WaterfallChart:Ka,WaterfallSegment:Qa,XYPlotArea:Kl,ZoomSelection:_l,anyHasZIndex:br,appendIfNotNull:wr,areNumbers:_r,bindSegments:Ar,categoriesCount:Sr,constants:xr,countNumbers:bo,createOutOfRangePoints:zr,equalsIgnoreCase:Cr,evalOptions:Tr,filterSeriesByType:Pr,findAxisByName:xo,getField:_o,hasGradientOverlay:Lr,hasValue:Ir,isDateAxis:Rr,parseDateCategory:Er,segmentVisible:kr,singleItemOrArray:Br,unclipBox:Fr});t.A=bd,t.B=gs,t.C=Qm,t.D=Ks,t.E=yt,t.F=uc,t.G=Is,t.H=yc,t.I=It,t.J=dc,t.K=fc,t.L=sd,t.M=mc,t.N=pc,t.O=lc,t.P=ps,t.R=fd,t.S=ko,t.T=Hs,t.__meta__={id:"charts.cmn.chunk",name:"ChartsCmnChunk",category:"web",description:"A reusable outputed chunk of code",depends:["drawing.cmn.chunk"],hidden:!0,chunk:!0},t.a=Df,t.b=(t={})=>({axisDefaults:{labels:{font:of},notes:df(),title:{font:nf,margin:5}},categoryAxis:{majorGridLines:{visible:!0}},navigator:{pane:{height:90,margin:{top:10}}},seriesDefaults:kf(t),title:{font:nf},subtitle:{font:of},legend:{labels:{font:of}}}),t.c=mo,t.d=xr,t.e=Ft,t.f=_o,t.g=t=>{const e=Rf(t);return{pointer:{color:Tf(t,"--kendo-chart-gauge-pointer")},scale:{labels:{color:e},rangePlaceholderColor:Tf(t,"--kendo-chart-gauge-track"),minorTicks:{color:e},majorTicks:{color:e},line:{color:e}}}},t.h=we,t.i=Et,t.j=$h,t.k=t=>{const e=Tf(t,"--kendo-chart-major-lines");const s=Tf(t,"--kendo-chart-text");const i=Mf(t,"--kendo-font-weight","--kendo-chart-label-font-size","--kendo-font-family");const o=Tf(t,"--kendo-chart-bg");const n=(t=>({icon:{background:Tf(t,"--kendo-chart-notes-bg"),border:{color:Tf(t,"--kendo-chart-notes-border")}},line:{color:Tf(t,"--kendo-chart-notes-lines")},label:{font:Lf(t)}}))(t);const r=Pf(t,"--kendo-chart-area-opacity");const a=Tf(t,"--kendo-color-surface");const l=Tf(t,"--kendo-chart-primary-bg");const h=()=>({downColor:e,mean:{color:a},median:{color:a},whiskers:{color:l}});const c=()=>({line:{color:e}});const d=()=>({opacity:r,highlight:{inactiveOpacity:Pf(t,"--kendo-chart-area-inactive-opacity")}});const u=()=>({highlight:{inactiveOpacity:Pf(t,"--kendo-chart-line-inactive-opacity")}});const p=()=>({target:{color:s}});return{axisDefaults:{crosshair:{color:Tf(t,"--kendo-chart-crosshair-bg")},labels:{color:s,font:i},line:{color:e},majorGridLines:{color:e},minorGridLines:{color:Tf(t,"--kendo-chart-minor-lines")},notes:structuredClone(n),title:{color:s,font:Lf(t)}},chartArea:{background:o},legend:Vf(t),seriesColors:Ef(t),seriesDefaults:{area:d(),verticalArea:d(),radarArea:d(),boxPlot:h(),verticalBoxPlot:h(),bullet:p(),verticalBullet:p(),horizontalWaterfall:c(),waterfall:c(),line:u(),verticalLine:u(),candlestick:{downColor:s,line:{color:s}},errorBars:{color:Tf(t,"--kendo-chart-error-bars-bg")},icon:{border:{color:e}},labels:{background:o,color:s,font:i,opacity:r},notes:structuredClone(n)},subtitle:{color:s,font:If(t)},title:Bf(t),paneDefaults:{title:{font:If(t)}}}},t.l=Ct,t.m=Vt,t.n=Mt,t.o=t=>({labels:{color:Rf(t),font:Lf(t),stroke:{color:Tf(t,"--kendo-chart-bg")}},links:{color:Tf(t,"--kendo-color-subtle")},nodeColors:Ef(t),title:Bf(t),legend:Of(t)}),t.p=wm,t.q=(t,e,s)=>{const i=new Set;const o=new Map;const n=new Map;t.forEach((t=>{e.forEach((e=>{i.add(e.value(t))}));for(let i=0;i<e.length-1;i++){const r=e[i].value(t);const a=e[i+1].value(t);const l=`${r}_${a}`;const h=s.value(t);const c=o.get(l);void 0!==c?o.set(l,c+h):(o.set(l,h),n.set(l,{source:r,target:a}))}}));const r=new Map;const a=Array.from(i).map(((t,e)=>(r.set(t,e),{id:e,label:{text:String(t)}})));const l=Array.from(o).map((([t,e])=>{const{source:s,target:i}=n.get(t);return{sourceId:r.get(s),targetId:r.get(i),value:e}}));return{nodes:a,links:l}},t.r=$t,t.s=Js,t.t=class extends bd{_createModel(){const t=this.options.scale;"number"!=typeof t.startAngle&&(t.startAngle=90),t.endAngle=t.startAngle+360,super._createModel()}},t.u=$c,t.v=td,t.w=Xc,t.x=gd,t.y=hd,t.z=Gc}));
//# sourceMappingURL=kendo.charts.cmn.chunk.min.js.map
