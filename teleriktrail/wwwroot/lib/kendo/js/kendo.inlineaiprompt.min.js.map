{"version":3,"sources":["raw-js/kendo.inlineaiprompt.js"],"names":["global","factory","exports","module","require","define","amd","globalThis","self","kendo","_globals","Inlineaiprompt","this","defaultCommands","id","text","icon","prompt","selection","items","$","window","Widget","ui","TextArea","SpeechToTextButton","NS","PROMPT_REQUEST","PROMPT_RESPONSE","PROMPT_REQUEST_CANCEL","COMMAND_EXECUTE","OUTPUT_ACTION","SHOW","HIDE","K_SPEECHTOTEXTBUTTON","K_STOP_OUTPUT_RETRIEVAL","K_DISABLED","K_PROMPT_SEND","K_ALIGN_ITEMS_START","ARIA_LABEL","ARIA_DISABLED","DEFAULT_COMMANDS","extend","InlineAIPrompt","init","element","options","that","systemPrompt","fn","call","commands","transport","data","AiTransport","service","success","_serviceSuccess","bind","requestStart","ev","_progress","_initPopup","_initContextMenu","_bindEvents","notify","name","enable","outputActions","encodedPromptOutputs","readonly","placeholder","speechToText","isStreaming","context","messages","promptSend","stopOutputRetrieval","commandsMenu","retryOutputAction","copyOutputAction","discardOutputAction","events","value","_textArea","trigger","_togglePromptSend","startStreaming","stopStreaming","_focusOutputActions","updatePromptOutputContent","content","outputCard","_popup","find","output","htmlEncode","html","open","x","y","originalAnchor","anchor","originalOrigin","origin","originalPosition","position","focus","close","response","responseTemplate","emptyResult","isPresent","template","isFunction","show","_initTextArea","promptSendMessage","widget","_isInInlineAIPrompt","size","rounded","overflow","fillMode","maxRows","resize","layoutFlow","prefixOptions","separator","_renderPrefixTemplate","suffixOptions","renderButton","_prefixContainer","addClass","_suffixContainer","insertBefore","undefined","speechToTextElement","_initSpeechToTextButton","commandsMenuMessage","guid","integrationMode","lang","continuous","interimResults","maxAlternatives","result","isFinal","alternatives","length","currentValue","newValue","transcript","_speechToTextButton","textArea","replace","removeClass","attr","_template","popup","width","height","css","Popup","appendTo","document","body","isRtl","support","animation","effects","duration","hide","empty","val","removeAttr","progress","_aiContextMenu","textAreaElement","first","_input","e","currentTarget","textAreaHtml","_renderOutputActions","copyMessage","retryMessage","discardMessage","buttons","forEach","outputAction","themeColor","title","command","_isDefaultOutputAction","_renderDefaultOutputActionIcon","_isEditor","itemsHtml","map","_createCommandHtml","join","append","kendoContextMenu","target","showOn","filter","select","_executeCommand","_renderCommandIcon","item","renderIcon","_findCommand","getAttribute","query","_clearSelectedCommands","textAreaValue","_requestService","selected","hasOwnProperty","searchSelected","found","popupElement","on","contentElement","contentText","previouslySelectedCommand","action","navigator","clipboard","writeText","_stopOutputRetrievalButton","toggle","stopOutputRetrievalMessage","stopOutputRetrievalButton","replaceWith","promptSendButton","_toggleSkeleton","skeleton","remove","wrap","unwrap","trim","read","history","isRetry","outputActionsContainer","outputActionsButtons","children","activeElement","setOptions","destroy","deepExtend","toolbar","_selectedView","off","plugin","jQuery","kendo$1","__meta__","category","description","depends","default","Object","defineProperty"],"mappings":"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","file":"kendo.inlineaiprompt.min.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('kendo.core.js'), require('kendo.data.js'), require('kendo.icons.js'), require('kendo.textarea.js'), require('kendo.button.js'), require('kendo.toolbar.js'), require('kendo.popup.js'), require('kendo.speechtotextbutton.js'), require('kendo.skeletoncontainer.js')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'kendo.core', 'kendo.data', 'kendo.icons', 'kendo.textarea', 'kendo.button', 'kendo.toolbar', 'kendo.popup', 'kendo.speechtotextbutton', 'kendo.skeletoncontainer'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.kendo = global.kendo || {}, global.kendo._globals = global.kendo._globals || {}, global.kendo._globals.Inlineaiprompt = {})));\n})(this, (function (exports) {\n    const defaultCommands = [\n                        {\n                            id: \"rewrite\",\n                            text: \"Rewrite\",\n                            icon: \"arrow-rotate-cw\",\n                            prompt: (selection) => `Rewrite the selected text while preserving its original meaning and intent.\n\n                                Selected Text:\n                                ${selection}`\n                        },\n                        {\n                            id: \"fix-spelling\",\n                            text: \"Fix spelling\",\n                            icon: \"spell-checker\",\n                            prompt: (selection) => `Correct any spelling, grammar, or punctuation mistakes in the selected text while preserving its original meaning and intent.\n\n                                Selected Text:\n                                ${selection}`\n                        },\n                        {\n                            id: \"change-tone\",\n                            text: \"Change tone\",\n                            icon: \"tell-a-friend\",\n                            items: [\n                                {\n                                    id: \"change-tone-neutral\",\n                                    text: \"Neutral\",\n                                    prompt: (selection) => `Adjust the tone of the following text to be more neutral while preserving its original meaning and intent.\n\n                                        Selected Text:\n                                        ${selection}`\n                                },\n                                {\n                                    id: \"change-tone-friendly\",\n                                    text: \"Friendly\",\n                                    prompt: (selection) => `Adjust the tone of the following text to be more friendly while preserving its original meaning and intent.\n\n                                        Selected Text:\n                                        ${selection}`\n                                },\n                                {\n                                    id: \"change-tone-casual\",\n                                    text: \"Casual\",\n                                    prompt: (selection) => `Adjust the tone of the following text to be more casual while preserving its original meaning and intent.\n\n                                        Selected Text:\n                                        ${selection}`\n                                },\n                                {\n                                    id: \"change-tone-formal\",\n                                    text: \"Formal\",\n                                    prompt: (selection) => `Adjust the tone of the following text to be more formal while preserving its original meaning and intent.\n\n                                        Selected Text:\n                                        ${selection}`\n                                }\n                            ]\n                        },\n                        {\n                            id: \"adjust-length\",\n                            text: \"Adjust length\",\n                            icon: \"col-resize\",\n                            items: [\n                                {\n                                    id: \"adjust-length-shorten\",\n                                    text: \"Shorten\",\n                                    prompt: (selection) => `Shorten the following text while preserving its original meaning and intent.\n\n                                        Selected Text:\n                                        ${selection}`\n                                },\n                                {\n                                    id: \"adjust-length-lengthen\",\n                                    text: \"Lengthen\",\n                                    prompt: (selection) => `Lengthen the following text while preserving its original meaning and intent.\n\n                                        Selected Text:\n                                        ${selection}`\n                                }\n                            ]\n                        }\n    ];\n\n    const __meta__ = {\n        id: \"inlineaiprompt\",\n        name: \"InlineAIPrompt\",\n        category: \"web\",\n        description: \"The InlineAIPrompt component simplifies the incorporation of external AI services into apps.\",\n        depends: [\"core\", \"icons\", \"textarea\", \"button\", \"toolbar\", \"popup\", \"data\", \"speechtotextbutton\", \"skeletoncontainer\"],\n    };\n\n    (function($) {\n        let kendo = window.kendo,\n            Widget = kendo.ui.Widget,\n            TextArea = kendo.ui.TextArea,\n            SpeechToTextButton = kendo.ui.SpeechToTextButton,\n            NS = \".kendoInlineAIPrompt\",\n            ui = kendo.ui,\n\n            PROMPT_REQUEST = \"promptRequest\",\n            PROMPT_RESPONSE = \"promptResponse\",\n            PROMPT_REQUEST_CANCEL = \"promptRequestCancel\",\n            COMMAND_EXECUTE = \"commandExecute\",\n            OUTPUT_ACTION = \"outputAction\",\n\n            SHOW = \"show\",\n            HIDE = \"hide\",\n\n            K_SPEECHTOTEXTBUTTON = \"k-speech-to-text-button\",\n            K_STOP_OUTPUT_RETRIEVAL = \"k-generating\",\n            K_DISABLED = \"k-disabled\",\n            K_PROMPT_SEND = \"k-prompt-send\",\n            K_ALIGN_ITEMS_START = \"!k-align-items-start\",\n            DEFAULT_PLACEHOLDER = \"Edit, generate or explain...\",\n\n            ARIA_LABEL = \"aria-label\",\n            ARIA_DISABLED = \"aria-disabled\",\n\n            DEFAULT_COMMANDS = defaultCommands,\n\n            FOCUS = \"focus\";\n\n            var extend = $.extend;\n\n        let InlineAIPrompt = Widget.extend({\n            init: function(element, options) {\n                let that = this;\n                options = options || {};\n\n                that.options.systemPrompt = options.systemPrompt || that.options.systemPrompt;\n                Widget.fn.init.call(that, element, options);\n\n                if (options.commands) {\n                   that.options.commands = options.commands;\n                }\n\n                that.transport = new kendo.data.AiTransport({\n                    service: that.options.service,\n                    success: that._serviceSuccess.bind(that),\n                    requestStart: (ev) => {\n                        that._progress(true);\n                    }\n                });\n\n                that._initPopup();\n                that._initContextMenu();\n                that._bindEvents();\n\n                kendo.notify(that);\n            },\n\n            options: {\n                name: \"InlineAIPrompt\",\n                enable: true,\n                outputActions: null,\n                encodedPromptOutputs: true,\n                readonly: false,\n                placeholder: \"\",\n                speechToText: false,\n                service: null,\n                isStreaming: false,\n                systemPrompt: (context, prompt) => `You are an advanced AI language assistant.\n                                A user has selected a portion of their text and provided a query regarding how they want it modified.\n                                Your task is to accurately respond to their request while preserving the original intent of the text.\n                                Follow the instructions strictly and provide only the requested output unless explicitly asked to explain your changes.\n\n                                Selected Text:\n                                ${context}\n\n                                User's Request:\n                                ${prompt}\n\n                                Response:`,\n                commands: DEFAULT_COMMANDS,\n                messages: {\n                    promptSend: \"Prompt Send\",\n                    stopOutputRetrieval: \"Stop Output Retrieval\",\n                    commandsMenu: \"Commands Menu\",\n                    retryOutputAction: \"Retry\",\n                    copyOutputAction: \"Copy\",\n                    discardOutputAction: \"Discard\"\n                }\n            },\n\n            events: [\n                PROMPT_REQUEST,\n                PROMPT_RESPONSE,\n                PROMPT_REQUEST_CANCEL,\n                COMMAND_EXECUTE,\n                OUTPUT_ACTION,\n                SHOW,\n                HIDE\n            ],\n\n            value: function(value) {\n                let that = this;\n                that._textArea.value(value);\n                that._textArea.trigger(\"change\");\n                that._togglePromptSend();\n            },\n\n            enable: function(enable) {\n                let that = this;\n\n                if (typeof enable == \"boolean\" ) {\n                    that._textArea.enable(enable);\n                }\n            },\n\n            readonly: function(readonly) {\n                let that = this;\n                if (typeof readonly == \"boolean\" ) {\n                    that._textArea.readonly(readonly);\n                }\n            },\n\n            startStreaming: function() {\n                let that = this;\n                that._progress(true);\n            },\n\n            stopStreaming: function() {\n                let that = this;\n                that._progress(false);\n                that._togglePromptSend();\n                that._focusOutputActions();\n            },\n\n            updatePromptOutputContent: function(content) {\n                let that = this,\n                    outputCard = that._popup.element.find('.k-card-body');\n\n                     const output = that.options.encodedPromptOutputs ?\n                           kendo.htmlEncode(content) :\n                           content;\n\n                     outputCard.html(output);\n            },\n\n            open: function(x, y) {\n                 let that = this;\n\n                    if (typeof x === \"number\" && typeof y === \"number\") {\n                        that._popup.open(x, y);\n                        return;\n                    }\n\n                    const originalAnchor = that._popup.options.anchor;\n                    const originalOrigin = that._popup.options.origin;\n                    const originalPosition = that._popup.options.position;\n\n                    that._popup.options.anchor = that.element;\n                    that._popup.options.origin = \"bottom center\";\n                    that._popup.options.position = \"top center\";\n\n                    that._popup.open();\n\n                    that._popup.options.anchor = originalAnchor;\n                    that._popup.options.origin = originalOrigin;\n                    that._popup.options.position = originalPosition;\n\n                    that._textArea.focus();\n            },\n\n            close: function() {\n                let that = this;\n                that._popup.close();\n            },\n\n            _serviceSuccess: function(response) {\n                const that = this,\n                      responseTemplate = that.options.responseTemplate,\n                      emptyResult = () => \"\";\n\n                if (kendo.isPresent(responseTemplate)) {\n                    let template = kendo.isFunction(responseTemplate)\n                                     ?\n                                     responseTemplate(response)\n                                     :\n                                     kendo.template(responseTemplate || emptyResult)({ response: response });\n\n                    that._popup.element.find('.k-card-body').html(template);\n                }\n                else {\n                    const output = that.options.encodedPromptOutputs ?\n                          kendo.htmlEncode(response.output) :\n                          response.output;\n\n                    that._popup.element.find('.k-card-body').html(output);\n                }\n\n                that._popup.element.find('.k-card').show();\n                that.trigger(PROMPT_RESPONSE, { response });\n                that._progress(false);\n                that._togglePromptSend();\n                that._focusOutputActions();\n            },\n\n            _initTextArea: function(element) {\n                const that = this,\n                      promptSendMessage = that.options.messages.promptSend;\n\n                let widget,\n                    options = extend({}, {\n                         _isInInlineAIPrompt: true,\n                         enable: that.options.enable,\n                         readonly: that.options.readonly,\n                         size: \"medium\",\n                         rounded: \"medium\",\n                         overflow: \"auto\",\n                         fillMode: \"solid\",\n                         placeholder: that.options.placeholder || DEFAULT_PLACEHOLDER,\n                         maxRows: 5,\n                         resize: \"auto\",\n                         layoutFlow: \"horizontal\",\n                         prefixOptions: {\n                            separator: false,\n                            template: () => `${that._renderPrefixTemplate()}`\n                         },\n                         suffixOptions: {\n                            separator: false,\n                            template: () => `\n                             ${kendo.html\n                                .renderButton(`<button role='button' class='${K_PROMPT_SEND} ${K_DISABLED}' ${ARIA_LABEL}='${promptSendMessage}' ${ARIA_DISABLED}='true'></button>`,\n                                { icon: \"paper-plane\", fillMode: \"flat\" })\n                             }`\n                         }\n                    });\n\n                 widget = new TextArea(element, options);\n\n                widget._prefixContainer\n                        .addClass(K_ALIGN_ITEMS_START);\n\n\n                widget._suffixContainer\n                        .addClass(K_ALIGN_ITEMS_START);\n\n                $(`<span class=\"k-input-separator k-input-separator-vertical\"></span>`).insertBefore($(widget.element));\n\n                if (that.options.speechToText || (that.options.speechToText && options.speechToText === undefined) ) {\n                    let speechToTextElement = widget._prefixContainer.find(`.${K_SPEECHTOTEXTBUTTON}`);\n                    that._initSpeechToTextButton(speechToTextElement);\n                }\n\n                return widget;\n            },\n\n            _renderPrefixTemplate: function() {\n                let that = this,\n                    template = \"\";\n\n                const commandsMenuMessage = that.options.messages.commandsMenu;\n\n                let menuButton = kendo.html.renderButton(`<button role='button' title='${commandsMenuMessage}' ${ARIA_LABEL}='${commandsMenuMessage}'></button>`, { icon: \"menu\", fillMode: \"flat\" });\n\n                template = template + menuButton;\n                if (that.options.speechToText) {\n                    let speechToTextElement = `<button role='button' title='Speech To Text' ${ARIA_LABEL}='Start speech recognition' class='${K_SPEECHTOTEXTBUTTON}' id='${kendo.guid()}'></button>`;\n                    template = template + speechToTextElement;\n                }\n\n                return template;\n            },\n\n            _initSpeechToTextButton: function(element) {\n                const that = this;\n\n                let options = extend({}, {\n                        fillMode: \"flat\",\n                        integrationMode: that.options.speechToText.integrationMode || \"webSpeech\",\n                        lang: 'en-US',\n                        continuous: false,\n                        interimResults: false,\n                        maxAlternatives: 1,\n                        result: function(ev) {\n                            if (ev.isFinal && ev.alternatives && ev.alternatives.length > 0) {\n                                    let currentValue = that._textArea.value() || \"\",\n                                        newValue = currentValue + (currentValue ? \" \" : \"\") + ev.alternatives[0].transcript;\n\n                                    that._textArea.value(newValue);\n                                    that._textArea.trigger(\"change\");\n                                    that._togglePromptSend();\n                            }\n                        }\n                    },\n                    that.options.speechToText);\n\n                that._speechToTextButton = new SpeechToTextButton(element, options);\n            },\n\n            _togglePromptSend: function() {\n                let that = this,\n                    textArea = that._textArea,\n                    value = textArea.value() || \"\";\n\n                if (value.replace(/\\s/g, '').length) {\n                    $(textArea._suffixContainer)\n                        .find(`.${K_PROMPT_SEND}`)\n                        .removeClass(K_DISABLED)\n                        .attr(ARIA_DISABLED, false);\n                }\n                else {\n                    $(textArea._suffixContainer)\n                       .find(`.${K_PROMPT_SEND}`)\n                       .addClass(K_DISABLED)\n                       .attr(ARIA_DISABLED, true);\n                }\n            },\n\n            _initPopup: function() {\n                const that = this,\n                      html = $(that._template());\n\n                const options = that.options.popup;\n\n                if (kendo.isPresent(options)) {\n                    if (options.width) {\n                        html.width(options.width);\n                    }\n\n                    if (options.height) {\n                        html.height(options.height);\n                    }\n                }\n\n                html.css({ \"max-width\": \"98vw\" });\n\n                that._popup = new kendo.ui.Popup(html, {\n                    anchor: that.element,\n                    appendTo: options?.appendTo || document.body,\n                    isRtl: kendo.support.isRtl(that.element),\n                    animation: options?.animation || {\n                        open: {\n                            effects: \"zoom:in\",\n                            duration: 200\n                        },\n                        close: {\n                            effects: \"zoom:out\",\n                            duration: 200\n                        }\n                    },\n                    open: function(ev) {\n                        this.element.find('.k-card').hide();\n                        this.element.find('.k-card-body').empty();\n                        this.element.find('.k-input-inner').val('');\n\n                        that._textArea.value('');\n                        that._textArea.element\n                            .removeAttr(\"style\");\n\n                        that._togglePromptSend();\n\n                        that.trigger(SHOW, ev);\n                    },\n                    close: function(ev) {\n                        kendo.ui.progress(that._popup.element, false);\n                        that._aiContextMenu?.close();\n                        that.trigger(HIDE, ev);\n                    }\n                });\n\n\n                let textAreaElement = that._popup.element\n                    .find('textarea')\n                    .first();\n\n                that._textArea = that._initTextArea(textAreaElement);\n            },\n\n            _input: function(e) {\n                 let that = this,\n                     textArea = that._textArea,\n                     value = e.currentTarget.value,\n                     oldValue = that._textArea.value();\n\n                 if (value != oldValue) {\n                    textArea.value(value);\n                    textArea.trigger(\"change\");\n                    that._togglePromptSend();\n                 }\n            },\n\n            _template: function() {\n                let that = this;\n                const textAreaHtml = `<textarea ${ARIA_LABEL}='Prompt' id='${kendo.guid()}'></textarea>`,\n                      template = `<div class=\"k-child-animation-container\">\n                    <div class=\"k-prompt-popup k-popup\">\n                        <div class=\"k-prompt\">\n                            <div class=\"k-prompt-content\">\n                                <div class=\"k-prompt-view\">\n                                    <div class=\"k-card\">\n                                        <div class=\"k-card-body\" style=\"max-height: 150px; overflow-y: auto;\"></div>\n                                        <div class=\"k-actions k-actions-start k-actions-horizontal k-card-actions\">\n                                            ${that._renderOutputActions()}\n                                        </div>\n                                    </div>\n                                   ${textAreaHtml}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>`;\n\n                return template;\n            },\n\n            _renderOutputActions: function() {\n                let that = this,\n                    options = that.options;\n\n                    const copyMessage = that.options.messages.copyOutputAction,\n                          retryMessage = that.options.messages.retryOutputAction,\n                          discardMessage = that.options.messages.discardOutputAction;\n\n                if (!kendo.isPresent(options.outputActions) || !options.outputActions.length) {\n                    if (that.options._isEditor) {\n                        let buttons = `\n                        ${kendo.html.renderButton(`<button role='button' title='${copyMessage}' ${ARIA_LABEL}='${copyMessage}' ${kendo.attr(\"action\")}='copy'>${copyMessage}</button>`, { icon: \"copy\", fillMode: \"flat\", themeColor: \"primary\" })}\n                        ${kendo.html.renderButton(`<button title='Insert' ${ARIA_LABEL}=\"Insert\" ${kendo.attr(\"action\")}='insert'>Insert</button>`, { icon: \"insert-bottom\", fillMode: \"flat\", themeColor: \"primary\" })}\n                        ${kendo.html.renderButton(`<button title='Replace' ${ARIA_LABEL}=\"Replace\" ${kendo.attr(\"action\")}='replace'>Replace</button>`, { icon: \"check\", fillMode: \"flat\", themeColor: \"primary\" })}\n                        ${kendo.html.renderButton(`<button title='Discard' ${ARIA_LABEL}='Discard' ${kendo.attr(\"action\")}='discard'>Discard</button>`, { icon: \"cancel-outline\", fillMode: \"flat\" })}\n                     `;\n                         return buttons;\n                    }\n                    else {\n                        let buttons = `\n                        ${kendo.html.renderButton(`<button role='button' title='${copyMessage}' ${ARIA_LABEL}='${copyMessage}' ${kendo.attr(\"action\")}='copy'>${copyMessage}</button>`, { icon: \"copy\", fillMode: \"flat\", themeColor: \"primary\" })}\n                        ${kendo.html.renderButton(`<button role='button' title='${retryMessage}' ${ARIA_LABEL}='${retryMessage}'  ${kendo.attr(\"action\")}='retry'>${retryMessage}</button>`, { icon: \"arrow-rotate-cw\", fillMode: \"flat\", themeColor: \"primary\" })}\n                        ${kendo.html.renderButton(`<button role='button' title='${discardMessage}' ${ARIA_LABEL}='${discardMessage}' ${kendo.attr(\"action\")}='discard'>${discardMessage}</button>`, { icon: \"cancel-outline\", fillMode: \"flat\" })}\n                    `;\n                        return buttons;\n                    }\n                }\n                else {\n                    let buttons = \"\";\n                    options.outputActions.forEach(function(outputAction) {\n                        if (typeof outputAction == \"string\") {\n                            switch (outputAction) {\n                                case \"copy\":\n                                    buttons = buttons + kendo.html.renderButton(`<button role='button' title='${copyMessage}' ${ARIA_LABEL}='${copyMessage}' ${kendo.attr(\"action\")}='copy'>${copyMessage}</button>`, { icon: \"copy\", fillMode: \"flat\", themeColor: \"primary\" });\n                                    break;\n                                case \"retry\":\n                                    buttons = buttons + kendo.html.renderButton(`<button role='button' title='${retryMessage}' ${ARIA_LABEL}='${retryMessage}'  ${kendo.attr(\"action\")}='retry'>${retryMessage}</button>`, { icon: \"arrow-rotate-cw\", fillMode: \"flat\", themeColor: \"primary\" });\n                                    break;\n                                case \"discard\":\n                                    buttons = buttons + kendo.html.renderButton(`<button role='button' title ='${discardMessage}' ${ARIA_LABEL}='${discardMessage}' ${kendo.attr(\"action\")}='discard'>${discardMessage}</button>`, { icon: \"cancel-outline\", fillMode: \"flat\" });\n                                    break;\n                                default:\n                                    break;\n                            }\n                        }\n                        else {\n                            buttons = buttons + kendo.html\n                            .renderButton(`<button role='button' ${outputAction?.title != undefined ? `title=${outputAction.title} ${ARIA_LABEL}=${outputAction.title}` : \"\"} ${kendo.attr(\"action\")}='${outputAction?.command}'>${outputAction?.text || (that._isDefaultOutputAction(outputAction?.command) ? that.options.messages[outputAction?.command + 'OutputAction'] || outputAction?.command : outputAction?.command)}</button>`,\n                            {\n                                rounded: outputAction?.rounded || \"medium\",\n                                icon: outputAction?.icon || that._renderDefaultOutputActionIcon(outputAction?.command),\n                                fillMode: outputAction?.fillMode || \"flat\",\n                                themeColor: outputAction?.themeColor || \"primary\",\n                            });\n                        }\n                    });\n\n                    return buttons;\n                }\n            },\n\n            _renderDefaultOutputActionIcon(command) {\n                let that = this;\n                if (that._isDefaultOutputAction(command)) {\n                    switch (command) {\n                    case \"copy\":\n                        return \"copy\";\n                    case \"discard\":\n                        return \"cancel-outline\";\n                    case \"retry\":\n                        return \"arrow-rotate-cw\";\n                    default:\n                        return;\n                    }\n                }\n            },\n\n            _isDefaultOutputAction(command) {\n                switch (command) {\n                    case \"copy\":\n                        return true;\n                    case \"discard\":\n                        return true;\n                    case \"retry\":\n                        return true;\n                    default:\n                        return false;\n                }\n            },\n\n            _initContextMenu: function() {\n                const that = this;\n                if (!that.options.commands || that.options.commands?.length === 0) {\n                    that._popup.element.find('.k-input-prefix button').addClass('k-disabled');\n                    return;\n                }\n\n                const itemsHtml = that.options.commands.map(command => that._createCommandHtml(command)).join('');\n                const html = $(`<ul>\n                                ${itemsHtml}\n                            </ul>`);\n\n                $('body').append(html);\n\n                that._aiContextMenu = html.kendoContextMenu({\n                    target: that._popup.element,\n                    anchor: that._popup.element,\n                    showOn: 'click',\n                    appendTo: $(document.body),\n                    filter: '.invalid',\n                    select: that._executeCommand.bind(that)\n                }).data('kendoContextMenu');\n            },\n\n            _createCommandHtml: function(command) {\n                const that = this;\n                const icon = that._renderCommandIcon(command.icon);\n                const text = command.text;\n                const items = command.items || [];\n                const itemsHtml = items.map(item => that._createCommandHtml(item)).join('');\n\n                return `<li ${kendo.attr(\"name\")}=${command.id}>${icon} ${text}${itemsHtml ? \"<ul>\" + itemsHtml + \"</ul>\" : \"\"}</li>`;\n            },\n\n            _renderCommandIcon: function(icon) {\n                if (kendo.isPresent(icon)) {\n                    return kendo.isFunction(icon) ? icon() : kendo.html.renderIcon({ icon: icon });\n                }\n\n                return \"\";\n            },\n\n            _executeCommand: function(e) {\n                const that = this;\n                let command = that._findCommand(that.options.commands, e.item.getAttribute(kendo.attr(\"name\")));\n\n                let data = {\n                    query: command.id,\n                    selection: \"\"\n                };\n\n                that._clearSelectedCommands(that.options.commands);\n\n                if (kendo.isPresent(that._textArea)) {\n                    const textAreaValue = that._textArea.value();\n\n                    if (kendo.isPresent(textAreaValue) && textAreaValue != \"\") {\n                        data.selection = textAreaValue;\n                    }\n                }\n\n                that.trigger(COMMAND_EXECUTE, data);\n\n                const selection = data.selection || data.context;\n\n                if (kendo.isPresent(command.prompt)) {\n                    const prompt = command.prompt(selection);\n                    that._requestService(prompt);\n                    that._aiContextMenu?.close();\n                }\n                command.selected = true;\n            },\n\n            _clearSelectedCommands: function(commands) {\n                const that = this;\n\n                commands.forEach(function(command) {\n                    if (kendo.isPresent(command.items) && command.items.length > 0) {\n                        that._clearSelectedCommands(command.items);\n                    }\n                    if (command.hasOwnProperty(\"selected\")) {\n                        delete command.selected;\n                    }\n                });\n            },\n\n            _findCommand: function(commands, id, searchSelected = false) {\n                const that = this;\n\n                for (let command of commands) {\n                    if (searchSelected && command.selected) {\n                        return command;\n                    }\n\n                    if (command.id === id) {\n                        return command;\n                    }\n\n                    if (command.items) {\n                        let found = that._findCommand(command.items, id, searchSelected);\n\n                        if (found) {\n                            return found;\n                        }\n                    }\n                }\n            },\n\n            _bindEvents: function() {\n                const that = this,\n                      popup = that._popup,\n                      popupElement = popup.element;\n\n                that._textArea.element.on(\"input\" + NS, that._input.bind(that));\n\n                popupElement.find(`.k-input-prefix button[aria-label='${that.options.messages.commandsMenu}']`).on('click', function() {\n                    that._aiContextMenu?.open();\n                });\n\n                that._textArea._suffixContainer.find(`.${K_PROMPT_SEND}`).on('click', function() {\n                     const prompt = that._textArea.value();\n                     that._requestService(prompt);\n                });\n\n                popupElement.find('.k-card-actions button').on('click', function(e) {\n                    let contentElement = popupElement.find('.k-card-body'),\n                        contentText = contentElement.text(),\n                        prompt = kendo.isPresent(that._textArea) ? that._textArea.value() : \"\",\n                        previouslySelectedCommand = that._findCommand(that.options.commands, 0, true),\n                        query = kendo.isPresent(previouslySelectedCommand) ? previouslySelectedCommand.prompt(prompt) : prompt;\n\n                    const action = $(e.currentTarget).attr(kendo.attr(\"action\"));\n\n                    switch (action) {\n                        case \"copy\":\n                            navigator.clipboard.writeText(contentText);\n                            that.trigger(OUTPUT_ACTION, { action, content: contentText });\n                            break;\n                        case \"retry\":\n                            that._requestService(query);\n                            that.trigger(OUTPUT_ACTION, { action, content: contentText });\n                            break;\n                        case \"discard\":\n                            contentElement.empty();\n                            popupElement.find('.k-card').hide();\n                            popupElement.find('.k-input-inner').val('');\n                            that.trigger(OUTPUT_ACTION, { action, content: contentText });\n                            popup.close();\n                            break;\n                        default:\n                            that.trigger(OUTPUT_ACTION, { action, content: contentText });\n                            break;\n                    }\n                });\n            },\n\n            _stopOutputRetrievalButton: function(toggle) {\n                let that = this;\n\n                if (toggle) {\n                    let stopOutputRetrievalMessage = that.options.messages.stopOutputRetrieval,\n                        stopOutputRetrievalButton = kendo.html\n                    .renderButton(`<button role='button' title='${stopOutputRetrievalMessage}' ${ARIA_LABEL}='${stopOutputRetrievalMessage}' class='${K_PROMPT_SEND} ${K_STOP_OUTPUT_RETRIEVAL}'></button>`,\n                        { icon: \"stop-sm\", fillMode: \"flat\" }\n                    );\n\n                    that._textArea._suffixContainer.find(`.${K_PROMPT_SEND}`)\n                        .replaceWith(stopOutputRetrievalButton);\n\n                    that._textArea._suffixContainer.find(`.${K_STOP_OUTPUT_RETRIEVAL}`)\n                        .on('click', function(e) {\n                            that.trigger(PROMPT_REQUEST_CANCEL, that);\n                        });\n                }\n                else {\n                    let promptSendMessage = that.options.messages.promptSend;\n                    let promptSendButton = kendo.html\n                    .renderButton(`<button role='button' title=\"${promptSendMessage}\" ${ARIA_LABEL}=${promptSendMessage} class='${K_PROMPT_SEND} ${K_DISABLED}'></button>`,\n                        { icon: \"paper-plane\", fillMode: \"flat\" }\n                    );\n\n                     that._textArea._suffixContainer.find(`.${K_STOP_OUTPUT_RETRIEVAL}`)\n                        .replaceWith(promptSendButton);\n\n                     that._textArea._suffixContainer.find(`.${K_PROMPT_SEND}`)\n                        .on('click', function(e) {\n                             const prompt = that._textArea.value();\n                             that._requestService(prompt);\n                        });\n                }\n            },\n\n            _progress: function(toggle) {\n                 let that = this;\n\n                 that._stopOutputRetrievalButton(toggle);\n                 that._toggleSkeleton(toggle);\n            },\n\n            _toggleSkeleton: function(toggle) {\n                let that = this;\n\n                if (that.skeleton) {\n                    that.skeleton.remove();\n                }\n\n                if (toggle) {\n                    that.skeleton = $(\"<span class='k-skeleton k-rounded-md k-skeleton-pulse'></span>\").css({\n                        width: \"100%\",\n                        height: \"100%\"\n                    });\n\n                    that._textArea._suffixContainer\n                        .find(`.${K_STOP_OUTPUT_RETRIEVAL}`)\n                        .wrap(that.skeleton);\n                }\n\n                else {\n                    that._textArea._suffixContainer\n                        .find(`.${K_PROMPT_SEND}`)\n                        .unwrap();\n                }\n            },\n\n            _requestService: function(query) {\n                const that = this;\n                const data = {\n                    query,\n                    context: \"\"\n                };\n\n                if (!query.trim()) {\n                    return;\n                }\n\n                const context = data.context;\n                const prompt = that.options.systemPrompt(context, query);\n\n                that.trigger(PROMPT_REQUEST, { prompt: prompt });\n\n                if (that.options.isStreaming) {\n                    that._popup.element.find('.k-card').show();\n                }\n\n                if (that.options.service) {\n                    that.transport.read({ prompt, history: [], isRetry: false });\n                }\n            },\n\n            _focusOutputActions() {\n                let that = this,\n                    outputActionsContainer = that._popup.element.find('.k-actions'),\n                    outputActionsButtons = outputActionsContainer.children(\"button\");\n\n                if (!outputActionsContainer.find($(document.activeElement)).length) {\n                    $(outputActionsButtons).first().focus();\n                }\n                else if (outputActionsButtons.length == 0) {\n                    that._textArea.focus();\n                }\n            },\n\n            focus: function() {\n                let that = this;\n                that.element.trigger(FOCUS);\n            },\n\n            setOptions: function(options) {\n                let that = this;\n\n                that.destroy();\n                kendo.deepExtend(this.options, options);\n\n                that.init(that.element, options);\n            },\n\n            destroy: function() {\n                let that = this;\n\n                that._popup?.close();\n                that._textArea?.destroy();\n                that._speechToTextButton?.destroy();\n                that._aiContextMenu?.destroy();\n                that.toolbar?.destroy();\n                that._selectedView?.destroy();\n                that._popup?.destroy();\n\n                that.element.off(NS);\n\n                Widget.fn.destroy.call(that);\n            }\n        });\n\n        ui.plugin(InlineAIPrompt);\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    exports.__meta__ = __meta__;\n    exports.default = kendo$1;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]}