/**
 * Kendo UI v2025.3.1002 (http://www.telerik.com/kendo-ui)
 * Copyright 2025 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("kendo.dom.js"),require("kendo.data.js"),require("kendo.icons.js"),require("kendo.loader.js"),require("kendo.html.loadercontainer.js"),require("kendo.sortable.js"),require("kendo.pivotgrid-common.cmn.chunk.js"),require("kendo.loaderContainer.chunk.js")):"function"==typeof define&&define.amd?define(["exports","kendo.dom.min","kendo.data.min","kendo.icons.min","kendo.loader.min","kendo.html.loadercontainer.min","kendo.sortable.min","kendo.pivotgrid-common.cmn.chunk.min","kendo.loaderContainer.chunk.min"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).kendo=e.kendo||{},e.kendo._globals=e.kendo._globals||{},e.kendo._globals.Pivotgrid={}),e.kendo._globals.Dom,e.kendo._globals.Data,e.kendo._globals.Icons,e.kendo._globals.Loader,e.kendo._globals.HtmlLoadercontainer,e.kendo._globals.Sortable,e.kendo._globals.PivotgridCommonCmnChunk,e.kendo._globals.LoaderContainerChunk)}(this,(function(e,t,r,a,n,s,i,o,l){!function(e,t){var r=window.kendo,a=r.ui,n=r.htmlEncode,s=r.Class,i=r.data.Comparer,c=a.Widget,u=r.data.DataSource,h=r._outerWidth,d=r._outerHeight,m=r.data.Query.normalizeFilter,p=r.data.Query.normalizeSort,v={}.toString,f=function(e){return e},g=e.map,_=e.extend,b=r.keys,x=r.isFunction,w="resize",S="read",k="change",N="error",y="progress",E="Measures",T="stateReset",A="auto",C="<div></div>",M=".kendoPivotGrid",I="__row_total__",D="dataBinding",H="dataBound",R="expandMember",P=({id:t,key:a,headerClass:s,colspan:i,rowspan:o,expandable:l,iconClass:c,role:u,expanded:h})=>`<th id="${t}" role="${u}" ${l?`aria-expanded="${h}"`:""}  data-key="${n(a)}" class="${n(s)}" ${i?'colspan="'+n(i)+'"':""} ${o?'rowspan="'+n(o)+'"':""}>${l?r.ui.icon(e('<span role="presentation" class="k-pivotgrid-toggle"></span>'),{icon:`chevron-${n(c)}`}):""}</th>`,L="collapseMember",O="caret-alt-down",B=`.k-i-${O},.k-svg-i-${O}`,F="caret-alt-right",q=({member:e})=>`<span>${n(e.caption||e.name)}</span>`,U={"kpi-trend-decrease":"caret-alt-down","kpi-trend-increase":"caret-alt-up","kpi-trend-equal":"minus"},W=({dataItem:t})=>r.ui.icon(e(`<span title="${n(t.value)}"></span>`),{icon:"kpi-status-"+(t.value>0?"open":t.value<0?"deny":"hold")}),z=({dataItem:t})=>r.ui.icon(e(`<span title="${n(t.value)}"></span>`),{icon:U["kpi-trend-"+(t.value>0?"increase":t.value<0?"decrease":"equal")]}),j=({dataItem:e})=>e&&(e.fmtValue||e.value)?`<span class="k-pivotgrid-content">${n(e.fmtValue||e.value)}</span>`:"&nbsp;";var $="k-table-row",G="k-header k-table-th",V="k-grid-header-table k-table k-table-md",K="k-table k-table-md",Y="k-grid-table k-table k-table-md",Q="k-table-tbody",J="k-table-td";function X(r){var a="string"==typeof r?[{name:r}]:r;var n="[object Array]"===v.call(a)?a:a!==t?[a]:[];return g(n,(function(t){return"string"==typeof t?{name:t}:e.extend(!0,t,{name:t.name,type:t.type})}))}function Z(e){var r="string"==typeof e?[{name:[e],expand:!1}]:e;var a="[object Array]"===v.call(r)?r:r!==t?[r]:[];return g(a,(function(e){return"string"==typeof e?{name:[e],expand:!1}:{name:"[object Array]"===v.call(e.name)?e.name.slice():[e.name],expand:e.expand}}))}function ee(e){return-1!==e.indexOf(" ")&&(e='["'+e+'"]'),e}function te(e,t,a,n){var s,i;var o;var l;if(a||(a=t),n||(n=0),(l=a.members[n])&&!l.measure){if(i=(o=l.children).length,a===t?e[r.stringify([l.name])]=!!i:i&&(e[r.stringify(ct(a,n))]=!0),i)for(s=0;s<i;s++)te(e,t,o[s],n);te(e,t,a,n+1)}}function re(e){var t={};e.length&&te(t,e[0]);var r=[];for(var a in t)r.push({name:JSON.parse(a),expand:t[a]});return r}function ae(e,t,r){(function(e,t){var r=(t.tuples||[])[0];if(r&&e.length<r.members.length){var a=r.members;for(var n=0;n<a.length;n++)if(!a[n].measure){var s=!1;for(var i=0;i<e.length;i++)if(0===Be(e[i]).indexOf(a[n].hierarchy)){s=!0;break}s||e.push({name:[a[n].name],expand:!1})}}})(t,e=e||{}),r.length>1&&t.push({name:E,measure:!0,children:Z(r)});var a={members:t};if(e.tuples){var n=Ee(e.tuples,a);n.tuple&&(t=function(e){var t=[];var r=e.members;for(var a=0;a<r.length;a++)r[a].measure||t.push({name:[r[a].name],expand:r[a].children.length>0});return t}(n.tuple))}return t}function ne(e){var t=r.getter(e.field,!0);return function(r,a){return e.aggregate(t(r.dataItem),a,r)}}function se(e){return"number"==typeof e&&!isNaN(e)}function ie(e){return e&&e.getTime}function oe(e,t,r){const a=this;const n=(a.reader.data(e)||[]).slice(0);n&&!a._pristineData&&(a._pristineData=n);const s=a._createSettings(t.columnAxes);const i=a._createSettings(t.rowAxes);const l=a.measures();const c={dataTree:o.c(n,i,s,l,{dataField:"aggregate",columnsData:"columns"},a.filter()||[]),columnSettings:s,rowSettings:i,columnAxes:t.columnAxes,rowAxes:t.rowAxes,measures:l.map((function(e){return e})),fields:{dataField:"aggregate",columnsData:"columns"},sort:le(t.sort||[])};a._saveState(o.a(c)),a.trigger(k),r.resolve()}function le(e){var t=[];for(var r=0;r<e.length;r++)t.push({dir:e[r].dir,field:e[r].field.split(".").pop()});return t}function ce(e,t,a,n){var s={sum:o.s,average:o.e,min:o.d,max:o.m,count:o.b};var i={value:function(e){return e[this.field]}.bind({field:e}),aggregate:s[n],caption:t,uniqueName:t,type:2,name:[t]};return a&&(i.aggregate.format=function(e){return r.format(this.format,e)}.bind({format:a})),i}var ue={sum:function(e,t){var r=t.accumulator;return se(r)?se(e)&&(r+=e):r=e,r},count:function(e,t){return(t.accumulator||0)+1},average:{aggregate:function(e,r){var a=r.accumulator;return r.count===t&&(r.count=0),se(a)?se(e)&&(a+=e):a=e,se(e)&&r.count++,a},result:function(e){var t=e.accumulator;return se(t)&&(t/=e.count),t}},max:function(e,t){var r=t.accumulator;return se(r)||ie(r)||(r=e),r<e&&(se(e)||ie(e))&&(r=e),r},min:function(e,t){var r=t.accumulator;return se(r)||ie(r)||(r=e),r>e&&(se(e)||ie(e))&&(r=e),r}};var he=s.extend({init:function(e){this.options=_({},this.options,e),this.dimensions=this._normalizeDescriptors("field",this.options.dimensions),this.measures=this._normalizeDescriptors("name",this.options.measures)},_normalizeDescriptors:function(e,t){t=t||{};var r={};var a;if("[object Array]"===v.call(t)){for(var n=0,s=t.length;n<s;n++)"string"==typeof(a=t[n])?r[a]={}:a[e]&&(r[a[e]]=a);t=r}return t},_rootTuples:function(e,r){var a=r.length||1;var n=this.dimensions||[];var s,i,o;var l=0;var c;var u=e.length;var h=[];var d=[];if(u||r.length){for(l=0;l<a;l++){for(s={members:[]},c=0;c<u;c++)o=(i=e[c]).split("&"),s.members[s.members.length]={children:[],caption:(n[i]||{}).caption||"All",name:i,levelName:i,levelNum:"0",hasChildren:!0,parentName:o.length>1?o[0]:t,hierarchy:i};a>1&&(s.members[s.members.length]={children:[],caption:r[l].caption,name:r[l].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!1,parentName:t,hierarchy:"MEASURES"}),h[h.length]=s}d.push(I)}return{keys:d,tuples:h}},_sortMap:function(t,r){var a=[];var n=[];var s;var o;var l;for(l in t)t[l].directParentName||n.push(e.extend({},{name:l,parentName:t[l].parentName}));if(!n.length)for(l in t)n.push(e.extend({},{name:l,parentName:t[l].parentName}));ge(n,t);for(var c=0;c<r.length;c++)fe(r[c].field.split(".").pop(),n,i.create({field:"name",dir:r[c].dir}));s=ve(n);for(var u=0;u<s.length;u++)(o=t[s[u].name]).index=u,a[u]=o;return a},_expandedTuples:function(r,a,n,s){var i=n.length||1;var o=this.dimensions||[];var l;var c;var u;var h;var d;var m;var p=[];var v=[];var f;var g;var _;var b;var x;for(u in s&&s.length&&!e.isEmptyObject(r)&&(r=this._sortMap(r,s)),r){for(h=r[u],d=p[(f=this._findExpandedMember(a,h.uniquePath)).index]||[],m=v[f.index]||[],g=f.member.names,l=0;l<i;l++){for(c={members:[]},x=0;x<g.length;x++)x===f.member.expandedIdx?(c.members[c.members.length]={children:[],caption:h.value,name:h.name,hasChildren:!1,levelNum:1,levelName:h.parentName+h.name,parentName:h.parentName,hierarchy:h.parentName+h.name},0===l&&m.push(ct(c,x).join(""))):(_=(b=g[x]).split("&"),c.members[c.members.length]={children:[],caption:(o[b]||{}).caption||"All",name:b,levelName:b,levelNum:"0",hasChildren:!0,parentName:_.length>1?_[0]:t,hierarchy:b});i>1&&(c.members[c.members.length]={children:[],caption:n[l].caption,name:n[l].descriptor.name,levelName:"MEASURES",levelNum:"0",hasChildren:!0,parentName:t,hierarchy:"MEASURES"}),d[d.length]=c}p[f.index]=d,v[f.index]=m}return{keys:v,tuples:p}},_findExpandedMember:function(e,t){for(var r=0;r<e.length;r++)if(e[r].uniquePath===t)return{member:e[r],index:r}},_asTuples:function(e,t,r,a){r=r||[];var n=this._rootTuples(t.root,r);var s=this._expandedTuples(e,t.expanded,r,a);return{keys:[].concat.apply(n.keys,s.keys),tuples:[].concat.apply(n.tuples,s.tuples)}},_measuresInfo:function(e,t){var r=0;var a=e&&e.length;var n=[];var s={};var i={};var o=this.measures||{};var l;var c;for(;r<a;r++)l=o[c=e[r].descriptor.name]||{},n.push(c),l.result&&(s[c]=l.result),l.format&&(i[c]=l.format);return{names:n,formats:i,resultFuncs:s,rowAxis:t}},_toDataArray:function(e,t,r,a){var n=[];var s;var i,o,l,c,u;var h,d,m;var p=1;var v=[];var f;var g=r.length||1;var _=a.length||1;for(t.rowAxis?p=(v=t.names).length:f=t.names,o=0;o<g;o++)for(h=e[r[o]||I],u=0;u<p;u++)for(t.rowAxis&&(f=[v[u]]),l=0;l<_;l++)for(m=a[l]||I,d=h.items[m],s=m===I?h.aggregates:d?d.aggregates:{},c=0;c<f.length;c++)i=f[c],this._addData(n,s[i],t.formats[i],t.resultFuncs[i]);return n},_addData:function(e,t,a,n){var s="";var i;t&&(t=n?n(t):t.accumulator,s=a?r.format(a,t):t),e[i=e.length]={ordinal:i,value:t||"",fmtValue:s}},_matchDescriptors:function(e,r,a){var n;var s;var i;var o=r.names;var l=r.expandedIdx;var c;for(;l>0;)if((n=o[--l].split("&")).length>1&&(s=n[0],i=n[1],(c=(c=a[s](e))!==t&&null!==c?c.toString():c)!=i))return!1;return!0},_calculateAggregate:function(e,t,r){var a={};var n;var s;for(var i=0;i<e.length;i++)s=e[i].descriptor.name,(n=r.aggregates[s]||{}).accumulator=e[i].aggregator(t,n),a[s]=n;return a},_processColumns:function(e,r,a,n,s,i,o,l){var c;var u;var h;var d;var m,p,v,f;var g=s.dataItem;var _=0;for(;_<r.length;_++)u=r[_],this._matchDescriptors(g,u,a)&&(f=u.names.slice(0,u.expandedIdx).join(""),v=p=u.names[u.expandedIdx],h=n[m=f+(p=p+"&"+(c=(c=a[p](g))!==t&&null!==c?c.toString():c))]||{index:o.columnIndex,parentName:v,name:p,directParentName:-1!==f.indexOf("&")?f:"",uniquePath:f+v,childrenMap:{},value:c},f&&n[f]&&!n[f].childrenMap[f+v+"&"+c]&&(n[f].childrenMap[f+v+"&"+c]=!0),d=i.items[m]||{aggregates:{}},i.items[m]={index:h.index,aggregates:this._calculateAggregate(e,s,d)},l&&(n[m]||o.columnIndex++,n[m]=h))},_measureAggregators:function(e){var t=e.measures||[];var r=this.measures||{};var a=[];var n,s,i,o;var l,c;if(t.length){for(i=0,o=t.length;i<o;i++)if(l=null,s=r[(n=t[i]).name]){if("string"==typeof(c=s.aggregate)){if(!(l=ue[c.toLowerCase()]))throw new Error("There is no such aggregate function");s.aggregate=l.aggregate||l,s.result=l.result}a.push({descriptor:n,caption:s.caption,result:s.result,aggregator:ne(s)})}}else a.push({descriptor:{name:"default"},caption:"default",aggregator:function(){return 1}});return a},_buildGetters:function(e){var t={};var a;var n;for(var s=0;s<e.length;s++)(a=(n=e[s]).split("&")).length>1?t[a[0]]=r.getter(a[0],!0):t[n]=r.getter(ee(n),!0);return t},_parseDescriptors:function(e){var t=Ue(e);var r=Fe(t.root);var a=t.expanded;var n=[];for(var s=0;s<a.length;s++)n.push(qe(a[s].name,r));return{root:r,expanded:n}},_filter:function(e,t){if(!t)return e;var a;var n=0;var s=t.filters;for(;n<s.length;n++)"in"===(a=s[n]).operator&&(s[n]=this._normalizeFilter(a));return new r.data.Query(e).filter(t).data},_normalizeFilter:function(e){var t=e.value.split(",");var r=[];if(!t.length)return t;for(var a=0;a<t.length;a++)r.push({field:e.field,operator:"eq",value:t[a]});return{logic:"or",filters:r}},process:function(e,r){e=e||[],r=r||{},e=this._filter(e,r.filter);var a=r.measures||[];var n="rows"===r.measuresAxis;var s=r.columns||[];var i=r.rows||[];!s.length&&i.length&&(!a.length||a.length&&n)&&(s=i,i=[],n=!1),s.length||i.length||(n=!1),!s.length&&a.length&&(s=Z(r.measures)),s=this._parseDescriptors(s),i=this._parseDescriptors(i);var o={};var l={};var c={};var u;var h={columnIndex:0};var d=this._measureAggregators(r);var m=this._buildGetters(s.root);var p=this._buildGetters(i.root);var v=!1;var f=s.expanded;var g=i.expanded;var _;var b;var x=0!==g.length;var w,S,k,N;var y,E,T,A;var C,M;var D=e.length;var H=0;if(s.root.length||i.root.length)for(v=!0,H=0;H<D;H++)for(b={dataItem:_=e[H],index:H},N=o[I]||{items:{},aggregates:{}},this._processColumns(d,f,m,l,b,N,h,!x),N.aggregates=this._calculateAggregate(d,b,N),o[I]=N,w=0;w<g.length;w++)S=g[w],this._matchDescriptors(_,S,p)?(E=S.names.slice(0,S.expandedIdx).join(""),T=k=S.names[S.expandedIdx],c[y=E+(k=k+"&"+(u=(u=p[k](_))!==t?u.toString():u))]={uniquePath:E+T,parentName:T,name:k,value:u},A=o[y]||{items:{},aggregates:{}},this._processColumns(d,f,m,l,b,A,h,!0),A.aggregates=this._calculateAggregate(d,b,A),o[y]=A):this._processColumns(d,f,m,l,b,{items:{},aggregates:{}},h,!0);return v&&D?(!(d.length>1)||r.columns&&r.columns.length||(s={root:[],expanded:[]}),C=this._asTuples(l,s,n?[]:d,r.sort?r.sort:[]),M=this._asTuples(c,i,n?d:[],r.sort?r.sort:[]),l=C.tuples,c=M.tuples,o=this._toDataArray(o,this._measuresInfo(d,n),M.keys,C.keys)):o=l=c=[],{axes:{columns:{tuples:l},rows:{tuples:c}},data:o}}});var de=s.extend({init:function(e,t){this.transport=t,this.options=t.options||{},this.transport.discover||x(e.discover)&&(this.discover=e.discover)},read:function(e){return this.transport.read(e)},update:function(e){return this.transport.update(e)},create:function(e){return this.transport.create(e)},destroy:function(e){return this.transport.destroy(e)},discover:function(e){if(this.transport.discover)return this.transport.discover(e);e.success({})},catalog:function(r){var a=this.options||{};if(r===t)return(a.connection||{}).catalog;var n=a.connection||{};n.catalog=r,this.options.connection=n,e.extend(this.transport.options,{connection:n})},cube:function(e){var r=this.options||{};if(e===t)return(r.connection||{}).cube;var a=r.connection||{};a.cube=e,this.options.connection=a,_(!0,this.transport.options,{connection:a})}});var me=u.extend({init:function(t){var r=((t||{}).schema||{}).cube;var a={axes:f,cubes:f,catalogs:f,measures:f,dimensions:f,hierarchies:f,levels:f,members:f};r&&(this.cubeSchema=e.extend(a,this._cubeSchema(r))),u.fn.init.call(this,_(!0,{},{schema:this.cubeSchema},t));var n=this.options.transport||{};"xmla"===(this.options.type||"xmla").toLowerCase()?(this._online=!0,this.transport=new Ye(n)):this.transport=new de(this.options.transport||{},this.transport),this._columns=Z(this.options.columns),this._rows=Z(this.options.rows);var s=this.cubeSchema?this.cubeSchema.measures():this.options.measures||[];"[object Object]"===v.call(s)&&(this._measuresAxis=s.axis||"columns",s=s.values||[]),this._measures=X(s)},options:{serverSorting:!0,serverPaging:!0,serverFiltering:!0,serverGrouping:!0,serverAggregates:!0},axes:function(){return{columns:Se(this.columns()),rows:Se(this.rows())}},catalog:function(e){if(e===t)return this.transport.catalog();this.transport.catalog(e),this._mergeState({}),this.read()},cube:function(e){if(e===t)return this.transport.cube();this.transport.cube(e),this._mergeState({}),this.read()},measuresAxis:function(){return this._measuresAxis||"columns"},fetch:function(e){var r=this;if(this._data===t||0===this._data.length){return this._query().done((function(){x(e)&&e.call(r)}))}},_createSettings:function(e){var t=[];var r;var a=this.cubeSchema.dimensionsSettings();var n=function(e){return e[this.key]};var s=function(e){return e};for(var i=0;i<e.length;i++)r=e[i].name[0],t.push({key:r,displayValue:n.bind({key:r}),sortValue:s,caption:(a[r]||{}).caption||r});return t},_cubeSchema:function(e){return{dimensionsSettings:function(){return e.dimensions},dimensions:function(){var t=[];var r=e.dimensions;for(var a in r)t.push({name:a,caption:r[a].caption||a,uniqueName:a,defaultHierarchy:a,type:1});return e.measures&&t.push({name:E,caption:E,uniqueName:E,type:2}),t},restoreMeasure:function(e,t){for(var r=0;r<e.length;r++)e[r].aggregate||(e[r].aggregate=t.aggregate,e[r].value=t.value,e[r].caption=t.caption,e[r].uniqueName=t.uniqueName,e[r].type=2)},measures:function(){var t=[];var r=e.measures;for(var a in r)t.push(ce(r[a].field,a,r[a].format,r[a].aggregate));return t},memberType:function(e){var t=r.getter(ee(e),!0);var a=this.options.data||this._pristineData||[];return a.length?typeof t(a[0]):null}.bind(this),members:function(t){var a=this.options.data||this._pristineData||[];var n=[];var s={};var i;var o;var l=0;if(-1!==t.indexOf("[(ALL)]"))return[{caption:e.dimensions[t.split(".")[0]].caption||t,levelUniqueName:t,name:t,childrenCardinality:1,uniqueName:t}];for(i=r.getter(ee(t),!0);l<a.length;l++)!(o=i(a[l]))&&0!==o&&!1!==o||s[o]||(s[o]=!0,n.push({caption:o+"",name:o+"",childrenCardinality:0,uniqueName:o}));return n}.bind(this)}},read:function(t){const r=this;const a=r.trigger("requestStart",{type:S});const n=r._params(t);const s=e.Deferred();return a||(r.trigger(y),r.options.data?oe.call(r,r.options.data,n,s):"xmla"===(this.options.type||"xmla").toLowerCase()?r.transport.read({data:n,success:function(e){r._saveState(e),r.trigger("requestEnd",{response:e,type:S}),r.trigger(k),r._preventRefresh&&(r._preventRefresh=!1),s.resolve()},error:function(e){r.trigger(N,{error:e})}}):r.transport.read({success:function(e){oe.call(r,e,n,s)},error:function(e){r.trigger(N,{error:e})}})),s.promise()},_params:function(e){var t=this;var r=u.fn._params.call(t,e);return r=_({columnAxes:JSON.parse(JSON.stringify(t._columns)),rowAxes:JSON.parse(JSON.stringify(t._rows)),measuresAxis:t.measuresAxis(),measureAxes:t._measures},r),"xmla"===(this.options.type||"").toLowerCase()&&(r.connection=t.options.transport.connection),r.filter&&(r.filter=m(r.filter),r.filter=(r.filter||{}).filters),r.sort&&(r.sort=p(r.sort)),r},discover:function(t){const r=this;const a=r.transport;const n="odata"===r.options.type;const s={schemaMeasures:r.reader.measures,schemaKPIs:r.reader.kpis,schemaDimensions:r.reader.dimensions,schemaHierarchies:r.reader.hierarchies,schemaLevels:r.reader.levels,schemaCubes:r.reader.cubes,schemaCatalogs:r.reader.catalogs,schemaMembers:r.reader.members};return a.discover&&!n?a.discover(t):e.Deferred((function(e){a.discover(_({success:function(a){a=r.reader.parse(a),r._handleCustomErrors(a)||(s[t.command]&&(a=s[t.command](a)),e.resolve(a))},error:function(t,a,n){e.reject(t),r.error(t,a,n)}},t))})).promise().done((function(){r.trigger("schemaChange")}))},schemaMeasures:function(){const e=this;return e.discover({command:"schemaMeasures",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}})},schemaKPIs:function(){const e=this;return e.discover({command:"schemaKPIs",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}})},schemaDimensions:function(){const e=this;return e.discover({command:"schemaDimensions",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}})},schemaHierarchies:function(e){const t=this;return t.discover({command:"schemaHierarchies",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),dimensionUniqueName:e}})},schemaLevels:function(e){const t=this;return t.discover({command:"schemaLevels",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),hierarchyUniqueName:e}})},schemaCubes:function(){return this.discover({command:"schemaCubes",restrictions:{catalogName:this.transport.catalog()}})},schemaCatalogs:function(){return this.discover({command:"schemaCatalogs"})},schemaMembers:function(e){const t=this;return t.discover({command:"schemaMembers",restrictions:_({catalogName:t.transport.catalog(),cubeName:t.transport.cube()},e)})},_saveState:function(e){var t=this;t._columnTuples=e.columns,t._rowTuples=e.rows,t._view=t._data=e.data},columns:function(e){if(e===t)return this._columns;this._columns=Z(e),this.read()},rows:function(e){if(e===t)return this._rows;this._rows=Z(e),this.read()},measures:function(e){if(e===t)return this._measures;this._measures=X(e),this.read()},_mergeState:function(e){return e=u.fn._mergeState.call(this,e)},_query:function(e){var t=this;var r=_({},{sort:t.sort(),measuresAxis:t.measuresAxis(),filter:t.filter()},e);return this._mergeState(r),this.read()}});var pe=u.extend({init:function(t){var r=((t||{}).schema||{}).cube;var a="columns";var n;var s={axes:f,cubes:f,catalogs:f,measures:f,dimensions:f,hierarchies:f,levels:f,members:f};r&&(s=e.extend(s,this._cubeSchema(r)),this.cubeBuilder=new he(r)),u.fn.init.call(this,_(!0,{},{schema:s},t)),this.transport=new de(this.options.transport||{},this.transport),this._columns=Z(this.options.columns),this._rows=Z(this.options.rows),n=this.options.measures||[],"[object Object]"===v.call(n)&&(a=n.axis||"columns",n=n.values||[]),this._measures=X(n),this._measuresAxis=a,this._skipNormalize=0,this._axes={}},_cubeSchema:function(e){return{dimensions:function(){var t=[];var r=e.dimensions;for(var a in r)t.push({name:a,caption:r[a].caption||a,uniqueName:a,defaultHierarchy:a,type:1});return e.measures&&t.push({name:E,caption:E,uniqueName:E,type:2}),t},hierarchies:function(){return[]},measures:function(){var t=[];var r=e.measures;for(var a in r)t.push({name:a,caption:a,uniqueName:a,aggregator:a});return t},members:function(t,a){var n=a.levelUniqueName||a.memberUniqueName;var s=this.options.schema.data;var i=x(s)?s:r.getter(s,!0);var o=this.options.data&&i(this.options.data)||this._rawData||[];var l=[];var c;var u;var h=0;var d={};if(n&&(n=n.split(".")[0]),!a.treeOp)return l.push({caption:e.dimensions[n].caption||n,childrenCardinality:"1",dimensionUniqueName:n,hierarchyUniqueName:n,levelUniqueName:n,name:n,uniqueName:n}),l;for(c=r.getter(ee(n),!0);h<o.length;h++)!(u=c(o[h]))&&0!==u||d[u]||(d[u]=!0,l.push({caption:u,childrenCardinality:"0",dimensionUniqueName:n,hierarchyUniqueName:n,levelUniqueName:n,name:u,uniqueName:u}));return l}.bind(this)}},options:{serverSorting:!0,serverPaging:!0,serverFiltering:!0,serverGrouping:!0,serverAggregates:!0},catalog:function(e){if(e===t)return this.transport.catalog();this.transport.catalog(e),this._mergeState({}),this._axes={},this.data([])},cube:function(e){if(e===t)return this.transport.cube();this.transport.cube(e),this._axes={},this._mergeState({}),this.data([])},axes:function(){return this._axes},columns:function(e){if(e===t)return this._columns;this._skipNormalize+=1,this._clearAxesData=!0,this._columns=Z(e),this.query({columns:e,rows:this.rowsAxisDescriptors(),measures:this.measures(),sort:this.sort(),filter:this.filter()})},rows:function(e){if(e===t)return this._rows;this._skipNormalize+=1,this._clearAxesData=!0,this._rows=Z(e),this.query({columns:this.columnsAxisDescriptors(),rows:e,measures:this.measures(),sort:this.sort(),filter:this.filter()})},measures:function(e){if(e===t)return this._measures;this._skipNormalize+=1,this._clearAxesData=!0,this.query({columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:X(e),sort:this.sort(),filter:this.filter()})},measuresAxis:function(){return this._measuresAxis||"columns"},_expandPath:function(e,t){var r="columns"===t?"columns":"rows";var a="columns"===t?"rows":"columns";var n=Z(e);var s=Be(n[n.length-1]);this._lastExpanded=r,n=ae(this.axes()[r],n,this.measures());for(var i=0;i<n.length;i++){if(Be(n[i])===s){if(n[i].expand)return;n[i].expand=!0}else n[i].expand=!1}var o={};o[r]=n,o[a]=this._descriptorsForAxis(a),this._query(o)},_descriptorsForAxis:function(e){var t=this.axes();var r=this[e]()||[];return t&&t[e]&&t[e].tuples&&t[e].tuples[0]&&(r=re(t[e].tuples||[])),r},columnsAxisDescriptors:function(){return this._descriptorsForAxis("columns")},rowsAxisDescriptors:function(){return this._descriptorsForAxis("rows")},_process:function(e,t){this._view=e,(t=t||{}).items=t.items||this._view,this.trigger(k,t)},_query:function(e){var t=this;return e||(this._skipNormalize+=1,this._clearAxesData=!0),t.query(_({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate(),columns:this.columnsAxisDescriptors(),rows:this.rowsAxisDescriptors(),measures:this.measures()},e))},query:function(t){var r=this._mergeState(t);return this._data.length&&this.cubeBuilder?(this._params(r),this._updateLocalData(this._pristineData),e.Deferred().resolve().promise()):this.read(r)},_mergeState:function(e){return(e=u.fn._mergeState.call(this,e))!==t&&(this._measures=X(e.measures),e.columns?e.columns=Z(e.columns):e.columns||(this._columns=[]),e.rows?e.rows=Z(e.rows):e.rows||(this._rows=[])),e},filter:function(e){if(e===t)return this._filter;this._skipNormalize+=1,this._clearAxesData=!0,this._query({filter:e,page:1})},expandColumn:function(e){this._expandPath(e,"columns")},expandRow:function(e){this._expandPath(e,"rows")},success:function(e){var t;this.cubeBuilder&&(t=(this.reader.data(e)||[]).slice(0)),u.fn.success.call(this,e),t&&(this._pristineData=t)},_processResult:function(e,t){if(this.cubeBuilder){var r=this.cubeBuilder.process(e,this._requestData);e=r.data,t=r.axes}var a,n;var s,i,o,l;var c=this.columns();var u=this.rows();var h=t.columns&&t.columns.tuples;c.length||!u.length||!h||!this._rowMeasures().length&&this.measures().length||(t={columns:{},rows:t.columns}),c.length||u.length||"rows"!==this.measuresAxis()||!h||(t={columns:{},rows:t.columns}),this._axes={columns:Se(this._axes.columns),rows:Se(this._axes.rows)},t={columns:Se(t.columns),rows:Se(t.rows)},a=this._normalizeTuples(t.columns.tuples,this._axes.columns.tuples,c,this._columnMeasures()),n=this._normalizeTuples(t.rows.tuples,this._axes.rows.tuples,u,this._rowMeasures()),this._skipNormalize>0&&(this._skipNormalize-=1),this.cubeBuilder||(e=this._normalizeData({columnsLength:t.columns.tuples.length,rowsLength:t.rows.tuples.length,columnIndexes:a,rowIndexes:n,data:e})),"rows"==this._lastExpanded?(s=t.columns.tuples,o=this._columnMeasures(),(i=be(t.columns,this._axes.columns,o))&&(l="columns",t.columns=i,function(e,t,r,a,n){var s,i,o;var l=e.length;var c=we(t,a);var u=a.length||1;for(i=0;i<r;i++)for(s=0;s<l;s++)o=xe(e[s],t)*u,o+=s%u,n[i*l+s].ordinal=i*c+o}(s,i.tuples,t.rows.tuples.length,o,e),this.cubeBuilder||(e=this._normalizeData({columnsLength:we(t.columns.tuples,o),rowsLength:t.rows.tuples.length,data:e})))):"columns"==this._lastExpanded&&(s=t.rows.tuples,o=this._rowMeasures(),(i=be(t.rows,this._axes.rows,o))&&(l="rows",t.rows=i,function(e,t,r,a,n){var s,i,o;var l=e.length;var c=a.length||1;for(i=0;i<l;i++)for(o=xe(e[i],t),o*=c,o+=i%c,s=0;s<r;s++)n[i*r+s].ordinal=o*r+s}(s,i.tuples,t.columns.tuples.length,o,e),this.cubeBuilder||(e=this._normalizeData({columnsLength:we(t.rows.tuples,o),rowsLength:t.columns.tuples.length,data:e})))),this._lastExpanded=null;var d=this._mergeAxes(t,e,l);return this._axes=d.axes,d.data},_readData:function(e){var t=this.reader.axes(e);var r=this.reader.data(e);return this.cubeBuilder&&(this._rawData=r),this._processResult(r,t)},_createTuple:function(e,t,r){var a=e.members;var n=a.length;var s={members:[]};var i,o;var l,c;var u;var h;var d;var m;var p=0;for(t&&(n-=1);p<n;p++)m=a[p],o=Number(m.levelNum),l=m.name,c=m.parentName,d=m.caption||l,u=m.hasChildren,h=m.hierarchy,i=m.levelName,r&&(d="All",0===o?c=m.name:o-=1,u=!0,l=h=i=c),s.members.push({name:l,children:[],caption:d,levelName:i,levelNum:o.toString(),hasChildren:u,hierarchy:h,parentName:r?"":c});return t&&s.members.push({name:t.name,children:[]}),s},_hasRoot:function(e,t,r){if(t.length)return Ee(t,e).tuple;var a=e.members;var n;var s;var i=!0;var o;for(var l=0,c=a.length;l<c;l++)if(n=a[l],o=Number(n.levelNum)||0,s=r[l],!(0===o||s&&n.name===Be(s))){i=!1;break}return i},_mergeAxes:function(e,t,r){var a=this._columnMeasures();var n=this._rowMeasures();var s=this.axes();var i,o;var l=we(s.rows.tuples,n);var c=e.rows.tuples.length;var u=we(s.columns.tuples,a);var h=e.columns.tuples.length;"columns"==r?(h=u,o=e.columns.tuples):t=function(e,t){if(!e||!e.length)return t;var r=[];var a=Ie(e);var n=a.length;var s=Math.max(t.length/n,1);var i,o,l,c;for(o=0;o<s;o++)for(l=n*o,i=0;i<n;i++)c=a[i]+l,r[l+i]=t[c]||{value:"",fmtValue:"",ordinal:c};return r}(o=Me(e.columns.tuples,a),t);var d=Ne(s.columns.tuples,o,a);"rows"==r?(c=we(e.rows.tuples,n),o=e.rows.tuples):t=function(e,t){if(!e||!e.length)return t;var r=[];var a=Ie(e);var n=a.length;var s=Math.max(t.length/n,1);var i,o,l,c;var u;for(i=0;i<n;i++)for(l=s*i,c=s*a[i],o=0;o<s;o++)u=parseInt(c+o,10),r[parseInt(l+o,10)]=t[u]||{value:"",fmtValue:"",ordinal:u};return r}(o=Me(e.rows.tuples,n),t);var m=Ne(s.rows.tuples,o,n);if(s.columns.tuples=d.tuples,s.rows.tuples=m.tuples,u!==we(s.columns.tuples,a)){i=d.index+ke(d.parsedRoot,d.memberIndex,a);var p=u+h;t=this._mergeColumnData(t,i,c,h,p)}else l!==we(s.rows.tuples,n)&&(i=m.index+ke(m.parsedRoot,m.memberIndex,n),t=this._mergeRowData(t,i,c,h));return 0===s.columns.tuples.length&&0===s.rows.tuples.length&&(t=[]),{axes:s,data:t}},_mergeColumnData:function(e,t,r,a,n){var s=this.data().toJSON();var i,o,l,c=0;var u=Math.max(this._columnMeasures().length,1);for(r=Math.max(r,1),s.length>0&&(c=u,n-=u),i=0;i<r;i++)o=t+i*n,(l=e.splice(0,a)).splice(0,c),[].splice.apply(s,[o,0].concat(l));return s},_mergeRowData:function(e,t,r,a){var n=this.data().toJSON();var s,i,o;var l=Math.max(this._rowMeasures().length,1);for(a=Math.max(a,1),n.length>0&&(r-=l,e.splice(0,a*l)),s=0;s<r;s++)o=e.splice(0,a),i=t*a+s*a,[].splice.apply(n,[i,0].concat(o));return n},_columnMeasures:function(){var e=this.measures();var t=[];return"columns"===this.measuresAxis()&&(0===this.columns().length||e.length>1)&&(t=e),t},_rowMeasures:function(){var e=this.measures();var t=[];return"rows"===this.measuresAxis()&&(0===this.rows().length||e.length>1)&&(t=e),t},_updateLocalData:function(e,t){this.cubeBuilder&&(t&&(this._requestData=t),e=this._processResult(e)),this._data=this._observe(e),this._ranges=[],this._addRange(this._data),this._total=this._data.length,this._pristineTotal=this._total,this._process(this._data)},data:function(e){if(e===t)return this._data;this._pristineData=e.slice(0),this._updateLocalData(e,{columns:this.columns(),rows:this.rows(),measures:this.measures()})},_normalizeTuples:function(e,t,r,a){var n=a.length||1;var s=0;var i=[];var o={};var l=0;var c,u,h;if(e.length){if(this._skipNormalize<=0&&!this._hasRoot(e[0],t,r)){for(this._skipNormalize=0;s<n;s++)i.push(this._createTuple(e[0],a[s],!0)),o[s]=s;e.splice.apply(e,[0,e.length].concat(i).concat(e)),s=n}if(a.length)for(h=c=e[s],u=c.members.length-1;c;){if(l>=n&&(l=0),c.members[u].name!==a[l].name&&(e.splice(s,0,this._createTuple(c,a[l])),o[s]=s),l+=1,c=e[s+=1],n>l&&(!c||ut(h,u-1)!==ut(c,u-1))){for(;l<n;l++)e.splice(s,0,this._createTuple(h,a[l])),o[s]=s,s+=1;c=e[s]}h=c}return o}},_addMissingDataItems:function(e,r){for(;r.rowIndexes[parseInt(e.length/r.columnsLength,10)]!==t;)for(var a=0;a<r.columnsLength;a++)e=_e(e);for(;r.columnIndexes[e.length%r.columnsLength]!==t;)e=_e(e);return e},_normalizeOrdinals:function(e,t,r){var a=r.lastOrdinal;if(!t)return _e(e);if(t.ordinal-a>1)for(a+=1;a<t.ordinal&&e.length<r.length;)e=this._addMissingDataItems(_e(e),r),a+=1;return t.ordinal=e.length,e[e.length]=t,e},_normalizeData:function(e){var t=e.data;var r=0;var a;var n=[];var s;var i;if(e.lastOrdinal=0,e.columnIndexes=e.columnIndexes||{},e.rowIndexes=e.rowIndexes||{},e.columnsLength=e.columnsLength||1,e.rowsLength=e.rowsLength||1,e.length=e.columnsLength*e.rowsLength,i=e.length,t.length===i)return t;for(;n.length<i;)(a=t[r++])&&(s=a.ordinal),n=this._normalizeOrdinals(this._addMissingDataItems(n,e),a,e),e.lastOrdinal=s;return n},discover:function(t,r){var a=this,n=a.transport;return e.Deferred((function(e){n.discover(_({success:function(t){t=a.reader.parse(t),a._handleCustomErrors(t)||(r&&(t=r(t)),e.resolve(t))},error:function(t,r,n){e.reject(t),a.error(t,r,n)}},t))})).promise().done((function(){a.trigger("schemaChange")}))},schemaMeasures:function(){var e=this;return e.discover({data:{command:"schemaMeasures",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},(function(t){return e.reader.measures(t)}))},schemaKPIs:function(){var e=this;return e.discover({data:{command:"schemaKPIs",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},(function(t){return e.reader.kpis(t)}))},schemaDimensions:function(){var e=this;return e.discover({data:{command:"schemaDimensions",restrictions:{catalogName:e.transport.catalog(),cubeName:e.transport.cube()}}},(function(t){return e.reader.dimensions(t)}))},schemaHierarchies:function(e){var t=this;return t.discover({data:{command:"schemaHierarchies",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),dimensionUniqueName:e}}},(function(e){return t.reader.hierarchies(e)}))},schemaLevels:function(e){var t=this;return t.discover({data:{command:"schemaLevels",restrictions:{catalogName:t.transport.catalog(),cubeName:t.transport.cube(),hierarchyUniqueName:e}}},(function(e){return t.reader.levels(e)}))},schemaCubes:function(){var e=this;return e.discover({data:{command:"schemaCubes",restrictions:{catalogName:e.transport.catalog()}}},(function(t){return e.reader.cubes(t)}))},schemaCatalogs:function(){var e=this;return e.discover({data:{command:"schemaCatalogs"}},(function(t){return e.reader.catalogs(t)}))},schemaMembers:function(e){var t=this;var r=function(e){return function(r){return t.reader.members(r,e)}}(e);return t.discover({data:{command:"schemaMembers",restrictions:_({catalogName:t.transport.catalog(),cubeName:t.transport.cube()},e)}},r)},_params:function(e){this._clearAxesData&&(this._axes={},this._data=this._observe([]),this._clearAxesData=!1,this.trigger(T));var t=u.fn._params.call(this,e);return t=_({measures:this.measures(),measuresAxis:this.measuresAxis(),columns:this.columns(),rows:this.rows()},t),this.cubeBuilder&&(this._requestData=t),t}});function ve(e){var t=[];for(var r=0;r<e.length;r++)t.push(e[r]),e[r].children&&(t=t.concat(ve(e[r].children)));return t}function fe(e,t,r){for(var a=0;a<t.length;a++)t[a].children&&t[a].children.length&&fe(e,t[a].children,r);t[0].parentName==e&&(t=t.sort(r))}function ge(t,r){for(var a=0;a<t.length;a++){var n=r[t[a].name];if(!e.isEmptyObject(n.childrenMap)){for(var s in t[a].children=[],n.childrenMap)t[a].children.push(e.extend({},{name:s,parentName:r[s].parentName}));ge(t[a].children,r)}}}function _e(e){return e[e.length]={value:"",fmtValue:"",ordinal:e.length},e}function be(e,t,r){if(e.tuples.length<we(t.tuples,r))return t}function xe(e,t){return Ee(t,e).index}function we(e,t){if(!e.length)return 0;var r=e.slice();var a=r.shift();var n=1;for(;a;)a.members?[].push.apply(r,a.members):a.children&&(a.measure||(n+=a.children.length),[].push.apply(r,a.children)),a=r.shift();return t.length&&(n*=t.length),n}function Se(e){return e||(e={tuples:[]}),e.tuples||(e.tuples=[]),e}function ke(e,t,r){if(!e)return 0;var a=Math.max(r.length,1);var n=e.members.slice(0,t);var s=n.shift();var i=a;for(;s;)s.name===E?i+=a-1:s.children?[].push.apply(n,s.children):(i++,[].push.apply(n,s.members)),s=n.shift();return i}function Ne(e,t,r){if(!t[0])return{parsedRoot:null,tuples:e,memberIndex:0,index:0};var a=Ee(e,t[0]);if(!a.tuple)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};var n=a.tuple.members;var s=t[0].members;var i=-1;if(n.length!==s.length)return{parsedRoot:null,tuples:t,memberIndex:0,index:0};for(var o=0,l=n.length;o<l;o++)!n[o].measure&&s[o].children[0]&&(-1==i&&s[o].children.length&&(i=o),n[o].children=s[o].children);return r=Math.max(r.length,1),{parsedRoot:a.tuple,index:a.index*r,memberIndex:i,tuples:e}}function ye(e,t){var r=!0;var a,n;for(e=e.members,t=t.members,a=0,n=e.length;a<n;a++)e[a].measure||t[a].measure||(r=r&&Be(e[a])===Be(t[a]));return r}function Ee(e,t){var r,a,n,s,i=0;var o,l,c;for(r=0,a=e.length;r<a;r++){if(ye(n=e[r],t))return{tuple:n,index:i};for(i++,o=0,l=n.members.length;o<l;o++)if(!(c=n.members[o]).measure&&(i+=(s=Ee(c.children,t)).index,s.tuple))return{tuple:s.tuple,index:i}}return{index:i}}function Te(e,t){var r,a,n,s="";for(a=0,n=e.length;a<n;a++)t[s+=(r=e[a]).name]||(t[s]=r)}function Ae(e,t){var r=e.members;var a,n,s,i="";var o="";var l;for(a=0,n=r.length;a<n;a++){if(s=r[a],l){if(t[i+s.name]){l=t[i+=s.name];continue}return t[i+s.parentName]?t[i+s.parentName]:t[o+s.parentName]?t[o+s.parentName]:t[o]}if(i+=s.name,!(l=t[s.parentName])&&!(l=t[i]))return null;l&&(o+=l.name)}return l}function Ce(r,a){if(!(a<0)){var n={name:E,measure:!0,children:[e.extend({members:[],dataIndex:r.dataIndex},r.members[a])]};r.members.splice(a,1,n),r.dataIndex=t}}function Me(e,t){if(e.length<1)return[];var r=[];var a={};var n=function(e,t){if(0===t.length)return-1;var r=t[0];var a=e.members;for(var n=0,s=a.length;n<s;n++)if(a[n].name==r.name)return n}(e[0],t);for(var s=0;s<e.length;s++){var i=e[s];i.dataIndex=s,Ce(i,n);var o=Ae(i,a);o?n<0||!o.measure?o.children.push(i):o.children.push(i.members[n].children[0]):r.push(i),Te(i.members,a)}return r}function Ie(e){var r=[];var a=(e=e.slice()).shift();var n,s,i,o,l;for(;a;){for(a.dataIndex!==t&&r.push(a.dataIndex),i=0,n=0,s=a.members.length;n<s;n++)o=(l=a.members[n]).children,l.measure?[].splice.apply(e,[0,0].concat(o)):[].splice.apply(e,[i,0].concat(o)),i+=o.length;a=e.shift()}return r}function De(e){var t=e.split(".");return t.length>2?t[0]+"."+t[1]:e}function He(e,t){var r=e.length-1;var a=e[r];var n;return n=function(e,t){for(var r=0,a=e.length;r<a;r++)if(0===t.indexOf(e[r].field))return e[r];return null}(t,a),n&&n.dir?a="ORDER("+a+".Children,"+n.field+".CurrentMember.MEMBER_CAPTION,"+n.dir+")":a+=".Children",e[r]=a,e}function Re(e){var t="CROSSJOIN({";var r;return e.length>2?(r=e.pop(),t+=Re(e)):(t+=e.shift(),r=e.pop()),t+="},{",t+=r,t+="})"}function Pe(e,t){var r=e.slice(0);return t.length>1&&r.push("{"+Le(t).join(",")+"}"),Re(r)}function Le(e){var r=0;var a=e.length;var n=[];var s;for(;r<a;r++)s=e[r],n.push(s.name!==t?s.name:s);return n}function Oe(e,t){var r,a,n=-1;for(r=0,a=t.length;r<a;r++)if(Be(t[r])===e){n=r;break}return n}function Be(e){return e=e.name||e,"[object Array]"===v.call(e)&&(e=e[e.length-1]),e}function Fe(e){var t=e.length;var r=[];var a=0;for(;a<t;a++)r.push(e[a].name[0]);return r}function qe(e,t){var r;var a;var n;var s=0;var i=e.length;var o=t.length;for(t=t.slice(0);s<i;s++)for(r=e[s],n=0;n<o;n++)if(a=De(t[n]),-1!==r.indexOf(a)){t[n]=r;break}return{names:t,expandedIdx:n,uniquePath:t.slice(0,n+1).join("")}}function Ue(e){var t=[];var r=[];var a=[];var n;var s,i;var o=0;var l=e.length;var c;var u;var h;for(;o<l;o++)if(c=(n=e[o]).name,h=!1,"[object Array]"!==v.call(c)&&(n.name=c=[c]),c.length>1)r.push(n);else{for(u=De(c[0]),s=0,i=a.length;s<i;s++)if(0===a[s].name[0].indexOf(u)){h=!0;break}h||a.push(n),n.expand&&t.push(n)}return{root:a,expanded:t=t.concat(r)}}function We(e,t,r){var a="";var n=Ue(e=e||[]);var s=Fe(n.root);var i=[];var o=(n=n.expanded).length;var l=0;var c;var u=[];if(s.length>1||t.length>1){for(i.push(Pe(s,t));l<o;l++)u=qe(c=He(n[l].name,r),s).names,i.push(Pe(u,t));a+=i.join(",")}else{for(;l<o;l++)c=He(n[l].name,r),u.push(c[0]);a+=s.concat(u).join(",")}return a}me.create=function(e){var t=(e=e&&e.push?{data:e}:e)||{},a=t.data;if(t.data=a,!(t instanceof me)&&t instanceof r.data.DataSource)throw new Error("Incorrect DataSource type. Only PivotDataSource instances are supported");return t instanceof me?t:new me(t)},pe.create=function(e){var t=(e=e&&e.push?{data:e}:e)||{},a=t.data;if(t.data=a,!(t instanceof pe)&&t instanceof r.data.DataSource)throw new Error("Incorrect DataSource type. Only PivotDataSource instances are supported");return t instanceof pe?t:new pe(t)};var ze={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}")',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"'};function je(e){var t="";var a=e.value;var n=e.field;var s=e.operator;return"in"==s?(t+="{",t+=a,t+="}"):(t+="neq"==s||"doesnotcontain"==s?"-":"",t+="Filter(",t+=n+".MEMBERS",t+=r.format(ze[s],n,a),t+=")"),t}function $e(e,t,r){var a="";if(t){var n;for(var s in a+="<"+e+">",t){n=t[s];let e=s;r&&(e=e.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"")),a+="<"+e+">"+n+"</"+e+">"}a+="</"+e+">"}else a+="<"+e+"/>";return a}var Ge={schemaCubes:"MDSCHEMA_CUBES",schemaCatalogs:"DBSCHEMA_CATALOGS",schemaMeasures:"MDSCHEMA_MEASURES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaLevels:"MDSCHEMA_LEVELS",schemaMembers:"MDSCHEMA_MEMBERS",schemaKPIs:"MDSCHEMA_KPIS"};var Ve={read:function(e){var t='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>';t+="SELECT NON EMPTY {";var r=e.columns||[];var a=e.rows||[];var n=e.measures||[];var s="rows"===e.measuresAxis;var i=e.sort||[];return!r.length&&a.length&&(!n.length||n.length&&s)&&(r=a,a=[],s=!1),r.length||a.length||(s=!1),r.length?t+=We(r,s?[]:n,i):n.length&&!s&&(t+=Le(n).join(",")),t+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS",(a.length||s&&n.length>1)&&(t+=", NON EMPTY {",a.length?t+=We(a,s?n:[],i):t+=Le(n).join(","),t+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"),e.filter?(t+=" FROM ",t+="(",t+=function(e,t){var r,a="";var n=e.filters;var s=n.length;var i;for(i=s-1;i>=0;i--)r="SELECT (",r+=je(n[i]),r+=") ON 0",a=i==s-1?r+=" FROM ["+t+"]":r+" FROM ( "+a+" )";return a}(e.filter,e.connection.cube),t+=")"):t+=" FROM ["+e.connection.cube+"]",1==n.length&&r.length&&(t+=" WHERE ("+Le(n).join(",")+")"),(t+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>").replace(/\&/g,"&amp;")},discover:function(t){var r='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';return r+="<RequestType>"+(Ge[(t=t||{}).command]||t.command)+"</RequestType>",r+="<Restrictions>"+$e("RestrictionList",t.restrictions,!0)+"</Restrictions>",t.connection&&t.connection.catalog&&(t.properties=e.extend({},{Catalog:t.connection.catalog},t.properties)),r+="<Properties>"+$e("PropertyList",t.properties)+"</Properties>",r+="</Discover></Body></Envelope>"}};var Ke=r.data.RemoteTransport.extend({init:function(e){var t=e;e=this.options=_(!0,{},this.options,e),r.data.RemoteTransport.call(this,e),x(t.discover)?this.discover=t.discover:"string"==typeof t.discover?this.options.discover={url:t.discover}:t.discover||(this.options.discover=this.options.read)},setup:function(t,a){return t.data=t.data||{},e.extend(!0,t.data,{connection:this.options.connection}),r.data.RemoteTransport.fn.setup.call(this,t,a)},options:{read:{dataType:"text",contentType:"text/xml",type:"POST"},discover:{dataType:"text",contentType:"text/xml",type:"POST"},parameterMap:function(e,t){return Ve[t](e,t)}},discover:function(t){return e.ajax(this.setup(t,"discover"))}});var Ye=s.extend({init:function(e){e=this.options=_(!0,{},this.options,e)},setup:function(t){return e.extend(!0,t||{},{connection:this.options.connection})},read:function(t){var r,a,n=this;var s=n.setup(t.data,S);r=t.success||e.noop,a=t.error||e.noop,t.parameterMap&&(s=n.parameterMap(s,S));const i="object"==typeof n.options.read&&n.options.read.url?n.options.read:{url:n.options.read};o.g(i,s).then(o.h).then((function(e){r(e)})).catch((function(e){a(e)}))},catalog:function(r){var a=this.options||{};if(r===t)return(a.connection||{}).catalog;var n=a.connection||{};n.catalog=r,this.options.connection=n,e.extend(this.transport.options,{connection:n})},cube:function(e){var r=this.options||{};if(e===t)return(r.connection||{}).cube;var a=r.connection||{};a.cube=e,this.options.connection=a,_(!0,this.transport.options,{connection:a})},discover:function(e){return o.f({url:this.options.read},e)}});function Qe(e){return null==e?[]:"[object Array]"!==v.call(e)?[e]:e}function Je(e){var t={tuples:[]};var a=Qe(r.getter("Tuples.Tuple",!0)(e));var n=r.getter("Caption['#text']");var s=r.getter("UName['#text']");var i=r.getter("LName['#text']");var o=r.getter("LNum['#text']");var l=r.getter("CHILDREN_CARDINALITY['#text']",!0);var c=r.getter("['@Hierarchy']");var u=r.getter("PARENT_UNIQUE_NAME['#text']",!0);for(var h=0;h<a.length;h++){var d=[];var m=Qe(a[h].Member);for(var p=0;p<m.length;p++)d.push({children:[],caption:n(m[p]),name:s(m[p]),levelName:i(m[p]),levelNum:o(m[p]),hasChildren:parseInt(l(m[p]),10)>0,parentName:u(m[p]),hierarchy:c(m[p])});t.tuples.push({members:d})}return t}var Xe={cubes:{name:r.getter("CUBE_NAME['#text']",!0),caption:r.getter("CUBE_CAPTION['#text']",!0),description:r.getter("DESCRIPTION['#text']",!0),type:r.getter("CUBE_TYPE['#text']",!0)},catalogs:{name:r.getter("CATALOG_NAME['#text']",!0),description:r.getter("DESCRIPTION['#text']",!0)},measures:{name:r.getter("MEASURE_NAME['#text']",!0),caption:r.getter("MEASURE_CAPTION['#text']",!0),uniqueName:r.getter("MEASURE_UNIQUE_NAME['#text']",!0),description:r.getter("DESCRIPTION['#text']",!0),aggregator:r.getter("MEASURE_AGGREGATOR['#text']",!0),groupName:r.getter("MEASUREGROUP_NAME['#text']",!0),displayFolder:r.getter("MEASURE_DISPLAY_FOLDER['#text']",!0),defaultFormat:r.getter("DEFAULT_FORMAT_STRING['#text']",!0)},kpis:{name:r.getter("KPI_NAME['#text']",!0),caption:r.getter("KPI_CAPTION['#text']",!0),value:r.getter("KPI_VALUE['#text']",!0),goal:r.getter("KPI_GOAL['#text']",!0),status:r.getter("KPI_STATUS['#text']",!0),trend:r.getter("KPI_TREND['#text']",!0),statusGraphic:r.getter("KPI_STATUS_GRAPHIC['#text']",!0),trendGraphic:r.getter("KPI_TREND_GRAPHIC['#text']",!0),description:r.getter("KPI_DESCRIPTION['#text']",!0),groupName:r.getter("MEASUREGROUP_NAME['#text']",!0)},dimensions:{name:r.getter("DIMENSION_NAME['#text']",!0),caption:r.getter("DIMENSION_CAPTION['#text']",!0),description:r.getter("DESCRIPTION['#text']",!0),uniqueName:r.getter("DIMENSION_UNIQUE_NAME['#text']",!0),defaultHierarchy:r.getter("DEFAULT_HIERARCHY['#text']",!0),type:r.getter("DIMENSION_TYPE['#text']",!0)},hierarchies:{name:r.getter("HIERARCHY_NAME['#text']",!0),caption:r.getter("HIERARCHY_CAPTION['#text']",!0),description:r.getter("DESCRIPTION['#text']",!0),uniqueName:r.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),dimensionUniqueName:r.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:r.getter("HIERARCHY_DISPLAY_FOLDER['#text']",!0),origin:r.getter("HIERARCHY_ORIGIN['#text']",!0),defaultMember:r.getter("DEFAULT_MEMBER['#text']",!0)},levels:{name:r.getter("LEVEL_NAME['#text']",!0),caption:r.getter("LEVEL_CAPTION['#text']",!0),description:r.getter("DESCRIPTION['#text']",!0),uniqueName:r.getter("LEVEL_UNIQUE_NAME['#text']",!0),dimensionUniqueName:r.getter("DIMENSION_UNIQUE_NAME['#text']",!0),displayFolder:r.getter("LEVEL_DISPLAY_FOLDER['#text']",!0),orderingProperty:r.getter("LEVEL_ORDERING_PROPERTY['#text']",!0),origin:r.getter("LEVEL_ORIGIN['#text']",!0),hierarchyUniqueName:r.getter("HIERARCHY_UNIQUE_NAME['#text']",!0)},members:{name:r.getter("MEMBER_NAME['#text']",!0),caption:r.getter("MEMBER_CAPTION['#text']",!0),uniqueName:r.getter("MEMBER_UNIQUE_NAME['#text']",!0),dimensionUniqueName:r.getter("DIMENSION_UNIQUE_NAME['#text']",!0),hierarchyUniqueName:r.getter("HIERARCHY_UNIQUE_NAME['#text']",!0),levelUniqueName:r.getter("LEVEL_UNIQUE_NAME['#text']",!0),childrenCardinality:r.getter("CHILDREN_CARDINALITY['#text']",!0)}};var Ze=["axes","catalogs","cubes","dimensions","hierarchies","levels","measures"];var et=r.data.XmlDataReader.extend({init:function(e){r.data.XmlDataReader.call(this,e),this._extend(e)},_extend:function(e){var t=0;var r=Ze.length;var a;var n;for(;t<r;t++)(n=e[a=Ze[t]])&&n!==f&&(this[a]=n)},parse:function(e){var t=r.data.XmlDataReader.fn.parse(e.replace(/<(\/?)(\w|-)+:/g,"<$1"));return r.getter("['Envelope']['Body']",!0)(t)},errors:function(e){var t=r.getter("['Fault']",!0)(e);return t?[{faultstring:r.getter("faultstring['#text']",!0)(t),faultcode:r.getter("faultcode['#text']",!0)(t)}]:null},axes:function(e){e=r.getter('ExecuteResponse["return"].root',!0)(e);var t=Qe(r.getter("Axes.Axis",!0)(e));var a;var n={columns:{},rows:{}};for(var s=0;s<t.length;s++)"sliceraxis"!==(a=t[s])["@name"].toLowerCase()&&(n.columns.tuples?n.rows=Je(a):n.columns=Je(a));return n},data:function(e){e=r.getter('ExecuteResponse["return"].root',!0)(e);var t=Qe(r.getter("CellData.Cell",!0)(e));var a=[];var n=r.getter("['@CellOrdinal']");var s=r.getter("Value['#text']");var i=r.getter("FmtValue['#text']");for(var o=0;o<t.length;o++)a.push({value:s(t[o]),fmtValue:i(t[o]),ordinal:parseInt(n(t[o]),10)});return a},_mapSchema:function(e,t){e=r.getter('DiscoverResponse["return"].root',!0)(e);var a=Qe(r.getter("row",!0)(e));var n=[];for(var s=0;s<a.length;s++){var i={};for(var o in t)i[o]=t[o](a[s]);n.push(i)}return n},measures:function(e){return this._mapSchema(e,Xe.measures)},kpis:function(e){return this._mapSchema(e,Xe.kpis)},hierarchies:function(e){return this._mapSchema(e,Xe.hierarchies)},levels:function(e){return this._mapSchema(e,Xe.levels)},dimensions:function(e){return this._mapSchema(e,Xe.dimensions)},cubes:function(e){return this._mapSchema(e,Xe.cubes)},catalogs:function(e){return this._mapSchema(e,Xe.catalogs)},members:function(e){return this._mapSchema(e,Xe.members)}});_(!0,r.data,{PivotDataSource:pe,PivotDataSourceV2:me,XmlaTransport:Ke,XmlaDataReader:et,PivotCubeBuilder:he,transports:{xmla:Ke},readers:{xmla:et}});var tt=function(e,t){var r=[];for(var a=0,n=e.length;a<n;a++)e[a].field!==t&&r.push(e[a]);return r};r.ui.PivotSettingTarget=c.extend({init:function(t,n){var s=this;if(c.fn.init.call(s,t,n),s.element.addClass("k-pivot-setting"),s.dataSource=r.data.PivotDataSource.create(n.dataSource),s._refreshHandler=s.refresh.bind(s),s.dataSource.first(k,s._refreshHandler),!n.template){var i="";s.options.enabled&&(i=`<span class="k-setting-delete k-chip-action">${r.ui.icon("x")}</span>`),s.options.template=e=>`<span class="k-chip k-chip-md k-rounded-md k-chip-solid k-chip-solid-base" data-${r.ns}name="${e.name||e}"><span class="k-chip-content"><span class="k-chip-text">${e.name||e}</span></span><span class="k-chip-actions">`+i+"</span></span>"}s.template=r.template(s.options.template),s.emptyTemplate=r.template(s.options.emptyTemplate),s._sortable(),s.element.on("click"+M,".k-chip, .k-button",(function(t){var a=e(t.target).closest(":not(path,svg)");var n=a.closest(".k-chip-action");var i=a.closest("["+r.attr("name")+"]").attr(r.attr("name"));if(i)if(n.hasClass("k-setting-delete"))s.remove(i);else if(!(a.closest(".k-chip-actions").length>0)&&s.options.sortable){var o=e(t.currentTarget).closest(":not(path,svg)").find(".k-i-sort-asc-small,.k-svg-i-sort-asc-small").length?"desc":"asc";s.sort({field:i,dir:o})}})),(n.filterable||n.sortable)&&(s.fieldMenu=new a.PivotFieldMenu(s.element,{messages:s.options.messages.fieldMenu,filter:".k-setting-fieldmenu",filterable:n.filterable,sortable:n.sortable,dataSource:s.dataSource})),s.refresh()},options:{name:"PivotSettingTarget",template:null,filterable:!1,sortable:!1,emptyTemplate:e=>`<div class='k-empty'>${e}</div>`,setting:"columns",enabled:!0,messages:{empty:"Drop Fields Here"}},setDataSource:function(e){this.dataSource.unbind(k,this._refreshHandler),this.dataSource=this.options.dataSource=e,this.fieldMenu&&this.fieldMenu.setDataSource(e),e.first(k,this._refreshHandler),this.refresh()},_sortable:function(){var e=this;e.options.enabled&&(this.sortable=this.element.kendoSortable({connectWith:this.options.connectWith,hint:e.options.hint,filter:">*:not(.k-empty)",cursor:"move",start:function(e){e.item.trigger("focus").trigger("blur")},change:function(t){var a=t.item.attr(r.attr("name"));"receive"==t.action?e.add(a):"remove"==t.action?e.remove(a):"sort"==t.action&&e.move(a,t.newIndex)}}).data("kendoSortable"))},_isKPI:function(e){return"kpi"===e.type||e.measure},validate:function(e){var t=2==e.type||"aggregator"in e||this._isKPI(e);if(t)return"measures"===this.options.setting;if("measures"===this.options.setting)return t;var r=this.dataSource[this.options.setting]();var a=e.defaultHierarchy||e.uniqueName;return!(Oe(a,r)>-1)&&!(Oe(a,r=this.dataSource["columns"===this.options.setting?"rows":"columns"]())>-1)},add:function(e){let t=this.dataSource[this.options.setting]();let r=0;let a=(e=Array.isArray(e)?e.slice(0):[e]).length;for(;r<a;)-1!==Oe(e[r],t)&&(e.splice(r,1),r-=1,a-=1),r++;e.length&&(t=t.concat(e),this.dataSource[this.options.setting](t))},move:function(e,t){var r=this.dataSource[this.options.setting]();var a=Oe(e,r);a>-1&&(e=r.splice(a,1)[0],r.splice(t,0,e),this.dataSource[this.options.setting](r))},remove:function(e){var t=this.dataSource[this.options.setting]();var r=Oe(e,t);var a=this.dataSource.sort();var n=this.dataSource.filter();r>-1&&(n&&(n.filters=tt(n.filters,e),this.dataSource._filter.filters=n.filters,n.filters.length||(this.dataSource._filter=null)),a&&(a=tt(a,e),this.dataSource._sort=a),t.splice(r,1),this.dataSource[this.options.setting](t))},sort:function(e){var t=this.options.sortable;var r=(!0===t||t.allowUnsort)&&"asc"===e.dir;var a=this.dataSource.sort()||[];var n=tt(a,e.field);r&&a.length!==n.length&&(e=null),e&&n.push(e),this.dataSource.sort(n)},refresh:function(){var e="";var r=this.dataSource[this.options.setting]();var a=r.length;var n=0;var s;if(a)for(;n<a;n++)s=(s=r[n]).name===t?{name:s}:s,e+=this.template(_({sortIcon:this._sortIcon(s.name)},s));else e=this.emptyTemplate(this.options.messages.empty);this.element.html(e)},destroy:function(){c.fn.destroy.call(this),this.dataSource.unbind(k,this._refreshHandler),this.element.off(M),this.sortable&&this.sortable.destroy(),this.fieldMenu&&this.fieldMenu.destroy(),this.element=null,this._refreshHandler=null},_sortIcon:function(e){var t=function(e,t){if(!e)return null;for(var r=0,a=e.length;r<a;r++)if(e[r].field===t)return e[r];return null}(this.dataSource.sort(),Be(e));var r="";return t&&(r="sort-"+t.dir),r}}),r.ui.PivotSettingTargetV2=c.extend({init:function(t,n){var s=this;c.fn.init.call(s,t,n),s.dataSource=r.data.PivotDataSourceV2.create(n.dataSource),s._refreshHandler=s.refresh.bind(s),s.dataSource.first(k,s._refreshHandler),s.template=r.template(s.options.template),s._sortable(),s.element.on("click"+M,".k-i-x-circle,.k-svg-i-x-circle",(function(t){var r=e(t.target).closest(":not(path,svg)").closest(".k-chip");var a=r.find(".k-chip-label").text();a&&(s.remove(a),r.remove(),s.trigger("remove",{name:a}))})),s.options.navigatable&&s.element.on("keydown"+M,".k-chip",(function(t){var r=e(t.target),a=t.keyCode,n=r.find(".k-chip-label").text();if(a===b.DELETE||a===b.BACKSPACE){const e=s.options.configuratorNavigation?s.options.configuratorNavigation.elements.indexOf(r[0]):-1;if(r.find(".k-i-x-circle,.k-svg-i-x-circle").trigger("click"),!s.options.configuratorNavigation)return;s.options.configuratorNavigation.focusElement(s.options.configuratorNavigation.elements[e-1])}else if(a===b.DOWN&&t.altKey)r.find(".k-i-more-vertical,.k-svg-i-more-vertical").trigger("click");else if(t.ctrlKey&&t.shiftKey)if(a==b.LEFT){if(s.move(n,Math.max(0,r.index()-1)),!s.options.configuratorNavigation)return;s.options.configuratorNavigation.focusElement(s.element.find(".k-chip .k-chip-label").filter(((t,r)=>e(r).text()==n)).closest(".k-chip")[0])}else if(a==b.RIGHT){if(s.move(n,Math.min(r.index()+1,r.parent().find("> .k-chip").length-1)),!s.options.configuratorNavigation)return;s.options.configuratorNavigation.focusElement(s.element.find(".k-chip .k-chip-label").filter(((t,r)=>e(r).text()==n)).closest(".k-chip")[0])}else if(a==b.UP&&"rows"==s.options.setting||a==b.DOWN&&"columns"==s.options.setting){let e=s.sortable.options.connectWith.data("kendoPivotSettingTargetV2");if(!e)return;if(s.remove(n),e.add(n),!s.options.configuratorNavigation)return;s.options.configuratorNavigation.focusElement(e.element.find(".k-chip").last()[0])}})),s.fieldMenu=new a.PivotFieldMenuV2(s.element,{messages:s.options.messages.fieldMenu,filterable:n.filterable,filter:".k-i-more-vertical,.k-svg-i-more-vertical",sortable:n.sortable,dataSource:s.dataSource,setting:n.setting}),s.refresh()},events:["remove"],options:{name:"PivotSettingTargetV2",template:null,filterable:!1,sortable:!1,setting:"columns",enabled:!0,messages:{empty:"Drop Fields Here"}},setDataSource:function(e){this.dataSource.unbind(k,this._refreshHandler),this.dataSource=this.options.dataSource=e,this.fieldMenu&&this.fieldMenu.setDataSource(e),e.first(k,this._refreshHandler),this.refresh()},_applyState:function(){this._sortState!==t&&(this.dataSource._sort=this._sortState,this._sortState=t),this._stateFilter!==t&&(this.dataSource._filter=this._stateFilter,this._stateFilter=t),this.dataSource["_"+this.options.setting]="measures"===this.options.setting?X(this._savedState):Z(this._savedState)},_cancelChanges:function(){this._sortState=t,this._stateFilter=t,this._savedState=r.deepExtend([],this._initialState),this._redraw()},_state:function(e,t){var a=this;if(!e)return a._savedState||[];a._savedState&&!t||(a._initialState=r.deepExtend([],e)),a._savedState=r.deepExtend([],e)},_sortable:function(){var e=this;this.sortable=this.element.kendoSortable({connectWith:this.options.connectWith,hint:e.options.hint,filter:">*:not(.k-empty)",cursor:"move",start:function(e){e.item.trigger("focus").blur()},change:function(t){var r=t.item.find(".k-chip-label").text();"receive"==t.action?e.add(r):"remove"==t.action?e.remove(r):"sort"==t.action&&e.move(r,t.newIndex)}}).data("kendoSortable")},add:function(e){let t=this._state();let r=0;let a=(e=Array.isArray(e)?e.slice(0):[e]).length;for(;r<a;)-1!==Oe(e[r],t)&&(e.splice(r,1),r-=1,a-=1),r++;e.length&&(t=t.concat(e),this._state(t),this._redraw())},move:function(e,t){var r=this._state();var a=Oe(e,r);a>-1&&(e=r.splice(a,1)[0],r.splice(t,0,e),this._state(r),this._redraw())},remove:function(e){var t=this._state();var r=Oe(e,t);var a=this.dataSource.sort();var n=this.dataSource.filter();r>-1&&(n&&(n.filters=tt(n.filters,e),this._savedFilter=this.dataSource._filter,this._savedFilter.filters=n.filters,n.filters.length||(this._savedFilter=null)),a&&(a=tt(a,e),this._sortState=a),t.splice(r,1),this._state(t),this._redraw())},_emptyState:function(e){e?this.element.html(this.options.messages.empty).addClass("k-settings-description").removeClass("k-chip-list"):this.element.removeClass("k-settings-description").addClass("k-chip-list")},_redraw:function(){var e=this._state()||[];this._emptyState(!e.length),e.length&&this.element.html(this._targetsHTML(e))},_targetsHTML:function(e){var r;var a="";var n=0;if(e.length)for(;n<e.length;n++)r=(r=e[n]).name===t?{name:r}:r,a+=this.template({name:r.name,menuenabled:true});return a},refresh:function(){if(!this.dataSource._preventRefresh){var e=this.dataSource[this.options.setting]();this._state(e,!0),this._emptyState(!this._state().length),e.length&&this.element.html(this._targetsHTML(e))}},destroy:function(){c.fn.destroy.call(this),this.dataSource.unbind(k,this._refreshHandler),this.element.off(M),this.sortable&&this.sortable.destroy(),this.fieldMenu&&this.fieldMenu.destroy(),this.element=null,this._refreshHandler=null}});var rt=c.extend({init:function(t,r){var a=this;c.fn.init.call(a,t,r),a.element=e(t),a._element(),a._attachEvents()},options:{name:"PivotConfiguratorButton",text:"Change settings",configurator:""},destroy:function(){this.element.off(M)},setOptions:function(e){r.deepExtend(this.options,e),this.init(this.element,this.options)},toggle:function(){var t=r.attr("role");var a=this.element.closest("["+t+"=pivotcontainer]").find("["+t+"=pivotgridv2]");var n;e("#"+this.options.configurator).toggleClass("k-hidden"),a.length&&((n=a.getKendoPivotGridV2())._setContentWidth(),n._updateDimensions())},_attachEvents:function(){this.element.on("click"+M,this.toggle.bind(this))},_element:function(){var e=this.options;this.element.addClass("k-pivotgrid-configurator-button"),this.element.html(r.format("<span>{0}{1}</span>",e.text,r.ui.icon("gear")))}});var at=c.extend({init:function(t,r){var a=this;c.fn.init.call(a,t,r),a.element=e(t),a.options=r,a._addClasses()},options:{name:"PivotContainer",configuratorPosition:"left"},setOptions:function(e){r.deepExtend(this.options,e),this.init(this.element,this.options)},_addClasses:function(){var e=this.options;var t;switch(this.element.removeClass("k-flex-row k-flex-row-reverse k-flex-column k-flex-column-reverse"),e.configuratorPosition){case"right":default:t="k-flex-row";break;case"left":t="k-flex-row-reverse";break;case"bottom":t="k-flex-column";break;case"top":t="k-flex-column-reverse"}this.element.addClass("k-d-flex k-pos-relative").addClass(t)}});var nt=c.extend({init:function(t,a){var n=this;c.fn.init.call(n,t,a),n._dataSource(),n._bindConfigurator(),n._ariaId=n.element.attr("id")||r.guid(),n._wrapper(),n._columnHeadersWrapper=e('<div class="k-pivotgrid-column-headers"></div>'),n._rowHeadersWrapper=e('<div class="k-pivotgrid-row-headers"></div>'),n._contentWrapper=e('<div class="k-pivotgrid-values"></div>'),n.wrapper.append(n._columnHeadersWrapper),n.wrapper.append(n._rowHeadersWrapper),n.wrapper.append(n._contentWrapper),n._columnBuilder=new dt({template:this.options.columnHeaderTemplate,axes:"columns",ariaId:n._ariaId}),n._rowBuilder=new dt({template:this.options.rowHeaderTemplate,axes:"rows",ariaId:n._ariaId}),n._contentBuilder=new ht({dataCellTemplate:this.options.dataCellTemplate||j,kpiStatusTemplate:this.options.kpiStatusTemplate||W,kpiTrendTemplate:this.options.kpiTrendTemplate||z,measures:this.dataSource._measures,ariaId:n._ariaId}),n._scrollable(),n._rowHeadersWrapper.add(n._columnHeadersWrapper).on("click","span.k-icon,span.k-svg-icon",(function(){var t=e(this);var a=t.parent().attr(r.attr("key"));var s=t.is(".k-i-chevron-up,.k-svg-i-chevron-up");var i=0!==t.closest(".k-pivotgrid-row-headers").length;var l=a.split(",");var c=s?L:R;if(!n.trigger(c,{path:l,axis:i?"rows":"columns"})){var u={type:"HEADERS_ACTION_TOGGLE",payload:l,tree:i?n._rowBuilder.getTree():n._columnBuilder.getTree()};var h=i?n.dataSource._rows:n.dataSource._columns;var d=o.i(h,u);n.dataSource._preventRefresh=!0,n._columnBuilder._exportData={},n._rowBuilder._exportData={},i?n.dataSource.rows(d):n.dataSource.columns(d)}})),n.options.autoBind&&n.dataSource.fetch(),n._aria(),n.options.navigatable&&n._initPivotGridNavigation(),n._initLoader(),r.notify(n)},events:[D,H,R,L],options:{name:"PivotGridV2",autoBind:!0,height:null,columnWidth:null,configurator:"",columnHeaderTemplate:null,rowHeaderTemplate:null,dataCellTemplate:null,kpiStatusTemplate:null,kpiTrendTemplate:null,messages:{emptyCellLabel:"PivotGrid Empty Cell"}},destroy:function(){var t=this;c.fn.destroy.call(t),t.loader&&t.loader.destroy(),t._windowResizeHandler&&(e(window).off(w+M,t._windowResizeHandler),t._windowResizeHandler=null)},_aria:function(){this.element.attr("role","grid")},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this._bindConfigurator(),this.options.autoBind&&e.fetch()},_initLoader:function(t){var r=this,a={size:"medium",messages:{exporting:"Exporting..."}};a=e.extend({},a,t);const n=e("<div></div>").kendoLoader(a).data("kendoLoader");r.loader=n,r._loaderContainer=l.u.bind(r)},_initPivotGridNavigation:function(){var e=this;e.navigation=new o.P({tabIndex:0}),e.navigation.keyboardEvents.keydown.o=function(e,t,r){if(!t.root)return;let a=t.root.nextElementSibling;a&&a instanceof HTMLElement&&(a.matches("div.k-pivotgrid-configurator-button")||(a=a.nextElementSibling),a&&a instanceof HTMLElement&&a.matches("div.k-pivotgrid-configurator-button")&&(t.root.parentNode&&!t.root.parentNode.querySelector(".k-pivotgrid-configurator.k-hidden")||a.click(),setTimeout((()=>{if(t.root.parentNode){const e=t.root.parentNode.querySelector(".k-pivotgrid-configurator-content .k-form-field .k-fields-list-wrapper .k-treeview");e instanceof HTMLElement&&(e.setAttribute("tabindex",String(t.tabIndex)),e.focus())}}),0)))},e.navigation.start(e.element[0]);const t=e.navigation.first;t&&t.setAttribute("tabindex","0")},_matchAriaAttributes:function(e){var t=this;const r=e.querySelectorAll(".k-pivotgrid-row-headers .k-pivotgrid-row");const a=r[0]?Array.from(r[0].children).reduce(((e,t)=>e+(null!==t.getAttribute("colspan")?+t.getAttribute("colspan"):1)),0):[];const n=e.querySelectorAll(".k-pivotgrid-column-headers tr");const s=e.querySelectorAll(".k-pivotgrid-column-headers th");const i=e.querySelectorAll(".k-pivotgrid-values td");const o=e.querySelector(".k-pivotgrid-empty-cell");o.setAttribute("aria-rowspan",n.length.toString()),o.setAttribute("aria-colspan",a.toString());const l=n[0];const c=l?Array.from(l.children).map((e=>e.getAttribute("id"))).join(" "):[];l&&l.setAttribute("aria-owns",`${o.getAttribute("id")} ${c}`),r.forEach(((e,r)=>{const a=t.filterAndMap(Array.from(i),(e=>{const t=e.getAttribute("id").split("-");return t[t.length-2]===(r+1).toString()}),(e=>e.getAttribute("id")));e.setAttribute("aria-owns",a.join(" "))})),i.forEach((e=>{const r=e.getAttribute("id").split("-");const a=+r[r.length-1];const n=t.filterAndMap(Array.from(s),(e=>{const t=e.getAttribute("id").split("-");const r=+t[t.length-1];const n=+e.getAttribute("colspan");return a===r||n>1&&r<a&&r+n-1>=a}),(e=>e.getAttribute("id")));e.setAttribute("aria-describedby",n.join(" "))}))},filterAndMap:function(e,t,r){return e.reduce(((e,a)=>t(a)?[...e,r(a)]:e),[])},_dataSource:function(){var e=this;var t=e.options.dataSource;t=Array.isArray(t)?{data:t}:t,e.dataSource&&this._refreshHandler?e.dataSource.unbind(k,e._refreshHandler).unbind(y,e._progressHandler).unbind(N,e._errorHandler):(e._refreshHandler=e.refresh.bind(e),e._progressHandler=e._requestStart.bind(e),e._errorHandler=e._error.bind(e)),e.dataSource=r.data.PivotDataSourceV2.create(t).bind(k,e._refreshHandler).bind(y,e._progressHandler).bind(N,e._errorHandler)},_resize:function(){var e,t;this.wrapper[0].style.setProperty("--kendo-scrollbar-width",r.format("{0}px",(e=0,document&&document.createElement&&((t=document.createElement("div")).style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",t.innerHTML="&nbsp;",document.body.appendChild(t),e=t.offsetWidth-t.scrollWidth,document.body.removeChild(t)),e)))},_scrollable:function(){var t=this;var a=t._columnHeadersWrapper;var n=t._rowHeadersWrapper;t._resize(),t._windowResizeHandler=t._resize.bind(t),t._contentWrapper.scroll((function(){r.scrollLeft(a,this.scrollLeft),n.scrollTop(this.scrollTop)})),n.bind("DOMMouseScroll"+M+" mousewheel"+M,t._wheelScroll.bind(t)),e(window).on(w+M,t._windowResizeHandler)},_wheelScroll:function(t){if(!t.ctrlKey){var a=r.wheelDeltaY(t);var n=this._contentWrapper.scrollTop();a&&(t.preventDefault(),e(t.currentTarget).one("wheel"+M,!1),this._rowHeadersWrapper.scrollTop(n+-a),this._contentWrapper.scrollTop(n+-a))}},_wrapper:function(){var t=this.options.height;this.wrapper=this.element.addClass("k-pivotgrid");var r=e(`<span class="k-pivotgrid-empty-cell" id="${this._ariaId}-empty-cell" role="columnheader"><span class="k-sr-only">${this.options.messages.emptyCellLabel}</span></span>`);this.wrapper.append(r),t&&this.wrapper.css("height",t)},_progress:function(e){this._isExport?this._loaderContainer(e,{message:"Exporting..."}):r.ui.progress(this.wrapper,e)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_updateDimensions:function(){var e=this;e.wrapper.css({"grid-template-columns":r.format("{0}px 1fr",e._rowHeadersWrapper.find(".k-pivotgrid-table")[0].offsetWidth),"grid-template-rows":r.format("{0}px 1fr",e._columnHeadersWrapper.find(".k-pivotgrid-table")[0].offsetHeight)})},_setContentWidth:function(){if(this.options.columnWidth){var e=this._contentWrapper.find("table");var t=this._columnHeadersWrapper.children("table");var r=this._rowHeadersWrapper.children("table");e.add(t).add(r).find("col").width(this.options.columnWidth)}},_bindConfigurator:function(){var t=this.options.configurator;t&&e(t).kendoPivotConfiguratorV2("setDataSource",this.dataSource)},cellInfoByElement:function(t){return t=e(t),this.cellInfo(t.index(),t.parent("tr").index())},cellInfo:function(e,t){var r=this._contentBuilder;var a;var n;return e>=r.columnsCount||e<0||t>=r.rowsCount||t<0?null:(a=t*r.columnsCount+e,{columnTuple:(n=r.hash[a<0?0:a]).columnTuple,rowTuple:n.rowTuple,dataItem:n.data})},refresh:function(){var e=this;var t=e.dataSource;if(!e.trigger(D,{action:"rebind"})){var a=r._activeElement()?r._activeElement().id:null;var n=e.wrapper.find("[tabindex=0]").attr("id");if(e._columnBuilder.setTuples(t._columnTuples),e._columnHeadersWrapper.html(e._columnBuilder.build()),e._rowBuilder.setTuples(t._rowTuples),e._rowHeadersWrapper.html(e._rowBuilder.build()),e._contentBuilder.setRowColumnInfo({columnHeaderLeafs:e._columnBuilder.getHeaderLeafs(),rowHeaderLeafs:e._rowBuilder.getHeaderLeafs(),columnHeaderBreadth:e._columnBuilder.getBreadth(),rowHeaderDepth:e._rowBuilder.getBreadth(),data:t._view}),e._contentWrapper.html(e._contentBuilder.build()),e._setContentWidth(),e._updateDimensions(),e._progress(!1),e.trigger(H),e._matchAriaAttributes(e.wrapper[0]),e.navigation){if(n&&e.element.find(`#${n}`).length>0)e.element.find(`#${n}`).attr("tabindex","0");else{const t=e.navigation.first;t&&t.setAttribute("tabindex","0")}a&&0==a.indexOf(e._ariaId)&&e.navigation.focusElement(e.element.find(`#${a}`)[0])}}}});a.plugin(rt),a.plugin(at),a.plugin(nt);var st=c.extend({init:function(a,n){var s=this;var i;var o;c.fn.init.call(s,a,n),F=r.support.isRtl(s.element)?"caret-alt-left":"caret-alt-right",s._dataSource(),s._bindConfigurator(),s._wrapper(),s._createLayout(),s._columnBuilder=i=new mt,s._rowBuilder=o=new pt,s._contentBuilder=new vt,s._templates(),s.columnsHeader.add(s.rowsHeader).on("click","span.k-icon,span.k-svg-icon",(function(){var a=e(this);var n=i;var l="expandColumn";var c;var u=a.attr(r.attr("path"));var h={axis:"columns",path:JSON.parse(u)};a.parent().is("td")&&(n=o,l="expandRow",h.axis="rows");var d=a.is(B);var m=n.metadata[u];var p=m.expanded===t;c=d?L:R,h.childrenLoaded=m.maxChildren>m.children,s.trigger(c,h)||(n.metadata[u].expanded=!d,r.ui.icon(a,{icon:d?F:O}),!d&&p?s.dataSource[l](h.path):s.refresh())})),s._scrollable(),s.options.autoBind&&s.dataSource.fetch(),r.notify(s)},events:[D,H,R,L],options:{name:"PivotGrid",autoBind:!0,reorderable:!0,filterable:!1,sortable:!1,navigatable:!1,height:null,columnWidth:100,configurator:"",columnHeaderTemplate:null,rowHeaderTemplate:null,dataCellTemplate:null,kpiStatusTemplate:null,kpiTrendTemplate:null,messages:{measureFields:"Drop Data Fields Here",columnFields:"Drop Column Fields Here",rowFields:"Drop Rows Fields Here"}},_templates:function(){var e=this.options.columnHeaderTemplate;var t=this.options.rowHeaderTemplate;var a=this.options.dataCellTemplate;var n=this.options.kpiStatusTemplate;var s=this.options.kpiTrendTemplate;this._columnBuilder.template=r.template(e||q,{useWithBlock:!!e}),this._contentBuilder.dataTemplate=r.template(a||j,{useWithBlock:!!a}),this._contentBuilder.kpiStatusTemplate=r.template(n||W,{useWithBlock:!!n}),this._contentBuilder.kpiTrendTemplate=r.template(s||z,{useWithBlock:!!s}),this._rowBuilder.template=r.template(t||q,{useWithBlock:!!t})},_bindConfigurator:function(){var t=this.options.configurator;t&&e(t).kendoPivotConfigurator("setDataSource",this.dataSource)},cellInfoByElement:function(t){return t=e(t),this.cellInfo(t.index(),t.parent("tr").index())},cellInfo:function(e,t){var r=this._contentBuilder;var a=r.columnIndexes[e||0];var n=r.rowIndexes[t||0];var s;return a&&n?(s=n.index*r.rowLength+a.index,{columnTuple:a.tuple,rowTuple:n.tuple,measure:a.measure||n.measure,dataItem:this.dataSource.view()[s]}):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.measuresTarget&&this.measuresTarget.setDataSource(e),this.rowsTarget&&this.rowsTarget.setDataSource(e),this.columnsTarget&&this.columnsTarget.setDataSource(e),this._bindConfigurator(),this.options.autoBind&&e.fetch()},setOptions:function(e){c.fn.setOptions.call(this,e),this._templates()},destroy:function(){c.fn.destroy.call(this),clearTimeout(this._headerReflowTimeout)},_dataSource:function(){var e=this;var t=e.options.dataSource;t=Array.isArray(t)?{data:t}:t,e.dataSource&&this._refreshHandler?e.dataSource.unbind(k,e._refreshHandler).unbind(T,e._stateResetHandler).unbind(y,e._progressHandler).unbind(N,e._errorHandler):(e._refreshHandler=e.refresh.bind(e),e._progressHandler=e._requestStart.bind(e),e._stateResetHandler=e._stateReset.bind(e),e._errorHandler=e._error.bind(e)),e.dataSource=r.data.PivotDataSource.create(t).bind(k,e._refreshHandler).bind(y,e._progressHandler).bind(T,e._stateResetHandler).bind(N,e._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_stateReset:function(){this._columnBuilder.reset(),this._rowBuilder.reset()},_wrapper:function(){var e=this.options.height;this.wrapper=this.element.addClass("k-pivot"),e&&this.wrapper.css("height",e)},_measureFields:function(){this.measureFields=e(C).addClass("k-pivot-toolbar k-toolbar k-toolbar-md k-settings-measures"),this.measuresTarget=this._createSettingTarget(this.measureFields,{setting:"measures",messages:{empty:this.options.messages.measureFields}})},_createSettingTarget:function(t,a){var n,s=this.options;return n=({sortIcon:e,name:t})=>`<span class="k-chip k-chip-md k-rounded-md k-chip-solid k-chip-solid-base" tabindex="0" data-${r.ns}name="${t}"><span class="k-chip-content"><span class="k-chip-text">${t}</span></span><span class="k-chip-actions k-field-actions">`+function(e,t,a){var n=t.sortable,s=t.filterable,i=a.reorderable,o="";return n&&(o+=e?`<span class="k-chip-action">${r.ui.icon(e+"-sm")}</span>`:""),(s||n)&&(o+=`<span class="k-setting-fieldmenu k-chip-action">${r.ui.icon("more-vertical")}</span>`),i&&(o+=`<span class="k-setting-delete k-chip-action">${r.ui.icon("x")}</span>`),o}(e,a,s)+"</span></span>",new r.ui.PivotSettingTarget(t,e.extend({dataSource:this.dataSource,template:n,emptyTemplate:e=>`<span class="k-empty">${e}</span>`,enabled:this.options.reorderable},a))},_initSettingTargets:function(){this.columnsTarget=this._createSettingTarget(this.columnFields,{connectWith:this.rowFields,setting:"columns",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.columnFields,fieldMenu:this.options.messages.fieldMenu}}),this.rowsTarget=this._createSettingTarget(this.rowFields,{connectWith:this.columnFields,setting:"rows",filterable:this.options.filterable,sortable:this.options.sortable,messages:{empty:this.options.messages.rowFields,fieldMenu:this.options.messages.fieldMenu}})},_createLayout:function(){var t=this;var a=e('<table class="k-pivot-layout"><tr><td><div class="k-pivot-rowheaders"></div></td><td><div class="k-pivot-table"></div></td></tr></table>');var n=a.find(".k-pivot-rowheaders");var s=a.find(".k-pivot-table");var i=e(C).addClass("k-grid");t._measureFields(),t.columnFields=e(C).addClass("k-pivot-toolbar k-toolbar k-toolbar-md k-settings-columns"),t.rowFields=e(C).addClass("k-pivot-toolbar k-toolbar k-toolbar-md k-settings-rows"),t.columnsHeader=e('<div class="k-grid-header-wrap" />').wrap('<div class="k-grid-header" />'),t.columnsHeader.parent().css("padding-right",r.support.scrollbar()),t.rowsHeader=e('<div class="k-grid k-alt"/>'),t.content=e('<div class="k-grid-content" />'),n.append(t.measureFields),n.append(t.rowFields),n.append(t.rowsHeader),i.append(t.columnsHeader.parent()),i.append(t.content),s.append(t.columnFields),s.append(i),t.wrapper.append(a),t.columnsHeaderTree=new r.dom.Tree(t.columnsHeader[0]),t.rowsHeaderTree=new r.dom.Tree(t.rowsHeader[0]),t.contentTree=new r.dom.Tree(t.content[0]),t._initSettingTargets()},_progress:function(e){r.ui.progress(this.wrapper,e)},_resize:function(){this.content[0].firstChild&&(this._setSectionsWidth(),this._setSectionsHeight(),this._setContentWidth(),this._setContentHeight(),this._columnHeaderReflow())},_columnHeaderReflow:function(){var e=this.columnsHeader.children("table");r.support.browser.mozilla&&(clearTimeout(this._headerReflowTimeout),e.css("table-layout","auto"),this._headerReflowTimeout=setTimeout((function(){e.css("table-layout","")})))},_setSectionsWidth:function(){var e=this.rowsHeader;var t=e.parent(".k-pivot-rowheaders").width(A);var r;r=Math.max(h(this.measureFields),h(this.rowFields)),r=Math.max(e.children("table").width(),r),t.width(r)},_setSectionsHeight:function(){var e=this.measureFields.height(A).height();var t=this.columnFields.height(A).height();var r=this.rowFields.height(A).innerHeight();var a=this.columnsHeader.height(A).innerHeight();var n=r-this.rowFields.height();var s=t>e?t:e;var i=a>r?a:r;this.measureFields.height(s),this.columnFields.height(s),this.rowFields.height(i-n),this.columnsHeader.height(i)},_setContentWidth:function(){var e=this.content.find("table");var t=this.columnsHeader.children("table");var r=e.children("colgroup").children().length*this.options.columnWidth;var a=Math.ceil(r/this.content.width()*100);a<100&&(a=100),e.add(t).css("width",a+"%"),this._resetColspan(t)},_setContentHeight:function(){var e=this;var t=e.content;var a=e.rowsHeader;var n=e.wrapper.innerHeight();var s=r.support.scrollbar();var i=t[0].offsetHeight===t[0].clientHeight;var o=e.options.height;if(e.wrapper.is(":visible")){if(!n||!o)return i&&(s=0),t.height("auto"),void a.height(t.height()-s);n-=d(e.columnFields),(n-=d(e.columnsHeader.parent()))<=2*s&&(n=2*s+1,i||(n+=s)),t.height(n),i&&(s=0),a.height(n-s)}},_resetColspan:function(e){var r=this;var a=e.children("tbody").children().first().children().first();r._colspan===t&&(r._colspan=a.attr("colspan")),a.attr("colspan",1),clearTimeout(r._layoutTimeout),r._layoutTimeout=setTimeout((function(){a.attr("colspan",r._colspan),r._colspan=t}))},_axisMeasures:function(e){var t=[];var r=this.dataSource;var a=r.measures();var n=a.length>1||a[0]&&a[0].type;return r.measuresAxis()===e&&(0===r[e]().length||n)&&(t=a),t},items:function(){return[]},refresh:function(){var e=this;var t=e.dataSource;var a=t.axes();var n=(a.columns||{}).tuples||[];var s=(a.rows||{}).tuples||[];var i=e._columnBuilder;var o=e._rowBuilder;var l;var c;if(!e.trigger(D,{action:"rebind"})){if(i.measures=e._axisMeasures("columns"),o.measures=e._axisMeasures("rows"),e.columnsHeaderTree.render(i.build(n)),e.rowsHeaderTree.render(o.build(s)),l={indexes:i._indexes,measures:i.measures,metadata:i.metadata},c={indexes:o._indexes,measures:o.measures,metadata:o.metadata},e.contentTree.render(e._contentBuilder.build(t.view(),l,c)),e._resize(),e.touchScroller)e.touchScroller.contentResized();else{var u=r.touchScroller(e.content);u&&u.movable&&(e.touchScroller=u,u.movable.bind("change",(function(t){r.scrollLeft(e.columnsHeader,-t.sender.x),e.rowsHeader.scrollTop(-t.sender.y)})))}e._progress(!1),e.trigger(H)}},_scrollable:function(){var e=this;var t=e.columnsHeader;var a=e.rowsHeader;e.content.on("scroll",(function(){r.scrollLeft(t,this.scrollLeft),a.scrollTop(this.scrollTop)})),a.on("DOMMouseScroll"+M+" mousewheel"+M,e._wheelScroll.bind(e))},_wheelScroll:function(t){if(!t.ctrlKey){var a=r.wheelDeltaY(t);var n=this.content.scrollTop();a&&(t.preventDefault(),e(t.currentTarget).closest(":not(path,svg)").one("wheel"+M,!1),this.rowsHeader.scrollTop(n+-a),this.content.scrollTop(n+-a))}}});var it=r.dom.element;var ot=r.dom.html;var lt=function(e,t){return{maxChildren:0,children:0,maxMembers:0,members:0,measures:1,levelNum:e,parentMember:0!==t}};var ct=function(e,t){var r=[];var a=0;for(;a<=t;a++)r.push(e.members[a].name);return r};var ut=function(e,t){var r="";var a=0;for(;a<=t;a++)r+=e.members[a].name;return r};var ht=s.extend({init:function(e){this.dataCellTemplate=r.template(e.dataCellTemplate),this.kpiStatusTemplate=r.template(e.kpiStatusTemplate),this.kpiTrendTemplate=r.template(e.kpiTrendTemplate),this.measures=e.measures,this.ariaId=e.ariaId,this.hash=[]},setRowColumnInfo:function(e){this.data=e.data,this.columnHeaderLeafs=e.columnHeaderLeafs,this.rowHeaderLeafs=e.rowHeaderLeafs,this.columnHeaderBreadth=e.columnHeaderBreadth,this.rowHeaderDepth=e.rowHeaderDepth,this.hash.length=0},addColElements:function(e){var t="";for(var r=0;r<e;r++)t+="<col>";this.table.find("colgroup").append(t)},addRowElements:function(t){var r=this.table.find("tbody");var a;for(var n=0;n<t.length;n++)a=e("<tr class=\"k-pivotgrid-row\" role='presentation'></tr>"),r.append(a),this.addColumCell(a,t[n],n);this.rowsCount=t.length},_getTemplate:function(e,t){let r;const a=e.columnTuple.members;const n=a[a.length-1];const s=this.measures&&this.measures.find((e=>e.name===n.name));const i=null!==e.data?e.data.value:e.data;s&&s.type&&(r=s.type);let o=this.dataCellTemplate;if(this.measures&&r&&""!==i)switch(t.dataItem||(t.dataItem={value:isNaN(Number(i))?i:Number(i)}),r){case"status":o=this.kpiStatusTemplate;break;case"trend":o=this.kpiTrendTemplate}return o(t)},addColumCell:function(t,r,a){for(var n=0;n<r.cells.length;n++){var s=r.cells[n];if(s){var i=e(`<td id="${this.ariaId}-cell-${a+1}-${n+1}" class="k-pivotgrid-cell" role="gridcell"></td>`);(this.rowHeaderLeafs[a].total||this.columnHeaderLeafs[n].total)&&i.addClass("k-pivotgrid-total"),i.append(this._getTemplate(s,{dataItem:s.data,rowTuple:s.rowTuple,columnTuple:s.columnTuple})),this.hash.push(s),t.append(i)}}},build:function(){var t=o.t((this.data||[]).slice(),this.columnHeaderLeafs,this.rowHeaderLeafs,this.columnHeaderBreadth,this.rowHeaderDepth);var r=this;var a=e("<table class='k-pivotgrid-table' role='presentation'><colgroup></colgroup><tbody class='k-pivotgrid-tbody' role='presentation'></tbody></table>");return r.table=a,r.addColElements(this.columnHeaderLeafs.length),r.addRowElements(t),this.rowsCount=t.length,this.columnsCount=this.columnHeaderLeafs.length,r.table}});var dt=s.extend({init:function(e){this.tuples=e.tuples,this.axes=e.axes,this.ariaId=e.ariaId,this.headerTemplate=r.template(P),this._exportData={},e.template&&(this.template=r.template(e.template))},setTuples:function(e){this.tuples=e},addColElements:function(e){var t="";for(var r=0;r<e;r++)t+="<col>";this.table.find("colgroup").append(t)},addRowElements:function(t){var r=this.table.find("tbody");var a;for(var n=0;n<t.length;n++)a=e('<tr class="k-pivotgrid-row" role="row"></tr>'),r.append(a),this.addColumCell(a,t[n],n)},_getExportData:function(e,t,r){t.levelName.match(/\[\(All\)\]/)&&(t.caption=t.caption.toUpperCase()),this._exportData[e]?this._exportData[e].children.push(t):this._exportData[e]={children:[t],element:r}},addColumCell:function(t,a,n){var s=this;var i;var o;for(var l=0;l<a.cells.length;l++)if(o=a.cells[l]){this._getExportData(n,o,t);const a=o.children&&o.children.length>0;i=e(s.headerTemplate({id:`${s.ariaId}-${"columns"==s.axes?"ch":"rh"}-${n+1}-${l+1}`,rowspan:o.rowSpan,colspan:o.colSpan,key:o.path.join(",")+(o.total?"|[TOTAL]":""),iconClass:o.children&&o.children.length?"up":"down",expandable:o.hasChildren&&!o.total,expanded:a?"true":"false",headerClass:r.format("k-pivotgrid-cell{0}{1}",o.total?" k-pivotgrid-header-total":"",0===o.levelNum?" k-pivotgrid-header-root":""),role:"columns"==s.axes?"columnheader":"rowheader"})),a&&i.addClass("k-pivotgrid-expanded");const c=`<span class="k-pivotgrid-header-title">${o.caption}</span>`;i.append(s.template?s.template({member:o}):c),t.append(i)}},build:function(){var t=o.j((this.tuples||[]).slice());var r="columns"==this.axes?o.k(t):o.l(t);var a=r[0];var n=r[1];var s=r[2];var i=r[3];var l=this;l._tree=t,l._breadth=s,l._headerLeafs=n;var c=e("<table class='k-pivotgrid-table' role='presentation'><colgroup></colgroup><tbody class='k-pivotgrid-tbody' role='rowgroup'></tbody></table>");return l.table=c,l.addColElements("columns"==this.axes?n.length:i),l.addRowElements(a),l.table},getTree:function(){return this._tree},getBreadth:function(){return this._breadth},getHeaderLeafs:function(){return this._headerLeafs}});var mt=s.extend({init:function(){this.measures=1,this.metadata={}},build:function(e){var t=this._tbody(e);var r=this._colGroup();return[it("table",{className:V},[r,t])]},reset:function(){this.metadata={}},_colGroup:function(){var e=this._rowLength();var t=[];var r=0;for(;r<e;r++)t.push(it("col",null));return it("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.map={},this.rows=[],this.rootTuple=t,this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push(it("tr",{className:$},[it("th",{className:G},[ot("&nbsp;")])])),it("tbody",{className:Q},this.rows)},_normalize:function(){var e=this.rows;var t=e.length;var r=0;var a;var n;var s;var i;var o;for(;r<t;r++)if(1!==(a=e[r]).rowSpan)for(s=0,n=(i=a.children).length;s<n;s++)(o=i[s]).tupleAll&&(o.attr.rowSpan=a.rowSpan)},_rowIndex:function(e){var t=this.rows;var r=t.length;var a=0;for(;a<r&&t[a]!==e;a++);return a},_rowLength:function(){var e=this.rows[0]?this.rows[0].children:[];var t=e.length;var r=0;var a=0;if(t)for(;a<t;a++)r+=e[a].attr.colSpan||1;return r||(r=this.measures),r},_row:function(e,t,r){var a=this.rootTuple.members[t].name;var n=e.members[t].levelNum;var s=a+n;var i=this.map;var o;var l;var c=i[s];return c?(c.notFirst=!1,c.parentMember&&c.parentMember===r||(c.parentMember=r,c.collapsed=0,c.colSpan=0)):((c=it("tr",{className:$},[])).parentMember=r,c.collapsed=0,c.colSpan=0,c.rowSpan=1,i[s]=c,(o=i[a+(Number(n)-1)])&&((l=o.children)[1]&&-1===l[1].attr.className.indexOf("k-alt")?c.notFirst=!0:c.notFirst=o.notFirst),this.rows.splice(this._rowIndex(o)+1,0,c)),c},_measures:function(e,t,r){var a=this.map;var n=a.measureRow;var s;n||(n=it("tr",{className:$},[]),a.measureRow=n,this.rows.push(n));for(var i=0,o=e.length;i<o;i++)s=e[i],n.children.push(this._cell(r||"",[this._content(s,t)],s));return o},_content:function(e,t){return ot(this.template({member:e,tuple:t}),!0)},_cell:function(e,t,r){var a=it("th",{className:G+" "+e},t);return a.value=r.caption||r.name,a},_buildRows:function(t,a,n){var s=t.members;var i=s[a];var o=s[a+1];var l,c,u,h;var d,m;var p=[];var v;var f=0;var g;var _;var b=0;var x=0;if(!i.measure){if(v=r.stringify(ct(t,a)),l=this._row(t,a,n),h=(u=i.children).length,(g=this.metadata[v])||(this.metadata[v]=g=lt(Number(i.levelNum),a),g.rootLevelNum=Number(this.rootTuple.members[a].levelNum)),this._indexes.push({path:v,tuple:t}),i.hasChildren){!1===g.expanded&&(b=g.maxChildren,l.collapsed+=b,g.children=0,h=0);let t=e("<span></span>");t.attr(r.attr("path"),v),p.push(r.dom.html(r.ui.icon(t,{icon:h?O:F}),!0))}if(p.push(this._content(i,t)),d=this._cell(l.notFirst?" k-first":"",p,i),l.children.push(d),l.colSpan+=1,h){for(m=this._cell(" k-alt",[this._content(i,t)],i),l.children.push(m);f<h;f++)c=this._buildRows(u[f],a,i);_=c.colSpan,b=c.collapsed,d.attr.colSpan=_,g.children=_,g.members=1,l.colSpan+=_,l.collapsed+=b,l.rowSpan=c.rowSpan+1,o&&(o.measure?_=this._measures(o.children,t," k-alt"):(_=(c=this._buildRows(t,a+1)).colSpan,l.collapsed+=c.collapsed,x=c.collapsed),m.attr.colSpan=_,_-=1,g.members+=_,l.colSpan+=_)}else o&&(o.measure?_=this._measures(o.children,t):(_=(c=this._buildRows(t,a+1)).colSpan,l.collapsed+=c.collapsed,x=c.collapsed),g.members=_,_>1&&(d.attr.colSpan=_,l.colSpan+=_-1));return g.maxMembers<g.members+x&&(g.maxMembers=g.members+x),u=g.children+b,g.maxChildren<u&&(g.maxChildren=u),(m||d).tupleAll=!0,l}this._measures(i.children,t)}});var pt=s.extend({init:function(){this.metadata={}},build:function(e){var t=this._tbody(e);var r=this._colGroup();return[it("table",{className:K},[r,t])]},reset:function(){this.metadata={}},_rowLength:function(){var e=this.rows[0].children;var t=0;var r=0;var a=e[r];for(;a;)t+=a.attr.colSpan||1,a=e[++r];return t},_colGroup:function(){var e=this._rowLength();var t=[];var r=0;for(;r<e;r++)t.push(it("col",null));return it("colgroup",null,t)},_tbody:function(e){var t=e[0];return this.rootTuple=t,this.rows=[],this.map={},this._indexes=[],t?(this._buildRows(t,0),this._normalize()):this.rows.push(it("tr",{className:$},[it("td",{className:J},[ot("&nbsp;")])])),it("tbody",{className:Q},this.rows)},_normalize:function(){var e=this.rows;var t=e.length;var r=0;var a=this.rootTuple.members;var n=a[0].name;var s=a.length;var i=0;var o;var l;var c;var u=this.map;var h;for(;r<t;r++)for(o=e[r],i=0;i<s;i++)c=this[a[i].name],(l=o.colSpan["dim"+i])&&l.colSpan<c&&(l.attr.colSpan=c-l.colSpan+1);o=u[n],h=u[n+"all"],o&&(o.children[0].attr.className=J+" k-first"),h&&(h.children[0].attr.className+=" k-first "+J)},_row:function(e){var t=it("tr",{className:$},e);return t.rowSpan=1,t.colSpan={},this.rows.push(t),t},_content:function(e,t){return ot(this.template({member:e,tuple:t}),!0)},_cell:function(e,t,r){var a=it("td",{className:J+" "+e},t);return a.value=r.caption||r.name,a},_buildRows:function(t,a){var n=this.map;var s;var i=t.members;var o=i[a];var l=i[a+1];var c=o.children;var u=c.length;var h=Number(o.levelNum);var d=this.rootTuple.members[a].name;var m=ct(t,a-1).join("");var p=Number(this.rootTuple.members[a].levelNum);var v=m+(p===h?"":o.parentName||"");var f=n[v+"all"]||n[v];var g=h+1;var _,b;var x,w;var S;var k;var N=[];var y;if(!f||f.hasChild?f=this._row():f.hasChild=!0,o.measure){for(k=f.allCell?"k-grid-footer":"",f.children.push(this._cell(k,[this._content(c[0],t)],c[0])),f.rowSpan=u,y=1;y<u;y++)this._row([this._cell(k,[this._content(c[y],t)],c[y])]);return f}if(n[m+o.name]=f,s=r.stringify(ct(t,a)),(S=this.metadata[s])||(this.metadata[s]=S=lt(h,a),S.rootLevelNum=p),this._indexes.push({path:s,tuple:t}),o.hasChildren){!1===S.expanded&&(u=0,S.children=0);let t=e("<span></span>");t.attr(r.attr("path"),s),N.push(r.dom.html(r.ui.icon(t,{icon:u?O:F}),!0))}if(N.push(this._content(o,t)),k=f.allCell&&!u?"k-grid-footer":"",(_=this._cell(k,N,o)).colSpan=g,f.children.push(_),f.colSpan["dim"+a]=_,(!this[d]||this[d]<g)&&(this[d]=g),u){for(f.allCell=!1,f.hasChild=!1,y=0;y<u;y++)f!==(x=this._buildRows(c[y],a))&&(f.rowSpan+=x.rowSpan);f.rowSpan>1&&(_.attr.rowSpan=f.rowSpan),S.children=f.rowSpan,(b=this._cell("k-grid-footer",[this._content(o,t)],o)).colSpan=g,(w=this._row([b])).colSpan["dim"+a]=b,w.allCell=!0,n[m+o.name+"all"]=w,l&&(x=this._buildRows(t,a+1),b.attr.rowSpan=x.rowSpan),f.rowSpan+=w.rowSpan,S.members=w.rowSpan}else l&&(f.hasChild=!1,this._buildRows(t,a+1),(b||_).attr.rowSpan=f.rowSpan,S.members=f.rowSpan);return S.maxChildren<S.children&&(S.maxChildren=S.children),S.maxMembers<S.members&&(S.maxMembers=S.members),f}});var vt=s.extend({init:function(){this.columnAxis={},this.rowAxis={}},build:function(e,r,a){var n=r.indexes[0];var s=r.metadata[n?n.path:t];this.columnAxis=r,this.rowAxis=a,this.data=e,this.rowLength=s?s.maxChildren+s.maxMembers:r.measures.length||1,this.rowLength||(this.rowLength=1);var i=this._tbody();var o=this._colGroup();return[it("table",{className:Y},[o,i])]},_colGroup:function(){var e=this.columnAxis.measures.length||1;var t=[];var r=0;for(this.rows[0]&&(e=this.rows[0].children.length);r<e;r++)t.push(it("col",null));return it("colgroup",null,t)},_tbody:function(){return this.rows=[],this.data[0]?(this.columnIndexes=this._indexes(this.columnAxis,this.rowLength),this.rowIndexes=this._indexes(this.rowAxis,Math.ceil(this.data.length/this.rowLength)),this._buildRows()):this.rows.push(it("tr",{className:$},[it("td",{className:J},[ot("&nbsp;")])])),it("tbody",{className:Q},this.rows)},_indexes:function(e,r){var a=[];var n;var s=e.indexes;var i=e.metadata;var o=e.measures;var l=o.length||1;var c;var u=0;var h=0;var d=0;var m=s.length;var p;var v;var f;if(!m){for(p=0;p<l;p++)a[p]={index:p,measure:o[p],tuple:null};return a}for(;d<m;d++){if(f=0,(v=(c=i[(n=s[d]).path]).children+c.members)&&(v-=l),!1===c.expanded&&c.children!==c.maxChildren&&(f=c.maxChildren),c.parentMember&&c.levelNum===c.rootLevelNum&&(v=-1),v>-1){for(p=0;p<l;p++)c.children||h,a[v+h+p]={children:v,index:u,measure:o[p],tuple:n.tuple},u+=1;for(;a[h]!==t;)h+=1}if(h===r)break;u+=f}return a},_buildRows:function(){var e=this.rowIndexes;var t=e.length;var r=0;for(;r<t;r++){var a=e[r];a&&this.rows.push(this._buildRow(a))}},_buildRow:function(e){var r=e.index*this.rowLength;var a=this.columnIndexes;var n=a.length;var s;var i=[];var o=0;var l;var c,u;var h,d,m;for(;o<n;o++)(s=a[o])!==t&&(h={className:J},s.children&&(h.className+=" k-alt"),u="",d=this.data[r+s.index],m=s.measure||e.measure,l={columnTuple:s.tuple,rowTuple:e.tuple,measure:m,dataItem:d},""!==d.value&&m&&m.type&&("status"===m.type?u=this.kpiStatusTemplate(l):"trend"===m.type&&(u=this.kpiTrendTemplate(l))),u||(u=this.dataTemplate(l)),(c=it("td",h,[ot(u)])).value=d.value,i.push(c));return h={className:$},e.children&&(h.className+=" k-grid-footer"),it("tr",h,i)}});a.plugin(st),r.PivotExcelExporter=r.Class.extend({init:function(e){this.options=e,this.widget=e.widget,this.dataSource=this.widget.dataSource},_columns:function(){var e=this.widget.columnsHeaderTree.children[0];var t=this.widget.rowsHeaderTree.children[0];var r=e.children[0].children.length;var a=t.children[0].children.length;var n=this.widget.options.columnWidth;var s=[];var i;if(a&&this.dataSource.data()[0])for(i=0;i<a;i++)s.push({autoWidth:!0});for(i=0;i<r;i++)s.push({autoWidth:!1,width:n});return s},_cells:function(e,t,r){var a=[];var n=0;var s=e.length;var i;var o,l;var c,u;for(;n<s;n++){for(o=[],i=(l=e[n].children).length,c=0;c<i;c++)u=l[c],o.push({background:"#7a7a7a",color:"#fff",value:u.value,colSpan:u.attr.colSpan||1,rowSpan:u.attr.rowSpan||1});r&&r(o,n),a.push({cells:o,type:t})}return a},_rows:function(){var e=this.widget.columnsHeaderTree.children[0];var t=this.widget.rowsHeaderTree.children[0];var r=e.children[0].children.length;var a=t.children[0].children.length;var n=e.children[1].children;var s=t.children[1].children;var i=this.widget.contentTree.children[0].children[1].children;var o=this._cells(n,"header");a&&o[0].cells.splice(0,0,{background:"#7a7a7a",color:"#fff",value:"",colSpan:a,rowSpan:n.length});var l=this._cells(s,"data",(function(e,t){var a=0;var n,s;var o=i[t].children;for(;a<r;a++)n=o[a],s=Number(n.value),isNaN(s)&&(s=n.value),e.push({background:"#dfdfdf",color:"#333",value:s,colSpan:1,rowSpan:1})}));return o.concat(l)},_freezePane:function(){var e=this.widget.columnsHeaderTree.children[0];return{colSplit:this.widget.rowsHeaderTree.children[0].children[0].children.length,rowSplit:e.children[1].children.length}},_columnsV2:function(){const e=this.widget._columnBuilder.table[0];const t=this.widget._rowBuilder.table[0];const r=e.children[0].children.length;const a=t.children[0].children.length;const n=this.widget.options.columnWidth;const s=[];if(a&&this.dataSource.data()[0])for(let e=0;e<a;e++)s.push({autoWidth:!0});for(let e=0;e<r;e++)s.push({autoWidth:!1,width:n});return s},_cellsV2:function(e,t,r){const a=[];const n=Object.keys(e).length;for(let s=0;s<n;s++){const n=[];const i=e[s].children;const o=i.length;for(let e=0;e<o;e++){const t=i[e];n.push({background:"#7a7a7a",color:"#fff",value:t.caption,colSpan:t.colSpan||1,rowSpan:t.rowSpan||1})}r&&r(n,s),a.push({cells:n,type:t})}return a},_rowsV2:function(){const e=this.widget._columnBuilder.table[0];const t=this.widget._rowBuilder.table[0];const r=e.children[0].children.length;const a=t.children[0].children.length;const n=this.widget._columnBuilder._exportData;const s=this.widget._rowBuilder._exportData;const i=this.widget._contentBuilder.hash;const o=this._cellsV2(n,"header");a&&o[0].cells.splice(0,0,{background:"#7a7a7a",color:"#fff",value:"",colSpan:a,rowSpan:Object.keys(n).length});const l=this._cellsV2(s,"data",(function(e,t){const a=(t+1)*r;for(let n=t*r;n<a;n++){const t=i[n];const r=null!==t.data?t.data.value:t.data;let a=Number(r);isNaN(a)&&(a=r),e.push({background:"#dfdfdf",color:"#333",value:a,colSpan:1,rowSpan:1})}}));return o.concat(l)},_freezePaneV2:function(){const e=this.widget._columnBuilder.table[0];return{colSplit:this.widget._rowBuilder.table[0].children[0].children.length,rowSplit:e.children[1].children.length}},_filterV2:function(){if(!this.options.excel.filterable)return null;const e=this.widget._columnBuilder.table[0];const t=this.widget._rowBuilder.table[0].children[0].children.length;return{from:t,to:e.children[0].children.length+(t-1)}},workbook:function(){var t;return this.dataSource.view()[0]?(t=e.Deferred()).resolve():t=this.dataSource.fetch(),t.then(function(){return"PivotGridV2"===this.widget.options.name?{sheets:[{columns:this._columnsV2(),rows:this._rowsV2(),freezePane:this._freezePaneV2(),filter:this._filterV2()}]}:{sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:null}]}}.bind(this))}});var ft={extend:function(t){t.events.push("excelExport"),t.options.excel=e.extend(t.options.excel,this.options),t.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",filterable:!1,fileName:"Export.xlsx"},saveAsExcel:function(){var e=this.options.excel||{};var t=new r.PivotExcelExporter({widget:this,excel:e});this._progress&&(this._isExport=!0,this._progress(!0));t.workbook().then(function(t){this.trigger("excelExport",{workbook:t})||new r.ooxml.Workbook(t).toDataURLAsync().then((function(a){r.saveAs({dataURI:a,fileName:t.fileName||e.fileName,proxyURL:e.proxyURL,forceProxy:e.forceProxy})})).always((()=>{this._progress&&(this._progress(!1),this._isExport=!1)}))}.bind(this))}};r.PivotExcelMixin=ft,r.ooxml&&r.ooxml.Workbook&&ft.extend(st.prototype),r.ooxml&&r.ooxml.Workbook&&ft.extend(nt.prototype),r.PDFMixin&&(r.PDFMixin.extend(st.prototype),st.fn._drawPDF=function(){return this._drawPDFShadow({width:this.wrapper.width()},{avoidLinks:this.options.pdf.avoidLinks})}),r.PDFMixin&&(r.PDFMixin.extend(nt.prototype),nt.prototype._saveAsPDF=r.PDFMixin.saveAsPDF,nt.fn.saveAsPDF=function(){this._progress&&(this._isExport=!0,this._progress(!0)),this._saveAsPDF().always((()=>{this._progress&&(this._progress(!1),this._isExport=!1)}))},nt.fn._drawPDF=function(){return this._drawPDFShadow({width:this.wrapper.width()},{avoidLinks:this.options.pdf.avoidLinks})}),window.kendo.pivotgrid=window.kendo.pivotgrid||{},window.kendo.pivotgrid.common={addKPI:o.G,addMultipleMeasures:o.F,averageAggregate:o.e,buildKPIMeasures:o.E,cloneDataTree:o.D,compareAxes:o.C,configuratorReducer:o.B,createAxisDescriptors:o.A,createDataState:o.h,createDataTree:o.c,createDiscoverBody:o.z,createFlatSchemaDimensions:o.y,createLocalDataState:o.a,createRequestBody:o.x,createTuples:o.w,discoverCommands:o.v,fetchData:o.g,fetchDiscover:o.f,headersReducer:o.i,maxAggregate:o.m,mergeTrees:o.u,minAggregate:o.d,parseResponse:o.q,readData:o.p,rootFields:o.r,setFilter:o.o,setSort:o.n,sumAggregate:o.s,toColumns:o.k,toData:o.t,toRows:o.l,toTree:o.j}}(window.kendo.jQuery);var c=kendo;e.__meta__={id:"pivotgrid",name:"PivotGrid",category:"web",description:"The PivotGrid widget is a data summarization tool.",depends:["dom","data","data.xml","sortable","icons","loader","html.loadercontainer","pivotgrid-common.cmn.chunk","loaderContainer.chunk"],features:[{id:"pivotgrid-configurator",name:"Configurator",description:"The PivotConfigurator widget allows the user to select data slices displayed in PivotGrid",depends:["pivot.configurator"]},{id:"pivotgrid-filtering",name:"Filtering",description:"Support for filtering",depends:["pivot.fieldmenu"]},{id:"pivotgrid-excel-export",name:"Excel export",description:"Export pivot grid data as Excel spreadsheet",depends:["ooxml"]},{id:"pivotgrid-pdf-export",name:"PDF export",description:"Export pivot grid data as PDF",depends:["pdf","drawing"]},{id:"mobile-scroller",name:"Mobile scroller",description:"Support for kinetic scrolling in mobile device",depends:["mobile.scroller"]}]},e.default=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=kendo.pivotgrid.min.js.map
