/**
 * Kendo UI v2025.3.1002 (http://www.telerik.com/kendo-ui)
 * Copyright 2025 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("kendo.data.js"),require("kendo.columnsorter.js"),require("kendo.editable.js"),require("kendo.window.js"),require("kendo.aiprompt.js"),require("kendo.badge.js"),require("kendo.filtermenu.js"),require("kendo.filtercell.js"),require("kendo.columnmenu.js"),require("kendo.groupable.js"),require("kendo.pager.js"),require("kendo.selectable.js"),require("kendo.sortable.js"),require("kendo.reorderable.js"),require("kendo.resizable.js"),require("kendo.ooxml.js"),require("kendo.excel.js"),require("kendo.pane.js"),require("kendo.pdf.js"),require("kendo.dialog.js"),require("kendo.switch.js"),require("kendo.html.button.js"),require("kendo.textbox.js"),require("kendo.form.js"),require("kendo.toolbar.js"),require("kendo.icons.js"),require("kendo.menu.js"),require("kendo.loader.js"),require("kendo.html.loadercontainer.js"),require("kendo.loaderContainer.chunk.js")):"function"==typeof define&&define.amd?define(["exports","kendo.data.min","kendo.columnsorter.min","kendo.editable.min","kendo.window.min","kendo.aiprompt.min","kendo.badge.min","kendo.filtermenu.min","kendo.filtercell.min","kendo.columnmenu.min","kendo.groupable.min","kendo.pager.min","kendo.selectable.min","kendo.sortable.min","kendo.reorderable.min","kendo.resizable.min","kendo.ooxml.min","kendo.excel.min","kendo.pane.min","kendo.pdf.min","kendo.dialog.min","kendo.switch.min","kendo.html.button.min","kendo.textbox.min","kendo.form.min","kendo.toolbar.min","kendo.icons.min","kendo.menu.min","kendo.loader.min","kendo.html.loadercontainer.min","kendo.loaderContainer.chunk.min"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).kendo=e.kendo||{},e.kendo._globals=e.kendo._globals||{},e.kendo._globals.Grid={}),e.kendo._globals.Data,e.kendo._globals.Columnsorter,e.kendo._globals.Editable,e.kendo._globals.Window,e.kendo._globals.Aiprompt,e.kendo._globals.Badge,e.kendo._globals.Filtermenu,e.kendo._globals.Filtercell,e.kendo._globals.Columnmenu,e.kendo._globals.Groupable,e.kendo._globals.Pager,e.kendo._globals.Selectable,e.kendo._globals.Sortable,e.kendo._globals.Reorderable,e.kendo._globals.Resizable,e.kendo._globals.Ooxml,e.kendo._globals.Excel,e.kendo._globals.Pane,e.kendo._globals.Pdf,e.kendo._globals.Dialog,e.kendo._globals.Switch,e.kendo._globals.HtmlButton,e.kendo._globals.Textbox,e.kendo._globals.Form,e.kendo._globals.Toolbar,e.kendo._globals.Icons,e.kendo._globals.Menu,e.kendo._globals.Loader,e.kendo._globals.HtmlLoadercontainer,e.kendo._globals.LoaderContainerChunk)}(this,(function(e,t,o,r,a,l,n,i,s,d,c,u,p,h,g,f,m,b,k,_,v,C,w,y,S,x,T,H,R,I,A){!function(e){var t=window.kendo,o=t.ui.ContextMenu,r=e.extend,a=t.htmlEncode;var l="action";var n=o.extend({init:function(e,t){var r=this;o.fn.init.call(r,e,t),r._overrideTemplates(),r._extendItems(),r.bind("select",r._onSelect.bind(r)),r.bind("open",r._onOpen.bind(r))},_overrideTemplates:function(){this.templates.sprite=({icon:e,spriteCssClass:o})=>`${e||o?t.ui.icon({icon:a(e||""),iconClass:a(o||"")}):""}`},defaultItems:{separator:{name:"separator",separator:!0},create:{name:"create",text:"Add",icon:"plus",command:"AddCommand",rules:"isEditable"},edit:{name:"edit",text:"Edit",icon:"pencil",command:"EditCommand",rules:"isEditable"},destroy:{name:"destroy",text:"Delete",icon:"trash",command:"DeleteCommand",rules:"isEditable"},select:{name:"select",text:"Select",icon:"table-body",rules:"isSelectable",items:[{name:"selectRow",text:"Row",icon:"table-row-groups",command:"SelectRowCommand"},{name:"selectAllRows",text:"All rows",icon:"grid",command:"SelectAllRowsCommand"},{name:"clearSelection",text:"Clear selection",icon:"table-unmerge",softRules:"hasSelection",command:"ClearSelectionCommand"}]},copySelection:{name:"copySelection",text:"Copy selection",icon:"page-header-section",rules:"isSelectable",softRules:"hasSelection",command:"CopySelectionCommand",options:"withHeaders"},copySelectionNoHeaders:{name:"copySelectionNoHeaders",text:"Copy selection (No Headers)",icon:"file-txt",rules:"isSelectable",softRules:"hasSelection",command:"CopySelectionCommand"},paste:{name:"paste",text:"Paste (use CTRL/⌘ + V)",rules:"allowPaste",softRules:"alwaysDisabled",icon:"clipboard"},reorderRow:{name:"reorderRow",text:"Reorder row",icon:"caret-alt-expand",rules:"isRowReorderable",softRules:"isSorted",items:[{name:"reorderRowUp",text:"Up",icon:"caret-alt-up",command:"ReorderRowCommand",options:"dir:up"},{name:"reorderRowDown",text:"Down",icon:"caret-alt-down",command:"ReorderRowCommand",options:"dir:down"},{name:"reorderRowTop",text:"Top",icon:"caret-alt-to-top",command:"ReorderRowCommand",options:"dir:top"},{name:"reorderRowBottom",text:"Bottom",icon:"caret-alt-to-bottom",command:"ReorderRowCommand",options:"dir:bottom"}]},exportPDF:{name:"exportPDF",text:"Export to PDF",icon:"file-pdf",command:"ExportPDFCommand"},exportExcel:{name:"exportExcel",text:"Export to Excel",icon:"file-excel",items:[{name:"exportToExcelAll",text:"All",command:"ExportExcelCommand"},{name:"exportToExcelSelection",text:"Selection",command:"ExportExcelCommand",softRules:"hasSelection",options:"selection,withHeaders"},{name:"exportToExcelSelectionNoHeaders",text:"Selection (No Headers)",softRules:"hasSelection",command:"ExportExcelCommand",options:"selection"}]},sortAsc:{name:"sortAsc",text:"Sort Ascending",icon:"sort-asc-small",rules:"isSortable",command:"SortCommand",options:"dir:asc"},sortDesc:{name:"sortDesc",text:"Sort Descending",icon:"sort-desc-small",rules:"isSortable",command:"SortCommand",options:"dir:desc"},moveGroupPrevious:{name:"moveGroupPrevious",text:"Move previous",icon:"arrow-left",rules:"isGroupable",softRules:"canMoveGroupPrev",command:"MoveGroupCommand",options:"dir:prev"},moveGroupNext:{name:"moveGroupNext",text:"Move next",icon:"arrow-right",rules:"isGroupable",softRules:"canMoveGroupNext",command:"MoveGroupCommand",options:"dir:next"}},events:o.fn.events.concat([l]),_onSelect:function(t){var o=e(t.item).data("command");var r=e(t.item).data("options");r=r?r.split(",").map((e=>{if(e.indexOf(":")>-1){var[t,e]=e.split(":");return{[t||"_"]:e}}return{[e]:!0}})).reduce(((e,t)=>Object.assign(e,t)),{}):{};var a=e(t.target);o&&this.action({command:o,options:Object.assign(r,{target:a})})},_onOpen:function(o){var r=o.sender,a=r.options.items,l=e(o.event?o.event.target:null);!a&&e.isEmptyObject(this.defaultItems)||l.closest(".k-grid-column-menu").length?o.preventDefault():(this._toggleSeparatorVisibility(),r.element.find(`[${t.attr("soft-rules")}]`).each(((o,a)=>{var n=e(a).attr(t.attr("soft-rules")).split(";");r.enable(a,this._validateSoftRules(n,l))})))},_toggleSeparatorVisibility:function(){this.element.find(".k-item.k-separator").filter(((t,o)=>{var r=e(o).prev(".k-item:not(.k-separator)");var a=e(o).next(".k-item:not(.k-separator)");return!(r.length&&a.length)})).hide()},_extendItems:function(){var t,o=this,r=o.options.items;if(r&&r.length)for(var a=0;a<r.length;a++)t=r[a],e.isPlainObject(t)&&1===Object.keys(t).length&&t.name&&(t=t.name),e.isPlainObject(t)?o._append(t):o.defaultItems[t]?(t=o.defaultItems[t],o._append(t)):"string"==typeof t&&(t={name:t,text:t,spriteCssClass:t,command:t+"Command"},o._append(t));else for(var l in o.defaultItems)t=o.defaultItems[l],o._append(t)},_extendItem:function(e){var o=this,a=o.options.messages,l=e.attr||{};if(e.command&&(l[t.attr("command")]=e.command),e.options&&(l[t.attr("options")]=e.options),e.softRules&&(l[t.attr("soft-rules")]=e.softRules),e.items)for(var n=0;n<e.items.length;n++)e.items.forEach((e=>{o._extendItem(e)}));r(e,{text:a.commands[e.name],icon:e.icon||"",spriteCssClass:e.spriteCssClass||"",attr:l,uid:t.guid()})},_validateSoftRules:function(e,t){if(!e||!e||!e.length)return!0;for(var o=0;o<e.length;o++)if(!this._readState(e[o],t))return!1;return!0},_validateRules:function(e){var t=e.rules?e.rules.split(";"):[];if(!t.length)return!0;for(var o=0;o<t.length;o++)if(!this._readState(t[o]))return!1;return!0},_readState:function(e,o){var r=this.options.states;return t.isFunction(r[e])?r[e](o):r[e]},_append:function(e){var t=this;t._extendItem(e),t._validateRules(e)&&t.append(e)},action:function(e){this.trigger(l,e)}});t.ui.grid=t.ui.grid||{},r(t.ui.grid,{ContextMenu:n})}(window.kendo.jQuery),function(e){var t=window.kendo,o=e.extend;var r=t.Class.extend({init:function(e){this.options=e,this.grid=e.grid}});var a=r.extend({exec:function(){var e=this.grid.groupable,t=this.options,o=t.target.closest(".k-chip"),r="next"===t.dir?"after":"before";("next"===t.dir?o.next():o.prev())[r](o),e._change()}});var l=r.extend({exec:function(){var e,t,o=this.grid,r=o.dataSource,a=r.sort()||[],l=this.options,n=l.dir,i=o._getCellField(l.target),s=o.options.sortable.mode&&"multiple"===o.options.sortable.mode,d=o.options.compare;if(s){for(t=0,e=a.length;t<e;t++)if(a[t].field===i){a.splice(t,1);break}a.push({field:i,dir:n,compare:d})}else a=[{field:i,dir:n,compare:d}];r.sort(a)}});var n=r.extend({exec:function(){this.grid.addRow()}});var i=r.extend({exec:function(){var e=this,t=e.grid,o="incell"===t._editMode(),r=o?e.options.target:e.options.target.closest("tr");o?t.editCell(r):t.editRow(r)}});var s=r.extend({exec:function(){var e=this.grid,t=this.options.target.closest("tr");e.removeRow(t)}});var d=r.extend({exec:function(){var e=this.grid,t=this.options.withHeaders;e.copySelectionToClipboard(t)}});var c=r.extend({exec:function(){var e=this.grid,o=t.ui.Selectable.parseOptions(e.options.selectable),r=this.options.target.closest("tr");e.select(o.cell?r.find("td"):r)}});var u=r.extend({exec:function(){var e=this.grid,o=t.ui.Selectable.parseOptions(e.options.selectable),r=e.items();e.select(o.cell?r.find("td"):r)}});var p=r.extend({exec:function(){this.grid.clearSelection()}});var h=r.extend({exec:function(){var e,t=this,o=t.grid,r=t.options.dir,a=t.options.target.closest("tr"),l=a.index();switch(r){case"up":e=l-1;break;case"down":e=l+2;break;case"top":e=0;break;case"bottom":e=o.items().length}o.reorderRowTo(a,e)}});var g=r.extend({exec:function(){this.grid.saveAsPDF()}});var f=r.extend({exec:function(){var e=this,t=e.options.selection,o=e.options.withHeaders,r=e.grid;t?r.exportSelectedToExcel(o):r.saveAsExcel()}});t.ui.grid=t.ui.grid||{},o(t.ui.grid,{GridCommand:r,commands:{SortCommand:l,AddCommand:n,EditCommand:i,DeleteCommand:s,CopySelectionCommand:d,SelectRowCommand:c,SelectAllRowsCommand:u,ClearSelectionCommand:p,ReorderRowCommand:h,ExportPDFCommand:g,ExportExcelCommand:f,MoveGroupCommand:a}})}(window.kendo.jQuery);!function(e,t){let o=window.kendo,r=o.ui,a=o.data.DataSource,l=o.data.ObservableObject,n=o.support.tbodyInnerHtml,i=o._activeElement,s=r.Widget,d=o._outerWidth,c=o._outerHeight,u=o.keys,p=o.type,h=e.isPlainObject,g=e.extend,f=e.map,m=e.grep,b=Array.isArray,k=e.inArray,_=Array.prototype.push,v=o.isFunction,C=o.htmlEncode,w=e.isEmptyObject,y=e.contains,S=Math,x=".",T="progress",H="error",R=":not(.k-group-cell):not(["+o.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible",I=":not(["+o.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left)))",E="tr:not(.k-footer-template):visible",M=":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible",z="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",D="col:not(.k-group-col, .k-hierarchy-col)",F="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",L="a[class*='-i-caret-alt-down']",P="a[class*='-i-caret-alt-right']",B=P,O="k-grid-stack",q=".kendoGrid",V="edit",G="beforeEdit",W="save",$="remove",j="detailInit",N="filterMenuInit",U="columnMenuInit",K="filterMenuOpen",Q="columnMenuOpen",Y="cellClose",J="changing",X="change",Z="columnHide",ee="columnShow",te="saveChanges",oe="dataBound",re="detailExpand",ae="detailCollapse",le="itemchange",ne="page",ie="paging",se="paste",de="scroll",ce="sync",ue="loadStart",pe="loadEnd",he="requestEnd",ge="k-focus",fe="k-highlighted",me="k-hover",be="k-active",ke=":kendoFocusable",_e=".k-command-cell,.k-select-checkbox,.k-grid-stack-cell[tabindex]",ve="k-selected",Ce="k-checkbox",we="input[data-role='checkbox'].k-select-checkbox."+Ce,ye="k-grid-norecords",Se="k-link",xe="k-icon",Te="k-svg-icon",He="k-sort-order",Re="k-sorted",Ie="k-header",Ae="k-grid-column-menu",Ee="k-grid-filter-menu",Me="k-grid-content-sticky",ze="k-grid-header-sticky",De="k-grid-footer-sticky",Fe="k-grid-no-left-border",Le="k-grid-column-template",Pe="k-grouping-row",Be="resize",Oe="rowResize",qe="columnResize",Ve="columnReorder",Ge="columnLock",We="columnUnlock",$e="columnStick",je="columnUnstick",Ne="rowReorder",Ue="navigate",Ke="click",Qe="mousedown",Ye="mouseup",Je="mouseenter",Xe="mouseleave",Ze="mousemove",et="dblclick",tt="height",ot="width",rt="auto",at="tabIndex",lt="function",nt="string",it="bottom",st="container-for",dt="field",ct="input",ut="incell",pt="inline",ht="overflow",gt="sort",ft="group-sort",mt="Collapse",bt="Expand",kt="id",_t="px",vt="tr",Ct="div",wt="aria-label",yt="aria-owns",St="aria-rowcount",xt="aria-colcount",Tt="aria-colindex",Ht="aria-rowindex",Rt="aria-expanded",It="aria-checked",At="aria-activedescendant",Et="role",Mt="none",zt="row",Dt="rowgroup",Ft="columnheader",Lt="gridcell",Pt=/(\}|\#)/gi,Bt="[\\x20\\t\\r\\n\\f]",Ot=(new RegExp("(\\s*left\\s*:\\s*\\d*px;?)*","ig"),new RegExp("(\\s*right\\s*:\\s*\\d*px;?)*","ig"),new RegExp("(^|"+Bt+")(k-group-cell|k-hierarchy-cell)("+Bt+"|$)")),qt=new RegExp("(^|"+Bt+")(k-filter-row)("+Bt+"|$)"),Vt=({className:e,attr:t,text:r})=>`<button type="button" class="${e}" ${t}>${o.htmlEncode(r)}</button>`,Gt=(e,t,o)=>`<span class="k-checkbox-wrap"><input tabindex="-1" class="k-select-checkbox ${Ce} ${e} k-rounded-md" data-role="checkbox" aria-label="${t}" aria-checked="false" type="checkbox"></span>${o?`<label class="k-checkbox-label">${o}</label>`:""}`,Wt=({size:e})=>Gt(e,"Select row"),$t=({size:e,label:t})=>Gt(e,"Select all rows",t),jt=()=>o.ui.icon("reorder"),Nt=({text:e})=>`<span class="k-cell-inner"><span class="k-link"><span class="k-column-title">${e}</span></span></span>`,Ut=!1,Kt=o.support.browser;var Qt=Kt.msie&&11===Kt.version;var Yt=/Mac OS/.test(navigator.userAgent);var Jt="k-content",Xt="k-scroll-container",Zt="k-cell-inner";var eo;var to=["copySelection","copySelectionNoHeaders","paste","separator","create","edit","destroy","select","separator","reorderRow","exportPDF","exportExcel","separator"];var oo=["sortAsc","sortDesc","separator"];var ro=["moveGroupPrevious","moveGroupNext","separator"];const ao=[".k-grid-edit-command",".k-grid-remove-command",".k-grid-save-changes",".k-grid-cancel-changes",".k-grid-cancel-command",".k-grid-save-command"].join(", ");const lo=function(e){return{sort:[{command:"clear-sort",text:e.clearButtons?e.clearButtons.clearSorting:"Clear Sorting",size:"large",fillMode:"solid",themeColor:"base",icon:"x"},{command:"done",text:e.applyButtons?e.applyButtons.applySorting:"Done",size:"large",themeColor:"primary",icon:"check"}],group:[{command:"clear-group",text:e.clearButtons?e.clearButtons.clearGrouping:"Clear Grouping",size:"large",fillMode:"solid",themeColor:"base",icon:"x"},{command:"done",text:e.applyButtons?e.applyButtons.applyGrouping:"Done",size:"large",themeColor:"primary",icon:"check"}],filter:[{command:"clear-filter",text:e.clearButtons?e.clearButtons.clearFiltering:"Clear All Filters",size:"large",fillMode:"solid",themeColor:"base",icon:"filter-clear"}],"column-chooser":[{text:e.clearButtons?e.clearButtons.columnChooserReset:"Reset",icon:"arrow-rotate-ccw"},{text:e.applyButtons?e.applyButtons.columnChooserApply:"Apply",themeColor:"primary",icon:"check"}]}};r.Pager&&(eo=r.Pager.extend({init:function(e,t){r.Pager.fn.init.call(this,e,g(!0,{},t)),this.dataSource.options.useRanges=!0,this.dataSource._omitPrefetch=!0},options:{name:"GroupsPager"},totalPages:function(){return Math.ceil((this._collapsedTotal()||0)/(this.pageSize()||1))},_collapsedTotal:function(){var e=this.dataSource;return e&&e.groupsTotal(!0)||0}}));var no=s.extend({init:function(e,t){var o=this;s.fn.init.call(o,e,t),o._refreshHandler=o.refresh.bind(o),o.setDataSource(t.dataSource),o.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(X,t._refreshHandler),t.dataSource=e,t.dataSource.bind(X,t._refreshHandler),t.dataSource.options.useRanges=!0,t.dataSource.options.virtual=!0},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0,maxScrollHeight:25e4},events:[ie,ne,de,ue,pe],destroy:function(){var e=this;s.fn.destroy.call(e),e.dataSource.unbind(X,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(q),clearTimeout(e._timeout),e._scrollingTimeout&&clearTimeout(e._scrollingTimeout),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,r=this,a=o.support.scrollbar()+1,l=r.element;l.css({width:rt,overflow:"hidden"}).css(Ut?"padding-left":"padding-right",a),r.content=l.children().first(),t=r.wrapper=r.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().on("DOMMouseScroll"+q+" mousewheel"+q,r._wheelScroll.bind(r)),r._wrapper(),(o.support.kineticScrollNeeded||o.support.touch)&&(r.wrapper.css("touch-action",Mt),r.drag=new o.UserEvents(r.wrapper,{global:!0,allowSelection:!0,start:function(e){e.sender.capture()},move:function(e){r.verticalScrollbar.scrollTop(r.verticalScrollbar.scrollTop()-e.y.delta),o.scrollLeft(t,o.scrollLeft(t)-e.x.delta),e.preventDefault()}})),r.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" tabindex="-1"/>').css({width:a}).appendTo(l).on("scroll"+q,r._scroll.bind(r))},_wrapper:function(){Qt&&(this.wrapper.css({"overflow-y":de}),this.element.css(Ut?"padding-left":"padding-right",0))},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.verticalScrollbar,r=t.scrollTop(),a=o.wheelDeltaY(e);!a||a>0&&0===r||a<0&&r+t[0].clientHeight==t[0].scrollHeight||(e.preventDefault(),this.verticalScrollbar.scrollTop(r+-a))}},_scroll:function(e){var t=this,o=!t.options.prefetch,r=e.currentTarget.scrollTop,a=t.dataSource,l=t.itemHeight,n=a.skip()||0,i=t._rangeStart||n,s=t.element.innerHeight(),d=!!(t._scrollbarTop&&t._scrollbarTop>r),c=S.max(S.floor(r/l),0),u=d?S.ceil(s/l):S.floor(s/l),p=S.max(c+u,0);t._preventScroll?t._preventScroll=!1:(t._prevScrollTop=t._scrollTop,t._scrollTop=r-i*l,t._scrollbarTop=r,t._scrolling=o,t._fetch(c,p,d)||(t.wrapper[0].scrollTop=t._scrollTop),t.trigger(de),o&&(t._scrollingTimeout&&clearTimeout(t._scrollingTimeout),t._scrollingTimeout=setTimeout((function(){t._scrolling=!1,t._page(t._rangeStart,t.dataSource.take())}),100)))},scrollToTop:function(){this._scrollTo(0)},scrollToBottom:function(){var e=this.verticalScrollbar;this._scrollTo(e[0].scrollHeight-e.height())},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0)},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight)},_scrollWrapperOnColumnResize:function(){var e=this;var t=this.wrapper;var r=t.scrollTop();t[0].scrollWidth>t[0].clientWidth?(!e._wrapperScrolled&&r||e._isScrolledToBottom())&&(t.scrollTop(r+o.support.scrollbar()),e._scrollTop=t.scrollTop(),e._wrapperScrolled=!0):e._wrapperScrolled&&(e._isWrapperScrolledToBottom()||(t.scrollTop(r-o.support.scrollbar()),e._scrollTop=t.scrollTop()),e._wrapperScrolled=!1)},_scrollTo:function(e,t){var o=this;var r=o.verticalScrollbar;r.scrollTop()!==e&&(o._preventScroll=!0),o.wrapper.scrollTop(e),o._scrollTop=o.wrapper.scrollTop(),r.scrollTop(t??e),o._scrollbarTop=r.scrollTop()},_isScrolledToTop:function(){return 0===this.verticalScrollbar.scrollTop()},_isScrolledToBottom:function(){var e=this.verticalScrollbar;var t=e.scrollTop();return t>0&&t>=parseInt(e[0].scrollHeight-e.height(),10)},_isWrapperScrolledToBottom:function(){var e=this.wrapper;return e.scrollTop()>=parseInt(e[0].scrollHeight-e.height(),10)},itemIndex:function(e){return(this._rangeStart||this.dataSource.skip()||0)+e},position:function(e){var t=this._rangeStart||this.dataSource.skip()||0;var o=this.dataSource.pageSize();var r;return(r=e>t?e-t:t-e-1)>o?o:r},scrollIntoView:function(e){var t=this.wrapper[0];var o=t.clientHeight;var r=this._isScrolledToBottom()?t.scrollTop:this._scrollTop||t.scrollTop;var a=e[0].offsetTop;var l=e[0].offsetHeight;r>a?this.verticalScrollbar[0].scrollTop-=o/2:a+l>=r+o&&(this.verticalScrollbar[0].scrollTop+=o/2)},_fetch:function(t,o,r){var a=this,l=a.dataSource,n=a.itemHeight,i=l.take(),s=a._rangeStart||l.skip()||0,d=S.floor(t/i)*i,c=!1;var u=a.verticalScrollbar;var p=Kt.webkit?1:0;var h=l._isGroupPaged()?l.groupsTotal(!0):l.total();return t<s?(c=!0,a._alwaysScrollTop?(s=S.min(t,h-i),a._scrollTop=0):(s=S.max(0,o-i),a._scrollTop=u.scrollTop()-s*n),a._page(s,i)):o>=s+i&&!r?(c=!0,s=S.min(t,h-i),u.scrollTop()>=u[0].scrollHeight-u[0].offsetHeight-p?a._scrollTop=a.wrapper[0].scrollHeight-a.wrapper[0].offsetHeight:a.dataSource._isGroupPaged()&&t>=h-i?a._scrollTop=a.wrapper[0].scrollHeight-a.wrapper[0].offsetHeight-(a._scrollTop-a._prevScrollTop):a._alwaysScrollTop?a._scrollTop=0:a._scrollTop=n,a._page(s,i)):!a._fetching&&a.options.prefetch&&(t<d+i-.33*i&&t>i&&l.prefetch(d-i,i,e.noop),o>d+.33*i&&l.prefetch(d+i,i,e.noop)),c},fetching:function(){return this._fetching},_page:function(t,o,r){var a=this,l=!a.options.prefetch,n=a.dataSource,i=n._isGroupPaged();r=v(r)?r:e.noop,a.trigger(ie,{skip:t,take:o})||(clearTimeout(a._timeout),a._fetching=!0,a._rangeStart=t,i&&n._groupRangeExists(t,t+o)||!i&&n.inRange(t,o)?(a.trigger(ue),n.range(t,o,(function(){a.trigger(pe),r(),a.trigger(ne)}),"page")):(l||a.trigger(ue),a._timeout=setTimeout((function(){a._scrolling||(l&&a.trigger(ue),n.range(t,o,(function(){a.trigger(pe),r(),a.trigger(ne)})))}),100)))},repaintScrollbar:function(t){var r,a,l=this,n=l.options.maxScrollHeight,i=l.dataSource,s=o.support.kineticScrollNeeded?0:o.support.scrollbar(),d=l.wrapper[0];var c=l._isScrolledToBottom();a=l.itemHeight=l.options.itemHeight()||0;var u=d.scrollWidth>d.offsetWidth?s:0;r=(i._isGroupPaged()?i.groupsTotal(!0):i.total())*a+u;var p=e(new Array(S.floor(r/n)+1).join("<div></div>")).css({width:"1px",height:`${n}px`});r%n&&(p=p.add(e("<div></div>").css({width:"1px",height:r%n+"px"}))),l.verticalScrollbar.empty().append(p),!c||l._isScrolledToBottom()||l.dataSource._isGroupPaged()||l.scrollToBottom(),void 0!==l._scrollTop&&t&&(d.scrollTop=l._scrollTop,l._scrollWrapperOnColumnResize())},refresh:function(e){var t=this,o=t.dataSource,r=t._rangeStart;var a=(e||{}).action;var l=t._isScrolledToBottom()||!a||a!==le&&a!==$&&a!==ce;t.trigger(pe),clearTimeout(t._timeout),t.repaintScrollbar(l),t.drag&&t.drag.cancel(),void 0===r||t._fetching||((!a||a!==ce&&a!==le&&"expandGroup"!==a)&&(t._rangeStart=o.skip()),1!==o.page()||a&&(a===ce||a===le||"expandGroup"===a||"collapseGroup"===a)||(t.verticalScrollbar[0].scrollTop=0)),t._programmaticallyScrolling&&"resolved"!==t._programmaticallyScrolling.state()&&t._programmaticallyScrolling.resolve(),t._alwaysScrollTop&&delete t._alwaysScrollTop,t._fetching=!1}});function io(e){if(!e||!Array.isArray(e.filters))return[];const t=[];return e.filters.forEach((function e(o){o.logic&&o.filters?o.filters.forEach(e):o.field&&o.operator&&t.push({...o})})),t}function so(e){if(!e||!Array.isArray(e))return[];const t=[];return e.forEach((function e(o){t.push({...o}),o.items&&Array.isArray(o.items)&&o.items.forEach((t=>{t.items&&e(t)}))})),t}function co(e){return e&&Array.isArray(e)?e:[]}function uo(e,t){return"["+o.attr(e)+"="+t+"]"}function po(e){return new Array(e+1).join('<td class="k-group-cell k-table-group-td k-table-td">&nbsp;</td>')}function ho(e){var t,o=" ";if(e){if(typeof e===nt)return e;for(t in e)""!==e[t]&&(o+=t+'="'+e[t]+'"')}return o}function go(e,t){return t?e.map((e=>({...e,filters:e?.filters?.map((e=>{const o=e.field;return t&&t[o]&&"date"===t[o].type.toLowerCase()?{...e,value:new Date(e.value)}:e}))})))||[]:e}var fo={aiassistant:{text:"",icon:"sparkles",rounded:"full",className:"k-grid-ai-assistant-tool",fillMode:"solid",themeColor:"primary"},create:{text:"Add",className:"k-grid-add",iconClass:"k-i-plus"},cancel:{text:"Cancel changes",className:"k-grid-cancel-changes",iconClass:"k-i-cancel"},save:{text:"Save changes",className:"k-grid-save-changes",iconClass:"k-i-check"},selectall:{text:"Select all"},destroy:{text:"Delete",className:"k-grid-remove-command",iconClass:"k-i-trash"},edit:{text:"Edit",className:"k-grid-edit-command",iconClass:"k-i-pencil"},update:{text:"Save",className:"k-grid-save-command",iconClass:"k-i-save"},canceledit:{text:"Cancel",className:"k-grid-cancel-command",iconClass:"k-i-cancel"},excel:{text:"Export to Excel",className:"k-grid-excel",iconClass:"k-i-file-excel"},pdf:{text:"Export to PDF",className:"k-grid-pdf",iconClass:"k-i-file-pdf"},search:{text:"Search...",className:"k-grid-search"},columns:{text:"Columns",type:"button",icon:"columns",fillMode:"flat",overflow:"never",className:"k-grid-column-menu",attr:{"aria-haspopup":"menu"}},columnchooser:{text:"Columns",type:"button",icon:"columns",overflow:"never",className:"k-grid-column-chooser",attr:{"aria-haspopup":"menu"}},sort:{text:"Sort",type:"button",icon:"arrows-swap",overflow:"never",className:"k-grid-sort-tool",attr:{"aria-haspopup":"menu"},clearButton:!0},filter:{text:"Filter",type:"button",icon:"filter",overflow:"never",className:"k-grid-filter-tool",attr:{"aria-haspopup":"menu"},clearButton:!0},group:{text:"Group",type:"button",icon:"group",overflow:"never",className:"k-grid-group-tool",attr:{"aria-haspopup":"menu"},clearButton:!0}};const mo=o.guid();function bo(e){return{id:mo,prompt:"",output:e.outputPlaceholder,skipHeader:!0,skipActions:!0}}function ko(t,o){e("th, th .k-grid-filter-menu, th .k-link",t).add(document.body).css("cursor",o)}function _o(t,o,r,a,l){var n=o;o=e(),l=l||1;for(var i=0;i<l;i++)o=o.add(t.eq(n+i));"number"==typeof r?o[a?"insertBefore":"insertAfter"](t.eq(r)):o.appendTo(r)}function vo(t,o,r){return e(t).add(o).find(r)}function Co(e,t,o){var r,a,l,n;for(r=0,a=(o=b(o)?o:[o]).length;r<a;r++)l=o[r],h(l)&&l.click&&(n=l.name||l.text,t.on(Ke+q,".k-grid-"+(n||"").replace(/\s/g,""),{commandName:n},l.click.bind(e)))}function wo(e,r,a,l,n){return f(e,(function(e){var i;(e=typeof e===nt?{field:e}:e).parentIds=n,e.attributes instanceof Function&&(e._attributesFunction=e.attributes),!Mo(e)||a?(e.attributes=wr(e.attributes),e.footerAttributes=wr(e.footerAttributes),e.headerAttributes=wr(e.headerAttributes),i=!0):!Mo(e)&&a||(e.attributes=Sr(e.attributes),e.footerAttributes=Sr(e.footerAttributes),e.headerAttributes=Sr(e.headerAttributes),i=t);var s=o.guid();return l&&!e.locked&&(e.locked=l),e.headerAttributes=g({headers:n},e.headerAttributes),e.headerAttributes.id?e.uid=s=e.headerAttributes.id:(e.headerAttributes=g({id:s},e.headerAttributes),e.uid=s),e.columns&&(e.columns=wo(e.columns,r,i,e.locked,n?n+" "+s:s)),g({encoded:r,hidden:i,locked:l},e)}))}function yo(e,t){var o=[];return So(e,t,o),o[o.length-1]}function So(e,t,o){o=o||[];for(var r=0;r<t.length;r++){if(e===t[r])return!0;if(t[r].columns){var a=o.length;if(o.push(t[r]),So(e,t[r].columns,o))return!0;o.splice(a,o.length-a)}}return!1}function xo(e,t){Ho(e,t,t)}function To(e){e.attr(at,1)}function Ho(e,t,o){var r=o?Sr:wr;e.hidden=!t,e.attributes=r(e.attributes),e.footerAttributes=r(e.footerAttributes),e.headerAttributes=r(e.headerAttributes)}function Ro(e,t){Io(e),Ho(e,t,e._hideByMedia?e.matchesMedia:t)}function Io(e){e.matchesMedia=Ao(e)}function Ao(e){return e&&(Fo(e.media)||!Fo(e.media)&&o.matchesMedia(e.media))}function Eo(){return this.style.display!==Mt&&!this.classList.contains("k-hidden")}function Mo(e){return zo([e]).length>0}function zo(e){return m(e,(function(e){var t=!e.hidden&&!1!==e.matchesMedia;return t&&e.columns&&(t=zo(e.columns).length>0),t}))}function Do(e){var t=[];var o;for(var r=0;r<e.length;r++){if(!Fo((o=e[r]).media)){if(!Fo(o.minScreenWidth))throw new Error("Using 'media' and 'minScreenWidth' options at the same time is not supported.");t.push(o)}o.columns&&(t=t.concat(Do(o.columns)))}return t}function Fo(e){return void 0===e}function Lo(t){return e(t).map((function(){return this.toArray()}))}function Po(e,t){for(var o=0;o<e.length;o++)if(e[o].field==t)return e[o]}function Bo(t,o,r,a,l,n,i,s){var d=qo(t);var c=qo([o]);if(d>c){var u=new Array(i+1).join('<th class="k-group-cell k-header k-table-th" scope="col">&nbsp;</th>');var p=n.children(":not(.k-filter-row)");e(new Array(d-c+1).join("<tr class='k-table-row'>"+u+"</tr>")).insertAfter(p.last())}!function(e,t){var o=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(var r=0;r<o.length;r++)o[r].rowSpan+=t}(n,d-c),Vo(r,a,l,n,s)}function Oo(t,r,a){var l;a=a||0;var n=r;r=hr(r);var i={};var s=t.find(">tr:not(.k-filter-row)");var d=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")};for(var c=0,u=r.length;c<u;c++)i[(l=Go(r[c],n)).row]||(i[l.row]=s.eq(l.row).find(x+Ie).filter(d)),i[l.row].eq(l.cell).attr(o.attr("index"),a+c);return r.length}function qo(e){var t=0;for(var o=0;o<e.length;o++)if(e[o].columns){var r=qo(e[o].columns);r>t&&(t=r)}return 1+t}function Vo(t,o,r,a,l){var n=jo(t[0],o);var i=r.find(">tr:not(.k-filter-row)").eq(n.row).children("th.k-header:not(.k-group-cell)");var s=e();var d=n.cell;var c;for(c=0;c<t.length;c++)s=s.add(i.eq(d+c));a.find(">tr:not(.k-filter-row)").eq(n.row)[l](s);var u=[];for(c=0;c<t.length;c++)t[c].columns&&(u=u.concat(t[c].columns));u.length&&Vo(u,o,r,a,l)}function Go(e,t,o,r){var a;var l;for((r=r||{})[o=o||0]=r[o]||0,l=0;l<t.length;l++){if(t[l]==e){a={cell:r[o],row:o};break}if(t[l].columns&&(a=Go(e,t[l].columns,o+1,r)))break;r[o]++}return a}function Wo(e,t){let o=e;let r=o.match(/class=["][^"]+/g);if(r){const e=r[0].split('"').pop();o=o.replace(e,e+(t?"":" k-table-td "))}else o=o.replace("<td","<td class='k-table-td'");return o}function $o(e,t,o,r,a){if(t.columns)return(t=t.columns)[r?0:t.length-1];var l=yo(t,e);var n;n=l?l.columns:e;var i=k(t,n);0===i&&r?i++:i==n.length-1&&!r||!o.locked&&!t.columns&&!r?i--:(i>0||0===i&&!r)&&i++,t=function(e,t,o,r){var a;var l=!!o.locked;var n;do{a=e[t],t+=r?1:-1,n=!!a.locked}while(a&&t>-1&&t<e.length&&a!=o&&!a.columns&&n===l);return a}(n,i,o,k(o,n)>i);var s=k(t,a);return(!t.columns||s&&s!==n.length-1)&&t&&t!=o&&t.columns?$o(e,t,o,r,a):null}function jo(e,t,o,r){var a;var l;for((r=r||{})[o=o||0]=r[o]||0,l=0;l<t.length;l++){if(t[l]==e){a={cell:r[o],row:o};break}if(t[l].columns&&(a=jo(e,t[l].columns,o+1,r)))break;t[l].hidden||r[o]++}return a}function No(e){return Ko(ar(e)).concat(Ko(lr(e)))}function Uo(e,t,o,r){var a=e[o];var l=e[r];var n=yo(a,t);return t=n?n.columns:t,k(l,t)}function Ko(e){var t=[];var o=[];for(var r=0;r<e.length;r++)t.push(e[r]),e[r].columns&&(o=o.concat(e[r].columns));return o.length&&(t=t.concat(Ko(o))),t}function Qo(e){var t=0;var o;for(var r=0;r<e.length;r++)(o=e[r]).columns?t+=Qo(o.columns):o.hidden&&t++;return t}function Yo(e){var t=0;for(var o=0,r=e.length;o<r;o++)e[o].hidden||(t+=parseInt(e[o].width,10));return t}function Jo(e){var t,o=0;for(var r=0,a=e.length;r<a;r++)(t=e[r].style.width)&&-1==t.indexOf("%")&&(o+=parseInt(t,10));return o}function Xo(t){var o=t.find("tr:not(.k-filter-row)");var r=o.filter((function(){return!e(this).children().length})).remove().length;var a=o.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(var l=0;l<a.length;l++)a[l].rowSpan>1&&(a[l].rowSpan-=r);return o.length-r}function Zo(e,t,o,r,a){var l,n,i,s=[];for(l=0,i=e.length;l<i;l++)(n=o[r]||[]).push(t.eq(a+l)),o[r]=n,e[l].columns&&(s=s.concat(e[l].columns));s.length&&Zo(s,t,o,r+1,a+e.length)}function er(e,t,o){e.css({left:t,right:o})}function tr(e,t,o){e[t]=e[t]||{},e[t][o]=e[t][o]||""}function or(e,t,o,r){tr(e,t,o),""!==e[t][o]?e[t][o]+=" "+r:e[t][o]=r}function rr(e,t,o,r,a){tr(e,t,o),a?delete e[t][o]:e[t][o]=e[t][o].replace(r,"")}function ar(e){return m(e,(function(e){return e.locked}))}function lr(e){return m(e,(function(e){return!e.locked}))}function nr(e){return m(e,(function(e){return e.sticky&&!e.locked}))}function ir(e){return m(e,(function(e){return!e.locked&&Mo(e)}))}function sr(e){return m(e,(function(e){return e.locked&&Mo(e)}))}function dr(e){var t=[];for(var o=0;o<e.length;o++)e[o].hidden||(e[o].columns?t=t.concat(dr(e[o].columns)):t.push(e[o]));return t}function cr(e){var t=[];for(var o=0;o<e.length;o++)e[o].hidden||(e[o].columns?t=t.concat(dr(e[o].columns)):t.push({field:e[o].field,width:e[o].width,values:e[o].values,title:e[o].title}));return t}function ur(e){var t=[];for(var o=0;o<e.length;o++)e[o].columns&&(t=t.concat(e[o].columns));return t}function pr(e){var t=ur(e);return t=t.filter((function(e){return!e.hidden}))}function hr(e){var t=[];for(var o=0;o<e.length;o++)e[o].columns?t=t.concat(hr(e[o].columns)):t.push(e[o]);return t}function gr(e){var t=[];e=hr(e);for(var o=0;o<e.length;o++)"string"==typeof e[o]?t.push(e[o]):e[o].field&&t.push(e[o].field);return t}function fr(e){var t=[];for(var o=0;o<e.length;o++)t.push(e[o]),e[o].columns&&(t=t.concat(fr(e[o].columns)));return t}function mr(e,t){const o=t.multiHeaderSeparator||" / ";const r=fr(e.columns);const a=t.parentIds.split(" ").map((e=>{let t=r.find((t=>t.uid===e));return t&&(t.title||t.field)||""}));return a.push(t.title||t.field),a.join(o)}function br(e,t){return{field:e.field,title:e.title,format:e.format,editor:e.editor,values:e.values,editorOptions:g(!0,{format:e.format,adaptiveMode:t},e.editorOptions),label:e.title||e.field||""}}function kr(r){var a=r.find(">tr:not(.k-filter-row)");var l=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")};var n=e();a.length>1&&(n=a.find("th").filter(l).filter((function(){return this.rowSpan>1}))),n=n.add(a.last().find("th").filter(l));var i=o.attr("index");return[].sort.call(n,(function(o,r){o=e(o),r=e(r);var a=o.attr(i);var l=r.attr(i);return a===t&&(a=e(o).index()),l===t&&(l=e(r).index()),(a=parseInt(a,10))>(l=parseInt(l,10))?1:a<l?-1:0}))}function _r(t){var o=t.closest("table");var r=e().add(t);var a=t.closest(vt);var l=o.find("tr:not(.k-filter-row)");var n=l.index(a);if(n>0){var i=l.eq(n-1).find("th:not(.k-group-cell,.k-hierarchy-cell)").filter((function(){return!e(this).attr("rowspan")}));var s=0;var d=a.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t);var c=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter((function(){return this.colSpan>1}));for(var u=0;u<c.length;u++)s+=c[u].colSpan||1;for(d+=Math.max(s-1,0),s=0,u=0;u<i.length;u++){var p=i.eq(u);if(p.attr("data-colspan")?s+=p[0].getAttribute("data-colspan"):s+=1,d>=u&&d<s){r=_r(p).add(r);break}}}return r}function vr(t){var r=t.closest("thead");var a=e().add(t);var l=t.closest(vt);var n=r.find("tr:not(.k-filter-row)");var i=n.index(l)+t[0].rowSpan;var s=o.attr("colspan");if(i<=n.length-1){var d=l.next();var c=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");var u;c=c.filter((function(){return!this.rowSpan||1===this.rowSpan}));var p=0;for(u=0;u<c.length;u++)p+=parseInt(c.eq(u).attr(s),10)||1;var h=d.find("th:not(.k-group-cell,.k-hierarchy-cell)");var g=parseInt(t.attr(s),10)||1;for(u=0;u<g;){d=h.eq(u+p),a=a.add(vr(d));var f=parseInt(d.attr(s),10);f>1&&(g-=f-1),u++}}return a}function Cr(t,r,a,l){var i,s=t;if(n){let r=e(a);o.applyStylesFromKendoAttributes(r,["display","left","right"]),t.empty(),r.each(((e,o)=>t[0].appendChild(o)))}else(i=document.createElement(Ct)).innerHTML="<table class='k-grid-table k-table'><tbody class='k-table-tbody'>"+a+"</tbody></table>",e(i).find("table").addClass(o.getValidCssClass("k-table-","size",l)),t=i.firstChild.firstChild,r[0].replaceChild(t,s[0]),t=e(t);return t}function wr(e){e=e||{};let t={};return t[o.attr("style-display")]="none",g({},e,t)}function yr(e){return!!(e=e||{})[o.attr("style-display")]}function Sr(e){return delete(e=e||{})[o.attr("style-display")],e}function xr(t,r,a,l,n){var i,s=t.find(">colgroup"),d=n?["<col>"]:f(r,(function(e){return(i=e.width)&&0!==parseInt(i,10)?o.format(`<col ${o.attr("style-width")}="{0}" ${e.draggable?"class=k-drag-col":""} />`,typeof i===nt?i:i+_t):e.draggable?"<col class='k-drag-col' />":"<col />"}));n||!a&&!s.find(".k-hierarchy-col").length||d.splice(0,0,'<col class="k-hierarchy-col" />'),s.length&&s.remove(),s=e(new Array(l+1).join('<col class="k-group-col">')+d.join("")),o.applyStylesFromKendoAttributes(s,["width"]),s.is("colgroup")||(s=e("<colgroup/>").append(s)),t.prepend(s)}function Tr(e){var t,o,r,a={};for(o=0,r=e.length;o<r;o++)a[(t=e[o]).value]=t.text;return a}function Hr(e,t,r,a){let l=r&&r.length&&h(r[0])&&"value"in r[0]?Tr(r)[e]:e;l=null!=l?l:"";let n=!1===a?l:o.htmlEncode(l);return t?o.format(t,n):n}function Rr(e,t,o){var r,a=0,l=e[a];for(;l;){if(r=!!o||l.style.display!==Mt,o&&l.classList.contains("k-hidden")&&l.classList.remove("k-hidden"),r&&!Ot.test(l.className)&&--t<0){l.style.display=o?"":Mt;break}l=e[++a]}}function Ir(t,o){var r,a,l=0,n=t.length;for(;l<n;l+=1)(a=t.eq(l)).is(".k-grouping-row,.k-detail-row")?(r=a.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(r.attr("colspan"),10)-1):(a.hasClass("k-grid-edit-row")&&(r=a.children(".k-edit-container")[0])&&((r=e(r)).attr("colspan",parseInt(r.attr("colspan"),10)-1),r.find("col").eq(o).remove(),a=r.find(vt).first()),Rr(a[0].cells,o,!1))}function Ar(e){var t=[];var o;for(var r=0;r<e.length&&("field"in(o=e[r])&&"value"in o&&"items"in o);r++)t.push(o),o.hasSubgroups&&(t=t.concat(Ar(o.items)));return t}function Er(t,o){var r,a,l=0,n=t.length;for(;l<n;l+=1)(a=t.eq(l)).is(".k-grouping-row,.k-detail-row")?(r=a.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(r.attr("colspan"),10)+1):(a.hasClass("k-grid-edit-row")&&(r=a.children(".k-edit-container")[0])&&((r=e(r)).attr("colspan",parseInt(r.attr("colspan"),10)+1),xr(r.find(">form>table"),zo(undefined),!1,0),a=r.find(vt).first()),Rr(a[0].cells,o,!0))}function Mr(e,t,o){var r,a,l;for(o=o||1,a=0,l=e.length;a<l;a++)(r=e.eq(a).children(":not([hidden])").last()).attr("colspan",parseInt(r.attr("colspan"),10)+o),(r=t.eq(a).children(":not([hidden])").last()).attr("colspan",parseInt(r.attr("colspan"),10)-o)}function zr(e){var t,o,r=0;var a=e.find(">colgroup>col");for(t=0,o=a.length;t<o;t+=1)r+=parseInt(a[t].style.width,10);return r}var Dr=o.ui.DataBoundWidget.extend({init:function(t,r,a){var l=this;r=b(r)?{dataSource:r}:r,s.fn.init.call(l,t,r),a&&(l._events=a),Ut=o.support.isRtl(t),P=Ut?"a[class*='-i-caret-alt-left']":B,l._element(),l._ariaId(),l._columns(e.extend(!0,[],l.options.columns)),l._bindMediaQueries(),l._foreignKeyPromises?e.when.apply(null,l._foreignKeyPromises).then((function(){l._foreignKeyPromises=null,l._continueInit()})):l._continueInit()},_continueInit:function(){var t=this;t._dataSource(),t._stickyColumns(),t._tbody(),t._thead(),t._rowResizing(),t._groupable(),t._toolbar(),t._initToolbarItemsPopups(),t._ai(),t._pageable(),t._setContentHeight(),t._templates(),t._navigatable(),t._initSelectableAggregates(),t._selectable(),t._statusBar(),t._clipboard(),t._paste(),t._details(),t._editable(),t._attachCustomCommandsEvent(),t._adaptiveColumns(),t._minScreenSupport(),t.options.autoBind?t.dataSource.fetch():(t._group=t._groups()>0,t._footer()),t._setInitialRtlScrollPosition(),t.options.contextMenu&&t._initContextMenu(),t.lockedContent&&(t.wrapper.addClass("k-grid-lockedcolumns"),t._resizeHandler=function(){t.resize()},e(window).on("resize"+q,t._resizeHandler)),t._initLoader(),o.notify(t),t._showWatermarkOverlay&&t._showWatermarkOverlay(t.wrapper[0])},events:[X,J,"dataBinding","cancel",oe,re,ae,j,N,K,U,Q,V,G,W,$,te,Y,Oe,qe,Ve,ee,Z,Ge,We,$e,je,Ne,Ue,se,"page","sort","filter","group","groupExpand","groupCollapse","kendoKeydown"],setDataSource:function(e){var t=this;var r=t.options.scrollable;var a;t.options.dataSource=e,t._dataSource(),t._pageable(),t._thead(),t._rowResizing(),r&&(r.virtual?(a=t.content.find(">.k-virtual-scrollable-wrap"),o.scrollLeft(a,Wr(a,Ut))):(a=t.tbody,o.scrollLeft(t.content,Wr(a,Ut)))),t.options.groupable&&t._groupable(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.navigatable&&t._navigatable(),t.options.selectable&&t._selectable(),t.options.autoBind?t.dataSource.fetch():t._footer()},options:{name:"Grid",adaptiveMode:"none",ai:null,columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,allowPaste:!1,navigatable:!1,pageable:!1,persistSelection:!1,editable:!1,encodeTitles:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",statusBarTemplate:null,search:!1,noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,contextMenu:!1,columnResizeHandleWidth:3,size:"medium",mobile:"",loaderType:"loadingPanel",dataLayoutMode:"columns",stackedLayoutSettings:{},messages:{loader:{loading:"Loading...",exporting:"Exporting..."},editable:{cancelDelete:"Cancel",confirmation:"Are you sure you want to delete this record?",confirmDelete:"Delete"},commands:{create:fo.create.text,cancel:fo.cancel.text,save:fo.save.text,destroy:fo.destroy.text,edit:fo.edit.text,update:fo.update.text,canceledit:fo.canceledit.text,excel:fo.excel.text,pdf:fo.pdf.text,search:fo.search.text,columns:fo.columns.text,select:"Select",selectall:fo.selectall.text,sort:fo.sort.text,filter:fo.filter.text,group:fo.group.text,columnchooser:fo.columnchooser.text,selectRow:"Select Row",selectAllRows:"All rows",clearSelection:"Clear selection",copySelection:"Copy selection",copySelectionNoHeaders:"Copy selection (No Headers)",paste:"Paste (use CTRL/⌘ + V)",reorderRow:"Reorder row",reorderRowUp:"Up",reorderRowDown:"Down",reorderRowTop:"Top",reorderRowBottom:"Bottom",exportPdf:"Export to PDF",exportExcel:"Export to Excel",exportToExcelAll:"All",exportToExcelSelection:"Selection",exportToExcelSelectionNoHeaders:"Selection (No Headers)",sortAsc:"Sort Ascending",sortDesc:"Sort Descending",moveGroupPrevious:"Move previous",moveGroupNext:"Move next"},details:{expand:"Expand Details",collapse:"Collapse Details"},ai:{outputPlaceholder:"No AI output available",success:"Operation is successful. Data is:",error:"Operation is not successful. Error:"},noRecords:"No records available.",expandCollapseColumnHeader:"",groupHeader:"Press ctrl + space to group",ungroupHeader:"Press ctrl + space to ungroup",itemsSelected:"items selected",dragHandleLabel:"Drag row",toolbarLabel:"grid toolbar",groupingHeaderLabel:"grid grouping header",filterCellTitle:"filter cell",clearButtons:{clearFiltering:"Clear All Filters",clearSorting:"Clear Sorting",clearGrouping:"Clear Grouping",columnChooserReset:"Reset"},applyButtons:{applySorting:"Done",applyGrouping:"Done",columnChooserApply:"Apply"}},width:null},destroy:function(){var t,r,a=this;if(a._destroyColumnAttachments(),a._unbindToolbarTools(),s.fn.destroy.call(a),this._navigatableTables&&(this._navigatableTables.off(q),this._navigatableTables=null,this._headertables=null),a._resizeHandler&&e(window).off("resize"+q,a._resizeHandler),a._aiAssistant&&(a._aiAssistant?.destroy(),a._aiAssistant=null),a._aiAssistantWindow&&(a._aiAssistantWindow?.destroy(),a._aiAssistantWindow=null),a.pager&&a.pager.element&&a.pager.destroy(),a.timer&&clearTimeout(a.timer),a._progressTimeOut&&clearTimeout(a._progressTimeOut),a._collapseGroupsTimeOut&&clearTimeout(a._collapseGroupsTimeOut),a._endlessFetchTimeOut&&clearTimeout(a._endlessFetchTimeOut),a.pager=null,a._destroyGroupable(),(r=a.wrapper.data("kendoReorderable"))&&r.destroy(),(r=a.tbody?a.tbody.data("kendoReorderable"):null)&&r.destroy(),a.allowPaste){(a.content||a.table).off(se+q,a.pasteHandler),a.unbind(a.pasteHandler)}a.pasteActionsDropDownList&&(a.pasteActionsDropDownList.destroy(),a.pasteActionsDropDownList=null),a.selectable&&a.selectable.element&&(a.selectable.destroy(),a.clearArea(),a._selectedIds=null,a.copyHandler&&(a.wrapper.off("keydown",a.copyHandler),a.unbind(a.copyHandler)),a.updateClipBoardState&&(a.unbind(a.updateClipBoardState),a.updateClipBoardState=null),a.clearAreaHandler&&a.wrapper.off("keyup",a.clearAreaHandler)),a.selectable=null,a._selectableAggregatesOptions=null,a.resizable&&(a.resizable.destroy(),a._resizeUserEvents&&(a._resizeHandleDocumentClickHandler&&e(document).off("click",a._resizeHandleDocumentClickHandler),a._resizeUserEvents.destroy(),a._resizeUserEvents=null),a.resizable=null),a._destroyRowResizing(),a._destroyVirtualScrollable(),a.editableUserEvents&&(a.editableUserEvents.destroy(),a.editableUserEvents=null),a._lockedContentUserEvents&&(a._lockedContentUserEvents.destroy(),a._lockedContentUserEvents=null),a._destroyEditable(),a.dataSource&&(a.dataSource.unbind(X,a._refreshHandler).unbind(T,a._progressHandler).unbind(H,a._errorHandler).unbind(gt,a._clearSortClasses),a._refreshHandler=a._progressHandler=a._errorHandler=a._sortHandler=null),t=a.element.add(a.wrapper).add(a.table).add(a.thead).add(a.wrapper.find(">.k-grid-toolbar")),a.content&&(t=t.add(a.content).add(a.content.find(">.k-virtual-scrollable-wrap"))),a.scrollables&&a.scrollables.first()&&(t=t.add(a.scrollables.first())),a.lockedHeader&&a._removeLockedContainers(),a.pane&&a.pane.destroy(),a._isMobile&&(a.wrapper.off("transitionend"+q),a.wrapper.off("contextmenu"+q)),a.minScreenResizeHandler&&e(window).off("resize",a.minScreenResizeHandler),a._detachColumnMediaResizeHandler(),a._draggableInstance&&a._draggableInstance.element&&a._draggableInstance.destroy(),a._draggableInstance=null,a._draggableRowsInstance&&a._draggableRowsInstance.element&&a._draggableRowsInstance.destroy(),a.tbodyContextMenu&&a.tbodyContextMenu.destroy(),a.theadContextMenu&&a.theadContextMenu.destroy(),a.loader&&a.loader.destroy(),a._draggableRowsInstance=null,t.off(q),t[0].kendoBindingTarget=null,o.destroy(a.wrapper),a.rowTemplate=a.altRowTemplate=a.lockedRowTemplate=a.lockedAltRowTemplate=a.detailTemplate=a.footerTemplate=a.groupFooterTemplate=a.lockedGroupFooterTemplate=a.noRecordsTemplate=null,a.scrollables=a.thead=a.tbody=a.element=a.table=a.content=a.statusBar=a.footer=a.wrapper=a.lockedTable=a.lockedContent=a.lockedHeader=a.lockedFooter=a._groupableClickHandler=a._groupRows=a._setContentWidthHandler=a.loaderOverlay=a.wrapperClone=null},getOptions:function(){this.options.dataSource=null;var t=g(!0,{},this.options);t.columns=o.deepExtend([],this.columns);var r=this.dataSource;var a=r.options.data&&r._data;return r.options.data=null,t.dataSource=e.extend(!0,{},r.options),r.options.data=a,t.dataSource.data=a,t.dataSource.page=r.page(),t.dataSource.filter=e.extend(!0,{},r.filter()),t.dataSource.pageSize=r.pageSize(),t.dataSource.sort=r.sort(),t.dataSource.group=r.group(),t.dataSource.aggregate=r.aggregate(),t.dataSource.transport&&(t.dataSource.transport.dataSource=null),t.pageable&&t.pageable.pageSize&&(t.pageable.pageSize=r.pageSize()),t},setOptions:function(e){var t=this.getOptions(),r=this.element;if(t.size){const e=o.getValidCssClass("k-grid-","size",t.size);r.removeClass(e)}o.deepExtend(t,e),e.dataSource?e.dataSource.filter&&(t.dataSource.filter=e.dataSource.filter):t.dataSource=this.dataSource;var a=this.wrapper;var l=this._events;if(this.destroy(),this.options=null,this._isMobile){var n=a.closest(o.roleSelector("pane")).parent();n.after(a),n.remove(),a.removeClass("k-grid-mobile")}a[0]!==r[0]&&(a.before(r),a.remove()),r.empty(),this.init(r,t,l),this._setEvents(t)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t,o){return t.children().filter((function(){var t=e(this);return!((o?t.hasClass("k-detail-row"):t.hasClass(Pe))||t.hasClass("k-detail-row")||t.hasClass("k-group-footer"))}))},dataItems:function(){var e=o.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){var t=e.length,r=new Array(2*t);for(var a=t;--a>=0;)r[a]=r[a+t]=e[a];e=r}return e},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&t.thead.add(t.lockedHeader).find("th").each((function(){var t=e(this),o=t.data("kendoFilterMenu"),r=t.data("kendoColumnSorter"),a=t.data("kendoColumnMenu");o&&o.destroy(),r&&r.destroy(),a&&a.destroy()}))},_setInitialRtlScrollPosition:function(){const e=this;Ut&&e.scrollables&&o.scrollLeft(e.scrollables,0)},_attachCustomCommandsEvent:function(){var e,t,o,r=this,a=hr(r.columns||[]);for(t=0,o=a.length;t<o;t++)(e=a[t].command)&&Co(r,r.wrapper,e)},_bindMediaQueries:function(){const e=this;if("auto"===e.options.adaptiveMode){e.largeMQL=o.mediaQuery("large"),e.mediumMQL=o.mediaQuery("medium"),e.smallMQL=o.mediaQuery("small");const t=(t,o)=>{if("popup"!==e._editMode())return;const r=!0===t||!1===t;let a;if(e._editContainer&&(a=e._editContainer&&e._editContainer.data(o)),!a){const t="kendoActionSheet"===o?"kendoWindow":"kendoActionSheet";a=e._editContainer&&e._editContainer.data(t)}r?a&&a.fullscreen&&a.visible()?(e._showAdaptiveView=!0,a.fullscreen(t)):a&&(e._showAdaptiveView=!1,e._destroyEditable(!0)):a&&a.fullscreen&&a.close()};e.smallMQL.onEnter((()=>{t(!0,"kendoActionSheet")})),e.mediumMQL.onEnter((()=>{t(!1,"kendoActionSheet")})),e.largeMQL.onEnter((()=>{t(null,"kendoWindow")}))}else e.smallMQL&&e.smallMQL.destroy(),e.mediumMQL&&e.mediumMQL.destroy(),e.largeMQL&&e.largeMQL.destroy(),e._showAdaptiveView=!1},_aria:function(){var e,t,r,a,l,n=this.wrapper,i=this._hasDetails()?"treegrid":this.options.navigatable?"grid":null,s=this.table,d=n.find(".k-grid-toolbar"),c=n.find(".k-grouping-header"),u=this._ariaGridId(),p=s.attr(at),h=this._isStackedMode(),g=!h&&this.thead.find(vt).length+this.wrapper.find(".k-grid-footer-wrap table tr").length,f=this._trailingColumns(),m=this.virtualScroll,b=this.options.pageable;s.attr(at,p>=0?p:0),i&&s.attr(Et,i);const k=s.find("tbody");const _=s.find("thead");const v=s.find("tfoot");const C=s.find(vt);k.find(vt).length>0&&k.attr(Et,Dt),_.find(`${vt} th`).length>0&&_.attr(Et,Dt),v.find(vt).length>0&&v.attr(Et,Dt),C.children().length>0&&C.attr(Et,zt),s.find("th").attr(Et,Ft),s.find("td").attr(Et,Lt),b&&this.dataSource.totalPages()>1||m&&m.rows?(l=this._groups()>0?-1:this._hasDetails()?g+2*this.dataSource.total():g+this.dataSource.total(),s.attr(St,l)):this._hasDetails()&&(l=this._groups()>0?-1:g+2*this.dataSource.total(),s.attr(St,l)),l&&l>0&&this._ariaRowIndex(),(!h&&m&&m.columns||!s.attr(xt)&&(s.find("td:not([group-header-spanned-hidden]):hidden").length>0||n.find(".k-grid-content-locked td:not([group-header-spanned-hidden]):hidden").length>0))&&(s.attr(xt,f+hr(this.columns).length),this._ariaColumnIndex()),this.pager&&this.pager.element.attr("aria-controls",u),d.attr({role:"toolbar","aria-label":this.options.messages.toolbarLabel,"aria-controls":u}),c.attr({role:"toolbar","aria-label":this.options.messages.groupingHeaderLabel,"aria-controls":u}),t=h?"":this._ariaHeaderFooter("header","thead","th, td",Ft),r=this._ariaHeaderFooter("footer","tfoot","td",Lt),!h&&n.find(".k-grid-content-locked").length>0&&this._ariaLockedContent(),(t||r)&&(a=[t,e=this.tbody.attr(kt)||o.guid(),r].join(" "),this.tbody.attr(kt,e),s.attr(yt,a)),this.options.groupable&&this._ariaGroupTitles()},_ariaColumnIndex:function(){var t,o,r,a,l=this._trailingColumns(),n=this.tbody.find(">tr").last().find("> td[data-virtual]"),i=this.thead.find(">tr").not(".k-filter-row"),s=this.wrapper.find(".k-grid-header-locked thead > tr").not(".k-filter-row"),d=Number.MAX_VALUE,c=0,u=0,p=0,h=0,g=function(o,r){var a=r.getAttribute("data-index"),l=Number(a),n=e(r).closest(".k-grid-header-locked");0===n.length&&l<d&&(d=l),n.length>0&&u<l&&(u=l),0===n.length&&c<l&&(c=l),null!==a?(r.setAttribute(Tt,Number(l)+1),t=Number(l)+1+r.getAttribute("colspan")):(r.setAttribute(Tt,t+1),t+=r.getAttribute("colspan"))};for(2===n.length?(p=Number(n[0].getAttribute("colspan")),h=Number(n[1].getAttribute("colspan"))):1===n.length&&0===n.prev().length?p=Number(n[0].getAttribute("colspan")):1===n.length&&1===n.prev().length&&(h=Number(n[0].getAttribute("colspan"))),o=0;o<s.length;o++)t=0,s.eq(o).find("th").each(g);for(o=0;o<i.length;o++)t=0,i.eq(o).find("th").each(g);for(o=0;o<=u;o++)r=o+l,this.wrapper.find(".k-grid-content-locked tbody > tr > td:nth-child("+(o+1)+")").attr(Tt,r+1);for(o=p;o<=c-d-h;o++)a=0===p?o+1:o-p+2,r=d+o+l,this.tbody.find("> tr > td:nth-child("+a+")").attr(Tt,r+1)},_ariaGroupTitles:function(){var e=this,t=e.dataSource.group(),r=e.wrapper.find(".k-grid-header th");r.each((function(t,o){o.getAttribute("title")===e.options.messages.ungroupHeader&&o.setAttribute("title",e.options.messages.groupHeader)})),t&&t.length>0&&t.forEach((function(t){var a=t.field,l=r.filter("["+o.attr("field")+"='"+a+"']");l.attr("title")===e.options.messages.groupHeader&&l.attr("title",e.options.messages.ungroupHeader)}))},_ariaHeaderFooter:function(e,t,r,a){var l,n=this.wrapper,i=n.find(".k-grid-"+e+" .k-grid-"+e+"-wrap table"),s=n.find(".k-grid-"+e+" .k-grid-"+e+"-locked table"),d="";if(i.length>0){d=(l=i.find(t+", tbody")).attr(kt)||o.guid(),i.attr(Et,Mt);const e=i.find(vt);e.children().length>0&&(e.attr(Et,zt),l.attr(Et,Dt)),i.find(r).attr(Et,a),l.attr({id:d})}return s.length>0&&this._ariaLocked(e,t,r,a),s.find("td").attr(Et,Lt),i.find("td").attr(Et,Lt),d},_ariaId:function(){var e=this.element.attr(kt)||"aria";e&&(this._cellId=e+"_active_cell")},_ariaGridId:function(){var e=this.table,t=e.attr(kt);return t||(t=o.guid(),e.attr(kt,t)),t},_ariaLocked:function(t,o,r,a){var l=this,n=l.wrapper,i=n.find(".k-grid-"+t+" .k-grid-"+t+"-wrap table"),s=n.find(".k-grid-"+t+" .k-grid-"+t+"-locked table"),d=i.find(vt),c=s.find(vt);s.attr(Et,Mt),s.find(o+", tbody").attr(Et,Mt),c.attr(Et,Mt),s.find(r).attr(Et,a),d.each((function(o,a){var n=[];n=(n=l._cellsIds(c.eq(o).find(r),"locked_"+t,o)).concat(l._cellsIds(e(a).find(r),t,o)),a.setAttribute(yt,n.join(" "))}))},_ariaLockedContent:function(){var t=this,o=t.table.find(vt),r=t.wrapper.find(".k-grid-content-locked table"),a=r.find(vt);r.attr(Et,Mt),r.find("tbody").attr(Et,Mt),a.attr(Et,Mt),r.find("td").attr(Et,Lt),o.each((function(o,r){var l=[];l=(l=t._cellsIds(a.eq(o).find("td"),"locked_datacell",o)).concat(t._cellsIds(e(r).find("td"),"datacell",o)),r.setAttribute(yt,l.join(" "))}))},_ariaAddHiddenColIndex:function(){var e=this.virtualScroll||{},t=this.columns,o=this.table,r=hr(t).length;e.columns||o.attr(xt)||(this._ariaColumnIndex(),o.attr(xt,r))},_ariaRemoveHiddenColIndex:function(){var e=this.virtualScroll||{},t=hr(this.columns).length;e.columns||t!==dr(this.columns).length||(this.wrapper.find("td, th").removeAttr(Tt),this.table.removeAttr(xt))},_ariaRowIndex:function(){var e,t,o=!this._isStackedMode()&&this.thead.find(">tr"),r=o?o.length:0,a=this.tbody.find(">tr"),l=this.wrapper.find(".k-grid-footer-wrap tfoot > tr"),n=this.dataSource.total(),i=this.dataSource.skip()||0,s=1,d=!1;for(this._hasDetails()&&(n*=2,i*=2),e=0;e<r;e++)o.eq(e).attr(Ht,s+e);for(s=r+i,e=0;e<a.length;e++)t=a.eq(e),this._hasDetails()&&t.hasClass("k-master-row")?(s+=d?2:1,d=!0):(s+=1,d=!1),t.attr(Ht,s);for(s=r+n+1,e=0;e<l.length;e++)l.eq(e).attr(Ht,s+e)},_cellsIds:function(e,t,o){var r=[],a=this._ariaGridId();return e.each((function(e,l){var n=l.getAttribute(kt)||a+"_"+t+"_"+o+"_"+e;l.setAttribute(kt,n),r.push(n)})),r},_trailingColumns:function(){return this._groups()+(this._hasDetails()?1:0)},_element:function(){const t=this;let r=t.element;r.is("table")||(r=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),r.length||(r=e("<table />").appendTo(t.element))),r.addClass("k-grid-table k-table"),r.addClass(o.getValidCssClass("k-table-","size",t.options.size)),t.table=r,t._wrapper()},_createResizeHandle:function(t,r){var a=this;var l=a.options.columnResizeHandleWidth;var n=a.options.scrollable;var i=a.resizeHandle;var s=3*l/2;var d=0;var u;var p;var h;var g;var f;var m;var b;i&&a.lockedContent&&i.data("th")[0]!==r[0]&&(i.off(q).remove(),i=null),i||(i=a.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(i)),f=o.scrollLeft(t),Ut&&(Kt.mozilla||Kt.webkit&&Kt.version>=85)&&(f*=-1),g=parseFloat(t.css("borderLeftWidth")),m=r.offset().left+f-parseFloat(r.css("marginLeft"))-(t.offset().left+g),Ut?n&&(d=m<=f?s:0,(u=r.closest(".k-grid-header-wrap, .k-grid-header-locked"))[0].scrollWidth-u[0].offsetWidth,h=parseFloat(u.css("marginLeft")),p=Kt.msie?2*o.scrollLeft(u)+g-h-d:0,m-=-d+(Kt.mozilla?g-h-d:0)+p):m+=r[0].offsetWidth,b=r.offset().top-parseFloat(r.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth"))),i.css({top:b,left:m-s,height:c(r),width:3*l-d}).data("th",r).show(),i.off(et+q).on(et+q,(function(){a._autoFitLeafColumn(parseInt(r.attr(o.attr("index")),10))}))},_positionColumnResizeHandle:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find("thead").first():e();t.thead&&t.thead.add(r).on(Ze+q,"tr:not(.k-filter-row) > th:not([data-resizable=false])",(function(r){var a=void 0!==r.buttons?r.buttons:r.which||r.button;var l=e(this);l.hasClass("k-group-cell")||l.hasClass("k-hierarchy-cell")||void 0!==a&&0!==a||l[0].hasAttribute(o.attr("colSpan"))||t._createResizeHandle(l.closest(Ct),l)}))},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._resetResizeHandleHeader(),this._hideResizeHandle())},_resetResizeHandleHeader:function(){var t;this.resizeHandle&&(t=e(this.resizeHandle).data("th"))&&(t.find(x+Se).find(x+xe+","+x+Te).show(),t.find(x+He).show(),t.find(x+Ae).show(),t.find(x+Ee).show())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(q).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find("thead").first():e();t._resizeUserEvents=new o.UserEvents(r.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,minHold:500,hold:function(o){var r=e(o.target);o.preventDefault(),t.resizeHandle&&(t.resizeHandle.data("th").removeClass("k-column-active"),t._resetResizeHandleHeader()),r.addClass("k-column-active"),r.find(x+Se).find(x+xe+","+x+Te).hide(),r.find(x+He).hide(),r.find(x+Ae).hide(),r.find(x+Ee).hide(),t._createResizeHandle(r.closest(Ct),r),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=t._resizeHandleDocumentClick.bind(t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},resizeColumn:function(t,r){var a=this;var l=!!t.locked;var n=!!t.hidden;var i=this.options;var s=o.support.mobileOS?0:o.support.scrollbar();var c=k(t,l?sr(dr(a.columns)):ir(dr(a.columns)));var u=l?a.lockedTable:a.table;var p=a.footer||e();var h=t.minResizableWidth||10;var g=d(l?u.find("tbody"):a.tbody);var f;if(!this._isStackedMode()){var m=l?a.lockedHeader.find("table"):a.thead.closest("table");if(n)t.width=r>h?r:h;else{if(a.footer&&a.lockedContent&&(p=l?a.footer.children(".k-grid-footer-locked"):a.footer.children(".k-grid-footer-wrap")),f=i.scrollable?m.find("col:not(.k-group-col,.k-hierarchy-col)").eq(c).add(u.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(c)).add(p.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(c)):u.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(c),i.scrollable){var b=!1;var _=a.wrapper.width()-s;var v=r=r>h?r:h;l&&g-r+v>_&&((v=r+(_-g-2*s))<0&&(v=r),b=!0),v>10&&v>=h&&(f.css("width",v),g&&(v=b?_-2*s:g+(r-t.width),u.add(m).add(p).css("width",v),l||(a._footerWidth=v))),a._scrollVirtualWrapperOnColumnResize()}else r>10&&r>=h&&f.css("width",r);t.width=r,a._applyLockedContainersWidth(),a._syncLockedContentHeight(),a._syncLockedHeaderHeight(),a._updateStickyColumns()}}},_adjustColWidths:function(t,o,r,a){const l={};t.add(o).add(r).css("width",a),t.add(o).add(r).find("col").each(((t,o)=>{l[t]=e(o).css("width")})),t.add(o).add(r).find("col").each(((t,o)=>{e(o).css("width",l[t])}))},_resizable:function(){var t,a,l,n,i,s,u,p,h=this,g=h.options,f=this._isMobile,m=o.support.mobileOS?0:o.support.scrollbar();!h._isStackedMode()&&(!0===g.resizable||g.resizable&&!0===g.resizable.columns)&&(t=g.scrollable?h.wrapper.find(".k-grid-header-wrap").first():h.wrapper,f?h._positionColumnResizeHandleTouch(t):h._positionColumnResizeHandle(t),h.resizable&&h.resizable.destroy(),h.resizable=new r.Resizable(t.add(h.lockedHeader),{handle:(g.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:c(t.data("th"))+h.tbody.attr("clientHeight")})},start:function(t){p=e(t.currentTarget).data("th"),f&&h._hideResizeHandle();let o=p.closest("table"),r=e.inArray(p[0],kr(p.closest("thead")).filter(":visible"));let c=(s=o.parent().hasClass("k-grid-header-locked"))?h.lockedTable:h.table,m=h.footer||e();h.footer&&h.lockedContent&&(m=s?h.footer.children(".k-grid-footer-locked"):h.footer.children(".k-grid-footer-wrap"));let b=m.find("table");ko(h.wrapper,"col-resize"),u=g.scrollable?o.find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r).add(c.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r)).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r)):c.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r);let k=e.map(h.columns,(function(e){return!e.hidden&&(s&&e.locked||!s&&!e.locked)?e:null}));a=t.x.location,l=d(p),n=hr(k)[r].minResizableWidth||10,i=d(s?c.children("tbody"):h.tbody),Kt.webkit&&h.wrapper.addClass("k-grid-column-resizing"),h._adjustColWidths(c,o,b,i)},resize:function(t){var o=Ut?-1:1,r=l+t.x.location*o-a*o;if(g.scrollable){var d;s&&h.lockedFooter?d=h.lockedFooter.children("table"):h.footer&&(d=h.footer.find(">.k-grid-footer-wrap>table")),d&&d[0]||(d=e());var c=p.closest("table");var f=s?h.lockedTable:h.table;var b=!1;var k=h.wrapper.width()-m;var _=r;s&&i-l+_>k&&((_=l+(k-i-2*m))<0&&(_=r),b=!0),_>10&&_>=n&&(u.css("width",_),i&&(_=b?k-2*m:i+t.x.location*o-a*o,f.add(c).add(d).css("width",_),s||(h._footerWidth=_))),h._scrollVirtualWrapperOnColumnResize()}else r>10&&r>=n&&u.css("width",r)},resizeend:function(){var e,t,r=d(p);if(ko(h.wrapper,""),Kt.webkit&&h.wrapper.removeClass("k-grid-column-resizing"),p&&l!=r){t=h.lockedHeader?h.lockedHeader.find("thead").first().find(vt).first().add(h.thead.find(vt).first()):p.parent();var a=p.attr(o.attr("index"));a||(a=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(p)),(e=hr(h.columns)[a]).width=r,h.trigger(qe,{column:e,oldWidth:l,newWidth:r}),h._applyLockedContainersWidth(!0),h._syncLockedContentHeight(),h._syncLockedHeaderHeight(),h._updateStickyColumns()}h._resetResizeHandleHeader(),h._hideResizeHandle(),p=null}}))},_addLockedRowResizing:function(e){var t=e.index();return this.lockedTable.find(vt).eq(t).add(this.tbody.find(vt).eq(t))},_getMinRowHeight:function(e){var t=0;return e.each(((e,o)=>{var r;o.style.height="",(r=c(o))>t&&(t=r)})),t},_cacheRowHeight:function(e,t){var o=this;o._cachedRowsHeight||(o._cachedRowsHeight={}),e.each(((e,r)=>{var a=r.getAttribute("data-uid");o._cachedRowsHeight[a]=t}))},_clearCachedRowsHeight:function(e){var t=this;e&&t._cachedRowsHeight?e.each(((e,o)=>{var r=o.getAttribute("data-uid");delete t._cachedRowsHeight[r]})):t._cachedRowsHeight=null},_mapCachedRowsHeight:function(e,t){var o=this._cachedRowsHeight,r=this.dataSource,a={};Object.keys(o).forEach((l=>{var n=r[e](l);n&&(a[n[t]]=o[l])})),this._cachedRowsHeight=a},_rowResizerDblClick:function(){var t,o,r=this,a=r.rowResizer,l=a.data(vt),n=c(l);o=l.hasClass(ve)?r.select():l,r.lockedTable?(o=(l=r._addLockedRowResizing(l)).hasClass(ve)?r.lockedTable.find(x+ve):r.lockedTable.find(vt).eq(l.index())).each(((t,o)=>{var a=o.rowIndex,l=e(o).add(r.tbody.find(vt).eq(a)),n=r._getMinRowHeight(l);l.css(tt,n)})):o.css(tt,rt),r._clearCachedRowsHeight(o),a.removeClass(me),a.removeClass(be),n!=(t=c(l))&&r.trigger(Oe,{row:l,rows:o,oldHeight:n,newHeight:t})},_setupRowResizer(e,t,o){e.data(vt,t).css({top:o})},_attachRowResizerEvents:function(){var e=this.rowResizer,t=!1;e.on(Qe+q,(t=>{0===t.button&&(e.removeClass(me),e.addClass(be))})).on(Ye+q,(t=>{0===t.button&&(e.removeClass(be),e.addClass(me))})).on(Je+q,(()=>{t=!0,setTimeout((()=>{t&&e.addClass(me)}),200)})).on(Xe+q,(()=>{t=!1,e.removeClass(me)}))},_getResizerTop:function(e,t){var o=this.rowResizer,r=o.find(".k-row-resizer")[0],a=parseInt(getComputedStyle(o[0]).paddingTop);return e.offset().top-parseFloat(e.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth")))-r.clientHeight-a+t.scrollTop()},_getResizerContainer:function(){var e=this.tbody.closest(Ct);return this.lockedTable&&(e=e.closest(".k-grid-container")),e},_createRowResizer:function(t){var o,r=this,a=e(t.currentTarget),l=t.currentTarget.clientHeight,n=t.offsetY,i=r.rowResizer,s=a.prev("tr:visible"),d=r._getResizerContainer();i||(i=r.rowResizer=e('<div class="k-resizer-wrap"><div class="k-row-resizer"></div></div>'),d.append(i),r._attachRowResizerEvents(),i.off(et+q).on(et+q,r._rowResizerDblClick.bind(r))),o=r._getResizerTop(a,d),0!==s.length&&l/2>n?s.hasClass(Pe)||r._setupRowResizer(i,s,o):a.hasClass(Pe)||r._setupRowResizer(i,a,o+l)},_detachRowResizerEvents:function(){this.rowResizer.off(Qe+q).off(Ye+q).off(Je+q).off(Xe+q)},_mapResizedRows:function(t,o,r){var a=this;t.each(((t,l)=>{var n;if(o){var i=l.rowIndex,s=r,d=0,u=e(l).add(a.tbody.find(vt).eq(i));u.each(((e,t)=>{var o;t.style.height="",(o=c(t))>d&&(d=o)})),s<d?(s=d,a._clearCachedRowsHeight(u.eq(0))):a._cacheRowHeight(u.eq(0),s),u.css(tt,s)}else l.style.height="",n=c(l),r>n?(l.style.height=r+_t,a._cacheRowHeight(e(l),r)):a._clearCachedRowsHeight(e(l))}))},_rowResizing:function(){var t,o,a,l,n=this,i=n.options;i.resizable&&!0===i.resizable.rows&&(n.tbody.parent().add(n.lockedTable).on(Ze+q,".k-grid-footer tr, .k-table-tbody tr",n._createRowResizer.bind(n)),n.rowResizing&&n.rowResizing.destroy(),t=n._getResizerContainer(),n.rowResizing=new r.Resizable(t,{handle:".k-resizer-wrap",start:function(t){l=e(t.currentTarget).data(vt),n.lockedTable&&(l=n._addLockedRowResizing(l)),l.addClass(me),n._detachRowResizerEvents(),o=t.y.location,a=c(l)},resize:function(e){var r=a+e.y.location-o,i=0;l.length>1&&(i=n._getMinRowHeight(l)),r<i&&(r=i),l.css("height",r),n._setupRowResizer(n.rowResizer,l,n._getResizerTop(l,t)+r)},resizeend:function(){var e,t=c(l),o=!1;l.hasClass(ve)?(e=n.select(),l.length>1&&e.length>l.length&&(e=n.lockedTable.find(x+ve).not(l),o=!0)):e=l,n._mapResizedRows(e,o,t),l.removeClass(me),n.rowResizer.removeClass(be),n.rowResizer.addClass(me),n._attachRowResizerEvents(),o&&(e=n.select()),a!=t&&n.trigger(Oe,{row:l,rows:e,oldHeight:a,newHeight:t}),l=null}}))},_draggable:function(){var t=this,r=t.options.reorderable;if(!0===r||r&&r.columns){t._draggableInstance&&t._draggableInstance.destroy();var a=t.wrapper.children(".k-grid-header");a.addClass("k-grid-draggable-header"),t._draggableInstance=t.wrapper.kendoDraggable({group:o.guid(),autoScroll:!0,filter:t.content?".k-grid-header:first "+F:"table:first>.k-grid-header "+F,dragstart:function(){a.children(".k-grid-header-wrap").off("scroll"+q+"scrolling").on("scroll"+q+"scrolling",(function(e){t.virtualScrollable?o.scrollLeft(t.content.find(">.k-virtual-scrollable-wrap"),this.scrollLeft):o.scrollLeft(t.scrollables.not(e.currentTarget),this.scrollLeft)}))},dragend:function(){t._resetResizeHandleHeader(),a.children(".k-grid-header-wrap").off("scroll"+q+"scrolling")},drag:function(){t._hideResizeHandle()},hint:function(t){var r=t.attr(o.attr("title"));return r&&(r=o.htmlEncode(r)),e('<div class="k-reorder-clue k-drag-clue" />').html(r||t.attr(o.attr("field"))||t.text()).prepend(o.ui.icon({icon:"cancel",iconClass:"k-drag-status"}))}}).data("kendoDraggable")}},_reorderable:function(){let t=this,o=t.options.reorderable;(!0===o||o&&o.columns)&&(t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy(),t.wrapper.kendoReorderable({draggable:t._draggableInstance,dropFilter:F,allowDropAfterLastItem:!0,dragOverContainers:function(e,o){let r=No(t.columns);return!1!==r[e].lockable&&Uo(r,t.columns,e,o)>-1},inSameContainer:function(o){let r=e(o.source).parent()[0],a=e(o.target).parent()[0],l=o.sourceIndex,n=o.targetIndex,i=No(t.columns),s=i&&i[l]&&!!i[l].lockable;return t._isLocked()&&s&&(r=e(o.source.closest(".k-grid-header"))[0],a=e(o.target.closest(".k-grid-header"))[0]),r===a&&Uo(i,t.columns,l,n)>-1},change:function(e){let o=No(t.columns);let r=o[e.oldIndex];let a=Uo(o,t.columns,e.oldIndex,e.newIndex);t.trigger(Ve,{newIndex:a,oldIndex:k(r,o),column:r}),t.reorderColumn(a,r,"before"===e.position)}}))},_reorderHeader:function(e,t,o,r){var a=this;var l=Go(e[0],a.columns);var n=Go(t,a.columns);var i;var s;var d=[];for(var c=0;c<e.length;c++)e[c].columns&&(d=d.concat(e[c].columns));s=r?vo(r,r,"tr:eq("+l.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"):vo(a.lockedHeader,a.thead,"tr:eq("+l.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");var u=ar(e).length;var p=ar([t]).length;var h,g,f,m,b,k;d.length?(u>0&&0===p?(i="prepend",Bo(e,t,d,a.columns,a.lockedHeader.find("thead"),a.thead,this._groups(),i)):0===u&&p>0&&(i=0!==n.cell||!e[0].columns||t.columns||a._group?"append":"prepend",Bo(e,t,d,lr(a.columns),a.thead,a.lockedHeader.find("thead"),this._groups(),i)),(t.columns||l.cell-n.cell>1||n.cell-l.cell>1)&&(t=$o(a.columns,t,e[0],o,a.columns))&&(u>0&&0===p?a._reorderHeader(d,t,o,a.thead):0===u&&p>0?a._reorderHeader(d,t,o,a.lockedHead):a._reorderHeader(d,t,o))):u!==p&&(h=s[l.cell],g=a.columns,f=u,m=qo(ar(g)),b=qo(lr(g)),k=h.rowSpan,h.rowSpan=f?m>b?k-(m-b)||1:k+(b-m):m>b?k+(m-b):k-(b-m)||1),_o(s,l.cell,n.cell,o,e.length)},_reorderContent:function(t,o,r){var a=this;var l=e();var n=t[0];var i=zo(t);var s=k(n,hr(a.columns));var d=k(o,hr(a.columns));var c=k(i[0],dr(a.columns));var u=k(o,dr(a.columns));var p=ar(a.columns).length;var h=!!o.locked;var g=a.footer||a.wrapper.find(".k-grid-footer");var f,m,b;if(f=m=u,o.hidden){var _=h?ar(a.columns):lr(a.columns);zo(_).length>0?(f=m=u=this._findClosestVisibleColumnIndex(_,d),b=zo(_.slice(d)).length>0):h?(u=a.lockedTable.find("colgroup"),f=a.lockedHeader.find("colgroup"),m=e(a.lockedFooter).find(">table>colgroup")):(u=a.tbody.prev(),f=a.thead.prev(),m=g.find(".k-grid-footer-wrap").find(">table>colgroup"))}a._hasFilterRow()&&_o(a.wrapper.find(".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)"),s,d,r,t.length),c>=0&&_o(vo(a.lockedHeader,a.thead.prev(),D),c,f,b||r,i.length),a.options.scrollable&&c>=0&&!a._hasVirtualColumns()&&_o(vo(a.lockedTable,a.tbody.prev(),D),c,u,b||r,i.length),g&&g.length&&(c>=0&&_o(vo(a.lockedFooter,g.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),c,m,b||r,i.length),_o(g.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),s,d,r,t.length));var v=a.tbody.children(":not(.k-grouping-row,.k-detail-row)");a.lockedTable&&(p>d?p<=s&&Mr(a.lockedTable.find(">tbody>tr.k-grouping-row:not([hidden])"),a.table.find(">tbody>tr.k-grouping-row:not([hidden])"),t.length):p>s&&Mr(a.table.find(">tbody>tr.k-grouping-row:not([hidden])"),a.lockedTable.find(">tbody>tr.k-grouping-row:not([hidden])"),t.length),l=a.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)"));for(var C=0,w=v.length;C<w;C+=1)_o(vo(l[C],v[C],">td:not(.k-group-cell,.k-hierarchy-cell)"),s,d,r,t.length)},_findClosestVisibleColumnIndex:function(e,t){var o=zo(e.slice(t)).length>0?e.slice(t):e.slice(0,t+1).reverse(),r=zo(o)[0];return k(r,zo(this.columns))},_autoFitLeafColumn:function(e){this.autoFitColumn(hr(this.columns)[e])},_hasReorderableRows:function(){return this.options.reorderable&&this.options.reorderable.rows},_draggableRows:function(){var t=this,r=t._checkBoxSelection||t.options.selectable&&!o.ui.Selectable.parseOptions(t.options.selectable).cell,a=!1,l=!(!t._isMobile&&!o.support.mobileOS);t._draggableRowsInstance&&t._draggableRowsInstance.destroy(),!1!==this.options.reorderable.rows.clickMoveClick&&this._hasDragHandleColumn&&(a=!0),t._draggableRowsInstance=t.tbody.kendoDraggable({holdToDrag:l,showHintOnHold:l,preventOsHoldFeatures:l,group:"row-draggable",autoScroll:!0,filter:(r?" > .k-selected":" > "+z)+(t._hasDragHandleColumn?" > [ref-grid-drag-cell]":":not(:has([data-container-for]))"),hint:function(a){var l=e('<div class="k-reorder-clue k-drag-clue">'+o.ui.icon({icon:"cancel",iconClass:"k-drag-status"})+"</div>");if(r&&t.select().length>1&&t.lockedContent)l.append("<span>"+t.select().length/2+" "+C(t.options.messages.itemsSelected)+"</span>");else if(r&&t.select().length>1&&!t.lockedContent)l.append("<span>"+t.select().length+" "+C(t.options.messages.itemsSelected)+"</span>");else{var n=a.closest(z).clone();n.find("td.k-command-cell").remove(),n.find("td").each((function(e,t){l.append("<span>"+t.innerText.replace(/<(\/?)script([^>]*)>/gi,"")+"&nbsp;</span>")}))}return l},clickMoveClick:a,cursorOffset:{top:0,left:0}}).data("kendoDraggable")},_reorderableRows:function(){var t=this,r=t._checkBoxSelection||t.options.selectable&&!o.ui.Selectable.parseOptions(t.options.selectable).cell;t.tbody.data("kendoReorderable")&&t.tbody.data("kendoReorderable").destroy(),t.tbody.kendoReorderable({smartPosition:!1,draggable:t._draggableRowsInstance,dragOverContainers:function(o,a){var l=!0,n=e(z,t.content).eq(a);return r&&(l=!n.is(".k-selected")),l},inSameContainer:function(t){return!r||!e(t.target).is(".k-selected")},dropFilter:"> "+z,allowIcon:"insert-middle",orientation:"vertical",reorderDropCue:e('<div class="k-drop-hint k-drop-hint-h"><div class="k-drop-hint-start"></div><div class="k-drop-hint-line"></div></div>'),positionDropCue:function(e,t){var r=o.getOffset(t.children(R).eq(0)).left;e.css({transform:"translate(0,-50%)",left:r})},externalDraggable:function(e){var t=e.draggable;if(t)return t},change:function(e){t._triggerRowRorder(e)}})},_triggerRowRorder:function(e){var t=this,r={newIndex:"after"===e.position?e.newIndex+1:e.newIndex,oldIndex:e.oldIndex},a=e.element,l=t._checkBoxSelection||t.options.selectable&&!o.ui.Selectable.parseOptions(t.options.selectable).cell;r=l&&t.select().length>1?g(r,{rows:t.select()}):g(r,{row:a}),t.trigger(Ne,r)||t.reorderRows(l?t.select():a,r.newIndex)},reorderRowTo:function(e,t){var o=this,r=o.dataItem(e),a=e.index();t<0||t===a||o.trigger(Ne,{row:e,oldIndex:e.index(),newIndex:t})||o.dataSource.pushMove(t,[r])},reorderRows:function(e,t){var o=this,r=o.dataSource,a=o.tbody.children(z).length,l=o.dataItem(o.tbody.children(z).eq(t)),n=e.toArray().map((function(e){let t=o.dataItem(e);return t._isMoved=!0,t}));l?t=r.indexOf(l):(l=o.dataItem(o.tbody.children(z).eq(a-1)),t=r.indexOf(l)+1),t>=0&&(o._rowDropping=!0,r.pushMove(t,n),o._rowDropping=!1)},autoFitColumns:function(e){var t=this;e=e||t.columns;for(var o=0;o<e.length;o++){var r=e[o];r.columns?t.autoFitColumns(r.columns):t.autoFitColumn(r)}},autoFitColumn:function(t){var r,a,l,n,i,s,c,u,p,g,f=this,b=f.options,_=f.columns,v=f.lockedHeader?kr(f.lockedHeader.find(">table>thead")).filter(Eo).length:0,C="col:not(.k-group-col):not(.k-hierarchy-col)",w="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if((t="number"==typeof t?_[t]:h(t)?m(Ko(_),(function(e){return e===t}))[0]:m(Ko(_),(function(e){return e.field===t}))[0])&&Mo(t)){n=hr(_),c=t.minResizableWidth,r=k(t,n),(a=(l=(i=t.locked)?f.lockedHeader.children("table"):f.thead.parent()).find("[data-index='"+r+"']")).find("a.k-grid-column-menu, a.k-grid-filter-menu");var y=i?f.lockedTable:f.table,S=f.footer||e();f.footer&&f.lockedContent&&(S=i?f.footer.children(".k-grid-footer-locked"):f.footer.children(".k-grid-footer-wrap"));var x=S.find("table").first();f.lockedHeader&&!i&&(r-=v);for(var T=0;T<n.length&&n[T]!==t;T++)n[T].hidden&&r--;b.scrollable?(s=l.find(C).eq(r).add(y.children("colgroup").find(C).eq(r)).add(x.find("colgroup").find(C).eq(r)),i||(u=y.parent(),p=o.scrollLeft(u)),f._hasVirtualColumns()&&(r=k(t,f.virtualCols))):s=y.children("colgroup").find(C).eq(r);var H=l.add(y).add(x);Kt.safari&&a.css("white-space","initial");var R=d(a);s.width(""),H.css("table-layout","fixed"),s.width(rt),H.addClass("k-autofitting"),H.css("table-layout",""),g=d(a);var I=Math.ceil(Math.max(g,d(y.find("tr:not(.k-grouping-row)").eq(0).children(w).eq(r)),d(x.find(vt).eq(0).children(w).eq(r))))+1;if(c&&c>I&&(I=c),s.width(I),t.width=I,Kt.safari&&a.css("white-space",""),b.scrollable){var A,E=l.find("col"),M=0;for(var z=0,D=E.length;z<D;z+=1)if((A=E[z].style.width)&&-1==A.indexOf("%"))M+=parseInt(A,10);else{if(!E.eq(z).hasClass("k-group-col")){M=0;break}M+=parseInt(E.eq(z).width(),10)}M&&H.each((function(){this.style.width=M+_t}))}H.removeClass("k-autofitting"),p&&o.scrollLeft(u,p),f.trigger(qe,{column:t,oldWidth:R,newWidth:I}),f._applyLockedContainersWidth(),f._syncLockedContentHeight(),f._syncLockedHeaderHeight(),f._updateStickyColumns()}},reorderColumn:function(e,o,r){var a,l=this,n=yo(o,l.columns),i=n?n.columns:l.columns,s=k(o,i),d=i[e],c=l.virtualScroll||{},u=!!d.locked,p=ar(l.columns).length,h=m(hr(l.columns),(function(e){return e.groupHeaderColumnTemplate}));if(!l._isStackedMode()&&s!==e&&(o.locked||!u||1!=lr(l.columns).length)&&(!o.locked||u||1!=p)){l._hideResizeHandle(),r===t&&(r=e<s);var g=[o];l._reorderHeader(g,d,r),l.lockedHeader&&(Xo(l.thead),Xo(l.lockedHeader)),d.columns&&(d=(d=hr(d.columns))[r?0:d.length-1]),o.columns&&(g=hr(o.columns)),l._reorderContent(g,d,r),a=(a=!!o.locked)!=u,o.locked=u,i.splice(r?e:e+1,0,o),i.splice(s<e?s:s+1,1),l._updateLockedCols(),l._updateCols(),l._templates(),l._updateColumnCellIndex(),l._updateColumnSorters(),h.length>0&&l._renderGroupRows(),l._updateTablesWidth(),l._applyLockedContainersWidth(),l._syncLockedHeaderHeight(),l._syncLockedContentHeight(),l._updateFirstColumnClass(),l._updateStickyColumns(),c.columns&&l.refresh(),a&&(u?l.trigger(Ge,{column:o}):l.trigger(We,{column:o}))}},_updateColumnCellIndex:function(){var e=0;this.lockedHeader&&(e=Oo(this.lockedHeader.find("thead"),ar(this.columns))),Oo(this.thead,lr(this.columns),e)},lockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&!e.locked&&!e.hidden){e.sticky&&this.unstickColumn(t.indexOf(e));var o=ar(t).length-1;this.reorderColumn(o,e,!1)}},unlockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&e.locked&&!e.hidden){var o=ar(t).length;this.reorderColumn(o,e,!0)}},stickColumn:function(e){var t=this.columns;!(e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])||e.sticky||e.hidden||e.locked&&(this.unlockColumn(t.indexOf(e)),e.locked)||(e.sticky=!0,this._updateStickyColumns())},unstickColumn:function(e){var t=this.columns;(e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&e.sticky&&!e.locked&&!e.hidden&&(this._removeStickyAttributes([e]),this._removeStickyStyles(nr(t)),e.sticky=!1,this._updateStickyColumns(),0===this._anyStickyColumns()&&(this._templates(),this._hasFilterRow()&&this._updateStickyFilterCells()))},cellIndex:function(t){var o=0;const r=this._isStackedMode()?"div.k-grid-stack-cell":"td";return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(o=hr(ar(this.columns)).length),e(t).parent().children(r+":not(.k-group-cell,.k-hierarchy-cell)").index(t)+o},_modelForContainer:function(t){(t=e(t)).is(vt)||"popup"===this._editMode()||(t=t.closest(vt));var r=t.attr(o.attr("uid"))||t.find("[ref='popup-edit-form']").attr(o.attr("uid"));return this.dataSource.getByUid(r)},_calculateColumnIndex:function(t){var o=this.cellIndex(t);var r=0;return this._hasVirtualColumns()&&(r=(r=parseInt(e(t).closest(vt).find("td").first().attr("colspan"),10))>1?r-1:0),o+r},_editable:function(){let r=this,a=r.options.editable,l=o.support.mobileOS,n=!(!r._isMobile&&!l),s=l&&l.ios&&("chrome"===l.browser||"edge"===l.browser);r._isEditableEnabled=r._isEditableEnabled!==t?r._isEditableEnabled:!a.readonly;const d=r._isStackedMode();if(r._isEditableEnabled||r._removeEditableClickHandlers(),a&&r._isEditableEnabled){"incell"===r._editMode()?(r.table.add(r.lockedTable).on(Qe+q,E+">"+M,(function(t){let a=e(t.target);"incell"===r._editMode()&&a.hasClass("k-checkbox")&&a.prev().attr(o.attr("bind"))&&t.preventDefault()})),!1!==a.update&&(Yt&&r.wrapper.on(Ke+q,".k-edit-cell > input[type='checkbox']",(function(t){e(t.target).trigger("focus")})).on(Ke+q,".k-edit-cell",(function(t){e(t.target).is("input")||e(t.currentTarget).find("input[type='checkbox']").trigger("focus")})).on(Qe+q,"tr:not(.k-grouping-row) > td",(function(t){var o=r._editContainer;o&&o[0]&&(e.contains(o[0],t.target)||o[0]===t.target)?r._mousedownOnEditCell=!0:r._mousedownOnEditCell=!1})),r.editableUserEvents=new o.UserEvents(r.wrapper,{filter:d?".k-grid-stack-row:not(.k-grouping-row) div.k-grid-stack-cell":"tr:not(.k-grouping-row) > td",allowSelection:!0,preventDefault:s,supportDoubleTap:n,fastTap:n,[n?"doubleTap":"tap"]:function(t){var o=e(t.target),a=r.lockedTable&&o.closest("table")[0]===r.lockedTable[0];if(r._mousedownOnEditCell=!1,o.hasClass("k-hierarchy-cell")||o.hasClass("k-detail-cell")||o.hasClass("k-group-cell")||o.hasClass("k-edit-cell")||o.hasClass("k-drag-cell")||o.hasClass("k-grid-stack-edit-cell")||o.has(".k-grid-remove-command").length||o.closest("tbody")[0]!==r.tbody[0]&&!a||e(t.target).is(":input"))return;let l;d&&(l=o.parent().children().index(o)),r.editable?r.editable.end()?(e(i()).trigger("blur"),r.closeCell(),r._requestInProgress||r.editCell(o,l)):r._scrollVirtualWrapper():r.editCell(o,l)}}),r.wrapper.on("focusin"+q,(function(){e.contains(this,i())||(clearTimeout(r.timer),r.timer=null)})).on("focusout"+q,(function(t){var o=!0;(Yt&&r._mousedownOnEditCell||r._virtualColScroll)&&(o=!1),r._mousedownOnEditCell=!1,o&&(r.timer=setTimeout((function(){!function(){let t=i(),o=r._editContainer;o&&o[0]&&!e.contains(o[0],t)&&o[0]!==t&&!e(t).closest(".k-animation-container").length&&(r.editable.end()?(r.closeCell(),r._toggleToolbarEditingItemsVisibility()):r._scrollVirtualWrapper())}()}),1))})))):!1!==a.update&&(r._editCommandClickHandler=r._editCommandClick.bind(r),r.wrapper.on(Ke+q,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command",r._editCommandClickHandler),r._isVirtualInlineEditable()&&r.wrapper.on("focusout"+q,"tr:not(.k-grouping-row) > td",(function(){r.editable&&!r.editable.end()&&r._scrollVirtualWrapper()}))),r._removeCommandClickHandler=r._removeCommandClick.bind(r),r.wrapper.on(Ke+q,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command",r._removeCommandClickHandler)}},_getLastSelectedItemModel:function(){const e=this;if(!e.options.selectable)return;const t=e.getSelectedData();if(!t||!t.length)return;const o=t[t.length-1];return e.dataSource.getByUid(o.uid)},_removeToolbarClick:function(e){e.event?(e.event.preventDefault(),e.event.stopPropagation()):e.preventDefault();const t=this;const r=this._getLastSelectedItemModel();if(!r)return;const a=t.tbody.children("["+o.attr("uid")+"="+r.uid+"]");t.removeRow(a),t.one(oe,(()=>{t._toggleToolbarEditingItemsVisibility()}))},_editToolbarClick:function(e){e.event?(e.event.preventDefault(),e.event.stopPropagation()):e.preventDefault();if("incell"===this._editMode())return;const t=this._getLastSelectedItemModel();t&&this.editRow(t)},_editCommandClick:function(t){let o=e(t.currentTarget);this._belongsToGrid(o)&&(t.preventDefault(),this.editRow(o.closest(vt)))},_removeCommandClick:function(t){let o=this,r=o.options.editable,a=e(t.currentTarget);o._belongsToGrid(a)&&(!1!==r.destroy?(t.preventDefault(),t.stopPropagation(),o.removeRow(a.closest(vt))):(t.stopPropagation(),o._confirmation()||t.preventDefault()),o._toggleToolbarEditingItemsVisibility())},editCell:function(t,o){t=e(t);let r=this,a=0===o||o?o:r._calculateColumnIndex(t),l=hr(r.columns)[a],n=r._modelForContainer(t);const i=r._isStackedMode();const s=i?"k-grid-stack-edit-cell":"k-edit-cell";r.closeCell();const d=i?t.find(".k-grid-stack-content"):t;if(n&&qr(l,n)&&!l.command){if(r.trigger(G,{model:n}))return;r._attachModelChange(n),r._editContainer=d,r._shouldClearEditableState&&r._clearEditableState(),t.addClass(s);const e=(r._isVirtualIncellEditable()||r._hasVirtualColumns())&&r._editableState;r.editable=d.kendoEditable({fields:br(l,r._isAdaptive()?"auto":"none"),model:n,size:r.options.size,target:r,change:function(e){r.trigger(W,{values:e.values,container:t,model:n})&&e.preventDefault()},skipFocus:e}).data("kendoEditable");let o=t.closest(vt);i||o.addClass("k-grid-edit-row"),!0!==n.new||i||(o.addClass("k-grid-add-row"),delete n.new),r.lockedContent&&(Fr(o[0],r._relatedRow(o).addClass("k-grid-edit-row")[0]),o.hasClass("k-grid-add-row")&&r._relatedRow(o).addClass("k-grid-add-row"),r._syncLockedScroll()),r.trigger(V,{container:t,model:n}),r._toggleToolbarEditingItemsVisibility()}},enableEditing:function(){let e=this,t=e.wrapper.find(".k-grid-toolbar");if(!e._isEditableEnabled){e._isEditableEnabled=!0,e._editable();let o=t.find(".k-grid-add").getKendoButton();let r=t.find(".k-grid-edit-command").getKendoButton();let a=t.find(".k-grid-remove-command").getKendoButton();let l=t.find(".k-grid-cancel-changes").getKendoButton();let n=t.find(".k-grid-save-changes").getKendoButton();let i=t.find(".k-grid-cancel-command").getKendoButton();let s=t.find(".k-grid-save-command").getKendoButton();o&&o.bind("click",e._createClickHandler),r&&r.bind("click",e._editClickHandler),a&&a.bind("click",e._destroyClickHandler),l&&l.bind("click",e._cancelClickHandler),n&&n.bind("click",e._saveClickHandler),i&&i.bind("click",e._editCancelClickHandler),s&&s.bind("click",e._updateClickHandler)}e._toggleToolbarEditingItemsVisibility()},disableEditing:function(){let e=this;e._isEditableEnabled&&("incell"===e._editMode()?e.closeCell():e.cancelRow(),e._clearEditableState(),e._destroyEditable(),e.editableUserEvents&&(e.editableUserEvents.destroy(),e.editableUserEvents=null),e._removeEditableClickHandlers(),e._isEditableEnabled=!1,e._toggleToolbarEditingItemsVisibility())},_removeEditableClickHandlers:function(){let e=this,t=e.wrapper.find(".k-grid-toolbar");e.wrapper.off(Ke+q,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command",e._editCommandClickHandler),e.wrapper.off(Ke+q,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command",e._removeCommandClickHandler),t.off(Ke+q,".k-grid-add",e._createClickHandler),t.off(Ke+q,".k-grid-edit-command",e._editClickHandler),t.off(Ke+q,".k-grid-remove-command",e._destroyClickHandler);let o=t.find(".k-grid-add").getKendoButton();let r=t.find(".k-grid-edit-command").getKendoButton();let a=t.find(".k-grid-remove-command").getKendoButton();let l=t.find(".k-grid-cancel-changes").getKendoButton();let n=t.find(".k-grid-save-changes").getKendoButton();let i=t.find(".k-grid-cancel-command").getKendoButton();let s=t.find(".k-grid-save-command").getKendoButton();o&&o.unbind("click"),r&&r.unbind("click"),a&&a.unbind("click"),l&&l.unbind("click"),n&&n.unbind("click"),i&&i.unbind("click"),s&&s.unbind("click"),e._editCommandClickHandler=null,e._removeCommandClickHandler=null},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent();var r=e[0].offsetWidth>t[0].clientWidth?o.support.scrollbar():0;this.lockedContent.height(t[0].offsetHeight-r)},_syncLockedScroll:function(){this.lockedContent[0].scrollTop=this.content[0].scrollTop,this.virtualScrollable&&(this.lockedContent[0].scrollTop=this.wrapper.find(".k-virtual-scrollable-wrap")[0].scrollTop)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children("table");var t=this.thead.parent();this._adjustRowsHeight(e,t),function(e,t){if(e=e[0],t=t[0],e.rows.length!==t.rows.length){var o=e.offsetHeight;var r=t.offsetHeight;var a;var l;o>r?(a=t.rows[t.rows.length-1],qt.test(a.className)&&(a=t.rows[t.rows.length-2]),l=o-r):(a=e.rows[e.rows.length-1],qt.test(a.className)&&(a=e.rows[e.rows.length-2]),l=r-o),a.style.height=a.offsetHeight+l+_t}}(e,t)}},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){let e=this;const t=e._editContainer&&e._editContainer.length&&e._editContainer.closest(".k-window").length?"kendoWindow":"kendoActionSheet";let o=function(){if(e.editable){let o=e.editView?e.editView.element:e._editContainer;let r=e._editContainer.data(t);o&&(r&&(o=r.wrapper),o.off(Ke+q,".k-grid-cancel-command, button[ref-cancel-button], [ref-actionsheet-action-button]:not(.k-button-solid-primary)",e._editCancelClickHandler),o.off(Ke+q,".k-grid-save-command, button[ref-update-button], [ref-actionsheet-action-button].k-button-solid-primary",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,r&&r.destroy(),e._editContainer=null,e._destroyEditView(),e._editableIsClosing=null}};e.editable&&("popup"!==e._editMode()||e._isMobile?o():e._editableIsClosing?e._editContainer.data(t).bind("deactivate",o):(e._editableIsClosing=!0,e._editContainer.data(t).bind("deactivate",o).close())),e._confirmDialog&&(e._confirmDialog.close(),e._confirmDialog.destroy(),e._confirmDialog=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,o=e._modelForContainer(t);o&&o.unbind(X,e._modelChangeHandler)},closeCell:function(e){let t,o,a,l,n=this,i=n._editContainer;if(!i)return;if(a=n._modelForContainer(i),e&&n.trigger("cancel",{container:i,model:a}))return;const s=n._isStackedMode();const d=s?"k-grid-stack-edit-cell":"k-edit-cell";const c=i.closest(x+d);n.trigger(Y,{type:e?"cancel":"save",model:a,container:i});const u=s?c.parent().children().index(c):n._calculateColumnIndex(i);if(s?c.removeClass(d):i.removeClass(d),t=hr(n.columns)[u],l=n.editable&&n.editable.validatable&&n.editable.validatable.errors(),e&&a.dirtyFields&&a.dirtyFields[t.field]&&l.length&&delete a.dirtyFields[t.field],o=i.closest(vt).removeClass("k-grid-edit-row"),o.hasClass("k-grid-add-row")&&o.removeClass("k-grid-add-row"),n.lockedContent){const e=n._relatedRow(o);e.removeClass("k-grid-edit-row"),e.hasClass("k-grid-add-row")&&e.removeClass("k-grid-add-row")}if(n._destroyEditable(),n._displayCell(i,t,a),n._shouldClearEditableState&&n._clearEditableState(),n.trigger("itemChange",{item:o,data:a,ns:r}),n._activeStackedCell&&n._setCurrentStackedCell(i),n.lockedContent){const e=o&&o.data("uid");const t=(n._cachedRowsHeight&&n._cachedRowsHeight[e])??"";Fr(o.css(tt,t)[0],n._relatedRow(o).css(tt,t)[0])}},_displayCell:function(e,t,r){var a={storage:{},count:0},l=g({},o.Template,this.options.templateSettings),n=o.template(this._cellTmpl(t,a),l);a.count>0&&(n=n.bind(a.storage)),e.empty().html(n(r))},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(o){var r,a,l,n=this,i=n._editMode();"incell"!==i&&n.cancelRow(),o=e(o),n.lockedContent&&(o=o.add(n._relatedRow(o))),o=o.hide(),n.dataSource._isGroupPaged()&&n._removeGroupIfEmpty(o),(r=n._modelForContainer(o))!=t&&r.hasOwnProperty("_isMoved")&&delete r._isMoved,r&&!n.trigger($,{row:o,model:r})?(l=n.dataSource.options.schema,n._selectedIds&&l&&l.model&&(a=r[n._getSchemaIdField()],delete n._selectedIds[a]),n.dataSource.remove(r),"inline"!==i&&"popup"!==i||n.dataSource.sync()):"incell"===i&&n._destroyEditable()},_editMode:function(){let e="incell",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){let r,a=this;t instanceof l?r=t:(t=e(t),r=a._modelForContainer(t));let n=a._editMode();let i;if(a.cancelRow(),r){if(t=a.tbody.children("["+o.attr("uid")+"="+r.uid+"]"),a._attachModelChange(r),"popup"===n)a._createPopupEditor(r);else if("inline"===n)a._createInlineEditor(t,r);else if("incell"===n){const o=a._isStackedMode();(o?t.find(".k-grid-stack-cell:not(.k-command-cell):not(.k-drag-cell)"):t.children(R)).each((function(){let t=e(this);const l=o?t.parent().children().index(t):a._calculateColumnIndex(t);let n=hr(a.columns)[l];if(r=a._modelForContainer(t),r&&(!r.editable||r.editable(n.field))&&n.field&&!n.selectable&&!n.draggable)return a.editCell(t,l),!1}))}i=a.editView?a.editView.element:"popup"===n?a._editContainer.parent():a._editContainer,i&&(this._editCancelClickHandler||(this._editCancelClickHandler=this._editCancelClick.bind(this)),i.on(Ke+q,".k-grid-cancel-command, button[ref-cancel-button], [ref-actionsheet-action-button]:not(.k-button-solid-primary)",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=this._editUpdateClick.bind(this)),i.on(Ke+q,".k-grid-save-command, button[ref-update-button], [ref-actionsheet-action-button].k-button-solid-primary",this._editUpdateClickHandler)),a._toggleToolbarEditingItemsVisibility()}},_editUpdateClick:function(t){t.preventDefault(),t.stopPropagation?t.stopPropagation():t.event&&t.event.stopPropagation&&t.event.stopPropagation();const o=e(t.currentTarget);const r=this.editable?.validatable;r?.one("validate",(()=>{const e=r?.errors()?.length;o.is("[ref-update-button]")&&!e&&(o.addClass("k-disabled"),o.attr("aria-disabled",!0))})),this.saveRow(),this._preventOnCloseEditableChanges="popup"===this._editMode(),this.one(oe,(()=>{this._toggleToolbarEditingItemsVisibility()}))},_editCancelClick:function(t){var o=this;var r=o.options.navigatable;var a=o.editable.options.model;var l=o.editView?o.editView.element:o._editContainer;if(t.preventDefault(),t.stopPropagation?t.stopPropagation():t.event&&t.event.stopPropagation&&t.event.stopPropagation(),!o.trigger("cancel",{container:l,model:a})){var n=o.items().index(e(o.current()).parent());o.cancelRow(),r&&(o._setCurrent(o.items().eq(n).children().filter(M).first()),Pr(o.table,!0)),this._toggleToolbarEditingItemsVisibility()}},_editFields:function(e,t){var o=[];var r;for(var a=0;a<e.length;a++)(r=e[a]).selectable||r.command||qr(r,t)&&o.push(br(r,this._isAdaptive()?"auto":"none"));return o},_createPopupEditor:function(t){var a=this;var l="<div "+o.attr("uid")+'="'+t.uid+'" ref="popup-edit-form"><'+(a._isMobile?'ul class="k-edit-form-container k-listgroup k-listgroup-flush">':'div class="k-edit-form-container">');var n;var i;var s;var d;var c;var u;var p;var f;var m;var b;var k=hr(a.columns);var _;var v=o.guid();var w=a.options.editable;var y=w.template;var S=h(w)?w.window:{};var x=g({},o.Template,a.options.templateSettings);var T;var H;const R=a._isAdaptive();if(!a.trigger(G,{model:t})){if(S=S||{},y)for(typeof y===nt&&(y=o.unescape(y)),l+=o.template(y,x)(t),s=0,d=k.length;s<d;s++)(n=k[s]).command&&(b=Lr(n.command,"edit"))&&(i=b);else for(s=0,d=k.length;s<d;s++)(n=k[s]).selectable||(n.command?n.command&&(b=Lr(n.command,"edit"))&&(i=b):a._isMobile&&(l+='<li class="k-item k-listgroup-item">',qr(n,t)?(l+='<label class="k-label k-listgroup-form-row">',l+='<span class="k-item-title k-listgroup-form-field-label">'+(n.title&&(a.options.encodeTitles?Qr(n.title,!0):n.title)||n.field||"")+"</span>",l+='<div class="k-listgroup-form-field-wrapper" id="'+n.field+"_"+v+'" '+o.attr("container-for")+'="'+n.field+'"></div>',l+="</label>"):(T={storage:{},count:0},c=o.template(a._cellTmpl(n,T),x),T.count>0&&(c=c.bind(T.storage)),l+='<label class="k-label k-listgroup-form-row k-no-click">',l+='<span class="k-item-title k-listgroup-form-field-label">'+(n.title&&(a.options.encodeTitles?Qr(n.title,!0):n.title)||n.field||"")+"</span>",l+='<span class="k-no-editor k-listgroup-form-field-wrapper">'+c(t)+"</span>",l+="</label>"),l+="</li>"));if(i&&h(i)&&(h(i.text)&&(u=i.text.update,p=i.text.cancel),h(i.iconClass)&&(f=i.iconClass.update,m=i.iconClass.cancel),i.attr&&(_=i.attr)),a._isMobile){l+="</ul></div>";let e=C(a.options.messages.commands.cancel);let t=C(a.options.messages.commands.update);a.editView=a.pane.append("<div data-"+o.ns+'role="view" class="k-grid-edit-form"><div data-'+o.ns+' class="k-appbar k-appbar-primary">'+o.html.renderButton(`<button class="k-header-cancel k-grid-cancel-command" title="${e}" aria-label="${e}"></button>`,{fillMode:"flat",icon:"chevron-left"})+'<span class="k-spacer"></span>'+`<span>${C(a.options.messages.commands.edit||"Edit")}</span><span class="k-spacer"></span>`+o.html.renderButton(`<button class="k-header-done k-grid-save-command" title="${t}" aria-label="${t}"></button>`,{fillMode:"flat",icon:"check"})+"</div><div data-"+o.ns+'role="content" class="'+Jt+'">'+l+"</div></div>"),H=a._editContainer=a.editView.element.find("[ref='popup-edit-form']")}else{let o=e(a._createButton({name:"update",text:u,attr:_,iconClass:f,size:"medium",skipCommandClass:!0})).attr("ref-update-button","");let r=e(a._createButton({name:"canceledit",text:p,attr:_,iconClass:m,size:"medium",skipCommandClass:!0})).attr("ref-cancel-button","");l+="</div>",H=a._editContainer=R?e(l).appendTo("body").eq(0).kendoActionSheet({modal:!0,adaptive:!0,title:t.id?"Edit record":"Add new record",fullscreen:a.smallMQL.mediaQueryList.matches,closeButton:!0,actionButtons:[{text:"Cancel",icon:"cancel"},{text:"Save",icon:"save",themeColor:"primary"}],open:function(e){e.sender.element.removeClass("k-popup"),a.editable.element.focus()},close:function(o){if(o.sender.element.trigger("focus"),a._preventOnCloseEditableChanges||!a.trigger("cancel",{container:H,model:t})){var r=a.items().index(e(a.current()).parent());a._preventOnCloseEditableChanges||(a._editableIsClosing=!0,a.cancelRow(!1,!0)),a.options.navigatable&&(a._isStackedMode()?a._setCurrentStackedCell():(a._setCurrent(a.items().eq(r).children().filter(M).first()),Pr(a.table,!0))),a._toggleToolbarEditingItemsVisibility()}else o.preventDefault()}}):e(l).appendTo(a.wrapper).eq(0).kendoWindow(g({modal:!0,resizable:!1,draggable:!0,title:a.options.messages.commands.edit||"Edit",_footerTemplate:()=>'<div class="k-actions k-actions-start k-actions-horizontal k-window-actions">'+o[0].outerHTML+r[0].outerHTML+"</div>",visible:!1,close:function(o){if(o.userTriggered){if(o.sender.element.trigger("focus"),a.trigger("cancel",{container:H,model:t}))return void o.preventDefault();var r=a.items().index(e(a.current()).parent());a._editableIsClosing=!0,a.cancelRow(),a._toggleToolbarEditingItemsVisibility(),a._isStackedMode()?a._setCurrentStackedCell():(a._setCurrent(a.items().eq(r).children().filter(M).first()),Pr(a.table,!0))}}},S))}y||a._isMobile?(a.editable=a._editContainer.kendoEditable({fields:a._isMobile&&!y?a._editFields(k,t):null,model:t,clearContainer:!1,target:a,skipFocus:!0}).data("kendoEditable"),R&&a.editable.element.find(".k-edit-form-container").removeClass("k-edit-form-container")):(a.editable=new r.Form(a._editContainer.find(".k-edit-form-container"),{items:a._editFields(k,t),buttonsTemplate:()=>"",formData:t,size:a._isAdaptive()?"large":"medium"}).editable,a._editContainer.append(undefined),R&&a.editable.element.removeClass("k-edit-form-container")),a._openPopUpEditor(R),a.trigger(V,{container:H,model:t})}},_openPopUpEditor:function(e){var t=this;const o=e?"kendoActionSheet":"kendoWindow";var r=t._editContainer?t._editContainer.data(o):null;var a=(t.options.editable||{}).window||{};this._isMobile?this.pane.navigate(this.editView,this._editAnimation):r&&(e||a.position?e&&r.fullscreen(t.smallMQL.mediaQueryList.matches):r.center(),r.open())},_createInlineEditor:function(t,r){var a=this;var l;var n;var i;var s=[];const d=a._isStackedMode();if(a.trigger(G,{model:r}))return;a.lockedContent&&(t=t.add(a._relatedRow(t)));let c=d?t.children(":not(.k-group-cell,.k-hierarchy-cell)").find(".k-grid-stack-cell:not(.k-drag-cell)"):t.children(":not(.k-group-cell,.k-hierarchy-cell,.k-drag-cell)");const u=hr(d?zo(a.columns):a.columns);a.options.navigatable&&d&&function(e){e.removeAttr(at)}(c),c.each((function(){if(n=e(this),l=u[a._calculateColumnIndex(n)])if(!l.command&&qr(l,r)){s.push(br(l,a._isAdaptive()?"auto":"none"));let e=d?n.children(".k-grid-stack-content"):n;e.attr(o.attr("container-for"),l.field),e.empty()}else if(l.command){var t,c,p,g,f;if(i=Lr(l.command,"edit"))n.empty(),h(i)&&(h(i.text)&&(t=i.text.update,c=i.text.cancel),h(i.iconClass)&&(p=i.iconClass.update,g=i.iconClass.cancel),i.attr&&(f=i.attr)),e(a._createButton({name:"update",text:t,attr:f,iconClass:p,skipTabIndex:!0})+a._createButton({name:"canceledit",text:c,attr:f,iconClass:g,skipTabIndex:!0})).appendTo(n)}})),a._editContainer=t,a._editContainer.addClass("k-grid-edit-row"),!0===r.new&&(a._editContainer.addClass("k-grid-add-row"),delete r.new),a._shouldClearEditableState&&a._clearEditableState(),a.editable=new o.ui.Editable(a._editContainer,{target:a,fields:s,size:a.options.size,model:r,skipFocus:a._isVirtualInlineEditable()&&a._editableState&&!!a._editableState.field||a._hasVirtualColumns(),clearContainer:!1}),t.length>1&&(Fr(t[0],t[1]),a._applyLockedContainersWidth(!0)),d&&c.addClass("k-grid-stack-edit-cell"),a.trigger(V,{container:t,model:r})},cancelRow:function(e){var t,r=this,a=r._editContainer;if(a){if(!(t=r._modelForContainer(a))||e&&r.trigger("cancel",{container:a,model:t}))return;r._destroyEditable(),r.dataSource.cancelChanges(t),r._clearEditableState(),"popup"!==r._editMode()?r._displayRow(a):r._displayRow(r.tbody.find("["+o.attr("uid")+"="+t.uid+"]")),r._aria()}},saveRow:function(){var t=this;var o=this._editContainer;var r=this._modelForContainer(o);var a=e.Deferred();var l;return o&&this.editable?!(l=t.editable&&t.editable.end())||this.trigger(W,{container:o,model:r})?(l||t._scrollVirtualWrapper(),a.reject().promise()):(t._clearEditableState(),this.dataSource.sync()):a.resolve().promise()},_displayRow:function(t){var a,l,n,i=this,s=i._modelForContainer(t),d=t.hasClass(ve),c=t.hasClass("k-table-alt-row");s&&(i.lockedContent&&(a=e((c?i.lockedAltRowTemplate:i.lockedRowTemplate)(s)),o.applyStylesFromKendoAttributes(a,["display"]),i._relatedRow(t.last()).replaceWith(a)),l=e((c?i.altRowTemplate:i.rowTemplate)(s)),t.is(":visible")||l.hide(),o.applyStylesFromKendoAttributes(l,["display"]),i._anyStickyColumns()&&o.applyStylesFromKendoAttributes(l,["left","right"]),t.replaceWith(l),i.trigger("itemChange",{item:l,data:s,ns:r}),a&&a.length&&i.trigger("itemChange",{item:a,data:s,ns:r}),d&&(i.options.selectable||i._checkBoxSelection)&&i.select(l.add(a)),a&&Fr(l[0],a[0]),(n=l.next()).hasClass("k-detail-row")&&n.is(":visible")&&o.ui.icon(l.find(".k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon"),{icon:"caret-alt-down"}))},_showMessage:function(t,r){var a=this;return a._isMobile?((a._confirmDialog=new o.ui.Confirm(e("<div />").appendTo(document.body),{modal:{preventScroll:!0},closable:!1,title:!1,content:t.title,messages:{okText:t.confirmDelete,cancel:t.cancelDelete},open:function(){a.content&&(a.content.data(ht,a.content.css(ht)),a.content.css(ht,"hidden"))},close:function(){a.content&&a.content.css(ht,a.content.data(ht))}})).result.done((function(){a._removeRow(r)})).fail((function(){var e=a._confirmDialog;e&&(e.close(),e.destroy())})),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,o=t.options.editable,r=!0===o||typeof o===nt?t.options.messages.editable.confirmation:o.confirmation;return h(o)&&typeof o.mode===nt&&typeof r!==lt&&typeof r!==nt&&!1!==r&&(r=t.options.messages.editable.confirmation),!1===r||null==r||(typeof r===lt&&(r=r(t._modelForContainer(e))),t._showMessage({confirmDelete:o.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:o.cancelDelete||t.options.messages.editable.cancelDelete,title:!0===r?t.options.messages.editable.confirmation:r},e))},cancelChanges:function(){var e=this;e._cachedRowsHeight&&(e._mapCachedRowsHeight("getByUid","id"),e._shouldMapHights=!0),e.dataSource.cancelChanges(),e._isVirtualEditable()&&e._virtualPageToTop((function(){e.virtualScrollable.scrollToTop()}))},saveChanges:function(){var e=this;var t=e.editable&&e.editable.end();!t&&e.editable||e.trigger(te)?t||e._scrollVirtualWrapper():e.dataSource.sync()},addRow:function(){var e,t=this,o=t.dataSource,r=t._editMode(),a=t.options.editable.createAt||"",l=o.pageSize(),n=o.view()||[];var i=a.toLowerCase()===it;var s;var d=t._isVirtualEditable();t.editable&&t.editable.end()||!t.editable?("incell"!=r&&t.cancelRow(),e=o.indexOf(n[0]),i&&(e+=n.length,l&&!o.options.serverPaging&&l<=n.length&&(e-=1)),e<0&&(e=o.page()>o.totalPages()?(o.page()-1)*l:0),t.options.navigatable&&"incell"==r&&t._removeCurrent(),d?t._virtualAddRow():((s=o.insert(e,{})).new=!0,t._editModel(s))):t._scrollVirtualWrapper()},_editModel:function(e){var t=this;var r=t.options.editable.createAt||"";var a=t._editMode();if(e){var l=e.uid,n=(t.lockedContent?t.lockedTable:t.table).find("tr["+o.attr("uid")+"="+l+"]");const i=t._isStackedMode()?n.find("td:not(.k-group-cell,.k-hierarchy-cell) .k-grid-stack-cell:not(.k-drag-cell):not(.k-command-cell)"):n.children("td:not(.k-group-cell,.k-hierarchy-cell,.k-drag-cell)");const s=t._firstEditableColumnIndex(n);const d=i.eq(s);"inline"===a&&n.length?t.editRow(n):"popup"===a?t.editRow(e):d.length&&t.editCell(d,s),"bottom"==r.toLowerCase()&&t.lockedContent&&(t.lockedContent[0].scrollTop=t.content[0].scrollTop=t.table[0].offsetHeight)}},_virtualAddRow:function(){var e=this;var t=(e.options.editable.createAt||"").toLowerCase()===it;e._clearEditableState(),t?e._virtualAddRowAtBottom():e._virtualAddRowAtTop()},_virtualAddRowAtTop:function(){var e=this;var t=e.dataSource;var o=e.virtualScrollable;var r;1===t.page()?((r=t.insert(0,{})).new=!0,e._editModel(r),o.scrollToTop()):e._virtualPageToTop((function(){(r=t.insert(0,{})).new=!0,e._editModel(r),o.scrollToTop()}))},_virtualAddRowAtBottom:function(){var e=this;var t=e.dataSource;var o=e.virtualScrollable;var r=t.total();var a;t.at(r-1)instanceof l?((a=t.insert(r,{})).new=!0,e._virtualPageToBottom((function(){e._editModel(a),o.scrollToBottom()}))):e._virtualPageToBottom((function(){(a=t.insert(r,{})).new=!0,e._editModel(a),o.scrollToBottom()}))},_virtualPageToTop:function(e){this._virtualPage(0,this.dataSource.take(),(function(){e()}))},_virtualPageToBottom:function(e){var t=this.dataSource;var o=t.take();var r=t.total();var a=r>o?r-o:0;this._virtualPage(a,o,(function(){e()}))},_virtualPage:function(e,t,o){var r=this;r._isVirtualEditable()&&(r.virtualScrollable._preventScroll=!0,r.virtualScrollable._page(e,t,o))},_firstEditableColumnIndex:function(e){var t,o,r,a=hr(this.columns),l=this._modelForContainer(e);for(o=0,r=a.length;o<r;o++)if(t=a[o],l&&(!l.editable||l.editable(t.field))&&!t.command&&t.field&&!0!==t.hidden)return o;return-1},_clickAdd:function(e){e.preventDefault&&e.preventDefault(),this.addRow(),this._toggleToolbarEditingItemsVisibility()},_clickCancel:function(e){e.preventDefault&&e.preventDefault(),this.cancelChanges(),this._toggleToolbarEditingItemsVisibility()},_clickExcel:function(t){var o=this;var r=e.Deferred();t.preventDefault&&t.preventDefault(),o._isExport=!0,o._progress(!0),setTimeout((()=>{o.saveAsExcel(r),r.always((()=>{o._progress(!1),o._isExport=!1}))}),1)},_clickPdf:function(e){var t=this;e.preventDefault&&e.preventDefault(),t._isExport=!0,t._pdfInitialized=!0,t._progress(!0);var o=t.saveAsPDF();o?o.done((function(){t._progress(!1),t._isExport=!1,t._pdfInitialized=!1})):(t._progress(!1),t._isExport=!1,t._pdfInitialized=!1)},_clickSave:function(e){e.preventDefault&&e.preventDefault(),this.saveChanges(),this.one(oe,(()=>{this._toggleToolbarEditingItemsVisibility()}))},_searchInput:function(e){var t=this,o=e.currentTarget;clearTimeout(t._searchTimeOut),t._searchTimeOut=setTimeout((function(){t._searchTimeOut=null;var e=t.options;var r=e.search?e.search.fields:null;var a={filters:[],logic:"or"};var l=o.value;if(r||(r=gr(e.columns)),t.dataSource.options.endless&&(t.dataSource.options.endless=null,t._endlessPageSize=t.dataSource.options.pageSize),l)for(var n=0;n<r.length;n++)t._pushExpression(a.filters,r[n],l);else a={};t.dataSource.filter(a)}),300)},_pasteToolbarDropDown:function(){var e=this;e.wrapper.find(".k-grid-paste-action").length&&(e.pasteActionsDropDownList=e.wrapper.find(".k-grid-paste-action").kendoDropDownList({dataSource:[{value:"insert",text:"Paste (Insert)"},{value:"replace",text:"Paste (Replace)"}],dataTextField:"text",dataValueField:"value",_allowFilterPaste:!1}).data("kendoDropDownList"))},_pushExpression:function(e,t,r){var a=this,l=a.dataSource.options.serverFiltering,n={string:"contains",number:"gte",date:"gte",enums:"eq",boolean:"eq"},i=t.name||t,s=t.operator,d=a.dataSource.reader.model&&a.dataSource.reader.model.fields,c=d&&d[i],u=c&&c.parse,p={field:i,operator:s||n.string,value:r};(s||l)&&c&&o.isFunction(u)&&null!==u(r)&&g(p,{operator:s||n[c.type],value:u(r)}),l&&c&&o.isFunction(u)&&null===u(r)||e.push(p)},_hasTool:function(e){const t=this.wrapper.find(`.k-grid-toolbar ${e}`);return{present:t.length>0,tool:t}},_initToolbarItemsPopups:function(){const e=this;const t=e._hasTool(".k-toolbar-button.k-grid-column-menu[ref-toolbar-tool]");const o=e._hasTool(".k-toolbar-button.k-grid-sort-tool[ref-toolbar-tool]");const r=e._hasTool(".k-toolbar-button.k-grid-filter-tool[ref-toolbar-tool]");const a=e._hasTool(".k-toolbar-button.k-grid-column-chooser[ref-toolbar-tool]");const l=e._hasTool(".k-toolbar-button.k-grid-group-tool[ref-toolbar-tool]");if(t.present&&e._globalColumnsMenu(t.tool),a.present&&e._columnChooserTool(a.tool),o.present&&(e._toggleBadge(o.tool,e.dataSource.sort()),e._sortToolbarTool(o.tool)),r.present&&(e._toggleBadge(r.tool,e.dataSource.filter()),e._filterToolbarTool(r.tool)),l.present){const t=e.dataSource.group();e._toggleBadge(l.tool,t&&t.length),e._groupToolbarTool(l.tool)}},_unbindToolbarTools:function(){this.wrapper.find("\n                .k-toolbar-button.k-grid-column-menu[ref-toolbar-tool],\n                .k-toolbar-button.k-grid-sort-tool[ref-toolbar-tool],\n                .k-toolbar-button.k-grid-filter-tool[ref-toolbar-tool],\n                .k-toolbar-button.k-grid-column-chooser[ref-toolbar-tool],\n                .k-toolbar-button.k-grid-group-tool[ref-toolbar-tool],\n                .k-toolbar-button.k-grid-ai-assistant-tool[ref-toolbar-tool]\n            ").each((function(){e(this).off("click"+q)}))},_ai:function(){const e=this;const t=e._hasTool(".k-toolbar-button.k-grid-ai-assistant-tool[ref-toolbar-tool]");t.present&&e._initAiAssistantWindow(t.tool)},_toolbar:function(){var t,r,a=this,l=a.wrapper,n=a.options.toolbar;if(n){if(a._createClickHandler=a._addClickHandler=a._clickAdd.bind(a),a._editClickHandler=a._editToolbarClick.bind(a),a._destroyClickHandler=a._removeToolbarClick.bind(a),a._editCancelClickHandler=a._editCancelClick.bind(a),a._updateClickHandler=a._editUpdateClick.bind(a),a._cancelClickHandler=a._clickCancel.bind(a),a._saveClickHandler=a._clickSave.bind(a),a._excelClickHandler=a._clickExcel.bind(a),a._pdfClickHandler=a._clickPdf.bind(a),a._serachHandler=a._searchInput.bind(a),(t=a.wrapper.find(".k-grid-toolbar")).length?a._attachToolbarClicks():(t=e('<div class="k-grid-toolbar k-toolbar" />').prependTo(l),typeof n===nt||v(n)?(typeof n===nt&&(n=o.template(n).bind(a)),t.html(n({grid:a})),a._attachToolbarClicks()):b(n)?(r=a._processItems(n),t.kendoToolBar({navigateOnTab:!a.options.navigatable,size:a.options.size,items:r})):h(n)&&t.kendoToolBar({navigateOnTab:!a.options.navigatable,size:a.options.size,items:a._processItems(n.items||[]),overflow:n.overflow})),a._checkBoxSelection&&t.on(Ke+q,".k-select-checkbox",a._headerCheckboxClick.bind(a)),t.on(ct+q,".k-grid-search input",this._serachHandler),n.overflow&&"section"===n.overflow.mode){const e=t.data("kendoToolBar");e.bind("overflowOpen",(function(){const t=e.overflowSection.element.find(".k-toolbar-items-list");a._toggleToolbarEditingItemsVisibility(t?.children(ao))}))}a._toggleToolbarEditingItemsVisibility()}},_toggleToolbarEditingItemsVisibility:function(t){const r=this;const a=r.dataSource.hasChanges();const l=r.wrapper.find(".k-grid-toolbar");if(!l.length)return;let n;n=r.options.toolbar&&r.options.toolbar.overflow&&"scroll"===r.options.toolbar.overflow.mode?l.find(".k-toolbar-items").children(ao):t||l.children(ao);const i=r.options.toolbar&&r.options.toolbar.showInactiveTools||!1;const s=r._editMode();const d=r._editContainer&&r._editContainer.length>0&&r._editContainer.is(":visible");const c=i?e=>{e.attr("aria-disabled",!0),e.addClass("k-disabled")}:e=>e.hide();const u=r.select();const p=u.length>0;const h=p&&r._editContainer&&r._editContainer.length>0&&r._editContainer.is(":visible")&&r._editContainer[0].getAttribute(o.attr("uid"))!==u[u.length-1].getAttribute(o.attr("uid"));const g=function({mode:e,hasSelected:t,hasChanges:o,editContainerVisible:r,differentSelectionThanEditing:a,_editableIsClosing:l,_isEditableEnabled:n,options:i}){const s=/\b(k-grid-edit-command|k-grid-remove-command|k-grid-save-changes|k-grid-cancel-changes|k-grid-cancel-command|k-grid-save-command)\b/;const d=[];if(!n||!i.editable)return s;t||(d.push("k-grid-edit-command"),d.push("k-grid-remove-command")),t&&("incell"===e||"inline"===e&&!a)&&d.push("k-grid-edit-command"),o||(d.push("k-grid-save-changes"),d.push("k-grid-cancel-changes")),("inline"!==e||!r||r&&l)&&(d.push("k-grid-save-command"),d.push("k-grid-cancel-command"));let c="";return d.length?(c=d.join("|"),c=`\\b(${c})\\b`,new RegExp(c)):c}({mode:s,hasSelected:p,hasChanges:a,editContainerVisible:d,differentSelectionThanEditing:!h&&!1!==h||h,_editableIsClosing:r._editableIsClosing||!1,_isEditableEnabled:r._isEditableEnabled||!1,options:r.options});n.show().removeClass("k-disabled").attr("aria-disabled","false"),n.each((function(){const t=e(this);const o=t.attr("class");t.hasClass(ge)&&(t.removeClass(ge),Pr(r.table,!0)),o&&g&&g.test(o)&&c(t)}))},_attachToolbarClicks:function(){var e=this.options.editable,t=this.wrapper.find(".k-grid-toolbar");e&&!1!==e.create&&t.on(Ke+q,".k-grid-add",this._createClickHandler).on(Ke+q,".k-grid-cancel-changes",this._cancelClickHandler).on(Ke+q,".k-grid-save-changes",this._saveClickHandler),e&&!1!==e.update&&t.on(Ke+q,".k-grid-edit-command",this._editClickHandler).on(Ke+q,".k-grid-save-command",this._updateClickHandler).on(Ke+q,".k-grid-cancel-command",this._editCancelClickHandler),!1!==e.destroy&&t.on(Ke+q,".k-grid-remove-command",this._destroyClickHandler),t.on(Ke+q,".k-grid-excel",this._excelClickHandler),t.on(Ke+q,".k-grid-pdf",this._pdfClickHandler)},_processItems:function(e){var r=this,a=r.options,l=[],n=this.options.messages.commands,i=!1;return e.map((e=>{var s,d,c,u,p="";if("string"==typeof e)s=e.toLowerCase(),e={},"aiassistant"!==s&&(e.text=n[s]||s);else{s=e.name||e.text||"",fo[s.toLowerCase()]&&(s=s.toLowerCase()),"aiassistant"!==s&&(e.text=""===e.text?"":e.text||n[s]||s)}if(i||"search"!==s&&"columns"!==s||(i=!0,l.push({type:"spacer"})),"selectall"===s.toLowerCase()){const t=e.text;e.template=e.template||o.template($t)({size:o.getValidCssClass("k-checkbox-","size",r.options.size),label:t})}if("search"===s)d=Qr(e.text||n.search,!0),c=e.icon||e.iconClass||"search",p+=`<span class='k-searchbox k-input ${o.getValidCssClass("k-input-","size",r.options.size)} k-rounded-md k-input-solid k-grid-search'>`,p+=o.ui.icon({icon:c,iconClass:"k-input-icon"}),p+="<input autocomplete='off' placeholder='"+d+"' title='"+d+"' aria-label='"+d+"' class='k-input-inner' />",p+="</span>",l.push({name:"search",overflow:"never",template:p});else if("paste"===s&&a.allowPaste)l.push({template:"<input class='k-grid-paste-action' />"});else{if(!(s||h(e)&&e.template))throw new Error("Custom commands should have name specified");u=(e=g({type:"button"},fo[s],e)).className||"k-grid-"+(s||"").replace(/\s/g,""),e.attributes=r._processAttr(e.attr),delete e.attr,u&&(e.attributes.class===t&&(e.attributes.class=""),e.attributes.class+=" "+u),e.template&&delete e.type,r["_"+s+"ClickHandler"]&&(e.click=r["_"+s+"ClickHandler"]),"canceledit"===s&&(e.click=r._editCancelClickHandler),l.push(e)}})),l},_processAttr:function(e){var t={};return typeof e===nt&&e.length>0?e.split(" ").map((e=>{var o=e.split("=");2===o.length&&(t[o[0]]=o[1].replaceAll('"',"").replaceAll("'",""))})):h(e)&&(t=e),t},_createButton:function(r){var a,l,n=r.template||Vt,i=typeof r===nt?r:r.name||r.text,s=fo[i]?fo[i].className:"k-grid-"+(i||"").replace(/\s/g,""),d={className:r.skipCommandClass?"":s,text:i,attr:r.skipTabIndex?"":"tabindex=-1",iconClass:"",size:r.size||this.options.size},c=this.options.messages.commands;if(!(i||h(r)&&r.template))throw new Error("Custom commands should have name specified");if(h(r)){if((r=g(!0,{},r)).className&&k(d.className,r.className.split(" "))<0?r.className+=" "+d.className:r.className===t&&(r.className=d.className),r.className.indexOf("k-primary")>-1&&(r.className=r.className.replace("k-primary",""),r.themeColor="primary"),"edit"===i&&((r=g(!0,{},r)).text=h(r.text)?r.text.edit:r.text,r.iconClass=h(r.iconClass)?r.iconClass.edit:r.iconClass),r.attr){if(h(r.attr)&&(r.attr=ho(r.attr)),r.attr instanceof Function){let e=r.attr(r);r.attr=ho(e)}typeof r.attr===nt&&(l=r.attr.match(/class="(.+?)"/))&&k(l[1],r.className.split(" "))<0&&(r.className+=" "+l[1])}const e={text:c[i]};"edit"!==i&&"update"!==i||(e.themeColor="primary"),"destroy"===i&&(e.iconClass="k-i-x"),d=g(!0,d,fo[i],e,r)}else{const e={text:c[i]};"edit"!==i&&"update"!==i||(e.themeColor="primary"),"destroy"===i&&(e.iconClass="k-i-x"),d=g(!0,d,fo[i],e)}return a=o.template(n)(d),r.template?a:o.html.renderButton(e(a),d)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(Ke+q,t._groupableClickHandler):t._groupableClickHandler=function(o){var r=e(this),a=r.closest(vt);var l=t._groupRows?t._groupRows[t.wrapper.find(x+Pe).index(a)]:{};r.is(L)?t.trigger("groupCollapse",{group:l,element:a})||t.collapseGroup(a):t.trigger("groupExpand",{group:l,element:a})||t.expandGroup(a),o.preventDefault(),o.stopPropagation()},t._isLocked()?t.lockedTable.on(Ke+q,".k-grouping-row "+P+", .k-grouping-row "+L,t._groupableClickHandler):t.table.on(Ke+q,".k-grouping-row "+P+", .k-grouping-row "+L,t._groupableClickHandler),t._attachGroupable()},_toggleGroupableHeader:function(e){const t=this.options.groupable;const o=this.wrapper.find("div.k-grouping-header");t&&!1!==t.enabled&&o.length&&(e?o.removeClass("k-hidden"):o.addClass("k-hidden"))},_attachGroupable:function(){var t=this,a=t.wrapper,l=t.options.groupable,n=F+"["+o.attr("field")+"]",i=t.content?".k-grid-header:first "+n:"table:first>.k-grid-header "+n;const s=t._isStackedMode();if(s&&(i=".k-grid-stack-cell[data-field]"),l&&!1!==l.enabled){a.has("div.k-grouping-header")[0]||e("<div/>").addClass("k-grouping-header").prependTo(a),t.groupable&&t._destroyGroupable(),Kt.chrome&&(a.find("div.k-grouping-header").css("touch-action",Mt),a.find(i).css("touch-action",Mt));let o=t.wrapper.children(".k-grid-header");o.addClass("k-grid-draggable-header"),o.attr("draggable",!0),t.groupable=new r.Groupable(a,g({},l,{draggable:!s&&t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:!s&&i,filter:i,size:t.options.size,allowDrag:t.options.reorderable,enableContextMenu:!!t.options.contextMenu,removeGroup:function(e){t._showUngroupedColumn(e)},change:function(e){t.trigger("group",{groups:e.groups})?e.preventDefault():(t._clearEditableState(),t._hideGroupedColumns(e.groups),t.dataSource.options.endless&&t._resetEndless())},_groupableFieldsData:s&&t.columns})),s&&t._toggleGroupableHeader(t.dataSource.group().length>0),t._addGroupableOptionsToHeader()}},_showUngroupedColumn:function(e){var t=hr(this.columns);var o;for(o=0;o<t.length;o++)t[o].uid==e.colID&&t[o].hideOnGroup&&this.showColumn(t[o])},_hideGroupedColumns:function(e){if(e){var t=hr(this.columns);var o=[];var r;for(r=0;r<e.length;r++)e[r].colID&&o.push(e[r].colID);for(r=0;r<t.length;r++)o.indexOf(t[r].uid)>=0&&t[r].hideOnGroup&&this.hideColumn(t[r])}},_resetEndless:function(){var e=this;e.dataSource.options.endless=null,e._endlessPageSize=e.dataSource.options.pageSize,e.dataSource._skip=0,e.dataSource._pageSize=e.dataSource._take=e._endlessPageSize,e.dataSource._page=1},_addGroupableOptionsToHeader:function(){var e=Ko(this.columns);var t={};var r=this._headerCells();var a;var l;var n;for(n=0;n<e.length;n++)e[n].field,t[e[n].field]=e[n];for(n=0;n<r.length;n++)(l=t[(a=r.eq(n)).attr(o.attr(dt))])&&l.groupable&&l.groupable.sort&&a.data(ft,l.groupable.sort)},_destroyGroupable:function(){var e=this;e.groupable&&e.groupable.element&&e.groupable.element.kendoGroupable("destroy"),e.groupable=null,e._removeGroupableOptionsFromHeader()},_removeGroupableOptionsFromHeader:function(){var e=this._headerCells();for(var t=0;t<e.length;t++)e.eq(t).removeData(ft)},_continuousItems:function(t,o){if(this.lockedContent){var r=this;var a=r.table.add(r.lockedTable);var l=e(t,a[0]);var n=e(t,a[1]);var i=o?ar(hr(r.columns)).length:1;var s=o?hr(r.columns).length-i:1;var d=[];for(var c=0;c<l.length;c+=i)_.apply(d,l.slice(c,c+i)),_.apply(d,[].splice.call(n,0,s));return d}},_selectable:function(){var t,r,a=this,l=[],n=a._isLocked(),i=a.options.selectable,s="skeleton"===a.options.loaderType;if(i&&!i.checkboxSelection){a.selectable&&a.selectable.destroy(),a._selectedIds={},i=o.ui.Selectable.parseOptions(i),t=i.multiple,r=i.cell,a._hasDetails()&&(l[l.length]=".k-detail-row"),(a.options.groupable||a._hasFooters()||a._groups())&&(l[l.length]=".k-grouping-row,.k-group-footer"),s&&(l[l.length]="[data-skeleton-row]"),""!==(l=l.join(","))&&(l=":not("+l+")");var d=a.table;n&&(d=d.add(a.lockedTable));const p=a._isStackedMode()?"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer):not([data-skeleton-row]) > td:not(.k-group-cell):not(.k-hierarchy-cell) div.k-grid-stack-cell":"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer):not([data-skeleton-row]) > td:not(.k-group-cell):not(.k-hierarchy-cell)";var c=">"+(r?p:"tbody>tr"+l);a.selectable=new o.ui.Selectable(d,{allowPaste:a.options.allowPaste,filter:c,aria:!0,multiple:t,holdToDrag:!(!a._isMobile&&!o.support.mobileOS),toggleable:!(!a._isMobile&&!o.support.mobileOS),dragToSelect:a.options.selectable&&a.options.selectable.dragToSelect,changing:function(e){a.trigger(J,{target:e.target,originalEvent:e.originalEvent})&&e.preventDefault()},change:function(e){var t;r||a._persistSelectedRows(),a._checkBoxSelection&&(t=a.selectable.value(),a._uncheckCheckBoxes(),a._checkRows(t),t.length&&t.length===a.items().length?a._toggleHeaderCheckState(!0):a._toggleHeaderCheckState(!1)),a._calculateAggregatesForSelected(),"incell"!==a._editMode()&&a._toggleToolbarEditingItemsVisibility(),e.event&&a.trigger(X,{cellAggregates:a._cellAggregates})},useAllItems:n&&t&&r,relatedTarget:function(t){if(!r&&n){var o;var l=e();for(var i=0,s=t.length;i<s;i++)o=a._relatedRow(t[i]),k(o[0],t)<0&&(l=l.add(o));return l}},continuousItems:function(){return a._continuousItems(c,r)},ignoreOverlapped:a.options.selectable&&a.options.selectable.ignoreOverlapped,addIdToRanges:!0}),a.options.navigatable&&d.on("keydown"+q,(function(o){var l=a.current();var i=o.target;var s={event:o};var c;var p;if(l)if(o.keyCode===u.SPACEBAR&&!o.shiftKey&&e.inArray(i,d)>-1&&!l.is(".k-grid-stack-edit-cell,.k-edit-cell,.k-header")&&l.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(o.preventDefault(),o.stopPropagation(),((c=!(l=r?l:l.parent()).hasClass(ve)||a.selectable.value().length>1)||t&&l.hasClass(ve)&&o.ctrlKey)&&a.trigger(J,{target:l,originalEvent:o}))return;if(n&&!r&&(l=l.add(a._relatedRow(l))),t)if(o.ctrlKey){if(l.hasClass(ve))return a._deselectCheckRows(l),a._calculateAggregatesForSelected(),void a.trigger(X,{cellAggregates:a._cellAggregates})}else a.selectable.clear();else a.selectable.clear();r||(a.selectable._lastActive=l),a.selectable.value(l),c&&(a._calculateAggregatesForSelected(),a.trigger(X,{cellAggregates:a._cellAggregates}))}else if(!r&&(e(i).is("td")||e(i).is("table")&&k(i,this._navigatableTables))&&(o.shiftKey&&o.keyCode==u.LEFT||o.shiftKey&&o.keyCode==u.RIGHT||o.shiftKey&&o.keyCode==u.UP||o.shiftKey&&o.keyCode==u.DOWN||o.keyCode===u.SPACEBAR&&o.shiftKey)){if(o.preventDefault(),o.stopPropagation(),l=l.parent(),a.trigger(J,{target:l,originalEvent:o}))return;p=a.selectable.value(),n&&(l=l.add(a._relatedRow(l))),t?(a.selectable._lastActive||(a.selectable._lastActive=l),a.selectable.selectRange(a.selectable._firstSelectee(),l),function(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}(p,a.selectable.value())||a.trigger(X,s)):l.hasClass(ve)||(a.selectable.clear(),a.selectable.value(l),a._calculateAggregatesForSelected(),a.trigger(X,{cellAggregates:a._cellAggregates}))}}))}},_pasteReplaceHandler:function(t){var o,r,a,l,n,i=this,s=[];r=i.select().first(),!i._isStackedMode()&&r.length&&(r.is(vt)&&(r=r.children("td").first()),o=t.split("\n").filter((e=>e)),a=r.closest("tr"),n=i.thead.find("th:eq("+r.index()+")").data("field"),l=a.data("uid"),s.push(l),a.nextAll(z).slice(0,o.length-1).each(((t,o)=>{s.push(e(o).data("uid"))})),i._executePaste(o,s,null,n))},_pasteInsertHandler:function(e){var t,o,r,a,l,n=this,i=n.dataSource;(o=n.select().first()).length&&(o.is(vt)&&(o=o.children("td").first()),t=e.split("\n").filter((e=>e)),r=o.closest("tr"),l=n.dataItem(r),a=i.indexOf(l)+1,n._executePaste(t,null,a,null))},_executePaste:function(e,t,o,r){var a,l,n,i,s,d=this,c=d.dataSource,u=t||!1,p=d._getSelectedRowUids(),h=d._getSelectedColumnFields(),g=[],f=dr(d.columns).filter((e=>!e.selectable&&!e.draggable&!e.command)),m=r&&f.map((e=>e.field)).indexOf(r);if(1===e.length&&1===e[0].split("\t").length&&u)for(let t=0;t<p.length;t++){const o=p[t];a=c.getByUid(o),n=e[0].split("\t")[0];for(let e=0;e<h.length;e++)s=h[e],a&&n&&a.set(s,n);a&&a.dirty&&g.push(a)}else for(let r=0;r<e.length;r++){l=e[r].split("\t"),a=u?c.getByUid(t[r]):c.insert(o+r,{});for(let e=0;e<l.length;e++)n=l[e].replace(/\r/,""),(i=f[e+m||0])&&a&&n&&(s=i.field,a.set(s,n));a&&a.dirty&&g.push(a)}d.trigger(se,{items:g,type:u?"replace":"insert"})},_pasteKeyboardHandler:function(t){var o,r,a,l=this,n=l.current(),i=t.originalEvent.clipboardData,s=l.pasteActionsDropDownList&&l.pasteActionsDropDownList.value()||"insert";e(t.target).is(".k-grid-stack-edit-cell input:visible,.k-edit-cell input:visible")||i&&(t.preventDefault(),a=i.getData("text").trimEnd(),/\S/.test(a)||(a=" "),n&&n.length&&(r=n.index(),o=n.closest(vt).data("uid")),"replace"===s&&l._pasteReplaceHandler(a),"insert"===s&&l._pasteInsertHandler(a),r&&o&&(l._currentRowIndex=l.wrapper.find("tr[data-uid='"+o+"']").index(),l._restoreCurrent(r)))},_paste:function(){var e=this,t=e.options,o=t.selectable;if(t.allowPaste&&o){e.pasteHandler=e._pasteKeyboardHandler.bind(e);(e.content||e.table).on(se+q,e.pasteHandler),e.options.toolbar&&e._pasteToolbarDropDown()}},_clipboard:function(){var e=this.options;if(e.selectable&&e.allowCopy){var t=this;e.navigatable||(t.table.attr(at,0),t.table.add(t.lockedTable).on(Qe+q+" keydown"+q,".k-detail-cell",(function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()})).on(Qe+q,E+">"+M,Gr.bind(t))),t.copyHandler=t.copySelection.bind(t),t.updateClipBoardState=function(){t.areaClipBoard&&t.areaClipBoard.val(t.getTSV()).trigger("focus").select()};const o=t.content||t.table;t.bind("change",t.updateClipBoardState),o.on("keydown",t.copyHandler),t.clearAreaHandler=t.clearArea.bind(t),o.on("keyup",t.clearAreaHandler)}},copySelectionToClipboard:function(e){this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV(e)).trigger("focus").select(),document.execCommand("copy")},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||67!==t.keyCode||!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text||(this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV()).trigger("focus").select())},_createAreaClipBoard:function(){this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper))},getTSV:function(o){var r=this;var a=r.select();var l="\t";var n=r.options.allowCopy;var i=r._isLocked()&&ar(r.columns).length;e.isPlainObject(n)&&n.delimeter&&(l=n.delimeter);var s="";if(a.length){a.eq(0).is(vt)&&(a=a.find("td:not(.k-group-cell)")),a.filter(":visible");var d=[];var c=this.columns.length;var u=r._isLocked()&&ar(r.columns).length;var p=!0;var h=[];var g;var f=dr(this.columns);e.each(a,(function(t,o){if(o=e(o),g=r._getCellField(o,i),-1!==f.findIndex((e=>e.field===g))){var a=o.closest(vt).index();var l=o.index();l-=o.prevAll(":hidden").length,u&&p&&(p=e.contains(r.lockedTable[0],o[0])),r._groups()&&p&&(l-=r._groups()),l=p?l:l+u,g&&(h[l]=g),c>l&&(c=l);var n=o.text();d[a]||(d[a]=[]),d[a][l]=n}}));var m=d.length;if(d=e.each(d,(function(e,t){t&&(d[e]=t.slice(c),m>e&&(m=e))})),o&&h.length){d.splice(m,0,h.map((function(e){return function(e,t){return t.filter((function(t){return t.field===e}))[0].title||e}(e,f)})));var b=d.findIndex((function(e){return e!==t}));d[b]=d[b].slice(c)}e.each(d.slice(m),(function(e,t){s+=t?t.join(l)+"\r\n":"\r\n"}))}return s},clearArea:function(e){this.areaClipBoard&&e&&e.target===this.areaClipBoard[0]&&Pr(this.table,!0),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_adaptiveColumns:function(){var e=this;e._anyColumnHasMediaQuery()&&(e._setColumnsMediaVisibility(e.columns),e._attachColumnMediaResizeHandler())},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length},_columnsWithMediaQuery:function(){return Do(this.columns)},_attachColumnMediaResizeHandler:function(){var t=this;t._detachColumnMediaResizeHandler(),t._columnMediaResizeHandler=t._onColumnMediaResize.bind(t),e(window).on(Be+q,t._columnMediaResizeHandler)},_detachColumnMediaResizeHandler:function(){this._columnMediaResizeHandler&&e(window).off(Be+q,this._columnMediaResizeHandler)},_onColumnMediaResize:function(){var e=this;e._setColumnsMediaVisibility(e.columns),e._setContentMediaWidth()},_setColumnsMediaVisibility:function(e){var t=e||[];for(var o=0;o<t.length;o++)this._setColumnMediaVisibility(t[o])},_setColumnMediaVisibility:function(e){var t=this;Fo(e.media)?t._setColumnsMediaVisibility(e.columns):Ao(e)?(t._showColumnByMedia(e),e.hidden||t._setColumnsMediaVisibility(e.columns)):t._hideColumnByMedia(e)},_showColumnByMedia:function(e){e.hidden||this.showColumn(e),Io(e)},_hideColumnByMedia:function(e){var t=e.hidden;t||(e._hideByMedia=!0,this.hideColumn(e),e._hideByMedia=!1,e.hidden=t),Io(e)},_setContentMediaWidth:function(){var t=this;var o=t.options;var r=t._isLocked();var a;if(o.scrollable&&(!0===o.resizable||o.resizable&&!0===o.resizable.columns)){r&&t.lockedFooter?a=t.lockedFooter.children("table"):t.footer&&(a=t.footer.find(">.k-grid-footer-wrap>table")),a&&a[0]||(a=e());var l=r?t.wrapper.find(".k-grid-header-locked").find("table"):t.wrapper.find(".k-grid-header").find("table");var n=r?t.lockedTable:t.table;var i=l.find("th");var s=l.find("colgroup");var c=i.length;var u=i.filter(Eo).length;var p=i.length-u;var h=0;if(""!==l[0].style.width&&parseFloat(l[0].style.width)!==h){var g=l.css(ot);for(var f=0;f<c;f++)if(v=i[f],e(v)[0].style.display!==Mt&&!e(v)[0].classList.contains("k-hidden")){var m;var b=Math.max(f,f-p);var k=s.children()[b];var _=k?k.style.width:"";""!==_?m=parseFloat(_):(l.css(ot,rt),m=d(i.eq(f)),l.css(ot,g)),h+=m}n.css("width",h-1),l.css("width",h),a.css("width",h),t._updateStickyColumns()}}var v},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=this.hideMinScreenCols.bind(this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,o){var r=!1;for(var a=0;a<e.length;a++){var l=e[a];var n=l.minScreenWidth;n!==t&&null!==n&&(r=!0,n>o?this.hideColumn(l):this.showColumn(l)),!l.hidden&&l.columns&&(r=this._iterateMinScreenCols(l.columns,o)||r)}return r},_stickyColumns:function(){this._anyStickyColumns()&&this._setStickyColumns(!1)},_updateStickyColumns:function(){var e=this;var t=m(hr(e.columns),(function(e){return e.groupHeaderColumnTemplate}));e._anyStickyColumns()&&(e._setStickyColumns(!0),e._templates(),t.length>0&&e._renderGroupRows(),e._hasFilterRow()&&e._updateStickyFilterCells())},_updateStickyFilterCells:function(){var t=this.thead.find(".k-filter-row").find("td:not(.k-group-cell,.k-hierarchy-cell)");t.length&&t.each((function(){var t=e(this);var o=t.data("column");o.sticky?(h(o.stickyStyle)&&t.css({left:o.stickyStyle.left||"",right:o.stickyStyle.right||""}),t.addClass(ze)):(t.css({left:"",right:""}),t.removeClass(ze))}))},_anyStickyColumns:function(){return!this._isStackedMode()&&nr(this.columns).length},_setStickyColumns:function(e){var t=this;var o=nr(t.columns);var r=function(e){return m(e,(function(e){return e.sticky&&!e.locked&&Mo(e)}))}(t.columns);var a=t._calculateStickyWidths(r);t._removeStickyAttributes(o),t._setStickyClassAttributes(o),t._setStickyStyleAttributes(r,a,e),e&&t._setStickyStyles(r,a)},_calculateStickyWidths:function(e,t,o){var r;var a;var l;var n;var i=Ut?"right":"left";var s=Ut?"left":"right";var d={left:new Array(e.length).fill(t||0),right:new Array(e.length).fill(o||0)};for(r=0;r<e.length-1;r++)a=e[r],l=this._sumColumnWidth(a)+d[i][r],d[i][r+1]=l;for(r=e.length-1;r>0;r--)a=e[r],n=this._sumColumnWidth(a)+d[s][r],d[s][r-1]=n;return d},_setStickyClassAttributes:function(e,t){var o;var r;for(o=0;o<e.length;o++)(r=e[o]).columns&&(!t&&o&&(t=o),this._setStickyClassAttributes(ur([r]),t)),t&&or(r,"headerAttributes","class",Fe),or(r,"attributes","class",Me),or(r,"headerAttributes","class",ze),or(r,"footerAttributes","class",De)},_setStickyStyleAttributes:function(e,t,r){var a=this;var l;var n;var i;var s;var d;var c;var u;for(l=0;l<e.length;l++)n=e[l],d={left:(i=t.left[l])+"px",right:(s=t.right[l])+"px"},n.columns&&(c=pr([n]),u=a._calculateStickyWidths(c,i,s),a._setStickyStyleAttributes(c,u,r),r&&a._setStickyStyles(c,u)),or(n,"attributes",o.attr("style-left"),d.left),or(n,"attributes",o.attr("style-right"),d.right),or(n,"headerAttributes",o.attr("style-left"),d.left),or(n,"headerAttributes",o.attr("style-right"),d.right),or(n,"footerAttributes",o.attr("style-left"),d.left),or(n,"footerAttributes",o.attr("style-right"),d.right),n.stickyStyle=d},_removeStickyAttributes:function(e){var t;var r=new RegExp("(\\s*"+Me+")*","ig");var a=new RegExp("(\\s*"+ze+")*","ig");var l=new RegExp("(\\s*"+De+")*","ig");var n=new RegExp("(\\s*"+Fe+")*","ig");var i;for(t=0;t<e.length;t++)(i=e[t]).columns&&this._removeStickyAttributes(ur([i])),rr(i,"attributes","class",r),rr(i,"attributes",o.attr("style-left"),"",!0),rr(i,"attributes",o.attr("style-right"),"",!0),rr(i,"headerAttributes","class",a),rr(i,"headerAttributes","class",n),rr(i,"headerAttributes",o.attr("style-left"),"",!0),rr(i,"headerAttributes",o.attr("style-right"),"",!0),rr(i,"footerAttributes","class",l),rr(i,"footerAttributes",o.attr("style-left"),"",!0),rr(i,"footerAttributes",o.attr("style-right"),"",!0)},_setStickyStyles:function(t,o){var r=this;var a;var l;var n=hr(lr(r.columns));var i=r.tbody.children(":not(.k-detail-row)");var s;var d;var c;var u;var p;var h;var g;var f;var m;for(a=0;a<t.length;a++)if(d=t[a],u=o.left[a],p=o.right[a],c=n.indexOf(d),(h=r._getColumnHeader(d)).addClass(ze),d.headerAttributes.class&&-1!==d.headerAttributes.class.indexOf(Fe)&&h.addClass(Fe),er(h,u,p),!d.columns)for(r.footer&&((g=r.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(c)).addClass(De),er(g,u,p)),l=0;l<i.length;l++)(s=e(i[l])).hasClass(Pe)?((f=s.find("."+d.groupHeaderColumnTemplateClass)).addClass(Me),er(f,u,p)):((m=s.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(c)).addClass(Me),er(m,u,p))},_removeStickyStyles:function(t){var o=this;var r;var a;var l=hr(lr(o.columns));var n=o.tbody.children(":not(.k-detail-row)");var i;var s;var d;var c;var u;var p;var h;for(r=0;r<t.length;r++)if(s=t[r],d=l.indexOf(s),(c=o._getColumnHeader(s)).removeClass(ze),c.removeClass(Fe),er(c,"",""),s.columns)o._removeStickyStyles(s.columns);else for(s.footerTemplate&&o.footer&&((u=o.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(d)).removeClass(De),er(u,"","")),a=0;a<n.length;a++)(i=e(n[a])).hasClass(Pe)?((p=i.find("."+s.groupHeaderColumnTemplateClass)).removeClass(Me),er(p,"","")):((h=i.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(d)).removeClass(Me),er(h,"",""))},_getColumnHeader:function(t){return e("#"+t.headerAttributes.id).length?e("#"+t.headerAttributes.id):e("#"+this._cellId)},_sumColumnWidth:function(e){return e.columns?this._sumCurrentWidths(hr([e])):this._sumCurrentWidths([e])},_sumCurrentWidths:function(e){var t=0;var o=0;var r;var a;var l;var n=e.length;for(l=0;l<n;l++)r=e[l],a=this._getColumnHeader(r),!r.hidden&&Ao(r)&&(t+=(o=a.is(":visible")?a.outerWidth():r.width)?parseInt(o,10):0);return t},_belongsToGrid:function(e){return this.wrapper[0]===e.closest(".k-grid")[0]},getSelectedData:function(){var e=this;var t=e.selectable.selectedRanges();var o=Object.keys(t);var r=e.selectable.selectedSingleItems();var a=[];var l=dr(e.columns);for(var n=0;n<o.length;n++)a=a.concat(e._mapSelectionToData(t[o[n]],l,null,!0));return r.length&&(a=a.concat(e._mapSelectionToData(r,l,null,!0))),a},getSelectedDataByKeys:function(){var t,o,r=this,a=r.dataSource,l=r.selectedKeyNames(),n=dr(r.columns),i={};var s=function(e){var t={};if(e.field)return t[e.field]=o[e.field],t};for(let r=0;r<l.length;r++)t=l[r],(o=a.get(t))&&(i[o.uid]=e.extend.apply({},n.map(s)));return Object.keys(i).map((function(e){return i[e]}))},exportSelectedToExcel:function(e){if(!o.excel||!o.ooxml)throw new Error("The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.");var t=this;var r=this.options.excel||{};var a=dr(t.columns);var l=new o.excel.ExcelExporter({});var n={sheets:[{columns:Array.apply(0,Array(a.length)).map((function(){return{autoWidth:!0}})),rows:[],freezePane:{},filter:!1}]};var i=t.selectable.selectedRanges();var s=Object.keys(i);var d=t.selectable.selectedSingleItems();var c;var u=[];var p=t._isLocked()&&ar(t.columns).length;var h=Yr.bind(t);for(c=0;c<s.length;c++)u=u.concat(t._mapSelectionToData(i[s[c]],a,Jr));if(u.length&&t._addRangeSelectionRows(n,l,u,e),(u=d.length?t._mapSelectionToData(d,a,Jr):[]).length&&(p&&(u=u.sort(h)),t._addSingleSelectionRows(n,l,u,e)),n.sheets[0].rows.length){var g=new o.ooxml.Workbook(n);g.options||(g.options={}),g.options.skipCustomHeight=!0,g.toDataURLAsync().then((function(e){o.saveAs({dataURI:e,fileName:n.fileName||r.fileName,proxyURL:r.proxyURL,forceProxy:r.forceProxy})}))}},_addSingleSelectionRows:function(e,t,o,r){var a=0;var l=cr(this.columns);var n;const i=t._instance??t;for(a=0;a<o.length;a++)n=o[a],t.data=[n],this._setExporterColumns(i,l,n),this._createExportRows(e,i,r)},_addRangeSelectionRows:function(e,t,o,r){var a=cr(this.columns);const l=t._instance??t;t.data=o,this._setExporterColumns(l,a,o[0]),this._createExportRows(e,l,r)},_createExportRows:function(e,t,o){const r=t._instance??t;e.sheets[0].rows=e.sheets[0].rows.concat(o?r._rows():r._dataRows(r.data,0))},_setExporterColumns:function(t,o,r){const a=t._instance??t;a.columns=a.options.columns=e.map(o.filter((function(e){return Object.keys(r).indexOf(e.field)>=0})),a._prepareColumn)},_mapSelectionToData:function(t,o,r,a){var l=this;var n="TR"===t[0][0].nodeName;var i;var s={};var d;var c;var u;var p=function(e){var t={};if(e.field&&(!r||r(e)))return t[e.field]=i[e.field],t};var h=l._isLocked()&&ar(l.columns).length;var g;for(var f=0;f<t.length;f++)if(d=t[f],i=l.dataItem(n?d:d.closest(vt)),n)s[i.uid]=e.extend.apply({},o.map(p));else{if(!(u=l._getCellField(d,h,a)))continue;if((c=s[i.uid])||(c=s[i.uid]={}),!(g=Po(o,u))||r&&!r(g))continue;c[u]=i[u]}return Object.keys(s).map((function(e){return s[e].uid=e,s[e]}))},_getCellField:function(t,r,a){const l=this;const n=r&&e.contains(l.lockedTable[0],t[0]);const i=o.attr("field");const s=o.attr("index");const d=n?0:r;let c=0;return a&&(c=l._trailingColumns()),l._isStackedMode()?l.table.find("div.k-grid-stack-cell["+s+"='"+(t.index()-c)+"']").attr(i):r?l.element.find(".k-grid-header-"+(n?"locked":"wrap")+" th["+s+"='"+(t.index()+d)+"']").attr(i):l.thead&&l.thead.find("th["+s+"='"+(t.index()-c)+"']").attr(i)},_relatedRow:function(t){var o=this.lockedTable;if(t=e(t),!o)return t;var r=t.closest(this.table.add(this.lockedTable));var a=r.find(">tbody>tr").index(t);return(r=r[0]===this.table[0]?o:this.table).find(">tbody>tr").eq(a)},_relatedCell:function(t){var o=this.lockedTable;if(t=e(t),!o)return t;var r=t.closest(this.table.add(this.lockedTable));var a=r.find(">tbody>tr>td").index(t);return(r=r[0]===this.table[0]?o:this.table).find(">tbody>tr>td").index(a)},clearSelection:function(){var e=this;e.selectable&&!e._checkBoxSelection&&e.selectable.clear(),e._checkBoxSelection?e._deselectCheckRows(e.select()):e.options.persistSelection?e._persistSelectedRows():e._selectedIds={}},clearHighlight:function(){const e=this;e._highlightDescriptors&&delete e._highlightDescriptors,e._highlightedItems&&e._highlightedItems.length&&(e._highlightedItems.removeClass(fe),delete e._highlightedItems),e._hasAIHighlight&&delete e._hasAIHighlight},_getElementsToHightlight:function(e){const t=this;const o=t.columns;const r=[];const a=[];const l=[];let n=e=>`tr[data-uid='${e}']`;const i=(e,t)=>e.length&&e.findIndex((e=>e.field===t));return m(o,(e=>{e.locked?r.push(e):a.push(e)})),Object.entries(e).forEach((([e,o])=>{if(!e)return;const s=t.dataSource.get(e);if(!s)return;let d=t.tbody.find(n(s.uid));!0===o?l.push(d):"object"==typeof o&&Object.keys(o).forEach((e=>{if(!e&&!o[e])return;let c=!1;let u=i(a,e);-1===u&&(u=i(r,e),c=!0),c&&(d=t._relatedRow(d));const p=d.find(`td:eq(${u})`);p.length&&(l.push(p),d=t.tbody.find(n(s.uid)))}))})),l},_restoreHighlight:function(){const e=this._highlightDescriptors;e&&Object.keys(e).length&&this.highlight(e)},_persistHighlight:function(e){const t=this;const o={};const r=e.is("tr");const a=t.options.dataSource?.schema?.model?.id||"id";const l=(r?e:e.closest("tr")).data("uid");const n=t.dataSource.getByUid(l);if(!n)return;const i=n[a];if(r)o[i]=!0;else{const r=t._getCellField(e,t._isLocked(),!0);if(!r)return;o[i]=r}t._highlightDescriptors?t._highlightDescriptors=t._mergeHighlightDescriptor(t._highlightDescriptors,o):t._highlightDescriptors=o},_mergeHighlightDescriptor:function(e,o){const r={};let a,l,n;for(a in e)r[a]=e[a];for(a in o)l=r[a],n=o[a],r[a]=l===t?n:!0===n||("object"==typeof n&&null!==n&&"object"==typeof l&&null!==l?g({},l,n):l);return r},highlight:function(t){const o=this;const r=o.lockedTable;const a=Array.isArray(t)&&!t.length;if(!t&&!a)return o._highlightedItems||e();if(a)return void o.clearHighlight();const l="object"==typeof t&&!Array.isArray(t)?Object.keys(t):[];const n=l.length&&o.dataSource.get(l[0]);let i;n?(o._highlightDescriptors=o._mergeHighlightDescriptor(o._highlightDescriptors||{},t),i=o._getElementsToHightlight(t)):i=Array.isArray(t)?t:[t];i.forEach((function(t){const a=(e=>{const t=e.is("tr");let a;if(e)return t&&r?.length&&(a=o._relatedRow(e),e=e.add(a)),e})(e(t));if(a&&!n&&o._persistHighlight(a),a?.length){if(o._highlightedItems&&-1!==o._highlightedItems.index(a))return;a.addClass(fe),o._highlightedItems?o._highlightedItems=o._highlightedItems.add(a):o._highlightedItems=a}}))},select:function(e){var t=this,r=t.selectable,a=o.ui.Selectable.parseOptions(this.options.selectable).cell;return(e=t.table.add(t.lockedTable).find(e)).length?(r&&!r.options.multiple&&(r.clear(),e=e.first()),t._isLocked()&&(e=e.add(e.map((function(){return a?t._relatedCell(this):t._relatedRow(this)})))),r&&!t._checkBoxSelection?r.value(e):(t._checkRows(e),t.select().length===t.items().length&&t._toggleHeaderCheckState(!0)),void(a||t._persistSelectedRows())):r?r.value():t.items().filter("."+ve)},_initSelectableAggregates:function(){var e=this;e.options.selectable&&(e._selectableAggregatesOptions||(e._selectableAggregatesOptions=e._parseSelectableAggregatesOptions()),e._selectableAggregatesOptions.count&&(e._cellAggregates={count:0}))},_calculateAggregatesForSelected:function(){var r,a,l,n,i,s,d,c,u,h,g,f=this,m=f.options,b=f.getSelectedDataByKeys(),k=f.options.selectable,_=k.cellAggregates,v=dr(f.columns).filter((e=>!e.selectable&&!e.draggable&!e.command)).length,C=gr(m.columns),w=o.ui.Selectable.parseOptions(k).cell,y=[],S=[],x=[];if(_){w&&(b=f.getSelectedData()),_=f._selectableAggregatesOptions;for(let e=0;e<b.length;e++){r=b[e];for(let e=0;e<C.length;e++)switch(a=r[C[e]],p(a)){case"number":y.push(a);break;case"date":S.push(a);break;case"boolean":x.push(a)}}var T;_.count&&(l=w?(T=f.select(),T.filter(((o,r)=>{const a=e(r);const l=a.children(".k-select-checkbox").length>0;const n=a.find("> .k-checkbox-wrap > .k-select-checkbox").length>0;return a.attr("[ref-grid-drag-cell]")===t&&!a.hasClass("k-command-cell")&&!l&&!n}))).length:b.length*v),y.length&&(i=_.max?y.reduce(((e,t)=>Math.max(e,t))):null,n=_.min?y.reduce(((e,t)=>Math.min(e,t))):null,s=_.sum?y.reduce(((e,t)=>e+t)):null,d=_.average?y.reduce(((e,t)=>e+t))/y.length:null),S.length&&(c=_.earliest?S.reduce(((e,t)=>new Date(Math.min(e,t)))):null,u=_.latest?S.reduce(((e,t)=>new Date(Math.max(e,t)))):null),x.length&&(h=_.isTrue?x.filter((e=>!0===e)).length:null,g=_.isFalse?x.filter((e=>!1===e)).length:null),f._cellAggregates={count:l,max:i,min:n,sum:s,average:d,earliest:c,latest:u,isTrue:h,isFalse:g},f.statusBar&&f._statusBar()}},_parseSelectableAggregatesOptions:function(){var e=this.options.selectable.cellAggregates,t={};if(b(e)){for(let o=0;o<e.length;o++)t[e[o]]=!0;return t}return{count:!0,min:!0,max:!0,sum:!0,average:!0,earliest:!0,latest:!0,isTrue:!0,isFalse:!0}},_toggleHeaderCheckState:function(e){const t=this;const o=t._isStackedMode();const r=t.wrapper.find(".k-toolbar");const a=r.find(we);let l=o?r:t.thead.add(t.lockedHeader);let n=o?we:"tr "+we;const i=(e,t)=>{if(e.length){const o=t?"Deselect all rows":"Select all rows";e.prop("checked",t).attr(It,t).attr(wt,o)}};if(o)i(a,e);else{i(l.find(n),e),i(a,e)}},_uncheckCheckBoxes:function(){this.table.add(this.lockedTable).find("tbody "+we).attr(It,!1).prop("checked",!1).attr(wt,"Select row")},_deselectCheckRows:function(t){var r=this,a=o.attr("range-selected");t=r.table.add(r.lockedTable).find(t),r._isLocked()&&(t=t.add(t.map((function(){return r._relatedRow(this)})))),t.each((function(){e(this).removeClass(ve).removeAttr(a).find(we).attr(It,!1).prop("checked",!1).attr(wt,"Select row")})),r._toggleHeaderCheckState(!1),r._persistSelectedRows()},_checkRows:function(t){t.each((function(){e(this).addClass(ve).find(we).prop("checked",!0).attr(wt,"Deselect row").attr(It,!0)}))},_persistSelectedRows:function(){var e,t,r,a=this,l=a.items(),n=a.dataSource.options.schema,i={};if(n&&n.model&&a._data&&(r=a._getSchemaIdField())){o.ui.Selectable.parseOptions(a.options.selectable).multiple||a._checkBoxSelection||(a._selectedIds={}),a.select().each((function(){t=a.dataItem(this),i[t[r]]=!0}));for(var s=0;s<l.length;s++)e=(t=a.dataItem(l[s]))[r],i[e]?a._selectedIds[e]=!0:delete a._selectedIds[e]}},selectedKeyNames:function(){var e=[];for(var t in this._selectedIds)e.push(t);return e.sort(),e},_updateCurrentAttr:function(t,o,r){var a=e(t).data("headerId");var l;var n;e(t).removeClass(ge),this.table.removeAttr(At),a?(a=a.replace(this._cellId,""),e(t).attr(kt,a)):e(t).removeAttr(kt),(l=o.attr(kt))!=this._cellId&&o.data("headerId",l),l?n=l:o.attr(kt,this._cellId),r||o.addClass(ge),this.table.attr(At,n||this._cellId),this._current=o},_scrollCurrent:function(){const t=this._current;const o=this.options.scrollable;if(t&&o){var r=t.parent();var a=r.closest("table").parent();var l=a.is(".k-grid-content-locked,.k-grid-header-locked");var n=a.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap");var i=e(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0];if(n)if(this.virtualScroll){var s=Math.max(k(r[0],this._items(r.parent())),0);this.virtualScroll.rows?(this._rowVirtualIndex=this.virtualScrollable.itemIndex(s),this.virtualScrollable.scrollIntoView(r)):(this._rowVirtualIndex=s,this._scrollTo(this._relatedRow(r)[0],i))}else this._scrollTo(this._relatedRow(r)[0],i);this.lockedContent&&(this.lockedContent[0].scrollTop=i.scrollTop),l||this._scrollTo(t[0],i)}},_findGroupedItem:function(e,t,o){const r=this;let a;for(let l=0;l<e.length;l++){const n=e[l];if(n.field===o?n.value===t&&(a=n.items[0].uid&&n.items[0][o]?n.items[0]:r._findGroupedItem(n.items,t,o)):a=n.items[0].uid&&n.items[0][o]?n.items.find((e=>e[o]===t)):r._findGroupedItem(n.items,t,o),a)return a}},_findClosestGroupingRow:function(t,o,r){const a=this;let l=o||0;let n=r||0;if(!(a.options.groupable&&a.dataSource.group().length>0)||!t)return{targetRow:t,rowsToTarget:l,hiddenGroupingRows:n};const i=e(t.previousSibling);if(i&&i.hasClass(Pe)){let e={targetRow:i,rowsToTarget:l,hiddenGroupingRows:n};return"none"===i.css("display")&&(e=a._findClosestGroupingRow(i[0],l,n+1)),e}{const e=a._findClosestGroupingRow(i[0],l+1,n);if(e)return{targetRow:e.targetRow,rowsToTarget:e.rowsToTarget,hiddenGroupingRows:n}}},_checkItemAlreadyLoaded:function(e,t){const o=this.dataSource._ranges;let r;for(let a=0;a<o.length;a++){if(r=o[a].data.find((o=>o[t]===e)),r)return{loadedItem:r,page:a}}},scrollToItem:function(t,r){const a=this,l=a.options,n=a.dataSource,i=n.group(),s=n.pageSize(),d=a._getSchemaIdField(),c=l.scrollable,u=a.wrapper.find(".k-grid-content.k-auto-scrollable"),p=o._outerHeight(a.tbody.find(`tr:not(.${Pe})`)),h=c&&c.virtual&&("rows"===c.virtual||!0===c.virtual);let g=l.groupable&&a.wrapper.find(`.${Pe}:first-child`);let f={};let m=!1;let b=0;if(a._scrolledItems&&(f=a._scrolledItems),h&&0===i.length&&(a.virtualScrollable._alwaysScrollTop=!0),!t||!d)return;const k=n.view();let _=k.find((e=>e[d]==t));if(i.length>0&&(_=a._findGroupedItem(k,t,d),b=o._outerHeight(g[0])),!_&&h)return a.virtualScrollable._programmaticallyScrolling&&"resolved"!==a.virtualScrollable._programmaticallyScrolling.state()||(a.virtualScrollable._programmaticallyScrolling=e.Deferred()),void(r&&"function"==typeof r&&r({success:e=>{let o=e;if(o="number"!=typeof o?Number(o):o,isNaN(o))return;const r=n.options.serverPaging;let l=S.floor(o/s);if(r){const e=a._checkItemAlreadyLoaded(t,d);e&&(l=e.page)}const i=u.find(vt);const c=i[i.length-1].offsetTop;const h=l*(s/i.length*c)+(o-l*s-1)*p;return a._scrollingUp=a.virtualScrollable.verticalScrollbar.scrollTop()>h,a._scrollOffset=h,a.virtualScrollable._scrollTo(h),a.virtualScrollable.verticalScrollbar.trigger(de),a.virtualScrollable._programmaticallyScrolling.done((()=>{a.scrollToItem(t)}))}}));const v=_&&_.uid;if(!v)return;let C=e(`[data-uid=${v}]`);let{targetRow:w,rowsToTarget:y,hiddenGroupingRows:x}=a._findClosestGroupingRow(C[0]);if(!C||!w)return;i.length>0&&"none"===C.css("display")&&(C=w,m=!0);const T=m?x*b+p:0;let H=C[0].offsetTop-((y+i.length)*b-T);let R=H;if(h){if(f&&f[t]){const e=Math.floor(a.virtualScrollable.verticalScrollbar.scrollTop());const o=Math.floor(f[t].scrollingDownOffset);const r=Math.floor(f[t].scrollingUpOffset);if(e===r||e===o)return;a._scrollingUp=e>R,R=a._scrollingUp?r??R:o??R}a._scrollOffset&&(a._scrollingUp?(a._scrollOffset===H&&(a._scrollOffset+=p),R=H-a.virtualScrollable._scrollTop+a._scrollOffset):R+=a._scrollOffset),a.virtualScrollable._scrollTo(H,R),f[t]||(f[t]={}),a._scrollingUp?f[t]&&!f[t].scrollingUpOffset&&(f[t].scrollingUpOffset=R):f[t]&&!f[t].scrollingDownOffset&&(f[t].scrollingDownOffset=R)}else u.scrollTop(R);a.virtualScrollable&&(a._scrollOffset&&delete a._scrollOffset,a._scrollingUp&&delete a._scrollingUp),a._scrolledItems=f},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,o,r,a){var l=this._current;if(t=e(t),l&&t&&l.length&&t.length&&l.closest(".k-filter-row").length>0&&0===t.closest(".k-filter-row").length&&this._filterFocusable().attr(at,-1),t.length&&(!l||l[0]!==t[0])){var n=t.parent();var i=n.children(R);var s=parseInt(n.children().first().attr("colspan"),10);this._hasVirtualColumns()&&(this._virtualCellIndex=(s>1?s:0)+i.index(t)),this._updateCurrentAttr(l,t,a),r||this._scrollCurrent(),o||this.trigger(Ue,{element:t})}return t&&t.length&&(this._lastCellIndex=t.parent().children(".k-group-cell, .k-grid-stack-content,"+I).index(t)),this._updateSelctCheckbox(l,t),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(ge),this._current=null)},_updateSelctCheckbox:function(e,t){var o;t&&t.length&&((o=t.find(".k-select-checkbox")).length>0?o.trigger("focus"):e&&e.find(".k-select-checkbox").length>0&&Pr(this.table,!0))},_scrollTo:function(t,r){var a=t.tagName.toLowerCase();var l="td"===a||"th"===a;var n=e(t).closest("table")[0];var i=t[l?"offsetWidth":"offsetHeight"];var s=r[l?"scrollLeft":"scrollTop"];var d=r[l?"clientWidth":"clientHeight"];var c="relative"===e(t).css("position")&&Ut&&l?Math.abs(n.offsetLeft-t.offsetLeft):t[l?"offsetLeft":"offsetTop"];var u=c+i;var p=0;var h=0;var g=0;Ut&&l&&(Kt.msie||Kt.edge?h=n.offsetLeft:(Kt.mozilla||Kt.webkit&&Kt.version>85)&&(g=n.offsetLeft-o.support.scrollbar())),p=(s=Math.abs(s+h-g))>c?c:u>s+d?i<=d?u-d:c:s,p=Math.abs(p+h)+g,r[l?"scrollLeft":"scrollTop"]=p},_navigatable:function(){var t=this;if(!t.options.navigatable)return;const r=t._isStackedMode();var a=t.table.add(t.lockedTable);var l=!r&&t.thead.parent().add(e(">table",t.lockedHeader));var n=a;t.options.scrollable&&(n=n.add(l)),this._navigatableTables=n,l&&(this._headertables=l),n.off(Qe+q+" focus"+q+" focusout"+q+" keydown"+q),l&&l.find("a.k-link").attr("tabIndex",-1),a.on("keydown"+q,".k-detail-cell",(function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()})),n.on(o.support.touch?"touchstart"+q:Qe+q,E+">"+M,Gr.bind(t)).on("focus"+q,t._tableFocus.bind(t)).on("focusout"+q,t._tableBlur.bind(t)).on("keydown"+q,t,t._tableKeyDown.bind(t)),t._filterFocusable().on("focus",t._filterFocus.bind(t))},_filterFocus:function(t){var o=t.target.closest("th");this._filterFocusable().attr(at,0),this._setCurrent(o),e(o).removeClass(ge)},_tableFocus:function(){var e=this.current();var t=this.lockedTable?this.lockedTable:this.table;e&&e.is(":visible")?e.addClass(ge):this._virtualColScroll?this._setCurrent(t.find(E).first().children(M).first(),!0,!0):this._setCurrent(t.find(E).first().children(M).first()),this.table.attr(at,0)},_tableBlur:function(){var e=this.current();e&&e.removeClass(ge)},_findCellIndex:function(e,t,o){var r;var a;if(o)for(a=t;a>=0&&(r=a,e[a].hidden);a--);else for(a=t;a<e.length&&(r=a,e[a].hidden);a++);return r},_scrollToColumn:function(e,r){if(this._virtualCellIndex===t)return!1;var a=this;var l=a._virtualCellIndex;var n=hr(lr(a.columns));var i=0;e==(Ut?u.LEFT:u.RIGHT)&&l!==n.length-1?l=a._findCellIndex(n,l+1):e==(Ut?u.RIGHT:u.LEFT)&&l?l=a._findCellIndex(n,l-1,!0):e==u.HOME?l=a._findCellIndex(n,0):e==u.END&&(l=a._findCellIndex(n,n.length-1,!0));for(var s=0;s<l;s++)i+=n[s].width;a._virtualCellIndex=l,r&&(r.preventDefault(),r.stopPropagation());let d=a.content;return a._hasVirtualRows()&&a._hasVirtualColumns()&&(d=a.virtualScrollable.wrapper),o.scrollLeft(d,i),!0},_tableKeyDown:function(t){let o=this.current(),r=o&&o.closest(".k-grid-table")[0],a=this.virtualScroll||{},l=this.virtualScrollable&&this.virtualScrollable.fetching(),n=e(t.target),i=!t.isDefaultPrevented()&&(!n.is(":button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon")||this._isFocusableGridElement(o));if(t.altKey&&t.keyCode==u.DOWN)return this.current().find(".k-grid-filter-menu, .k-grid-column-menu").click(),void t.stopImmediatePropagation();if(l)t.preventDefault();else if((!a.columns||o&&document.body.contains(o[0])||!this._scrollToColumn(t.keyCode,t))&&(o||(o=e(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(E).first().children(M).first()),o.length)){var s=!1;t.isDefaultPrevented()||t.keyCode!==u.F10||(s=this._focusToolbar()),i&&t.keyCode==u.UP&&(s=this._moveUp(o,t.shiftKey,t.ctrlKey)),i&&t.keyCode==u.DOWN&&(s=this._moveDown(o,t.shiftKey,t.ctrlKey)),i&&t.keyCode==(Ut?u.LEFT:u.RIGHT)&&(s=this._moveRight(o,t.altKey,t.shiftKey,t.ctrlKey,r)),i&&t.keyCode==(Ut?u.RIGHT:u.LEFT)&&(s=this._moveLeft(o,t.altKey,t.shiftKey,t.ctrlKey,r)),i&&t.keyCode==u.PAGEDOWN&&(s=this._handlePageDown()),i&&t.keyCode==u.PAGEUP&&(s=this._handlePageUp()),i&&t.keyCode==u.HOME&&(s=this._handleHome(o,t.ctrlKey)),i&&t.keyCode==u.END&&(s=this._handleEnd(o,t.ctrlKey)),i&&t.keyCode==u.SPACEBAR&&(s=this._handleSpaceKey(o,t.ctrlKey)),t.keyCode!=u.ENTER&&t.keyCode!=u.F2||(s=this._handleEnterKey(o,r,n,t.keyCode==u.F2)),t.keyCode==u.ESC&&(s=this._handleEscKey(o)),t.keyCode==u.TAB&&(s=this._handleTabKey(o,r,t.shiftKey,n)),t.keyCode!==u.DELETE&&t.keyCode!==u.BACKSPACE||(s=this._handleDeletion(t)),s&&(t.preventDefault(),t.stopPropagation())}},_focusToolbar:function(){var e=this.wrapper.find(".k-grid-toolbar [tabindex=0]");return e.length>0&&(e.first().addClass(".k-focus").trigger("focus"),!0)},_focusFocusable:function(e,t,o,r,a){let l=this._isFocusableGridElement(t)&&t.find(ke);l&&l.length||t.is(ke)&&(l=t),this._containerHasActiveElement(e)&&1!==e.find(ke).length||!t.length||(Pr(this.table,!0),this._setCurrent(t,o,r),1!==l.length||l.is("table")||(l.trigger("focus"),a?.preventDefault()))},_containerHasActiveElement:function(e){return e.find(i()).length},_isFocusableGridElement:function(e){return!!e&&(e.is(_e)||e.has(_e).length)},_moveLeft:function(t,o,r,a,l){var n,i;var s=t.parent();var d=s.parent();return o?s.hasClass(Pe)?this.collapseGroup(s):this.collapseRow(s):a&&t.is(x+Ie)&&this.options.reorderable?this._moveColumn(t,!0):(i=d.find(E).index(s),(n=this._prevHorizontalCell(d,t,i))[0]||this._containerHasActiveElement(t)||(r?this.lockedTable?(n=this._relatedRow(s),e.contains(this.lockedTable[0],s[0])&&(n=n.prevAll(z).first()),n=n.children(R).last()):n=this._tabNext(t,l,!0):(d=this._horizontalContainer(d),(n=this._prevHorizontalCell(d,t,i))[0]!==t[0]&&Pr(this.table,!0))),this._focusFocusable(t,n)),!0},_moveRight:function(t,o,r,a,l){var n,i;var s=t.parent();var d=s.parent();return o?s.hasClass(Pe)?this.expandGroup(s):this.expandRow(s):a&&t.is(x+Ie)&&this.options.reorderable?this._moveColumn(t,!1):(i=d.find(E).index(s),(n=this._nextHorizontalCell(d,t,i))[0]||this._containerHasActiveElement(t)||(r?this.lockedTable?(n=this._relatedRow(s),e.contains(this.table[0],s[0])&&(n=n.nextAll(z).first()),n=n.children(R).first()):n=this._tabNext(t,l,!1):(d=this._horizontalContainer(d,!0),(n=this._nextHorizontalCell(d,t,i))[0]!==t[0]&&Pr(this.table,!0))),this._focusFocusable(t,n)),!0},_moveUp:function(e,t,o){var r=e.parent().parent();var a,l,n,i;t?(a=(a=e.parent()).prevAll(z).first(),a=e.parent().is(z)?a.children().eq(e.index()):a.children(R).last()):o&&e.parent().is(z)&&this._hasReorderableRows()?(l=e.index(),a=(a=e.parent()).prevAll(z).first(),n=this.tbody.children(z).index(a),i=this.tbody.children(z).index(e.parent()),n>=0&&!this.trigger(Ne,{oldIndex:i,newIndex:n,row:e.parent()})&&(this.reorderRows(e.parent(),n),a=this.tbody.children(z).eq(n).children().eq(l))):(a=this._prevVerticalCell(r,e))[0]||(this._lastCellIndex=0,r=this._verticalContainer(r,!0),(a=this._prevVerticalCell(r,e)).is(":hidden")&&(a=a.nextAll().not(":hidden").first()),a[0]&&Pr(this.table,!0));var s=this._lastCellIndex||0;return this._isStackedMode()?(Pr(this.table,!0),this._setCurrent(a)):this._focusFocusable(e,a),this._lastCellIndex=s,!0},_moveDown:function(e,t,o){var r=e.parent().parent();var a,l,n,i;t?(a=(a=e.parent()).nextAll(z).first(),a=e.parent().is(z)?a.children().eq(e.index()):a.children(R).first()):o&&e.parent().is(z)&&this._hasReorderableRows()?(l=e.index(),a=(a=e.parent()).nextAll(z).first(),n=this.tbody.children(z).index(a),i=this.tbody.children(z).index(e.parent()),n>=0&&!this.trigger(Ne,{oldIndex:i,newIndex:n,row:e.parent()})&&(this.reorderRows(e.parent(),n+1),a=this.tbody.children(z).eq(n).children().eq(l))):(a=this._nextVerticalCell(r,e))[0]||(this._lastCellIndex=0,r=this._verticalContainer(r),(a=this._nextVerticalCell(r,e))[0]&&Pr(this.table,!0));var s=this._lastCellIndex||0;return this._isStackedMode()?(Pr(this.table,!0),this._setCurrent(this._findVisibleCell(a))):this._focusFocusable(e,this._findVisibleCell(a)),this._lastCellIndex=s,!0},_moveColumn:function(t,o){var r=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+":visible");var a=zo(No(this.columns));var l=r.index(e(t));var n=o?-1:1;var i=a[l];var s=Uo(a,this.columns,l,l+n);s>=0&&(this.reorderColumn(s,i,o),this.trigger(Ve,{newIndex:s,oldIndex:l,column:i}))},_handleHome:function(e,t){const o=this;let r=e.parent();const a=r.parent();const l=o.lockedTable&&o.lockedTable.children("tbody")[0]===a[0];const n=a[0]===o.tbody[0];let i;const s=o._hasVirtualColumns();const d=o._hasVirtualRows();const c=0===(d?o.virtualScrollable.wrapper:o.content).scrollLeft();return s&&d&&t?(o._focusVirtualCell(!0,s&&!c),!0):s?(c?o._setCurrent(o.table.find(z).first().children(M).first()):o._forceScrollVirtualColumn(u.HOME,t),!0):d&&t?(o._focusVirtualCell(!0),!0):(t?i=o.lockedTable?o.lockedTable.find(z).first().children(M).first():o.table.find(z).first().children(M).first():(n||l)&&(n&&this.lockedTable&&(r=o._relatedRow(r)),i=r.children(R).first()),i&&i.length?(o._setCurrent(i),!0):void 0)},_setCurrentVirtualCell:function(e){const t=this;e?this._setCurrent(t.table.find(z).first().children(M).first()):this._setCurrent(t.table.find(z).last().children(M).last())},_forceScrollVirtualColumn:function(e,t,o){const r=this;o?(r._shouldFocusInLastRow=!t,r._shouldFocusInFirstRow=t):e===u.HOME?r._shouldFocusInFirstRow=t:r._shouldFocusInLastRow=t,r.one(oe,(function(){o&&r.one(oe,(function(){r._setCurrentVirtualCell(t)})),r._shouldFocusInLastRow&&(r.content.scrollTop(r.content[0].scrollHeight),delete r._shouldFocusInLastRow),r._shouldFocusInFirstRow&&(r.content.scrollTop(0),delete r._shouldFocusInFirstRow)})),r._scrollToColumn(e)},_focusVirtualCell:function(e,t){const o=this;const r=this.virtualScrollable.verticalScrollbar;const a=Math.ceil(r.scrollTop()+r.innerHeight())>=r[0].scrollHeight;const l=0===this.virtualScrollable.verticalScrollbar.scrollTop();const n=e?l:a;const i=e?u.HOME:u.END;if(n)t?o._forceScrollVirtualColumn(i,e,!0):o._setCurrentVirtualCell(e);else{0===o.dataSource.group().length&&(o.virtualScrollable._alwaysScrollTop=!0);const a=e?0:r[0].scrollHeight;o.one(oe,(function(){t?o._forceScrollVirtualColumn(i,e,!0):(o._setCurrentVirtualCell(e),o._shouldFocusInLastRow&&delete o._shouldFocusInLastRow,o._shouldFocusInFirstRow&&delete o._shouldFocusInFirstRow)})),r.scrollTop(a),r.trigger(de)}},_handleEnd:function(e,t){const o=this;let r=e.parent();const a=r.parent();const l=o.lockedTable&&o.lockedTable.children("tbody")[0]===a[0];const n=a[0]===o.tbody[0];let i;const s=o._hasVirtualColumns();const d=o._hasVirtualRows();const c=d?o.virtualScrollable.wrapper:o.content;const p=c.scrollLeft()+c.innerWidth()>=c[0].scrollWidth;return s&&d&&t?(o._focusVirtualCell(!1,s&&!p),!0):s?(p?o._setCurrent(o.table.find(z).last().children(M).last()):o._forceScrollVirtualColumn(u.END,t),!0):d&&t?(o._focusVirtualCell(!1),!0):(t?i=o.table.find(z).last().children(M).last():(n||l)&&(!n&&this.lockedTable&&(r=o._relatedRow(r)),i=r.children(R).last()),i&&i.length?(o._setCurrent(i),!0):void 0)},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,o,r,a){const l=this.options.editable&&"incell"==this._editMode();let n=e(i()).closest(".k-grid-stack-edit-cell,.k-edit-cell");let s;const d=this._isStackedMode();const c=a.is(ke);const u=!a.is("table");const p=d&&a.is(".k-grid-stack-cell");const h=!p&&a.closest(".k-grid-stack-cell");const g=this._isFocusableGridElement(t);const f=!jr(t);const m=a;let b;if(d?p?b=a.parent().find(".k-grid-stack-cell").length>1:h&&h.length&&(b=h.find(ke).length>1):b=t.find(ke).length>1,!n[0]&&c&&u&&b&&g&&f){if(!d&&(a.is(":last-child")&&!r||a.is(":first-child")&&r))return Pr(this.table,!0),!0;if(a=r?a.prev(ke):a.next(ke),p&&!a.length){const e=m.parent().find(".k-grid-stack-cell");r&&m.is(":first-child")&&(a=e.last()),!r&&m.is(":last-child")&&(a=e.first())}else if(!a.length&&!p){const e=m.closest(".k-grid-stack-cell");r&&m.is(":first-child")&&(a=e),!r&&m.is(":last-child")&&(a=e.find(ke).first())}return d&&a.is(".k-grid-stack-cell")?this._currentStackedCell(a,!0):a.trigger("focus"),!0}if(d&&!p&&!n[0]||!l||t.is("th")||(this.options.scrollable?this._headertables&&this._headertables.filter(o).length:this.thead&&this.thead.filter(a).length)){if(t.parent().hasClass("k-filter-row")){if(s=this._filterFocusable(),!r&&s[s.length-1]===document.activeElement)return s.first().trigger("focus"),!0;if(r&&s[0]===document.activeElement)return s.last().trigger("focus"),!0}return!1}return n[0]&&n[0]!==t[0]&&(t=n),n=this._tabNext(t,o,r),n[0]!==t[0]&&(!!n.length&&(this._handleEditing(t,n,n.closest("table")),!0))},_handleDeletion:function(o){const r=this;const a=r.current();const l=e(i());const n=r._isStackedMode()?!r._currentStackedCell():!l.is("table");return!(!(r._isEditableEnabled!==t?r._isEditableEnabled&&r.options.editable:r.options.editable)||jr(a)||n||!a.closest("tbody").length||!a.closest(".k-master-row").length)&&(r._removeCommandClick({currentTarget:a,preventDefault:o.preventDefault,stopPropagation:o.stopPropagation}),!0)},_handleEscKey:function(t){const o=i();const r="incell"==this._editMode();const a=this._isStackedMode();const l=e(o);const n=l.is(".k-grid-stack-cell")?e():l.closest(".k-grid-stack-cell");const s=a?l:t;const d=n&&n.length>0;const c=a&&s.is(".k-grid-stack-cell");if(!jr(n.length?n:s))return c||!d&&t.has(o).length&&(!this._isFocusableGridElement(t)||1!==t.find(ke).length)?(Pr(this.table,!0),delete this._activeStackedCell,!0):d?(n.trigger("focus"),!0):!!t.parent().hasClass("k-filter-row")&&(this._filterFocusable().attr(at,-1),Pr(this.table,!0),!0);if(r)this.closeCell(!0),a&&d&&(To(n.parent().children(".k-grid-stack-cell")),this._currentStackedCell(n,!0));else{var u=e(t).closest(vt).index();if(o&&o.blur(),this.cancelRow(!0),u>=0){const e=this._currentStackedCell();if(a&&e){const t=this.tbody.find(vt).eq(u).find(".k-grid-stack-cell").eq(e.index);this._setCurrentStackedCell(t)}else{const e=this.items().eq(u).children(M).first();this._setCurrent(e)}}}return a||Pr(this.table,!0),!a},_toggleCurrent:function(e,t,o){const r=this;const a=e.parent();if(e.is(".k-command-cell"))return!1;if(a.is(".k-filter-row"))return!1;if(a.is(x+Pe))return a.find(".k-icon,.k-svg-icon").first().click(),!0;if(!t&&o){const e=r._isStackedMode()?'[ref="expand-detail-button"], [ref="collapse-detail-button"]':".k-icon,.k-svg-icon";return a.find(e).first().click(),!0}return!1},_handleSpaceKey:function(t,r){var a=this;if(r&&a.groupable&&t.hasClass(Ie)){var l=a.groupable.descriptors();var n=t.attr(o.attr("field"));var i=a.groupable.aggregates();return a.groupable._canDrag(t)?l.push({field:n,dir:"asc",aggregates:i||[]}):l=e.grep(l,(function(e){return e.field!==n})),a.dataSource.group(l),!0}},_hasStackedModeDetailsButton:function(e){return e.find('[ref="expand-detail-button"], [ref="collapse-detail-button"]').length>0},_currentStackedCell:function(e,t){const o=this;if(!e||!e.length)return o._activeStackedCell;o._activeStackedCell={cell:e,index:e.index()},t&&e.length&&e.trigger("focus")},_handleEnterKey:function(t,o,r,a){const l=this;var n=this.options.editable&&!1!==this.options.editable.update;var s=r.closest("td");var d=this._hasDetails();var c;const u=l._isStackedMode();const p=u&&a&&"incell"!==l._editMode();const h=u?"k-grid-stack-edit-cell":"k-edit-cell";const g=u&&(r.is(".k-grid-stack-cell")||r.parent().is(".k-grid-stack-cell")||r.closest(".k-grid-stack-cell").length>0);if(r.is("table")||e.contains(t[0],r[0])||(t=s),t.is("th"))return c=t.find(".k-link"),!(t.has(e(i())).length>0)&&(c.length?c.click():t.parent().hasClass("k-filter-row")?(this._filterFocusable().attr(at,0),t.find(":kendoFocusable").first().trigger("focus")):t.find(we).trigger("focus"),!0);if(!p){if(!g&&this._toggleCurrent(t,n,d))return!0;if(g&&l._hasStackedModeDetailsButton(r))return this._toggleCurrent(t,!1,!0),!0;let e=":kendoFocusable";u&&!g&&To(t.find(".k-grid-stack-cell"));var f=(g?r:t).find(e).first();if(f[0]&&(g||!t.hasClass(h)&&t.hasClass("k-focus")))return g?f.trigger("focus"):l._currentStackedCell(f,!0),!0}return!(!n||r.is(":button,.k-button,textarea"))&&(s[0]||(s=t),u&&r.is(".k-grid-stack-cell")&&l._currentStackedCell(r),g&&(s=r.is(".k-grid-stack-cell")?r:r.closest(".k-grid-stack-cell")),this._handleEditing(s,!1,o),!0)},_nextHorizontalCell:function(e,t,o){if(!t.nextAll(R).length){var r=e.find(E);if(-1==r.index(t.parent())){if(t.hasClass(Ie)){var a=[];return Zo([ar(this.columns)[0]],vr(r.eq(0).children(":visible").first()),a,0,0),a[o]?a[o][0]:t}return t.parent().hasClass("k-filter-row")?r.last().children(R).first():this._findVisibleCell(r.eq(o).children(R+",[hidden]").first())}}return this._findVisibleCell(t.nextAll(R+",[hidden]").eq(0))},_prevHorizontalCell:function(e,t,o){var r=t.prevAll(R);if(!r.length){var a=e.find(E);if(-1==a.index(t.parent())){if(t.hasClass(Ie)){var l=[];var n=ar(this.columns);return Zo([n[n.length-1]],vr(a.eq(0).children().last()),l,0,0),l[o]?l[o][0]:t}return t.parent().hasClass("k-filter-row")?a.last().children(R).last():a.eq(o).children(R).last()}}r=t.prevAll(R+",[hidden]");let i=this._findVisibleCell(r.first());return i.is(".k-group-cell")?i.next(R):i},_currentDataIndex:function(e,o){var r=o.attr("data-index");if(!r)return t;var a=ar(this.columns).length;return a&&!e.closest(Ct).hasClass("k-grid-content-locked")[0]?r-a:r},_findVisibleCell:function(e){var t=e.index();var o=e.closest("tr").index();var r;if(e.is("[hidden]")){r=e.prevAll(":not([hidden])").first();var a=e.prevUntil(":not([hidden])","[hidden]").length;if(!r.attr("colspan")||r.attr("colspan")>1&&r.attr("colspan")<=a+1){if(0===(r=e.prevAll("[hidden]").last()).length)return e.closest("tr").prevAll().find(`td:nth-of-type(${t+1}):visible`).last();for(;!(r.attr("rowspan")||r.attr("rowspan")>1&&r.attr("rowspan")!=o-r.closest("tr").index()||Math.abs(r.index()-t)==r.attr("colspan"));)if(0===(r=r.closest("tr").prevAll().find("td, th").eq(t).first()).length){r=e;break}}}else r=e;return r},_prevVerticalCell:function(t,o){var r;var a=o.parent();var l=t.children(E);var n=l.index(a);var i=this._currentDataIndex(t,o);if(i||o.hasClass(Ie))return(r=_r(o)).eq(r.length-2);if(i=Math.max(a.children(I).index(o),this._lastCellIndex||0),a.hasClass("k-filter-row")){let e=l.last().children(".k-group-cell").length;return kr(t).filter(Eo).eq(Math.max(0,i-e))}if(-1==n){if(this._hasVirtualColumns()&&(i=this._virtualCellIndex),!(a=t.find("tr.k-filter-row:visible"))[0]){(this._hasDetails()||o.parent().find(".k-hierarchy-cell").length)&&i&&i--;let e=0;return o.parent().is(".k-table-group-row")&&(e=l.last().children(".k-group-cell").length),kr(t).eq(Math.max(0,i-e))}this._hasDetails()&&i--}else a=0===n?e():l.eq(n-1);if((r=a.children(I)).length>i){let e=r.eq(i);return e.is(".k-group-cell")&&(e=e.nextAll("td").not(".k-group-cell").not(":hidden").first()),this._findVisibleCell(e)}return r.eq(0)},_nextVerticalCell:function(e,o){var r;var a;var l=a=o.closest(vt);var n=e.children(E);var i=n.index(l);var s=this._currentDataIndex(e,o);var d=this.virtualScroll||{};var c;if(-1!=i&&s===t&&o.hasClass(Ie))return vr(o).eq(1);s=s?parseInt(s,10):l.children(I).index(o),s=Math.max(s,this._lastCellIndex||0),-1==i?(l=n.eq(0),d.columns&&(c=parseInt(l.children().first().attr("colspan"),10),s=this._virtualCellIndex-(c>1?c:0)),(this._hasDetails()||l.find(".k-hierarchy-cell").length)&&s++,l.hasClass("k-table-group-row")&&(s+=a.children(".k-group-cell").length)):l=n.eq(i+o[0].rowSpan);let u=(r=l.children(".k-group-cell,"+I)).eq(0);return r.length>s&&(u=r.eq(s)),u.is(".k-group-cell")&&(u=u.nextAll("td").not(".k-group-cell").not(":hidden").first()),u},_verticalContainer:function(e,t){var o=e.parent();var r=this._navigatableTables.length;var a=Math.floor(r/2);var l=k(o[0],this._navigatableTables);return t&&(a*=-1),((l+=a)>=0||l<r)&&(o=this._navigatableTables.eq(l)),o.find(t?">thead":">tbody")},_filterFocusable:function(){return this.wrapper.find(".k-filter-row").find(".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible")},_horizontalContainer:function(e,t){var o=this._navigatableTables.length;if(o<=2)return e;var r=e.parent();var a=k(r[0],this._navigatableTables);return a+=t?1:-1,!t||2!=a&&a!=o?!t&&(1==a||a<0)?e:this._navigatableTables.eq(a).find("thead, tbody"):e},_tabNext:function(e,t,o){var r=!0;var a=o?e.prevAll(R).first():e.nextAll(":visible").first();if(!a.length){if(a=e.parent(),this.lockedTable&&(r=o&&t==this.lockedTable[0]||!o&&t==this.table[0],a=this._relatedRow(a)),r){if(this._hasVirtualColumns())return e;a=a[o?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible").first()}a=o?a.children(R).last():a.children(R).first()}return a},_handleEditing:function(t,o,r){var a,l,n=this,s=e(i()),d=n._editMode(),c=Kt.msie,u=n._editContainer,p=n.options.editable&&!1!==n.options.editable.update;const h=n._isStackedMode();const g=t.is(".k-grid-stack-cell");if(r=e(r),"incell"==d){const e=h?"k-grid-stack-edit-cell":"k-edit-cell";l=t.hasClass(e)}else l=g?t.hasClass("k-grid-stack-edit-cell"):t.parent().hasClass("k-grid-edit-row");if(n.editable){if(e.contains(u[0],s[0])&&(s.trigger("blur"),c&&s.trigger("blur")),!n.editable&&!g)return void Pr(n.table);if(!n.editable.end())return h&&g?n._setCurrentStackedCell(t):("incell"==d?n._setCurrent(u):n._setCurrent(u.children().filter(R).first()),void((a=u.find(":kendoFocusable").first()[0])&&a.focus()));"incell"==d?n.closeCell():(n.saveRow(),l=!0)}if(o&&n._setCurrent(o),g||Pr(n.table,!0),p){if(!l&&!o||o)if(d===ut){if(!(h?t.find("[ref='expand-detail-button'], [ref='collapse-detail-button']").length:e(n.current()).hasClass("k-hierarchy-cell"))){const e=n._isStackedMode();const o=e?t:n.current();if(e&&o.is(".k-command-cell"))return;n.editCell(o,e&&o.parent().children().index(o))}}else n.editRow(n.current().parent());n._toggleToolbarEditingItemsVisibility()}},_wrapper:function(){var e=this,t=e.table,r=e.options.height,a=e.options.width,l=e.element;l.is(Ct)||(l=l.wrap("<div/>").parent()),e.wrapper=l.addClass("k-grid "+o.getValidCssClass("k-grid-","size",e.options.size)),e._isStackedMode()?e.wrapper.addClass(O):e.wrapper.removeClass(O),r&&(e.wrapper.css(tt,r),t.css(tt,rt)),a&&e.wrapper.css(ot,a),e._initMobile()},_initContextMenu:function(){var e=this,t=e.options,o=h(t.contextMenu)&&b(t.contextMenu.groups)?{items:t.contextMenu.groups}:{items:ro},a=h(t.contextMenu)&&b(t.contextMenu.body)?{items:t.contextMenu.body}:{items:to},l=h(t.contextMenu)&&b(t.contextMenu.head)?{items:t.contextMenu.head}:{items:oo};var n=h(t.contextMenu)?t.contextMenu:{};a=g({},{messages:t.messages,target:e.tbody,filter:".k-table-td",action:e._action.bind(e),states:e._buildStates()},n,a),l=g({},{messages:t.messages,target:e.thead,filter:".k-table-th",action:e._action.bind(e),states:e._buildStates()},n,l),e.groupable&&(o=g({},{showOn:"click",target:e.groupable.groupContainer,filter:".k-groupable-context-menu",messages:t.messages,action:e._action.bind(e),states:e._buildStates()},n,o)),e.tbodyContextMenu=new r.grid.ContextMenu("<ul></ul>",a),e.theadContextMenu=new r.grid.ContextMenu("<ul></ul>",l),e.groupsContextMenu=!!e.groupable&&new r.grid.ContextMenu("<ul></ul>",o)},_buildStates:function(){var t=this;return{isEditable:t.options.editable,isSelectable:t.options.selectable,isSortable:t.options.sortable,isRowReorderable:h(t.options.reorderable)?t.options.reorderable.rows:t.options.reorderable,isGroupable:t.options.groupable,allowPaste:t.options.allowPaste,alwaysDisabled:!1,hasSelection:()=>!!this.select()&&this.select().length>0,isSorted:()=>!(this.dataSource.sort()&&this.dataSource.sort().length>0),canMoveGroupPrev:t=>e(t).closest(".k-chip").index()>0,canMoveGroupNext:t=>{var o=e(t).closest(".k-chip-list").children().length-1;return e(t).closest(".k-chip").index()<o}}},_action:function(e){var t=e.command,o=g({grid:this},e.options);return new r.grid.commands[t](o).exec()},_initMobile:function(){var e=this.options;var t=this;if(this._isMobile="auto"!==t.options.adaptiveMode&&!0===e.mobile&&o.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile,this._isMobile){var r=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+o.ns+'stretch="true" data-'+o.ns+'role="view" data-'+o.ns+'init-widgets="false"></div>').parent();this.pane=this._createPane(r),this.view=this.pane.view(),e.height?this.pane.element.parent().css(tt,e.height):this.pane.element.parent().css(tt,this.wrapper[0].style.height),this._editAnimation="slide",t.wrapper.on("transitionend"+q,(function(e){e.stopPropagation()})),t.wrapper.on("contextmenu"+q,"th a",(function(e){return e.preventDefault(),!1})),this.view.bind("showStart",(function(){t._isLocked()&&(t._updateTablesWidth(),t._applyLockedContainersWidth(),t._syncLockedContentHeight(),t._syncLockedHeaderHeight(),t._syncLockedFooterHeight())}))}},_createPane:function(e){return o.Pane.wrap(e,{viewEngine:{viewOptions:{renderOnInit:!0,wrap:!1,wrapInSections:!0,detachOnHide:!1,detachOnDestroy:!1}}})},_initLoader:function(t){var o=this,r={size:"medium",messages:{exporting:"Exporting..."}};r=e.extend({},r,t);const a=e("<div></div>").kendoLoader(r).data("kendoLoader");o.loader=a,o._loaderContainer=A.u.bind(o)},_tbody:function(){var t,o=this.table;(t=o.find(">tbody")).length||(t=e("<tbody/>").appendTo(o)),t.addClass("k-table-tbody"),this.tbody=t},_scrollable:function(){var t,r,a,l=this,n=l.options,i=n.scrollable,s=!0!==i&&i.virtual?function(e){var t;if("string"==typeof e)return"true"===(t=e.toLowerCase())?{rows:!0}:{rows:t.indexOf("rows")>-1,columns:t.indexOf("columns")>-1};if(!0===e)return{rows:!0}}(i.virtual):null,d=!o.support.kineticScrollNeeded||s&&s.rows?o.support.scrollbar():0;const c=l._isStackedMode();if(i){c||((t=l.wrapper.children(".k-grid-header"))[0]||(t=e('<div class="k-grid-header" />').insertBefore(l.table)),t.css(Ut?"padding-left":"padding-right",i.virtual?d+1:d),(r=e('<table role="none" class="k-grid-header-table k-table"/>')).addClass(o.getValidCssClass("k-table-","size",n.size)),r.width(l.table[0].style.width)),c||(r.append(l.thead),t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(r))),l.content=l.table.parent(),l.virtualScroll=s,l.content.is(".k-virtual-scrollable-wrap, ."+Xt)&&(l.content=l.content.parent()),l.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(l.content=l.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),l.content.parent().hasClass("k-grid-container")||l.content.wrap("<div class='k-grid-container' />").parent(),s&&s.rows&&!l.virtualScrollable&&l._createVirtualScrollable(),s&&s.columns&&l.table.add(l.thead.parent()).css({width:Yo(dr(ir(l.columns)))}),c?l.scrollables=l.content:(a=t.children(".k-grid-header-wrap"),l.scrollables=a.add(l.content));var u=l.wrapper.find(".k-grid-footer");if(u.length&&(l.scrollables=l.scrollables.add(u.children(".k-grid-footer-wrap"))),c||a.off("scroll"+q).on("scroll"+q,(function(e){l._scrollLeft!==this.scrollLeft&&o.scrollLeft(l.scrollables.not(e.currentTarget),this.scrollLeft)})),s&&s.rows)l.content.find(">.k-virtual-scrollable-wrap").off("scroll"+q).on("scroll"+q,(function(){var e=this.scrollLeft!=l._scrollLeft;l._scrollLeft=this.scrollLeft,o.scrollLeft(l.scrollables,this.scrollLeft),l.lockedContent&&(l.lockedContent[0].scrollTop=this.scrollTop),s.columns&&e&&l.refresh()}));else{var p=i.endless;var h=l.dataSource.options.pageSize;p&&(l._endlessPageSize=h),l.content.off("scroll"+q).on("scroll"+q,(function(e){var t=this.scrollLeft!=l._scrollLeft;l._scrollLeft=this.scrollLeft,o.scrollLeft(l.scrollables.not(e.currentTarget),l._scrollLeft),l.lockedContent&&e.currentTarget==l.content[0]&&(l.lockedContent[0].scrollTop=this.scrollTop),p&&this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!l._endlessFetchInProgress&&l._endlessPageSize<l.dataSource.total()&&(l._skipRerenderItemsCount=l._endlessPageSize,l._endlessPageSize=l._endlessPageSize+h,l.dataSource.options.endless=!0,l._endlessFetchInProgress=!0,l.dataSource.pageSize(l._endlessPageSize)),s&&s.columns&&t&&(l._virtualColScroll=!0,l._cacheEditableState(),l.refresh(),l._restoreEditableState(),l._virtualColScroll=!1),l.rowResizer&&l.rowResizer.css("left",e.currentTarget.scrollLeft+"px")}));var g=l.content.data("kendoTouchScroller");g&&g.destroy(),(g=o.touchScroller(l.content))&&g.movable&&(l.touchScroller=g,g.movable.bind("change",(function(e){o.scrollLeft(l.scrollables,-e.sender.x),l.lockedContent&&l.lockedContent.scrollTop(-e.sender.y)})),l.one(oe,(function(e){e.sender.wrapper.addClass("k-grid-backface")})))}}},_createVirtualScrollable:function(){var e=this;e.virtualScrollable&&e.virtualScrollable.destroy(),e.virtualScrollable=new no(e.content,{dataSource:e.dataSource,itemHeight:function(){return e._averageRowHeight()},page:function(){e._restoreEditableState()},scroll:function(){e._focusEditable()},loadStart:function(){e._progress(!0)},loadEnd:function(){e._progress(!1)}}),e.virtualScrollable.bind(ie,e._onVirtualPaging.bind(e))},_onVirtualPaging:function(){var e=this;e._cacheEditableState(),e._isVirtualIncellEditable()&&(e._shouldClearEditableState=!1,e.closeCell(),e._shouldClearEditableState=!0)},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable()},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===pt},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===ut},_isVirtualPopupEditable:function(){return this.virtualScrollable&&"popup"===this._editMode()},_hasVirtualColumns:function(){return!!(this.virtualScroll||{}).columns},_hasVirtualRows:function(){return!!(this.virtualScroll||{}).rows},_scrollVirtualWrapper:function(){var e=this;var t=e.virtualScrollable;(e._isVirtualInlineEditable()||e._isVirtualIncellEditable())&&(t._isScrolledToBottom()?t._scrollWrapperToBottom():t._isScrolledToTop()&&t._scrollWrapperToTop())},_scrollVirtualWrapperOnColumnResize:function(){var e=this.virtualScrollable;e&&e._scrollWrapperOnColumnResize()},_restoreEditableState:function(){var t=this;var o=t._editableState||{};var r=o.model;var a=t.dataSource;var l=t._isVirtualInlineEditable();var n=t._isVirtualIncellEditable();var i=t._hasVirtualColumns();var s;var d;if((l||n||i)&&r&&a._getByUid(r.uid,a.view()))if(t._editMode()===pt)t._shouldClearEditableState=!1,t.editRow(r),i||t._focusEditable();else if(t._editMode()===ut){const a=t._isStackedMode();s=t.tbody.children(uo("uid",r.uid)),(d=a?e(s).find(".k-grid-stack-cell:not(.k-drag-cell):not(.k-command-cell)"+uo(dt,o.field)):e(s).children(uo(dt,o.field)))[0]&&(t._shouldClearEditableState=!1,t.editCell(d,a&&d.parent().children().index(d)),i||t._focusEditable())}t._shouldClearEditableState=!0},_focusEditable:function(){var e=this;var t=(e._editableState||{}).field;var o=e._editContainer;o&&o.length&&!y(o[0],i())&&e._canFocusEditable()&&(e._isVirtualInlineEditable()||e._hasVirtualColumns()?o.find(uo(st,t)).find(ke).eq(0).trigger("focus"):(e._isVirtualIncellEditable()||e._hasVirtualColumns())&&o.find(ke).eq(0).trigger("focus"))},_canFocusEditable:function(){var e=this;return(e._isVirtualIncellEditable()||e._isVirtualInlineEditable()||e._hasVirtualColumns())&&($r((e.virtualScrollable||{}).wrapper,e._editContainer)||$r(e.content,e._editContainer))},_cacheEditableState:function(){var t=this;var r=t._editContainer;var a=r?t._modelForContainer(r):null;var l=t._isVirtualInlineEditable();var n=t._isVirtualIncellEditable();var s=t._hasVirtualColumns();var d;var c;var u;(l||n||s)&&a&&(t._clearEditableState(),d=e(i()),r&&d[0]&&y(r[0],d[0])&&(d.change(),(c=o.widgetInstance(d,o.ui))&&v(c.value)&&d.is(ct)&&(u=d.val(),d.is("[type='checkbox'")&&(u=d.is(":checked")),c.value(u),c.trigger(X))),t._editMode()===pt?t._editableState={model:a,field:d.closest("["+o.attr(st)+"]").attr(o.attr(st))}:t._editMode()===ut&&(t._editableState={model:a,field:r.attr(o.attr(dt))}))},_clearSortClasses:function(){var e=this,t=e.content||e.table,o=e.lockedContent;t&&t.find(D).removeClass(Re),o&&o.find(D).removeClass(Re)},_clearEditableState:function(){var e=this;(e.virtualScrollable||e.virtualScroll&&e._hasVirtualColumns())&&(e._editableState=null)},_destroyVirtualScrollable:function(){var e=this;e._clearEditableState(),e.virtualScrollable&&e.virtualScrollable.element&&e.virtualScrollable.destroy(),e.virtualScrollable=null},_destroyRowResizing:function(){this.rowResizing&&(this.rowResizing.destroy(),this.rowResizing=null),this.rowResizer&&(this._detachRowResizerEvents(),this.rowResizer.off(et+q),this.rowResizer=null,this._clearCachedRowsHeight())},_renderNoRecordsContent:function(){var t=this;if(t.options.noRecords){var r=t.table.parent().children("."+ye);r.length&&r.remove(),t.dataSource&&t.dataSource.view().length||(r=e(t.noRecordsTemplate({grid:t})),o.applyStylesFromKendoAttributes(r,["margin","position"]),r.insertAfter(t.table))}},_setContentWidth:function(t){var r,a=this,l="k-grid-content-expander",n='<div class="'+l+'"></div>',i=a.resizable;a.options.scrollable&&a.wrapper.is(":visible")&&(r=a.table.parent().children("."+l),a._setContentWidthHandler=a._setContentWidth.bind(a),a.dataSource&&a.dataSource.view().length?r[0]&&(r.remove(),i&&i.unbind("resize",a._setContentWidthHandler)):(r[0]||(r=e(n).appendTo(a.table.parent()),i&&i.bind("resize",a._setContentWidthHandler)),a.thead&&(r.width(a.thead.width()),isNaN(parseFloat(t,10))||o.scrollLeft(a.content,t))),a._applyLockedContainersWidth(!0),a._syncLockedContentHeight(),a.lockedHeader&&0===a.table[0].clientWidth&&(a.table[0].style.width="1px"))},_applyLockedContainersWidth:function(e){if(this.options.scrollable&&this.lockedHeader){let t,r=this.thead.parent(),a=r.parent(),l=this.wrapper[0].clientWidth,n=this._groups(),i=o.support.scrollbar(),s=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),c=r.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),u=Jo(s),p=Jo(c);n>0&&e&&(u+=d(this.lockedHeader.find(".k-group-cell").first())*n),u>=l&&(u=l-3*i),this.lockedHeader.add(this.lockedContent).width(u),a[0].style.width=a.parent().width()-u-2+_t,r.add(this.table).width(p),this.virtualScrollable&&!Qt&&(l-=i),this.content[0].style.width=l-u-1+_t,this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(u),t=this.footer.find(".k-grid-footer-wrap"),t[0].style.width=a[0].clientWidth+_t,t.children().first().width(p))}},_setContentHeight:function(){var e,t=this,r=t.options,a=t.wrapper.children(".k-grid-header"),l=o.support.scrollbar();var n=(r.scrollable||{}).height;if(r.scrollable&&t.wrapper.is(":visible")){n&&""===t.content[0].style.height&&(t.content[0].style.height=n),e=t.wrapper.innerHeight(),e-=c(a),t.pager&&t.pager.element.is(":visible")&&(e-=c(t.pager.element)),r.groupable&&(e-=c(t.wrapper.children(".k-grouping-header:not(.k-hidden)"))),r.toolbar&&(e-=c(t.wrapper.children(".k-grid-toolbar"))),t.footerTemplate&&(e-=c(t.wrapper.children(".k-grid-footer"))),t.statusBar&&(e-=c(t.wrapper.children(".k-selection-aggregates")));((i=t.wrapper)[0].style.height||(s=i.height(),i.height(rt),s!=i.height()?(i.height(""),1):(i.height(""),0)))&&(e>2*l?(t.lockedContent&&(l=t.table[0].offsetWidth>t.table.parent()[0].clientWidth?l:0,t.lockedContent.height(e-l)),t.content.height(e)):t.content.height(2*l+1))}var i,s},_averageRowHeight:function(){var e=this,t=e._items(e.tbody,!0).length,o=e._rowHeight;if(0===t)return o;e._rowHeight||(e._rowHeight=o=c(e.table)/t,e._sum=o,e._measures=1);var r=c(e.table)/t;return o!==r&&(e._measures++,e._sum+=r,e._rowHeight=e._sum/e._measures),o},_dataSource:function(){var e,o=this,r=o.options,l=r.dataSource;l=b(l)?{data:l}:l,h(l)&&(g(l,{table:o.table,fields:o.columns}),e=r.pageable,h(e)&&e.pageSize!==t&&(l.pageSize=e.pageSize)),o.dataSource&&o._refreshHandler?o.dataSource.unbind(X,o._refreshHandler).unbind(T,o._progressHandler).unbind(he,o._requestEndHandler).unbind(H,o._errorHandler).unbind(gt,o._sortHandler):(o._refreshHandler=o.refresh.bind(o),o._progressHandler=o._requestStart.bind(o),o._requestEndHandler=o._requestEnd.bind(o),o._errorHandler=o._error.bind(o),o._sortHandler=o._clearSortClasses.bind(o)),o.dataSource=a.create(l).bind(X,o._refreshHandler).bind(T,o._progressHandler).bind(he,o._requestEndHandler).bind(H,o._errorHandler).bind(gt,o._sortHandler)},_error:function(){this._progress(!1),this._requestInProgress=!1},_requestStart:function(){this._progress(!0),this._requestInProgress=!0},_requestEnd:function(){this._requestInProgress=!1},_modelChange:function(t){var a,l,n,i,s,d,c,u,p,h=this,g=h.tbody,f=t.model,m=h.tbody.find("tr["+o.attr("uid")+"="+f.uid+"]"),b=m.hasClass("k-table-alt-row"),k=h._items(g).index(m),_=h.lockedContent;const v=h._isStackedMode();_&&(a=h._relatedRow(m));if((v?m.add(a).find(".k-grid-stack-cell:not(.k-drag-cell):not(.k-command-cell)"):m.add(a).children(".k-edit-cell")).length&&!h.options.rowTemplate){(v?m.add(a).children(":not(.k-group-cell,.k-hierarchy-cell)").find(".k-grid-stack-cell:not(.k-drag-cell):not(.k-command-cell)"):m.add(a).children(":not(.k-group-cell,.k-hierarchy-cell)")).each((function(){if(l=e(this),!(v&&l.hasClass(".k-command-cell")||(n=hr(h.columns)[h._calculateColumnIndex(l)]).field!==t.field)){const e=v?"k-grid-stack-edit-cell":"k-edit-cell";if(l.hasClass(e))l.addClass("k-dirty-cell");else{const e=v?l.find(".k-grid-stack-content"):l;h._displayCell(e,n,f)}}}))}else if(!m.hasClass("k-grid-edit-row")){d=e().add(m),_&&(i=(b?h.lockedAltRowTemplate:h.lockedRowTemplate)(f),d=d.add(a),a.replaceWith(i)),i=(b?h.altRowTemplate:h.rowTemplate)(f);let t=e(i);for(o.applyStylesFromKendoAttributes(t,["display"]),m.replaceWith(t),i=h._items(g).eq(k),_&&(m=m.add(a),a=h._relatedRow(i)[0],Fr(i[0],a),i=i.add(a)),((s=h.options.selectable)||h._checkBoxSelection)&&m.hasClass(ve)&&h.select(i),u=d.children(":not(.k-group-cell,.k-hierarchy-cell)"),c=i.children(":not(.k-group-cell,.k-hierarchy-cell)"),k=0,p=h.columns.length;k<p;k++)n=h.columns[k],l=v?c.find().eq(k):c.eq(k),s&&u.eq(k).hasClass(ve)&&l.addClass(ve);h.trigger("itemChange",{item:i,data:f,ns:r})}},_pageable:function(){var t,r=this,a=r.options.pageable,l=r.options.size,n=r.options.navigatable;if(a){(t=r.wrapper.children("div.k-grid-pager")).length||(t=e('<div class="k-pager k-grid-pager"/>')),"top"===a.position?t.prependTo(r.wrapper).addClass("k-grid-pager-top"):t.appendTo(r.wrapper),r.pager&&r.pager.destroy();let i=r.options.adaptiveMode;"auto"===r.options.adaptiveMode&&a&&"object"==typeof a&&a.adaptiveMode&&(i=a.adaptiveMode),"object"==typeof a&&a instanceof o.ui.Pager?r.pager=a:r.dataSource._groupPaging?r.pager=new eo(t,g({},a,{dataSource:r.dataSource,navigatable:n,size:l,adaptiveMode:i})):r.pager=new o.ui.Pager(t,g({},a,{dataSource:r.dataSource,navigatable:n,size:l,adaptiveMode:i})),r.pager.bind("pageChange",(function(e){r.trigger("page",{page:e.index})&&e.preventDefault()})),r._togglePagerVisibility()}},_statusBar:function(){var t=this,o=t.options,r=t.wrapper,a=o.statusBarTemplate,l="";a&&(t.statusBar?t.statusBar.html(a({aggregates:t._cellAggregates})):(l+='<div class="k-selection-aggregates k-grid-selection-aggregates">',l+=a({aggregates:t._cellAggregates}),l+="</div>",o.scrollable?t.statusBar=e(l).insertAfter(r.find(".k-grid-container")):t.statusBar=e(l).insertAfter(r.find(".k-grid-table"))))},_footer:function(){var t,r=this,a=r.dataSource.aggregates(),l="",n=r.footerTemplate,i=r.options,s=r.footer||r.wrapper.find(".k-grid-footer");if(n)if(l=e(r._wrapFooter(n(a))),o.applyStylesFromKendoAttributes(l,["display","left","right"]),s.length){var d=l;s.replaceWith(d),s=r.footer=d}else i.scrollable?(r.statusBar?r.footer=l.insertBefore(r.statusBar):i.pageable&&"top"!==i.pageable.position?r.footer=l.insertBefore(r.wrapper.children("div.k-grid-pager")):r.footer=l.appendTo(r.wrapper),s=r.footer):s=r.footer=l.insertAfter(r.tbody);else s&&!r.footer&&(r.footer=s);if(s.length&&(i.scrollable&&(t=s.attr(at,-1).children(".k-grid-footer-wrap"),r.scrollables=e(r.scrollables.filter((function(){return!e(this).is(".k-grid-footer-wrap")})).toArray()).add(t)),r._footerWidth&&s.find("table").css("width",r._footerWidth),t)){var c=o.scrollLeft(r.content);!0!==i.scrollable&&r.virtualScroll&&r.virtualScroll.rows&&(c=o.scrollLeft(r.wrapper.find(".k-virtual-scrollable-wrap"))),o.scrollLeft(t,c)}r.lockedContent&&(r._appendLockedColumnFooter(),r._applyLockedContainersWidth(),r._syncLockedFooterHeight())},_wrapFooter:function(t){var r,a=this,l="",n=o.support.mobileOS?0:o.support.scrollbar();return a.options.scrollable?((r=(l=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table class="k-table k-grid-footer-table"><tfoot class="k-table-tfoot">'+t+"</tfoot></table></div></div>")).find("table")).addClass(o.getValidCssClass("k-table-","size",a.options.size)),a._appendCols(r),l.css(Ut?"padding-left":"padding-right",n),l):'<tfoot class="k-grid-footer k-table-tfoot">'+t+"</tfoot>"},_actionsheetFooterActionsTemplate:function(e){let t="";return e.forEach((e=>{const r=e.command;const a=e.text;t+=o.html.renderButton(`<button data-command=${r}>${a}</button>`,e)})),t},_isAdaptive:function(){const e=this;return"auto"===e.options.adaptiveMode&&(e.smallMQL.mediaQueryList.matches||e.mediumMQL.mediaQueryList.matches)},_isStackedMode:function(){return"stacked"===this.options.dataLayoutMode},_toolPopup:function(e){return e.popup&&e.popup.wrapper},_filterToolbarTool:function(t){const r=this;const a=hr(r.columns);const l=r.options;const n=e=>{const t=r._isAdaptive()?"[ref-actionsheet-action-button]":"[ref='clear-filter']";return r._toolPopup(e)?.find(t)};const i=r._toolbarOptionsForTool("filter");const s=t.data("kendoColumnMenu");s&&(s.wrapper.off("click"+q),s.element.off("click"+q),s.destroy());const d=!(!l.filterable||!1===r.options.columnMenu.filterable)&&g(!0,{pane:r.pane},l.filterable);if(!d)return;const c={dataSource:r.dataSource,columns:!1,sortable:!1,filterable:d,hideAutoSizeColumn:!0,owner:r,adaptiveMode:r.options.adaptiveMode,encodeTitles:r.options.encodeTitles,componentType:"modern",_actionsheet:{actionButtons:lo(r.options.messages).filter,title:"Filter by",closeButton:!0,ref:"filter-view"},closeCallback:function(e){e.removeClass(ve);const o=r._toolPopup(t);o.length&&o.find(".k-focus").removeClass("k-focus"),t.element.focus()},init:function(e){if(t.wrapper.attr("ref","filter-tool"),!r._showAdaptiveView)for(var o=0,n=a.length;o<n;o++){const e=a[o];const n=e.field;if(!(l.filterable&&!1!==e.filterable&&!e.draggable&&!e.selectable&&!e.command))continue;const i=t.wrapper.find(`.k-columns-item[data-field="${n}"]`);r._initFilterMenuForColumn(e,i)}},contentTemplate:function({isAdaptive:e}){let t="";for(let e=0;e<a.length;e++){const o=a[e];!(l.filterable&&!1!==o.filterable)||o.command||o.draggable||o.selectable||(t+='<div class="k-columnmenu-item-wrapper">',t+=`<div class="k-columnmenu-item-content k-columns-item" ref="filter" tabindex="0" data-field="${o.field}" data-index=${o.index||e||0}></div>`,t+="</div>")}return i&&!i.clearButton||e||(t+='<div class="k-actions k-actions-stretched k-actions-horizontal k-column-menu-footer">',t+=o.html.renderButton(`<button ref="clear-filter">${lo(r.options.messages).filter[0].text}</button>`,{icon:"filter-clear"}),t+="</div>"),t},filtering:function(e){r.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(r._clearEditableState(),r.dataSource.options.endless&&r._resetEndless())}};(t=t.kendoColumnMenu(c).data("kendoColumnMenu")).element.bind("click"+q,(function(o){t.popup&&t.popup._closing||(e(o.currentTarget).addClass(ve),n(t)?.toggleClass("k-disabled",!t.dataSource._filter))}));const u=function(e){const t=e.sender.wrapper&&e.sender.wrapper.find(".k-grid-filter-tool")?.data("kendoColumnMenu");const o=t.dataSource._filter;const a=e.field;let l=!e.filter;let i;const s=o&&o.filters;if(l&&s&&s.length&&!s.find((e=>e.filters&&e.filters.length?e.filters[0].field===a:e.field===a)))return;const d=t.wrapper.find(`.k-columns-item[data-field='${a}']`);const c=d?.closest(".k-expander")?.find(".k-columnmenu-item");o&&o.filters.length?i=l?s.filter((e=>e.field!==a)).length>0:!l:l||(i=!0),d.length&&d.data("kendoExpansionPanel").toggle(!1),n(t)?.toggleClass("k-disabled",!i),r._toggleColumnMenuFilterIndicator(c,!l),r._toggleBadge(t.element,i)};r.unbind("filter",u),r.bind("filter",u),t.bind("open",(function(){const e=r._toolPopup(t);if(e.length){e.focus();const o=n(t);const a=t.dataSource._filter&&t.dataSource._filter.filters;a&&a.length&&a.forEach((e=>{const o=e.field||e.filters[0].field;const a=t.wrapper.find(`.k-columns-item[data-field='${o}']`);const l=a?.closest(".k-expander")?.find(".k-columnmenu-item");r._toggleColumnMenuFilterIndicator(l,!0)})),o.length&&(o.off("mousedown"+q),o.on("mousedown"+q,(function(){r.dataSource.filter([]),r._toggleBadge(t.element,!1),t.wrapper.find(".k-columnmenu-indicators").remove(),o.toggleClass("k-disabled",!0),t.popup.close()})))}}))},_initFilterMenuForColumn:function(e,t){const o=this;let r=o._hasFilterMenu();let a;if(t.length){a=t.data("kendoFilterMenu"),a&&a.destroy(),a=t.data("kendoFilterMultiCheck"),a&&a.destroy();var l=e.filterable;var n=g({},r,l,{appendToElement:!0,componentType:"modern",dataSource:o.dataSource,values:e.values,format:e.format,title:e.title||e.field,pane:o.pane,adaptiveMode:o.options.adaptiveMode,change:function(e){o.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(o._clearEditableState(),o.dataSource.options.endless&&o._resetEndless())}});return l&&l.messages&&(n.messages=g(!0,{},r.messages,l.messages)),l&&l.dataSource&&(n.forceUnique=!1,n.checkSource=l.dataSource),l&&l.multi?t.kendoFilterMultiCheck(n).data("kendoFilterMultiCheck"):t.kendoFilterMenu(n).data("kendoFilterMenu")}},_initAiPrompt:function(){const t=this;const r=t.options.ai;const a=r?.aiAssistant||{};const l=t.options.messages?.ai;let n=r?.service;const i={data:e=>(e=>({role:"user",contents:[{$type:"text",text:e}],columns:t.columns}))(e),outputGetter:function(e){const t=e?.status;const o=e?.messages&&"object"==typeof e.messages;let r=[];return t?r.push(l.error+" "+`${e.status} ${e.statusText}`):(r.push(l.success),o?r.push(...e.messages):r.push(l)),r.join("/n")}};const s=(e,t)=>{if(!t._requestInProgress||!t.options.service)return;const o=t.outputObjects;t.updatePromptOutputContent(e.output,d),t.element.find("[data-id='"+d+"']").attr("data-id",e.outputId);const r=o.get(d);o.delete(d),r&&(r.id=e?.outputId,r.data.id=e?.outputId,o.set(e?.outputId,r)),t.promptOutputs=t.promptOutputs.map((e=>(e.id===d&&e.id,e))),t.stopStreaming(),t._requestInProgress=!1};if(r?.service){const e="string"==typeof r.service;const t=e?r.service:r.service.url;t&&(n={...i,...e?{}:r.service,url:t})}const d="skeleton"+o.guid();const c=t._aiAssistant=e("<div></div>").kendoAIPrompt(e.extend(!0,{service:n,speechToText:!0,outputTemplate:e=>{const t=e.output;return t.output?.split("/n").map((e=>{return(t=e).includes(l.error)?`<p class="k-text-error">${o.htmlEncode(t)}</p>`:`<div class="k-card-text">${o.htmlEncode(t)}</div>`;var t})).join("")},views:[{type:"prompt",buttonIcon:"sparkles",themeColor:"primary",footerTemplate:()=>`<div class="k-actions k-actions-start k-actions-horizontal k-prompt-actions">${o.html.renderButton("<button ref-ai-apply-button>Apply</button>",{themeColor:"primary",icon:"table-wizard",fillMode:"solid",rounded:"full"})}</div>`},{type:"output",themeColor:"primary",isStreaming:!0,isLoading:!0}],promptRequest:e=>{c.options.service&&(c.activeView("output"),c.removePromptOutput(mo),c.addPromptOutput({id:d,prompt:e.prompt,output:"",isLoading:!0,isStreaming:!0}),c._requestInProgress=!0,c.transport.options.requestStart=null)},promptResponse:e=>{e.preventDefault();const o=e;s(o,c),o&&o.response&&t._handleAIResponse(o.response),!1!==r.autoClose&&t._aiAssistantWindow?.close()},promptRequestCancel:()=>{c.removePromptOutput(d),c.outputObjects.size||c.addPromptOutput(bo(l)),c._requestInProgress=!1}},a)).data("kendoAIPrompt");c?.transport&&(c.transport.options.error=function(e){e.response.abort(),s({output:e.output,outputId:e.id},c)}),t._aiAssistantWindow.element.append(t._aiAssistant.element),t._aiAssistantWindow.wrapper.addClass("k-grid-assistant-window")},_handleAIResponse:function(e){const t=this;const o=!1!==t.options.columnMenu.sortable&&!1!==t.options.sortable&&g({},t.options.sortable,{allowUnsort:!1});const r=!(!t.options.filterable||!1===t.options.columnMenu.filterable)&&g(!0,{pane:t.pane},t.options.filterable);const a=t.options.groupable&&!1!==t.options.groupable.enabled||t.dataSource._groupPaging;const l=t.dataSource.options.schema;const n=l?.model?.fields;e&&Object.keys(e).forEach((l=>{if("messages"===l)return;let i=e[l];const s=Array.isArray(i);const d=s&&!i.length||!s&&"object"==typeof i&&!Object.keys(i).length;const c=d||!d&&!function(e,t){let o={sort:co,filter:io,group:so}[t];return!!o&&o(e).some((e=>!e.field))}(i,l);if(c){if(d||(i=s?i:[i]),"sort"===l&&o){if(d&&!t.dataSource._sort)return;t.dataSource.sort(i)}if("filter"===l&&r){if(d){if(d&&!t.dataSource._filter)return}else i=go(i,n);t.dataSource.filter(i)}if("group"===l&&a){if(d&&!t.dataSource._group)return;t.dataSource.group(i)}"highlight"===l&&(t.clearHighlight(),d||(t._hasAIHighlight=i,t._applyAIHighlight(i)))}}))},_bindAIPrompt:function(){const t=this.options.ai;const o=this._aiAssistant;const r=e=>e.find("[ref-ai-apply-button]");o.element.on("input"+q,"[ref-prompt-input]",(t=>{const a=r(o.element);const l=e(t.currentTarget).val();a.toggleClass("k-disabled",!l||""===l.trim())})),t?.aiAssistant?.promptSuggestions&&o.element.on("click"+q,".k-suggestion",(e=>{r(o.element).toggleClass("k-disabled",!1)})),o.element.on("click"+q,"[ref-ai-apply-button]",(()=>{const e=o.element.find("[ref-prompt-input]").getKendoTextArea().value();const t=o._selectedView;const r={prompt:e,isRetry:!1,history:[]};t?.service&&(r.service=t.service),o.trigger("promptRequest",r),o.transport&&o.transport.read({prompt:r.prompt,history:r.history,isRetry:!1,service:t.service})})),o?.speechToTextButton&&o.speechToTextButton.bind("result",(function(){r(o.element).toggleClass("k-disabled",!1)}))},_unbindAIPrompt:function(){const e=this._aiAssistant;e?.element?.off("input"+q),e?.element?.off("click"+q)},_applyAIHighlight:function(e){const t=this;const o=t.dataSource.options.schema;const r=o?.model?.id||"id";const a=o?.model?.fields;e=go(e,a);const l=t.dataSource.parseHighlightDescriptors(e,r);t.highlight(l)},_initAiAssistantWindow:function(t){const o=this;const r=o.options.ai;const a=r&&!0===r||!1===r;const l=r?.aiAssistantWindow||{};const n=l?.content;const i={modal:!1,resizable:!1,title:"AI Assistant",visible:!1,actions:["Minimize","Maximize","Close"],position:{top:c(t)+t.offset().top,left:t.offset().left+t.outerWidth()/2},width:437,...l,open:function(e){if(l.open&&l.open(e),e._defaultPrevented)return;const t=o._aiAssistant;if(t&&t.element){const e=o.options.messages?.ai;t.outputObjects.size||t.addPromptOutput(bo(e)),t.activeView("prompt");const r=t.element.find("[ref-ai-apply-button]");const a=t.element.find("[ref-prompt-input]").val();o._aiAssistant&&o._bindAIPrompt(),r.toggleClass("k-disabled",!a||""===a.trim())}},close:function(t){if(l.close&&l.close(t),!t._defaultPrevented){if(t.userTriggered){t.sender.element.trigger("focus");var a=o.items().index(e(o.current()).parent());o._toggleToolbarEditingItemsVisibility(),o.options.navigatable&&o.current()&&(o._setCurrent(o.items().eq(a).children().filter(M).first()),Pr(o.table,!0))}o._aiAssistant&&(r?.keepOutputHistory||o._aiAssistant?.clearOutput(),o._unbindAIPrompt())}}};a||(o._aiAssistantWindow=e("<div></div>").kendoWindow(i).data("kendoWindow"),n||o._initAiPrompt()),t.bind("click"+q,(function(e){o._aiAssistantWindow&&(o._aiAssistantWindow.element.is(":visible")?o._aiAssistantWindow.close():o._aiAssistantWindow.open())}))},_toolbarOptionsForTool:function(e){const t=this.options;let o=[];return Array.isArray(t.toolbar)?o=t.toolbar:t.toolbar&&t.toolbar.items&&(o=t.toolbar.items),g({},fo[e],o.find((t=>t.name===e)))},_groupToolbarTool:function(t){const r=this;const a=r.options;const l=e=>{const t=r._isAdaptive()?"[ref-actionsheet-action-button]:not('.k-button-solid-primary')":"[ref='clear-group']";return r._toolPopup(e)?.find(t)};let n;let i;if(!(a.groupable&&!1!==a.groupable.enabled||r.dataSource._groupPaging))return;n=t.data("kendoColumnMenu"),n&&(n.wrapper.off("click"+q),n.element.off("click"+q),n.destroy());const s=r._toolbarOptionsForTool("group");s.reorderButtons=!0;const d=({isAdaptive:t,isFirstItem:r,isLastItem:a})=>`<span class="k-group-menu-item-actions">\n                ${s.reorderButtons?`<span class="k-group-menu-item-action k-group-menu-item-up-action ${r?"k-disabled":""}" ${r?"aria-disabled=true":"aria-disabled=false"}>\n                    ${o.ui.icon(e("<span></span>"),{icon:"chevron-up",size:t?"large":"medium"})}\n                </span>\n                <span class="k-group-menu-item-action k-group-menu-item-down-action ${a?"k-disabled":""}" ${a?"aria-disabled=true":"aria-disabled=false"}>\n                    ${o.ui.icon(e("<span></span>"),{icon:"chevron-down",size:t?"large":"medium"})}\n                </span>`:`<span class="k-group-menu-item-action k-group-menu-item-drag-action">\n                    ${o.ui.icon(e("<span></span>"),{icon:"handle-drag-dots",size:t?"large":"medium"})}\n                    </span>`}\n                </span>`;const c=(t,a,l)=>{const n=r._isAdaptive();const i=t.title||t.field||"";return`<div class="k-group-menu-item" data-field="${t.field}" data-index="${l&&l.index||t.index||"0"}" tabindex="0">\n                ${l&&l.renderIndicator?d({isAdaptive:n,isFirstItem:l.isFirstItem,isLastItem:l.isLastItem}):""}\n                        <span class="k-group-item-text">${i}</span>\n                        <span class="k-spacer"></span>\n                        <span class="k-group-menu-item-actions">\n                            <span class="k-group-menu-item-action ${a.actionClass}">\n                                ${o.ui.icon(e("<span></span>"),{...a,size:n?"large":"medium"})}\n                            </span>\n                        </span>\n                    </div>`};i={dataSource:r.dataSource,columns:!1,sortable:!1,filterable:!1,hideAutoSizeColumn:!1,owner:r,adaptiveMode:r.options.adaptiveMode,encodeTitles:r.options.encodeTitles,componentType:"modern",_actionsheet:{actionButtons:lo(r.options.messages).group,title:"Group by",ref:"group-view",closeButton:{icon:"check",themeColor:"primary"}},init:function(e){const o=t.wrapper.find(".k-group-menu");o.attr("ref","group-tool"),t._showAdaptiveView?(o.unwrap(),o.removeClass("k-group-menu-md").addClass("k-group-menu-lg")):t.wrapper.removeClass("k-column-menu"),o.find(".k-group-menu-item").on("click"+q,".k-group-menu-item-remove-action, .k-group-menu-item-add-action",(function(e){r._groupItemClickHandler(e,t,{itemTemplate:c,indicator:d})})),r._syncGroupingTool(e,t,r.dataSource.group(),{itemTemplate:c,indicator:d})},closeCallback:function(e){e.removeClass(ve);const o=r._toolPopup(t);o.length&&o.find(".k-focus").removeClass("k-focus"),t.element.focus()},contentTemplate:({columns:e})=>{const t=r._isAdaptive();let a="<div class=\"k-group-menu k-group-menu-md\"><div class='k-group-menu-item-wrap'>";return e.forEach((e=>{!Br(r,e)||e.command||e._originalObject.selectable||(a+=c(e,{icon:"plus-circle",actionClass:"k-group-menu-item-add-action"}))})),a+="</div>",s&&!s.clearButton||t||(a+=`<div class="k-actions k-actions-stretched k-actions-horizontal k-column-menu-footer">\n                                     ${o.html.renderButton(`<button ref="clear-group">${lo(r.options.messages).group[0].text}</button>`,{icon:"x"})}\n                                </div>`),a+="</div>",a}};let u=r.dataSource.group()||[];t=t.kendoColumnMenu(i).data("kendoColumnMenu");const p=function(e){const t=this;const o=e.sender.wrapper&&e.sender.wrapper.find(".k-grid-group-tool")?.data("kendoColumnMenu");const r=e.groups||t.dataSource.group()||[];const a=l(o);const n=u.length>r.length?u:r;t._syncGroupingTool(e,o,n,{itemTemplate:c,indicator:d}),t._toggleBadge(o.element,r.length>0),a?.toggleClass("k-disabled",!r.length),u=r};r.unbind("group",p),r.bind("group",p),t.element.on("click"+q,(function(o){t.popup&&t.popup._closing||e(o.currentTarget).addClass(ve)})),t.bind("open",(function(){const e=l(t);e.length&&(e.off("mousedown"+q),e.on("mousedown"+q,(function(){r.dataSource.group([]),r.groupable.trigger(X,{groups:[]}),r._toggleBadge(t.element,!1),e?.toggleClass("k-disabled",!0),t.popup.close()}))),e?.toggleClass("k-disabled",!r.dataSource.group().length)}))},_toggleReorderButtonsDisabledState:function(e,t,o){const r="k-disabled";if(!e.length)return;const a=e.find(".k-group-menu-item-actions .k-group-menu-item-up-action");if(a.length){t&&!a.hasClass(r)?(a.addClass(r),a.attr("aria-disabled",!0)):!t&&a.hasClass(r)&&(a.removeClass(r),a.attr("aria-disabled",!1));const e=a.next();e.length&&(o&&!e.hasClass(r)?(e.addClass(r),e.attr("aria-disabled",!0)):!o&&e.hasClass(r)&&(e.removeClass(r),e.attr("aria-disabled",!1)))}},_syncGroupingTool:function(t,o,r,a){const l=this;const n=t.groups||l.dataSource.group()||[];const i=()=>o._showAdaptiveView?l._toolPopup(o):o.wrapper;const s="k-group-menu-item-wrap";const d=()=>i()?.find(`.${s}`);const c=".k-group-menu-item";const u=i();let p=d();if(o._draggableInstance&&o._triggeredReordering)delete o._triggeredReordering;else if(p&&p.length&&(r.forEach(((t,r)=>{const i=u.find(c+`[data-field='${t.field}']`);const h=i.data("index");const g=i.find(".k-icon")?.attr("class").includes("plus-circle")?"remove":"add";const f="remove"===g;const m=`k-group-menu-item-${g}-action`;const b=i.parent();p=d();let k=!(!n||!n.length)&&n[0]?.field===t.field;let _=!(!n||!n.length)&&n[n.length-1].field===t.field;l._toggleReorderButtonsDisabledState(i,k,_);const v=!n.find((e=>e.field===t.field));if(!v&&b.is("[ref='group-container']"))return;let C;if(p&&2===p.length)C=f?p.first():p.last();else{C=e(`<div class="${s}" ${f?'ref="group-container':""}"></div>`);const t=f?"prepend":"append";const o=p.first().parent();const r=o.find("[ref='clear-group']");r.length&&!f?r.parent().before(C):o.length&&o[t](C)}const w=hr(l.columns)[h];const y=!v&&n.length>1;const S={renderIndicator:y,index:h,isFirstItem:k,isLastItem:_};const x=e(a.itemTemplate(w,{icon:f?"x-circle":"plus-circle",actionClass:m},S));i.remove();if(2===p.length&&!b.children().length&&(b.data("kendoReorderable")&&b.data("kendoReorderable")?.destroy(),b.remove()),f){if(y){const e=C.children().first();1===e.find(".k-group-menu-item-actions")?.length&&e.prepend(a.indicator({isAdaptive:l._isAdaptive(),isFirstItem:!0,isLastItem:!1}))}C.append(x)}else{const e=C.find(c+`[data-index="${h+1}"]`);if(1===n.length){b.children().first().find(".k-group-menu-item-actions:first-of-type").remove()}e.length?e.before(x):C.append(x)}C.find(x).on("click"+q,".k-group-menu-item-remove-action, .k-group-menu-item-add-action",(function(e){l._groupItemClickHandler(e,o)}))})),p=d(),p&&p.length)){const t=p.first().find(".k-group-menu-item-drag-action");const r=p.first().find(".k-group-menu-item-up-action, .k-group-menu-item-down-action");const a=p.first();const n=a.is("[ref='group-container']")&&a?.length;const i=t.length;const s=r.length;n&&s?r.each((function(){const t=e(this);t.unbind("click"+q),t.bind("click"+q,(e=>l._buttonClickReorderHandler(e,o)))})):n&&i&&(l._groupToolDraggableInstance(o,a),l._groupToolReorderableInstance(o,a))}},_buttonClickReorderHandler:function(t,o){t.preventDefault(),t.stopPropagation();const r=".k-group-menu-item";const a=e(t.currentTarget);const l=a.closest(r);const n=a.hasClass("k-group-menu-item-up-action")?"before":"after";const i="before"===n?l.prev(r):l.next(r);const s={element:l,target:i,position:n};this._handleGroupReordering(s,o)},_groupToolDraggableInstance:function(t,r){const a=this._isMobile;t._draggableInstance=r.kendoDraggable({holdToDrag:a,showHintOnHold:a,preventOsHoldFeatures:a,group:"group-item-draggable",autoScroll:!0,filter:".k-group-menu-item-drag-action",hint:function(t){return e('<div class="k-reorder-clue k-drag-clue">'+o.ui.icon({icon:"cancel",iconClass:"k-drag-status"})+"</div>")},clickMoveClick:!1,cursorOffset:{top:0,left:0}}).data("kendoDraggable")},_groupToolReorderableInstance:function(t,o){const r=this;const a=".k-group-menu-item";o&&o.data("kendoReorderable")&&o.data("kendoReorderable").destroy(),o.kendoReorderable({smartPosition:!1,draggable:t._draggableInstance,dragOverContainers:function(t,o){e(a).eq(o);return!0},dropFilter:"> "+a,allowIcon:"insert-middle",orientation:"vertical",reorderDropCue:e('<div class="k-drop-hint k-drop-hint-h"><div class="k-drop-hint-start"></div><div class="k-drop-hint-line"></div></div>'),positionDropCue:function(e){e.css({transform:"translate(0,-50%)"})},externalDraggable:function(e){var t=e.draggable;if(t)return t},change:function(e){r._handleGroupReordering(e,t)}})},_handleGroupReordering:function(t,o){const r=t.element;const a=t.target;const l="before"===t.position?"insertBefore":"insertAfter";const n=this.groupable.descriptors();r[l](a);const i=r.parent().children();const s=[];for(let t=0;t<i.length;t++){const o=e(i[t]).data("field");const r=n.find((e=>e.field===o));r&&s.push(r)}o._triggeredReordering=!0,this.dataSource.group(s),this.groupable.trigger(X,{groups:s})},_groupItemClickHandler:function(t,o){const r=this;const a=e(t.currentTarget).closest(".k-group-menu-item");const l="remove"===(e(t.currentTarget).find(".k-icon")?.attr("class").includes("plus-circle")?"remove":"add");const n=a.data("index");let i=r.groupable.descriptors();i.length||(i=r.dataSource.group());const s=hr(r.columns)[n];l?i.push({field:s.field,dir:"asc",aggregates:r.groupable.aggregates()||[],colID:s.uid,compare:s.sortable&&s.sortable.compare||r.groupable.sort&&r.groupable.sort.compare}):i=i.filter((e=>e.field!==s.field)),r.dataSource.group(i),r.groupable.trigger(X,{groups:i})},_sortToolbarTool:function(r){const a=this;const l=a.options;const n="k-columnmenu-indicators";const i=a._isAdaptive();const s=e=>{const t=a._isAdaptive()?"[ref-actionsheet-action-button]:not('.k-button-solid-primary')":"[ref='clear-sort']";return a._toolPopup(e)?.find(t)};let d;let c;const u=a._toolbarOptionsForTool("sort");d=r.data("kendoColumnMenu"),d&&(d.wrapper.off("click"+q),d.element.off("click"+q),d.destroy());const p=!1!==l.columnMenu.sortable&&!1!==l.sortable&&g({},l.sortable,{allowUnsort:!1});if(!p)return;c={dataSource:a.dataSource,columns:!1,sortable:p,filterable:!1,hideAutoSizeColumn:!0,owner:a,adaptiveMode:a.options.adaptiveMode,encodeTitles:a.options.encodeTitles,componentType:"modern",_actionsheet:{actionButtons:lo(a.options.messages).sort,title:"Sort by",ref:"sort-view",closeButton:{icon:"check",themeColor:"primary"}},init:function(e){r.wrapper.attr("ref","sort-tool")},closeCallback:function(e){e.removeClass(ve);const t=a._toolPopup(r);t.length&&t.find(".k-focus").removeClass("k-focus"),r.element.focus()},sort:function(e){const t=e.preventClose;r._preventClose="multiple"===a.options.sortable.mode||t,a.trigger("sort",{sort:e.sort})?e.preventDefault():(a._clearEditableState(),a.dataSource.options.endless&&a._resetEndless())},contentTemplate:function({columns:e,isAdaptive:t}){let r='<div class="k-columnmenu-item-wrapper">';return e.forEach((e=>{!1===e.sortable||e.command||e._originalObject.draggable||e._originalObject.selectable||(r+=`<div class="k-columnmenu-item" tabindex="0" data-field="${e.field}">${e.title||e.field||""}</div>`)})),r+="</div>",u&&!u.clearButton||t||(r+='<div class="k-actions k-actions-stretched k-actions-horizontal k-column-menu-footer">',r+=o.html.renderButton(`<button ref="clear-sort">${lo(a.options.messages).sort[0].text}</button>`,{icon:"x"}),r+="</div>"),r}},r=r.kendoColumnMenu(c).data("kendoColumnMenu");const h=function(e){const o=e.sender.wrapper&&e.sender.wrapper.find(".k-grid-sort-tool")?.data("kendoColumnMenu");const r=e.sender.dataSource._sortFields;const l=Array.isArray(e.sort);const i=e.sort.field;const d=e.sender.options.sortable&&("multiple"===e.sender.options.sortable.mode||"mixed"===e.sender.options.sortable.mode);let c;let u=e.sort.dir===t;c=l?e.sort.length:r&&Object.keys(r).length?!u||u&&Object.keys(r).length-1>0:!u,a._toggleBadge(o.element,c);const p=o.wrapper.find(`.k-columnmenu-item[data-field='${i}']`);let h=p.find("."+n);u?h.remove():(d||(h=o.wrapper.find("."+n)),h.length&&h.remove(),p.append(a._renderIndicator(`sort-${e.sort.dir}-small`))),s(o)?.toggleClass("k-disabled",!c)};a.unbind("sort",h),a.bind("sort",h),r.bind("open",(function(){const t=a._toolPopup(r);if(t.length){t.focus();const o=s(r);const l=t.find(".k-columnmenu-item");o.length&&(o.off("mousedown"+q),o.on("mousedown"+q,(function(){a.dataSource.sort([]),a._toggleBadge(r.element,!1),s(r)?.toggleClass("k-disabled",!0),r.wrapper.find(".k-columnmenu-indicators").remove(),r.close()}))),l.length&&(t.off("click"+q),t.on("click"+q,".k-columnmenu-item",(function(t){const o=e(t.currentTarget);const l=o.data("field");const i=a._toggleColumnMenuSortIndicator(o);const s=a.options.sortable&&"mixed"===a.options.sortable.mode;const d=t.originalEvent.ctrlKey;r.field=l,r._sortHandler({item:o,allowUnsort:i,allowSelectedState:!1,isMixed:s,hasCtrlKey:d}),a._toggleSortIndexes(a.dataSource._sortFields&&Object.keys(a.dataSource._sortFields).length>1,r,n)})))}})),r.element.on("click"+q,(function(t){if(r.popup&&r.popup._closing)return;e(t.currentTarget).addClass(ve);const o=r.dataSource._sortFields;const l=o&&Object.keys(o).length;const d=Object.keys(o).length>1;l&&Object.keys(o).forEach((e=>{const t=r.wrapper.find(`.k-columnmenu-item[data-field='${e}']`);const l=t.find("."+n);l.length&&l.remove(),t.append(a._renderIndicator(`sort-${o[e].dir}-small`))})),a._toggleSortIndexes(d,r,n,i),s(r)?.toggleClass("k-disabled",!l)}))},_toggleSortIndexes:function(t,o,r){if(!(this.options.sortable&&this.options.sortable.showIndexes))return;const a=o.wrapper.find(`.${r}`);let l=o.dataSource&&o.dataSource._sortFields;a.length&&(t?a.each(((t,o)=>{const r=e(o).closest(".k-columnmenu-item").data("field");const a=l[r];const n=e(o).parent().find(".k-sort-index");n.length?n.text(a.index):a.index?e(o).append(`<span class='k-sort-index'>${a.index}</span>`):e(o).append(`<span class='k-sort-index'>${t+1}</span>`)})):o.wrapper.find(".k-sort-index").remove())},_columnChooserTool:function(t){const o=this;const r="column-chooser";const a=t.data("kendoColumnMenu");a&&(a.wrapper.off("click"+q),a.element.off("click"+q),a.destroy());const l={dataSource:o.dataSource,columns:o.columns,sortable:!1,filterable:!1,hideAutoSizeColumn:!0,owner:o,adaptiveMode:o.options.adaptiveMode,encodeTitles:o.options.encodeTitles,messages:{reset:o.options.messages.clearButtons?o.options.messages.clearButtons.columnChooserReset:"Reset",apply:o.options.messages.applyButtons?o.options.messages.applyButtons.columnChooserApply:"Apply"},componentType:"modern",contentTemplate:function(e){return(0,e._defaultContents()[r])(e)},_actionsheet:{actionButtons:lo(o.options.messages)[r],title:"Column visibility",subtitle:"Selected fields are visible",closeButton:!0,ref:`${r}-view`},init:function(e){t.wrapper.attr("ref",r+"-tool"),t._showAdaptiveView?t.popup._content.find(`[ref='${r}']`).unwrap():t.wrapper.removeClass("k-column-menu")},closeCallback:function(e){e.removeClass(ve);const r=o._toolPopup(t);r.length&&r.find(".k-focus").removeClass("k-focus"),t&&t._showAdaptiveView&&t._applyColumnVisibility(),t.element.focus()}};(t=t.kendoColumnMenu(l).data("kendoColumnMenu")).element.bind("click",(function(o){t.popup&&t.popup._closing||e(o.currentTarget).addClass(ve)})),t.bind("open",(function(){const e=o._toolPopup(t);e.length&&e.find(".k-checkbox")?.first()?.focus()}))},_toggleBadge:function(t,o){const r=t.closest(".k-badge-container");const a=r.length&&r.find(".k-badge");const l=t.data("overflow");if(!a.length&&o){t.wrap(`<div class='k-badge-container' ${l?"data-overflow="+l:""}></div>`).parent().append(e("<span></span>").kendoBadge({round:"full",position:"edge",align:"top end",themeColor:"primary",cutoutBorder:!0}))}else!o&&a.length&&(a.remove(),t.unwrap(".k-badge-container"))},_toggleColumnMenuFilterIndicator:function(e,t){const o=this;const r=e.find(".k-columnmenu-indicators");const a=e.find(".k-spacer");if(t&&a.length){if(r&&r.length)return;a.before(o._renderIndicator("filter"))}else r&&r.length&&r.remove()},_toggleColumnMenuSortIndicator:function(e){const t=this;const o=e.find(".k-columnmenu-indicators");let r;let a=e.find(".k-sort-index").length?"before":"append";if(o&&o.length){const e=o.find(".k-icon");e.length&&e.hasClass("k-svg-i-sort-desc-small")?(o.remove(),r=!0):(e.remove(),o[a](t._renderIndicator("sort-desc-small")),r=!1)}else e[a](t._renderIndicator("sort-asc-small")),r=!1;return r},_renderIndicator:function(t){return e("<span class='k-columnmenu-indicators'></span>").append(o.ui.icon(e("<span></span>"),{icon:t}))},_globalColumnsMenu:function(e){var t,o,r=this,a=hr(r.columns),l=r.options.columnMenu;if(l){"boolean"==typeof l&&(l={}),r._setColumnsMediaVisibility(a);let n=!(!l.autoSize&&!l.clearAllFilters);(t=e.data("kendoColumnMenu"))&&t.destroy();let i={toggleable:n,expanded:l.expanded||!0,animation:!1,hideExpanderIndicator:!n};o={dataSource:r.dataSource,columns:l.columns,sortable:!1,filterable:!1,clearAllFilters:l.clearAllFilters,messages:l.messages,hideAutoSizeColumn:!0,owner:r,closeCallback:function(){e.trigger("focus")},init:function(e){r._isAdaptive()&&e.sender.popup.wrapper.find(".k-expanded [ref=columns-visibility]").data("handler").toggle(!1),r.trigger(U,{field:e.field,container:e.container})},open:function(e){r.trigger(Q,{field:e.field,container:e.container})},pane:"auto"!==r.options.adaptiveMode&&r.pane,autoSize:l.autoSize,encodeTitles:r.options.encodeTitles,componentType:"modern",adaptiveMode:"auto",columnsExpanderOptions:i},e.kendoColumnMenu(o)}},_columnMenu:function(){var e,r,a,l,n,i,s=this,d=hr(s.columns),c=s.options,u=c.columnMenu,p=m(s.columns,(function(e){return e.columns!==t})).length>0,h=m(s.columns,(function(e){return!1!==e.lockable})).length>0,f=m(s.columns,(function(e){return!0===e.stickable})).length>0,b=this._isMobile,k=function(e){s.trigger(U,{field:e.field,container:e.container})},_=function(e){s.trigger(Q,{field:e.field,container:e.container})},v=function(){Pr(s.table,!0)},C=function(e){s.trigger($e,{column:e.column})},w=function(e){s.trigger(je,{column:e.column})},y=function(e){s.trigger("sort",{sort:e.sort})?e.preventDefault():(s._clearEditableState(),s.dataSource.options.endless&&s._resetEndless())},S=function(e){s.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(s._clearEditableState(),s.dataSource.options.endless&&s._resetEndless())};if(u&&!s._isStackedMode()){"boolean"==typeof u&&(u={}),s._setColumnsMediaVisibility(d);for(var T=0,H=(i=kr(s.thead)).length;T<H;T++){r=d[T];var R=i.eq(T);if(!1!==r.columnMenu&&!r.command&&(r.field||R.attr("data-"+o.ns+"field"))){(e=R.data("kendoColumnMenu"))&&e.destroy(),l=!1!==r.sortable&&!1!==u.sortable&&!1!==c.sortable&&g({},c.sortable,{compare:(r.sortable||{}).compare}),n=!(!c.filterable||!1===r.filterable||!1===u.filterable)&&g(!0,{pane:s.pane},c.filterable,r.filterable),r.filterable&&r.filterable.dataSource&&(n.forceUnique=!1,n.checkSource=r.filterable.dataSource),n&&(n.format=r.format);const t="auto"!==s.options.adaptiveMode&&u.adaptiveMode||s.options.adaptiveMode;a={dataSource:s.dataSource,values:r.values,columns:u.columns,sortable:l,filterable:n,messages:u.messages,owner:s,adaptiveMode:t,adaptiveTitle:r.title||r.field,closeCallback:v,init:k,open:_,stick:C,unstick:w,pane:"auto"!==s.options.adaptiveMode&&s.pane,sort:y,filtering:S,filter:b?":not(.k-column-active)":"",autoSize:u.autoSize,hasLockableColumns:ar(d).length>0&&h&&!p,hasStickableColumns:f&&!p,encodeTitles:s.options.encodeTitles,componentType:u.componentType,appendTo:x+Zt,reorderable:!0===c.reorderable||c.reorderable&&c.reorderable.columns,groupable:s.options.groupable&&!1!==s.options.groupable.enabled&&!1!==r.groupable},R.kendoColumnMenu(a)}}}},_headerCells:function(){return e(this.thead).find("th").filter((function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")}))},_hasFilterMenu:function(){var e=this.options.filterable;return(!e||typeof e.mode!=nt||-1!=e.mode.indexOf("menu"))&&e},_filterable:function(){var e,t,r,a=this,l=hr(a.columns),n=function(e){a.trigger(N,{field:e.field,container:e.container})},i=function(){Pr(a.table,!0)},s=function(e){a.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(a._clearEditableState(),a.dataSource.options.endless&&a._resetEndless())},d=function(e){a.trigger(K,{field:e.field,container:e.container})},c=a._hasFilterMenu();if(c&&!a.options.columnMenu&&!a._isStackedMode())for(var u=0,p=(t=kr(a.thead)).length;u<p;u++)if(r=t.eq(u),!1!==l[u].filterable&&!l[u].command&&(l[u].field||r.attr("data-"+o.ns+"field"))){(e=r.data("kendoFilterMenu"))&&e.destroy(),(e=r.data("kendoFilterMultiCheck"))&&e.destroy();var h=l[u].filterable;var f=g({},c,h,{dataSource:a.dataSource,values:l[u].values,format:l[u].format,closeCallback:i,title:l[u].title||l[u].field,init:n,open:d,pane:a.pane,change:s,appendTo:x+Zt,adaptiveMode:a.options.adaptiveMode});h&&h.messages&&(f.messages=g(!0,{},c.messages,h.messages)),h&&h.dataSource&&(f.forceUnique=!1,f.checkSource=h.dataSource),h&&h.multi?r.kendoFilterMultiCheck(f):r.kendoFilterMenu(f)}},_filterRow:function(){var t=this;if(t._hasFilterRow()){var r;var l=hr(t.columns),n=t.options.filterable,i=t.thead.find(".k-filter-row"),s=function(e){t.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(t._clearEditableState(),t.dataSource.options.endless&&t._resetEndless())};this._updateHeader(t._groups());for(var d=0;d<l.length;d++){var c,u=l[d],p=t.options.filterable.operators,h=!1,f=e("<td class='k-table-td' title='"+t.options.messages.filterCellTitle+"'/>"),m=u.field;if(u.hidden&&f.hide(),i.append(f),m&&!1!==u.filterable){var b=u.filterable&&u.filterable.cell||{};(c=t.options.dataSource)instanceof a&&(c=t.options.dataSource.options);var k=g(!0,{},n.messages);if(u.filterable&&g(!0,k,u.filterable.messages),!1===b.enabled){f.html("&nbsp;");continue}b.dataSource&&(c=b.dataSource,h=!0),u.filterable&&u.filterable.operators&&(p=u.filterable.operators),r={column:u,dataSource:t.dataSource,suggestDataSource:c,customDataSource:h,field:m,messages:k,size:t.options.size,values:u.values,template:b.template,delay:b.delay,inputWidth:b.inputWidth,suggestionOperator:b.suggestionOperator,minLength:b.minLength,dataTextField:b.dataTextField,operator:b.operator,operators:p,showOperators:b.showOperators,change:s,adaptiveMode:t.options.adaptiveMode},e("<span/>").attr(o.attr("field"),m).appendTo(f).kendoFilterCell(r)}else f.html("&nbsp;");f.data("column",u)}this._filterFocusable().attr(at,-1)}},_sortable:function(){var e,t,r,a=this,l=hr(a.columns),n=a.options.sortable,i=function(e){a.trigger("sort",{sort:e.sort})?e.preventDefault():a._clearEditableState()};if(n&&!a._isStackedMode()){var s=kr(a.thead);for(var d=0,c=s.length;d<c;d++)!1!==(e=l[d]).sortable&&!e.command&&e.field&&((t=(r=s.eq(d)).data("kendoColumnSorter"))&&t.destroy(),r.attr("data-"+o.ns+"field",e.field).kendoColumnSorter(g({},n,e.sortable,{dataSource:a.dataSource,aria:!0,filter:":not(.k-column-active)",change:i})));s=null}},_columns:function(t){var r,a,l,n=this,i=n.table,s=i.find("col"),d=n.element.find("thead tr"),c=n.options.dataSource;if(t=t.length?t:f(i.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),(function(t,r){var a=(t=e(t)).attr(o.attr("sortable")),l=t.attr(o.attr("filterable")),n=t.attr(o.attr("type")),i=t.attr(o.attr("groupable")),d=t.attr(o.attr("field")),c=t.attr(o.attr("title")),u=t.attr(o.attr("column-menu")),p=t.attr(o.attr("menu"));return d||(d=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:d,type:n,title:c,sortable:"false"!==a,filterable:"false"!==l,groupable:"false"!==i,menu:"false"!==p,columnMenu:"false"!==u,template:t.attr(o.attr("template")),width:s.eq(r).css(ot)}})),r=!(n.table.find("tbody tr").length>0&&(!c||!c.transport)),n.options.scrollable&&!n._isStackedMode()){var u=t;if(a=ar(t),t=lr(t),a.length>0&&0===t.length)throw new Error("There should be at least one non locked column");!function(e,t){var o=0;var r,a;var l=e.find("th:not(.k-group-cell)");for(r=0,a=t.length;r<a;r++)t[r].locked&&(l.eq(r).insertBefore(l.eq(o)),l=e.find("th:not(.k-group-cell)"),o++)}(n.element.find("tr:has(th)").first(),u),t=a.concat(t)}if(d.length&&t.length&&n._updateColumnIDs(t,d.first()),n.columns=wo(t,r),e.grep(hr(n.columns),(function(e){return e.selectable})).length&&(n._selectedIds={},n._checkBoxSelection=!0,n.wrapper.on(Ke+q,"tbody > tr "+we,n._checkboxClick.bind(n)),n.wrapper.on(Ke+q,"thead > tr "+we,n._headerCheckboxClick.bind(n))),(l=e.grep(hr(n.columns),(function(e){return e.draggable}))).length){n._hasDragHandleColumn=!0;for(var p=0;p<l.length;p++)l[p].headerAttributes=e.extend({"aria-label":n.options.messages.dragHandleLabel},l[p].headerAttributes)}n._foreignKeyBindings(Ko(n.columns))},_foreignKeyBindings:function(e){var t=e.length;var o;for(var r=0;r<t;r++)(o=e[r]).dataSource&&this._fetchForeignKeyValues(o)},_fetchForeignKeyValues:function(t){var o=this;var r=e.Deferred();o._hasBoundForeignKey=!0,t.dataSource=a.create(t.dataSource),o._foreignKeyPromises||(o._foreignKeyPromises=[]),o._foreignKeyPromises.push(r),t.dataSource.fetch().then((function(){var e=t.dataSource.data();t.values=e.map((function(e){return{value:e[t.dataValueField],text:e[t.dataTextField]}})),r.resolve()}))},_updateColumnIDs:function(e,t){if(e.length){var o=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)");var r;for(var a=0;a<e.length;a++)(r=o.eq(a).attr(kt))&&(e[a].headerAttributes=g(e[a].headerAttributes,{id:r}));this._updateColumnIDs(ur(e),t.next())}},_headerCheckboxClick:function(t){var o=this,r=e(t.target),a=r.prop("checked");o._belongsToGrid(r)&&(o.trigger(J,{target:r,originalEvent:t})?t.preventDefault():(a?o.select(o.items()):o.clearSelection(),o._calculateAggregatesForSelected(),o.trigger(X,{cellAggregates:o._cellAggregates})))},_checkboxClick:function(t){var o=this,r=e(t.target).closest(vt),a=!r.hasClass(ve);o._belongsToGrid(r)&&(o.trigger(J,{target:r,originalEvent:t})?t.preventDefault():(a?o.select(r):o._deselectCheckRows(r),o._calculateAggregatesForSelected(),o.trigger(X,{cellAggregates:o._cellAggregates})))},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_getStackedLayoutSettings:function(){const e=this.options.stackedLayoutSettings;const t=e&&e.cols;let o=[];let r="";if(t)if(Array.isArray(t))for(let e=0;e<t.length;e++)if("object"==typeof t[e]){const r=t[e].width;if(!r&&0!==r)continue;"number"==typeof r&&o.push(`${r}px`),"string"==typeof r&&o.push(r)}else"number"==typeof t[e]?o.push(`${t[e]}px`):"string"==typeof t[e]&&o.push(t[e]);else"number"==typeof t&&(r=`k-grid-cols-${t}`);return{colClass:r,colsConfig:o.join(" ")}},_tmpl:function(t,r,a,l){var n,i,s=this,d=g({},o.Template,s.options.templateSettings),c=r.length,u={storage:{},count:0},p=s._hasDetails(),h=s._groups();var f=o.attr("field");var m;var b;var k;let _;return t||(_=t=>{var d=c?` ${o.attr("uid")}="${o.getter("uid")(t)}"`:"";var _=`<tr class="${a?"k-table-row k-table-alt-row ":"k-table-row "}k-master-row"${d}>`;for(h>0&&!l&&(_+=po(h)),p&&(_+='<td class="k-hierarchy-cell k-table-td" aria-expanded="false">'+o.ui.icon(e(`<a href="#" ${wt}="${bt}" tabindex="-1"></a>`),{icon:"caret-alt-"+(Ut?"left":"right")})+"</td>"),n=0;n<c;n++){let e;i=r[n],i.template,m=i.field,k={},s._editMode()&&m&&(i.attributes=i.attributes||{},s.virtualScroll&&(i.attributes[f]=m),e=s._dirtyCellTemplate(m)(t)),i.colSpan&&i.colSpan>0&&yr(i.attributes)?i.attributes=Sr(i.attributes):!i.colSpan&&i.hidden&&(i.attributes=wr(i.attributes)),i.command&&(i.attributes=i.attributes||{},void 0!==(b=i.attributes.class)?b.indexOf("k-command-cell")<0&&(i.attributes.class+=" k-command-cell "):i.attributes.class=" k-command-cell "),i.draggable&&(i.attributes=i.attributes||{},void 0!==i.attributes.class?i.attributes.class.indexOf("k-drag-cell")<0&&(i.attributes.class+=" k-drag-cell "):i.attributes.class=" k-drag-cell ",i.attributes["ref-grid-drag-cell"]||(i.attributes["ref-grid-drag-cell"]=!0),void 0===i.attributes[wt]&&(i.attributes[wt]=s.options.messages.dragHandleLabel),void 0!==i.attributes.style?i.attributes.style.indexOf("cursor: move;")<0&&(i.attributes.style+=" cursor: move;"):i.attributes.style="cursor: move;"),i._attributesFunction&&(k=i._attributesFunction(t));let a=g({},i.attributes,k);e&&(a.class=a.class||"",a.class+=e);let l=ho(a);let d="";i.colSpan&&(i.colSpan>1&&(d+=" "+o.attr("virtual")),d+=` colSpan="${i.colSpan}"`),_+=Wo(`<td${l}${d}>`),_+=i.selectable?o.template(Wt)({size:o.getValidCssClass("k-checkbox-","size",s.options.size)}):s._cellTmpl(i,u)(t),_+="</td>"}return _+="</tr>"},s._isStackedMode()&&(_=e=>{r=hr(zo(r));var t=(c=r.length)?` ${o.attr("uid")}="${o.getter("uid")(e)}"`:"";var d=`<tr class="${a?"k-table-row k-table-alt-row ":"k-table-row "}k-master-row"${t}>`;for(h>0&&!l&&(d+=po(h)),d+='<td class="k-table-td">\n                            <div class="k-grid-stack-row">\n                        ',n=0;n<c;n++){i=r[n],i.template,m=i.field,k={};let t;if(h>0&&s.dataSource.group().find((e=>e.field===m))&&i.hideOnGroup)continue;s._editMode()&&m&&(i.attributes=i.attributes||{},s.virtualScroll&&(i.attributes[f]=m),t=s._dirtyCellTemplate(m)(e)),i.colSpan&&i.colSpan>0&&yr(i.attributes)?i.attributes=Sr(i.attributes):!i.colSpan&&i.hidden&&(i.attributes=wr(i.attributes)),i.attributes.class="k-grid-stack-cell",i.title&&(i.attributes[o.attr("title")]=i.title),i.aggregates&&(i.attributes[o.attr("aggregates")]=i.aggregates);let a=!i.selectable;let l=!i.selectable;i.command&&(i.attributes=i.attributes||{},void 0!==(b=i.attributes.class)?b.indexOf("k-command-cell")<0&&(i.attributes.class+=" k-command-cell"):i.attributes.class="k-command-cell",l=i.title&&"&nbsp;"!==i.title,a=!0),i.draggable&&(l=!1,a=!0,i.attributes=i.attributes||{},void 0!==i.attributes.class?i.attributes.class.indexOf("k-drag-cell")<0&&(i.attributes.class+=" k-drag-cell"):i.attributes.class="k-drag-cell",i.attributes["ref-grid-drag-cell"]||(i.attributes["ref-grid-drag-cell"]=!0),void 0===i.attributes[wt]&&(i.attributes[wt]=s.options.messages.dragHandleLabel),void 0!==i.attributes.style?i.attributes.style.indexOf("cursor: move;")<0&&(i.attributes.style+=" cursor: move;"):i.attributes.style="cursor: move;"),i._attributesFunction&&(k=i._attributesFunction(e));let c=g({},i.attributes,k);t&&(c.class=c.class||"",c.class+=t);let p=ho(c);let _="";i.colSpan&&(i.colSpan>1&&(_+=" "+o.attr("virtual")),_+=` colSpan="${i.colSpan}"`);const v=i.parentIds?mr(s,i):i.title||i.field||"";d+=Wo(`<div${p}${_} ${i.field?`data-field=${i.field}`:""} data-index=${n}>`,!0),l&&(d+=`<div class="k-grid-stack-header">${v}</div>`),a&&(d+='<div class="k-grid-stack-content">'),d+=i.selectable?o.template(Wt)({size:o.getValidCssClass("k-checkbox-","size",s.options.size)}):s._cellTmpl(i,u)(e),a&&(d+="</div>"),d+="</div>"}return p&&(d+=`<div class="k-grid-stack-cell">\n                                <div class="k-grid-stack-content">\n                                    ${o.html.renderButton(`<button tabindex='-1' ref="expand-detail-button">${s.options.messages.details.expand}</button>`,{icon:"plus",fillMode:"flat",themeColor:"primary"})}\n                                </div>\n                            </div>`),d+="</div></td></tr>"})),t=o.template(t||_,d),u.count>0?t.bind(u.storage):t},_dirtyCellTemplate:function(e){return t=>{if(e&&t&&t.dirty&&t.dirtyFields){return("["===e.charAt(0)?o.getter(e)(t.dirtyFields):t.dirtyFields[e])?" k-dirty-cell":""}return""}},_headerCellText:function(e){var t=g({},o.Template,this.options.templateSettings),r=e.headerTemplate,a=typeof r,l=e.title&&(this.options.encodeTitles?Qr(e.title):e.title)||Qr(e.field||"");return a===lt?l=o.template(r,t)({}):a===nt&&(l=r),l},_cellTmpl:function(e,t){var r,a,l=this,n=g({},o.Template,l.options.templateSettings),i=e.template,s=e.field,d=e.format,c=typeof i,u=e.values;return e.command?b(e.command)?t=>{let o="";for(r=0,a=e.command.length;r<a;r++)e.command[r].visible?o+=e.command[r].visible(t)?l._createButton(e.command[r]):"":o+=l._createButton(e.command[r]);return o}:()=>l._createButton(e.command):e.selectable?Wt:e.draggable?jt:r=>{let a=l._dirtyIndicatorTemplate(s)(r);if(c===lt)t.storage["tmpl"+t.count]=i,a+=i(r),t.count++;else if(c===nt)a+=o.template(i,n)(r);else if(u&&u.length&&h(u[0])&&"value"in u[0]&&s){var p=Tr(u)[n.useWithBlock?o.getter(s)(r):s];a+=C(null!=p?p:"")}else{let t="";s&&(t=null==(s=o.getter(s)(r))?"":s),d&&(t=o.format(d.replace(Pt,"$1"),t)),a+=e.encoded?C(t):t}return a}},_dirtyIndicatorTemplate:function(e){return t=>{if(e&&t&&t.dirty&&t.dirtyFields){return("["===e.charAt(0)?o.getter(e)(t.dirtyFields):t.dirtyFields[e])?'<span class="k-dirty"></span>':""}return""}},_virtualCols:function(t){var r=this;var a=e.map(t,(function(e){return e.hidden?0:parseInt(e.width,10)}));var l=r.virtualScrollable?o.scrollLeft(r.content.find(">.k-virtual-scrollable-wrap")):o.scrollLeft(r.content);var n=d(r.content);var i=Yo(t);var s=[];var c=0;var u=0;var p=0;var h=0;var g=0;var f;for(h=0;h<t.length;h++){if(f=h<a.length-1?a[h+1]:0,!(g+a[h]+2*f<l)){c=1+p;break}a[h]&&p++,g+=a[h]}p=0,g=0;for(var m=t.length-1;m>=0;m--){if(!(g+3*a[m]<i-n-l)){u=1+p;for(var b=h;b<=m;b++)t[b].locked||(s.push(t[b]),t[b].colSpan&&delete t[b].colSpan);s[0].colSpan=c,s[s.length-1].colSpan=u;break}a[m]&&p++,g+=a[m]}return s[0].hidden&&s[0].colSpan--,r.virtualCols=s,s},_templates:function(){var t=this,o=t.options,r=t.dataSource,a=r.group(),l=t.footer||t.wrapper.find(".k-grid-footer"),n=r.aggregate(),i=t._isStackedMode(),s=hr(t.columns),d=hr(ar(t.columns)),c=o.scrollable?hr(lr(t.columns)):s,u=(t.virtualScroll||{}).columns?t._virtualCols(c):c,p=m(zo(d),(function(e,t){return e.groupHeaderColumnTemplate&&0!==t})),h=m(zo(u),(function(e){return e.groupHeaderColumnTemplate}));if(o.scrollable&&d.length&&!i){if(o.rowTemplate||o.altRowTemplate)throw new Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(o.rowTemplate,u,!1,!0),t.altRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,u,!0,!0),t.lockedRowTemplate=t._tmpl(o.rowTemplate,d),t.lockedAltRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,d,!0)}else t.rowTemplate=t._tmpl(o.rowTemplate,i?t.columns:u),t.altRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,i?t.columns:u,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(o.detailTemplate||(()=>""))),(t._group&&!w(n)||!w(n)&&!l.length||m(s,(function(e){return e.footerTemplate})).length)&&(t.footerTemplate=t._footerTmpl(s,n,"footerTemplate","k-footer-template k-table-row")),a&&m(s,(function(e){return e.groupFooterTemplate})).length&&(n=e.map(a,(function(e){return e.aggregates})),t.groupFooterTemplate=t._footerTmpl(u,n,"groupFooterTemplate","k-group-footer k-table-row",d.length),o.scrollable&&d.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(d,n,"groupFooterTemplate","k-group-footer k-table-row"))),a&&(p.length||h.length)?(n=e.map(a,(function(e){return e.aggregates})),t.groupHeaderColumnTemplate=t._groupHeaderTmpl(zo(u),n,"groupHeaderColumnTemplate","k-table-group-row k-grouping-row k-table-row",d.length,h),o.scrollable&&d.length&&(t.lockedGroupHeaderColumnTemplate=t._groupHeaderTmpl(zo(d),n,"groupHeaderColumnTemplate","k-table-group-row k-grouping-row k-table-row",0,p))):(t.groupHeaderColumnTemplate=null,t.lockedGroupHeaderColumnTemplate=null),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t='<div class="{0}">{1}</div>';var r=this.options.scrollable&&!this.wrapper[0].style.height?` ${o.attr("style-margin")}="0 auto" ${o.attr("style-position")}="static"`:"";var a={storage:{},count:0};var l=e.extend({},o.Template,this.options.templateSettings);l.paramName;var n;var i;var s;let d;if("function"===(i=typeof(n=this.options.noRecords.template?this.options.noRecords.template:o.format('<div class="k-grid-norecords-template"{1}>{0}</div>',this.options.messages.noRecords,r)))){let e=a.storage["tmpl"+a.count]=n;a.count++,d=r=>o.format(t,ye,e(r))}else"string"===i&&(d=this.options.noRecords.template?o.format(t,ye,n):()=>o.format(t,ye,n));return s=o.template(d,l),a.count>0&&(s=s.bind(a.storage)),s},_footerTmpl:function(e,t,r,a,l){var n,i,s,d,c,u=this,p=g({},o.Template,u.options.templateSettings),h=p.paramName,f={},m=0,b={},k=u._groups(),_=u.dataSource._emptyAggregates(t);const v=u._isStackedMode();let C=o.template((t=>{let C='<tr class="'+a+'">';k>0&&!l&&(C+=po(k)),u._hasDetails()&&!v&&(C+='<td class="k-hierarchy-cell k-table-td">&nbsp;</td>');const w=e;if(v){for(C+=Wo("<td>"),C+=`<div class="${Le}">`,n=0,i=w.length;n<i;n++)c=w[n],s=c[r],d=typeof s,s&&(d!==lt&&(b=_[c.field]?g({},p,{paramName:h+"['"+c.field+"']"}):{},s=o.template(s,b)),f["tmpl"+m]=s,C+=s(t),m++);C+="</div></td>"}else for(n=0,i=w.length;n<i;n++)c=w[n],s=c[r],d=typeof s,C+=Wo("<td"+ho(c.footerAttributes)+">"),s?(d!==lt&&(b=_[c.field]?g({},p,{paramName:h+"['"+c.field+"']"}):{},s=o.template(s,b)),f["tmpl"+m]=s,C+=s(t),m++):C+="&nbsp;",C+="</td>";return C+="</tr>",C}),p);return m>0?C.bind(f):C},_groupHeaderTmpl:function(e,t,r,a,l,n){var i,s,d,c,u,p,f=this,m=g({},o.Template,f.options.templateSettings),b=m.paramName,_="",v={},C=0,w={},y=f.dataSource._emptyAggregates(t),S=n.length?k(n[0],e):-1;if(S<0)return;const x=f._isStackedMode();return _=o.template((t=>{let k="";var _='<tr data-group-uid="'+t.uid+'" class="'+a+'">';if(!l)for(var T=0;T<t.groupCells;T++)_+='<td class="k-table-td k-group-cell">&nbsp;</td>';const H=e;if(x){for(k+=`<div class="${Le}">`,i=S,s=H.length;i<s;i++)u=H[i],d=u[r],c=typeof d,d&&(c!==lt&&(w=y[u.field]?g({},m,{paramName:b+"['"+u.field+"']"}):{},d=o.template(d,w)),v["tmpl"+C]=d,k+=v["tmpl"+C](t),C++);k+="</div>"}if(f._hasDetails()&&!x&&(_+='<td class="k-table-td k-hierarchy-cell">&nbsp;</td>'),S<1&&n.length<=1&&!l)return _+=l?"":Nr(H.length,x,k)(t);if(S<1?(S=l?0:1,_+=l?"":Nr(S,x,k)(t)):_+=l?function(e){return'<td class="k-table-td" colspan="'+e+'">'+`<p class="k-reset">&nbsp;</p></td>${new Array(e).join("<td hidden group-header-spanned-hidden></td>")}`}(S):Nr(S,x,k)(t),!x)for(i=S,s=H.length;i<s;i++){if(u=H[i],d=u[r],c=typeof d,u.sticky){let e="";if((p=u.groupHeaderColumnTemplateClass||"")||(p=u.groupHeaderColumnTemplateClass="group-header-column-template-"+o.guid()),h(u.stickyStyle)){e=`${u.stickyStyle.left?`${o.attr("style-left")}="${u.stickyStyle.left}"`:""} ${u.stickyStyle.right?`${o.attr("style-right")}="${u.stickyStyle.right}"`:""}`}_+=`<td class="k-table-td ${Me} ${p}" ${e}>`}else _+="<td class='k-table-td'>";d?(c!==lt&&(w=y[u.field]?g({},m,{paramName:b+"['"+u.field+"']"}):{},d=o.template(d,w)),v["tmpl"+C]=d,_+=v["tmpl"+C](t),C++):_+="&nbsp;",_+="</td>"}return _+="</tr>"}),m),C>0?_.bind(v):_},_detailTmpl:function(e){var t=this,r=g({},o.Template,t.options.templateSettings),a=(r.paramName,{}),l=0,n=t._groups(),i=t._isStackedMode(),s=i?t.table.find("col").length:zo(hr(t.columns)).length,d=typeof e;let c=o.template((t=>{let c='<tr role="row" class="k-detail-row k-table-row">';return n>0&&(c+=po(n)),i||(c+='<td role="gridcell" class="k-hierarchy-cell k-table-td"></td>'),c+=`<td role="gridcell" class="k-detail-cell k-table-td" ${s?` colspan="${s}"`:""}>`,d===lt?(a["tmpl"+l]=e,c+=e(t),l++):c+=o.template(e,r)(t),c+="</td></tr>",c}),r);return l>0?c.bind(a):c},_hasDetails:function(){return null!==this.options.detailTemplate||(this._events[j]||[]).length},_hasFilterRow:function(){var t=this.options.filterable;var o=t&&typeof t.mode==nt&&-1!=t.mode.indexOf(zt);var r=this.columns;var a=e.grep(r,(function(e){return!1===e.filterable}));return(this._isStackedMode()||r.length&&a.length==r.length)&&(o=!1),o},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&ar(t.columns).length)throw new Error("Having both detail template and locked columns is not supported");const o=t._isStackedMode();const r=o?'[ref="expand-detail-button"], [ref="collapse-detail-button"]':".k-hierarchy-cell "+P+", .k-hierarchy-cell "+L;t.table.on(Ke+q,r,(function(r){var a=e(this);return o?t._toggleStackedDetails(a):t._toggleDetails(a),r.preventDefault(),!1}))},_setCurrentStackedCell:function(t){const o=this;const r=t?e(t).closest(vt).index():o._currentRowIndex;const a=o._currentStackedCell();if(a&&o.options.navigatable&&r>=0){let e;let t=a&&a.index;e=o.table.find(`${vt}:eq(${r}) .k-grid-stack-cell`).eq(t),e.length&&("-1"!==e.attr("tabindex")&&e.attr("tabindex")||To(e.parent().children()),o._currentStackedCell(e,!0))}},_toggleStackedDetails:function(e,t){const r=this;const a=e.closest(".k-grid-stack-cell");const l=a.find(".k-grid-stack-content");const n=e.is('[ref="expand-detail-button"]');const i=e.closest("tr.k-master-row");const s=n?mt:bt;let d;e.remove(),d=n?o.html.renderButton(`<button tabindex='-1' ref="collapse-detail-button" aria-label=${s}>${o.htmlEncode(r.options.messages.details.collapse)}</button>`,{icon:"minus",fillMode:"flat",themeColor:"primary"}):o.html.renderButton(`<button tabindex='-1' ref="expand-detail-button" aria-label=${s}>${o.htmlEncode(r.options.messages.details.expand)}</button>`,{icon:"plus",fillMode:"flat",themeColor:"primary"}),l.append(d),r._addDetailRow(i,n,t),r._setCurrentStackedCell(a)},_addDetailRow:function(t,o,r){const a=this;const l=a.detailTemplate;const n=t.attr(Ht);const i=a._hasDetails();let s=t.next();let d;var c;s.hasClass("k-hidden")&&s.removeClass("k-hidden"),i&&!s.hasClass("k-detail-row")&&(d=a.dataItem(t),s=e(l(d)).addClass(t.hasClass("k-table-alt-row")?"k-table-alt-row":"").insertAfter(t),(n||0===n)&&s.attr(Ht,Number(n)+1),a.trigger(j,{masterRow:t,detailRow:s,data:d,detailCell:s.find(".k-detail-cell")})),a.trigger(o?re:ae,{masterRow:t,detailRow:s}),r?(c=o,e(s)[0].style.display=c?"":Mt):s.toggle(o)},_toggleDetails:function(e,t){var r=e.closest("td.k-hierarchy-cell"),a=e.is(P),l=e.closest("tr.k-master-row"),n=a?mt:bt,i=a?"true":"false";a?o.ui.icon(e,{icon:"caret-alt-down"}):o.ui.icon(e,{icon:"caret-alt-"+(Ut?"left":"right")}),e.attr(wt,n),r.attr(Rt,i),this._addDetailRow(l,a,t)},dataItem:function(t){if(!(t=e(t)[0]))return null;var o,r,a=this.tbody.children(),l=/k-grouping-row|k-detail-row|k-group-footer/,n=t.sectionRowIndex;for(r=n,o=0;o<n;o++)l.test(a[o].className)&&r--;return this._data[r]},expandRow:function(t,o){var r=e(t).find("> td "+P);r.length&&this._toggleDetails(r,o)},collapseRow:function(t,o){var r=e(t).find("> td "+L);r.length&&this._toggleDetails(r,o)},_createHeaderCells:function(r,a){var l,n,i,s,d,c,u=this,p="",h=u.options.columnMenu,g=(u.options.sortable,u._hasFilterMenu()),f=u.options.messages,m=hr(u.columns),b=u.dataSource.group();for(l=0,s=r.length;l<s;l++){n=r[l].column||r[l],i=u._headerCellText(n),d=n.title,c="";let s=k(n,m);let _="";n.selectable?(_+="<th scope='col'"+ho(n.headerAttributes),a&&!r[l].colSpan&&(_+=" rowspan='"+a+"'"),s>-1&&(_+=o.attr("index")+"='"+s+"'"),_+=">"+(i=n.headerTemplate?i:o.template($t)({size:o.getValidCssClass("k-checkbox-","size",u.options.size)}))+"</th>"):n.draggable?(_+="<th class='k-header' ref-grid-drag-cell scope='col'"+ho(n.headerAttributes),a&&!r[l].colSpan&&(_+=" rowspan='"+a+"'"),s>-1&&(_+=o.attr("index")+"='"+s+"'"),_+=">"+(i=n.headerTemplate?i:"")+"</th>"):n.command?(_+="<th scope='col'"+ho(n.headerAttributes),a&&!r[l].colSpan&&(_+=" rowspan='"+a+"'"),s>-1&&(_+=o.attr("index")+"='"+s+"'"),_+=">"+(i&&"&nbsp;"!==i?o.template(Nt)({text:i}):i)+"</th>"):(n.field&&(c=o.attr("field")+"='"+n.field+"' "),_+="<th scope='col' "+c,h&&n.field&&!1!==n.menu?_+=" aria-haspopup='menu'":g&&!1!==n.filterable&&!n.command&&(_+=" aria-haspopup='dialog'"),a&&!r[l].colSpan&&(_+=" rowspan='"+a+"'"),r[l].colSpan>1?(_+='colspan="'+(r[l].colSpan-Qo(n.columns))+'" ',_+=o.attr("colspan")+"='"+r[l].colSpan+"'"):1===r[l].colSpan&&(_+=o.attr("colspan")+"='"+r[l].colSpan+"'"),d&&(d=d&&(u.options.encodeTitles?Qr(d,!0):d),_+=o.attr("title")+'="'+d+'" '),n.groupable!==t&&(_+=o.attr("groupable")+"='"+n.groupable+"' "),!Br(u,n)||n.headerAttributes&&n.headerAttributes.title||(_+="title='",_+=Or(b,n.field)?f.ungroupHeader:f.groupHeader,_+="' "),n.aggregates&&n.aggregates.length&&(_+=o.attr("aggregates")+"='"+n.aggregates+"'"),s>-1&&(_+=o.attr("index")+"='"+s+"'"),_+=ho(n.headerAttributes),_+=">"+(i=o.template(Nt)({text:i}))+"</th>"),u.options.resizable?p+=e(_).attr("data-resizable",(!1!==n.resizable).toString()).addClass("k-table-th")[0].outerHTML:p+=e(_).addClass("k-table-th")[0].outerHTML}return p},_appendLockedColumnContent:function(){var t,r,a,l,n,i=this.columns,s=this.table.find("colgroup"),d=s.find(D),c=e(),u=0,p=0;for(t=0,r=i.length;t<r;t++)if(i[t].locked)if(Mo(i[t])){for(l=1,i[t].columns&&(l=hr(i[t].columns).length-Qo(i[t].columns)),l=l||1,n=0;n<l;n++)c=c.add(d.eq(t+p+n-u));p+=l-1}else u++;a=e('<div class="k-grid-content-locked"><table class="k-grid-table k-table"><colgroup></colgroup><tbody class="k-table-tbody"></tbody></table></div>'),s.detach(),a.find("colgroup").append(c),s.insertBefore(this.table.find("tbody")),this.lockedContent=a.insertBefore(this.content),this.lockedTable=a.children("table"),this.lockedTable.addClass(o.getValidCssClass("k-table-","size",this.options.size))},_appendLockedColumnFooter:function(){var t=this;var r=t.footer;var a=r.find(".k-footer-template>td");var l=r.find(".k-grid-footer-wrap>table>colgroup>col");var n=e('<div class="k-grid-footer-locked"><table class="k-grid-footer-table k-table"><colgroup></colgroup><tfoot class="k-table-tfoot"><tr class="k-footer-template k-table-row"></tr></tfoot></table></div>');var i,s;var d=t._groups();var c=e(),u=e();for(n.find("table").addClass(o.getValidCssClass("k-table-","size",this.options.size)),c=c.add(a.filter(".k-group-cell")),i=0,s=hr(ar(t.columns)).length;i<s;i++)c=c.add(a.eq(i+d));for(u=u.add(l.filter(".k-group-col")),i=0,s=zo(hr(sr(t.columns))).length;i<s;i++)u=u.add(l.eq(i+d));c.appendTo(n.find(vt)),u.appendTo(n.find("colgroup")),t.lockedFooter=n.prependTo(r)},_appendLockedColumnHeader:function(t){var r,a,l,n,i,s,d,c,u,p=this,h=this.columns,g=[],f=0,m=e(),b=p._hasFilterRow(),k=0,_=e(),v=0,C=e();n=p.thead.prev().find(D),d=p.thead.find(vt).first().find(".k-header:not(.k-group-cell,.k-hierarchy-cell)"),c=p.thead.find(".k-filter-row").find("td:not(.k-group-cell,.k-hierarchy-cell)");var w=0;for(r=0,l=h.length;r<l;r++){if(h[r].locked){if(u=d.eq(r),v=hr(h[r].columns||[]).length,Mo(h[r])){var y=null;h[r].columns&&(y=v-Qo(h[r].columns)),y=y||1;for(var S=0;S<y;S++)m=m.add(n.eq(r+w+S-f));w+=y-1}Zo([h[r]],vr(u),g,0,0),v=v||1;for(var x=0;x<v;x++)_=_.add(c.eq(k+x));k+=v}h[r].columns&&(f+=Qo(h[r].columns)),Mo(h[r])||f++}if(g.length){for(a='<div class="k-grid-header-locked"><table class="k-grid-header-table k-table"><colgroup></colgroup><thead class="k-table-thead">',a+=new Array(g.length+1).join("<tr class='k-table-row'></tr>"),(s=e(a+=(b?'<tr class="k-filter-row k-table-row"></tr>':"")+"</thead></table></div>")).find(".k-grid-header-locked").css("width","1px"),s.find("table").addClass(o.getValidCssClass("k-table-","size",p.options.size)),(n=s.find("colgroup")).append(p.thead.prev().find("col.k-group-col").add(m)),i=s.find("thead tr:not(.k-filter-row)"),r=0,l=g.length;r<l;r++)C=Lo(g[r]),i.eq(r).append(p.thead.find(vt).eq(r).find(".k-group-cell").add(C));var T=Xo(this.thead);return g.length<T&&function(e,t){var o=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");var r;for(var a=0;a<o.length;a++)(r=o[a].rowSpan)>1&&(o[a].rowSpan=r-t||1)}(s,T-g.length),s.find(".k-filter-row").append(p.thead.find(".k-filter-row .k-group-cell").add(_)),this.lockedHeader=s.prependTo(t),this.thead.find(".k-group-cell").remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);o.destroy(e),e.off(q).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,r,a=this,l=a.columns,n=a._hasDetails()&&l.length,i=a._hasFilterRow(),s="",d=a.table.find(">thead"),c=a.element.find("thead").first().length>0,u=a.options.messages.expandCollapseColumnHeader;const p=a._isStackedMode();if(!p){if(d.length||(d=e("<thead/>").insertBefore(a.tbody)),d.addClass("k-table-thead"),a.lockedHeader&&a.thead?((r=a.thead.find("tr:has(th):not(.k-filter-row)").html("")).remove(),r=e(),a._removeLockedContainers()):r=c?a.element.find("thead").first().find("tr:has(th):not(.k-filter-row)"):a.element.find("tr:has(th)").first(),r.length){for(t=0;t<l.length;t++){let e=k(l[t],hr(l));let o=kr(r.parent()).filter("th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(e);o.addClass("k-table-th");const a=o[0];const n=a?.childNodes||[];1===n.length&&3===n[0].nodeType&&o.html(Nt({text:Qr(o.text())})),l[t].hidden&&e>=0&&(a.style.display=Mt)}a._updateHeadersAttr(ur(l))}else if(!(r=d.children().first()).length){var h=[{rowSpan:1,cells:[],index:0}];for(a._prepareColumns(h,l),t=0;t<h.length;t++)s+="<tr class='k-table-row'>",n&&(s+='<th class="k-hierarchy-cell k-table-th" scope="col">'+u+"</th>"),s+=a._createHeaderCells(h[t].cells,h[t].rowSpan),s+="</tr>";r=e(s),o.applyStylesFromKendoAttributes(r,["display","left","right"])}if(i){var g=e("<tr/>");g.addClass("k-filter-row k-table-row"),(n||r.find(".k-hierarchy-cell").length)&&g.prepend('<td class="k-table-td k-hierarchy-cell">&nbsp;</td>');var f=(a.thead||d).find(".k-filter-row");f.length&&(o.destroy(f),f.remove()),d.append(g)}r.children().length?n&&!r.find(".k-hierarchy-cell")[0]&&r.prepend('<th class="k-hierarchy-cell k-table-th" scope="col">'+(u||"&nbsp;")+"</th>"):(s="",n&&(s+='<th class="k-hierarchy-cell k-table-th" scope="col">&nbsp;</th>'),s+=a._createHeaderCells(l),r.html(s));const p=r.find("th");p.addClass(Ie),p.length>0&&d.attr(Et,Dt),a.options.scrollable||d.addClass("k-grid-header"),r.find("script").remove().end().prependTo(d),a.thead&&a._destroyColumnAttachments(),a.thead=d}var m;a._sortable(),a._filterable(),a._filterRow(),a._scrollable(),a._columnMenu();var b=this.options.scrollable&&ar(this.columns).length;b&&!p&&(m=a._appendLockedColumnHeader(a.thead.closest(".k-grid-header")),a._appendLockedColumnContent(),a.lockedContent.on("DOMMouseScroll"+q+" mousewheel"+q,a._wheelScroll.bind(a)),o.support.touch&&(a._lockedContentUserEvents=new o.UserEvents(a.lockedContent,{move:function(e){a.content.scrollTop(a.content.scrollTop()+-e.y.delta),e.preventDefault()}})),a._updateLockedCols()),a._updateCols(),p||(a._updateColumnCellIndex(),a._updateFirstColumnClass()),a._resizable(),a._draggable(),a._reorderable(),p||(a._updateHeader(a._groups()),a._updateStickyColumns()),b&&!p&&(m&&a._syncLockedHeaderHeight(),a._applyLockedContainersWidth())},_retrieveFirstColumn:function(t,o){var r=e();if(o.length&&t[0]){var a=t[0];for(;a.columns&&a.columns.length;)a=a.columns[0],o=o.filter(":not(:first)");r=r.add(o)}return r},_updateFirstColumnClass:function(){var t=this,o=t.columns||[];if(!(t._hasDetails()&&o.length)&&!t._groups()){var r=t.thead.find(">tr:not(.k-filter-row):not(:first)");o=lr(o);var a=t._retrieveFirstColumn(o,r);t._isLocked()&&(r=t.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),o=ar(t.columns),a=a.add(t._retrieveFirstColumn(o,r))),a.each((function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))}},_prepareColumns:function(e,t,o,r){var a=r||e[e.length-1];var l=e[a.index+1];var n=0;for(var i=0;i<t.length;i++){var s={column:t[i],colSpan:0};a.cells.push(s),t[i].columns&&t[i].columns.length&&(l||(l={rowSpan:0,cells:[],index:e.length},e.push(l)),s.colSpan=t[i].columns.length,this._prepareColumns(e,t[i].columns,s,l),n+=s.colSpan-1,a.rowSpan=e.length-a.index)}o&&(o.colSpan+=n)},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.content;this.virtualScroll&&this.virtualScroll.rows&&(t=this.virtualScrollable.verticalScrollbar);var r=t.scrollTop(),a=o.wheelDeltaY(e);a&&(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&a<0||t[0].scrollTop>0&&a>0)&&e.preventDefault(),t.scrollTop(r+-a))}},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?xr(e,dr(ir(this.columns)),this._hasDetails(),0):xr(e,dr(zo(this.columns)),this._hasDetails(),0)},_updateColumnSorters:function(){var e=this;var t=kr(e.thead);var o=hr(e.columns);var r;var a;if(e.options.sortable)for(var l=0,n=t.length;l<n;l++)!1!==(r=o[l]).sortable&&!r.command&&r.field&&(a=t.eq(l).data("kendoColumnSorter"))&&a.refresh()},_updateHeadersAttr:function(e){if(e.length){for(var t=0;t<e.length;t++){if(e[t].headerAttributes)this.element.find("[id='"+e[t].headerAttributes.id+"']").attr("headers",e[t].headerAttributes.headers)}this._updateHeadersAttr(ur(e))}},_updateCols:function(e){const t=this;const o=t._isStackedMode()?t.table:t.thead.parent().add(t.table);e=e||o,this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&xr(e=e||this.lockedHeader.find("table").add(this.lockedTable),dr(sr(this.columns)),this._hasDetails(),this._groups())},_appendCols:function(e,t){t?xr(e,dr(ir(this.columns)),this._hasDetails(),0):xr(e,dr(zo(this.columns)),this._hasDetails(),this._groups(),this._isStackedMode())},_autoColumns:function(e){if(e&&e.toJSON){var t,r,a=this;for(t in e=e.toJSON(),r=!(a.table.find("tbody tr").length>0&&(!a.dataSource||!a.dataSource.transport)),e)a.columns.push({field:t,encoded:r,headerAttributes:{id:o.guid()}});a._thead(),a._templates()}},_setRowCachedHeight:function(t,o){var r,a=this._cachedRowsHeight[o];return a&&((r=e(t))[0].style.height=a+"px",t=r.prop("outerHTML")),t},_rowsHtml:function(e,t){var o,r,a,l=this,n="",i=t.rowTemplate,s=t.altRowTemplate,d=l._cachedRowsHeight;for(o=0,r=e.length;o<r;o++)l._skipRerenderItemsCount>0?l._skipRerenderItemsCount--:(a=o%2?s(e[o]):i(e[o]),d&&(a=l._setRowCachedHeight(a,e[o].uid)),n+=a),l._data.push(e[o]);return n},_groupData:function(e,t,o){var r=this._groupAggregatesDefaultObject||{},a=e.items,l=g({},r,e.aggregates),n=g({},{field:e.field,value:e.value,items:a,aggregates:l},e.aggregates[o?o.field:e.field]),i={};if(!t)for(var s in l)i[s]=g({},l[s],{group:{field:e.field,value:e.value,items:a}});return g({},i,n)},_removeGroupIfEmpty:function(e){var t,o,r=this.dataSource._group.length;for(var a=0;a<r;a++)t=+(e=e.prev()).attr("data-group-item-count"),o=+e.attr("data-sub-group-count"),1!=t&&1!=o||e.hide()},_groupRowHtml:function(e,t,r,a,l,n,i,s){var d,c,u,p=this,h="",f=null!=p.lockedContent,b=e.field,_=m(hr(p.columns),(function(e){return e.field==b}))[0]||{},v=zo(p.columns)[0],C=v?v.groupHeaderColumnTemplate:null,w=_.groupHeaderTemplate?_.groupHeaderTemplate:C,y=(_.title&&(p.options.encodeTitles?Qr(_.title,!0):_.title)||Qr(b,!0))+": "+Hr(e.value,_.format,_.values,_.encoded),S=e.currentItems||e.items,x=p._groups(),T=l.groupFooterTemplate,H=l.groupHeaderColumnTemplate,R=p.dataSource._isGroupPaged(),I=!R||p.dataSource._groupsState[e.uid];if(p.options.editable&&e.items&&e.items[0]&&e.items[0].isNew&&e.items[0].isNew()&&(I=!0),(l.groupFooterTemplate||l.groupHeaderColumnTemplate||_.groupHeaderTemplate||p._isStackedMode())&&(u=p._groupData(e,!1,!(_.groupHeaderTemplate||!zo(p.columns)[0].groupHeaderColumnTemplate)&&zo(p.columns)[0])),w&&!n&&(y=typeof w===lt?w(u):o.template(w)(u)),p._skipRerenderItemsCount?a(t,r,y,I,e.uid,R,p._isStackedMode()):e.excludeHeader?e.excludeHeader=!!f&&!s:h+=function({groupHeaderColumnTemplate:e,groupHeaderBuilder:t,colspan:o,templateColspan:r,groupData:a,level:l,text:n,expanded:i,group:s,isGroupPaged:d,stacked:c}){var u;u=e?e(g({},a,{groupCells:l,colspan:r,text:n,expanded:i,isRtl:Ut,uid:s.uid})):t(o,l,n,i,s.uid,d,Ut,c);return u}({groupHeaderColumnTemplate:H,groupHeaderBuilder:a,colspan:t,templateColspan:x-r,groupData:u,level:r,text:y,expanded:I,group:e,isGroupPaged:R,stacked:p._isStackedMode()}),I)if(e.hasSubgroups)for(d=0,c=S.length;d<c;d++)h+=p._groupRowHtml(S[d],n?t:t-1,r+1,a,l,n,i&&d===S.length-1,s);else h+=p._rowsHtml(S,l);return T&&(i?k(e.value,p._skippedGroups)||p._skippedGroups.push(e.value):(p._skippedGroups.length&&p._skippedGroups[0]===e.value&&p._skippedGroups.shift(),p._skipRerenderItemsCount||(h+=T(u)))),h},collapseGroup:function(t){var r,a,l,n,i,s=this,d=t,c=this.options.groupable.showFooter?0:1,u=e();if(r=(t=e(t)).find(".k-group-cell").length,this.dataSource._isGroupPaged()){var p=t.attr("data-group-uid");var h=s.dataSource._getGroupByUid(p);var g=s.dataSource._calculateGroupsTotal([h],!0);var f;return s.dataSource._groupsState[p]=!1,f=s.dataSource._calculateGroupsTotal([h],!0),s.dataSource._serverGroupsTotal-=g-f,s._progress(!0),void s.dataSource.range(s.dataSource._currentRangeStart,s.dataSource.take(),(function(){s._progress(!1)}),"collapseGroup")}this._isLocked()&&(t.closest(Ct).hasClass("k-grid-content-locked")?u=this.tbody.children(vt).eq(t.index()).nextAll(vt):(u=t.nextAll(vt),t=this.lockedTable.find(">tbody>tr").eq(t.index()))),t.find(L).length&&o.ui.icon(t.find(L),{icon:"caret-alt-"+(Ut?"left":"right")}),t.find("td[aria-expanded='true']").first().attr(Rt,!1).find("a").attr(wt,bt);var m=[];for(l=0,n=(t=t.nextAll(vt)).length;l<n&&(a=(i=t.eq(l)).find(".k-group-cell").length,i.hasClass(Pe)?c++:i.hasClass("k-group-footer")&&c--,!(a<=r||i.hasClass("k-group-footer")&&c<0));l++)u.length&&m.push(u[l]),m.push(i[0]);e(m).hide(),this.options.scrollable.endless&&this.content&&(clearTimeout(s._collapseGroupsTimeOut),s._collapseGroupsTimeOut=setTimeout((function(){s.content.scroll(),s._groupToCollapse=d})))},expandGroup:function(t){t=e(t);var r,a,l,n,i,s=this,d=s.options.groupable.showFooter,c=e(),u=[],p=1;if(r=t.find(".k-group-cell").length,this.dataSource._isGroupPaged()){var h=t.attr("data-group-uid");var g=s.dataSource._getGroupByUid(h);var f=s.dataSource._calculateGroupsTotal([g],!0);var m;return s.dataSource._groupsState[h]=!0,g.items&&g.items.length&&(m=s.dataSource._calculateGroupsTotal([g],!0),s.dataSource._serverGroupsTotal+=m-f),s._progress(!0),void s.dataSource.range(s.dataSource._currentRangeStart,s.dataSource.take(),(function(){s._progress(!1)}),"expandGroup")}for(this._isLocked()&&(t.closest(Ct).hasClass("k-grid-content-locked")?c=this.tbody.children(vt).eq(t.index()).nextAll(vt):(c=t.nextAll(vt),t=this.lockedTable.find(">tbody>tr").eq(t.index()))),t.find(P).length&&o.ui.icon(t.find(P),{icon:"caret-alt-down"}),t.find("td[aria-expanded='false']").first().attr(Rt,!0).find("a").attr(wt,mt),n=0,i=(t=t.nextAll(vt)).length;n<i&&!((l=(a=t.eq(n)).find(".k-group-cell").length)<=r);n++)if(l!=r+1||a.hasClass("k-detail-row")||(a.show(),c.eq(n).show(),a.hasClass(Pe)&&a.find(".k-icon,.k-svg-icon").is(L)&&s.expandGroup(a),a.hasClass("k-master-row")&&a.find(".k-icon,.k-svg-icon").is(L)&&(a.next().show(),c.eq(n+1).show())),a.hasClass(Pe)&&(d&&u.push(a.is(":visible")),p++),a.hasClass("k-group-footer")){if(d){var b=u.pop();a.toggle(b),c.eq(n).toggle(b)}1==p?(a.show(),c.eq(n).show()):p--}(0===r&&s.options.scrollable.endless&&this._isLocked()||!s.options.scrollable.endless&&this._isLocked())&&s._syncLockedContentHeight()},_updateHeader:function(t){var o=this,r=o._isLocked()?o.lockedHeader.find("thead"):o.thead,a=r.find("tr.k-filter-row").find("td.k-group-cell").length,l=r.find(vt).first().find("th.k-group-cell").length,n=r.children("tr:not(:first)").filter((function(){return!e(this).children(":visible").length}));t>l?(e(new Array(t-l+1).join('<th class="k-group-cell k-header k-table-th" scope="col">'+C(o.options.messages.expandCollapseColumnHeader)+"</th>")).prependTo(r.children("tr:not(.k-filter-row)")),o.element.is(":visible")&&n.find("th.k-group-cell").hide()):t<l&&r.find(vt).each((function(){e(this).find(".k-group-cell").eq(t).remove(),e(this).find(".k-group-cell").slice(t).remove()})),t>a&&e(new Array(t-a+1).join('<td class="k-group-cell k-table-group-td k-table-td">&nbsp;</td>')).prependTo(r.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,o=this;o._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",o.wrapper).add(o.thead.parent()).add(o.table),o._footerWidth=zr(t.eq(0)),t.width(o._footerWidth),(t=e(">.k-grid-footer>.k-grid-footer-locked>table",o.wrapper).add(o.lockedHeader.find(">table")).add(o.lockedTable)).width(zr(t.eq(0))))},hideColumn:function(t){var o,r,a,l,n,i,s,c,u,p=this,g=0,f=p.footer||p.wrapper.find(".k-grid-footer"),b=p.virtualScroll||{},_=p.columns,v=p.lockedHeader?kr(p.lockedHeader.find(">table>thead")).filter(Eo).length:0;(Array.isArray(t)?t:[t]).forEach((t=>{if(u=m(hr(p.columns),(function(e){return e.groupHeaderColumnTemplate})),(t="number"==typeof t?_[t]:h(t)?m(Ko(_),(function(e){return e===t}))[0]:m(Ko(_),(function(e){return e.field===t}))[0])&&Mo(t)){if(p._isStackedMode())return p._stackedColumnVisibility(t,"hide"),void p.trigger(Z,{column:t});var C=p._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(n=jo(t,_),C(t,!1),Rr(vo(e(">table>thead",p.lockedHeader),p.thead,">tr:eq("+n.row+")>th"),n.cell,!1),r=0;r<t.columns.length;r++)this.hideColumn(t.columns[r]);return p._ariaAddHiddenColIndex(),void p.trigger(Z,{column:t})}c=k(t,zo(hr(_))),C(t,!1),p._setParentsVisibility(t,!1),p._templates(),p._updateCols(),p._updateLockedCols();var w=p.thead;if(i=c,p.lockedHeader&&v>c?w=p.lockedHeader.find(">table>thead"):i-=v,kr(w).filter(Eo).eq(i)[0].style.display=Mt,Rr(vo(e(">table>thead",p.lockedHeader),p.thead,">tr.k-filter-row>td"),c,!1),f[0]&&(p._updateCols(f.find(">.k-grid-footer-wrap>table")),p._updateLockedCols(f.find(">.k-grid-footer-locked>table")),Rr(f.find(".k-footer-template>td"),c,!1)),b.columns&&!t.locked)return p._updateContentWidth(),void p.trigger(Z,{column:t});if(p.lockedTable&&v>c?Ir(p.lockedTable.find(">tbody>tr"),c):Ir(p.tbody.children(),c-v),p.lockedTable)p._updateTablesWidth(),p._applyLockedContainersWidth(),p._syncLockedContentHeight(),p._syncLockedHeaderHeight(),p._syncLockedFooterHeight();else{for(a=p.thead?p.thead.prev().find("col"):[],r=0,s=a.length;r<s;r+=1)if(l=a[r].style.width,a[r].className.indexOf("k-hierarchy-col")>-1)g+=d(a[r]);else if(a[r].className.indexOf("k-group-col")>-1)g+=d(a[r]);else{if(!l||-1!=l.indexOf("%")){g=0;break}g+=parseInt(l,10)}o=p.wrapper.find(">.k-grid-header table").first().add(p.wrapper.find(">.k-grid-footer table").first()).add(p.table),p._footerWidth=null,g&&(o.each((function(){this.style.width=g+_t})),p._footerWidth=g,p._setContentWidth())}p._updateFirstColumnClass(),p._updateStickyColumns(),p._ariaAddHiddenColIndex(),u.length>0&&p._renderGroupRows(),p.trigger(Z,{column:t})}}))},_stackedColumnVisibility:function(t,o){const r=this;const a=t.field;let l;if(r.columns.length){for(let e=0;e<r.columns.length;e++)if(r.columns[e].field===a){l=e;break}if(l||0===l){r.table.find(".k-grid-stack-cell[data-index='"+l+"']").each((function(){const t=e(this);t.closest(".k-detail-row").length||t[o]()})),xo(t,"show"===o)}}},_setParentsVisibility:function(t,r){var a=this.columns;var l;var n=[];var i;var s;var d;var c;var u=this._columnVisibilitySetter(t);var p=r?function(e){return zo(e.columns).length&&e.hidden}:function(e){return!zo(e.columns).length&&!e.hidden};if(So(t,a,n)&&n.length)for(l=n.length-1;l>=0;l--)s=Go(i=n[l],a),d=vo(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+s.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(s.cell),p(i)&&(u(i,r),d[0].style.display=r?"":Mt),d.filter("["+o.attr("colspan")+"]").length&&(c=parseInt(d.attr(o.attr("colspan")),10),d[0].colSpan=c-Qo(i.columns)||1)},_updateContentWidth:function(){const t=this;t.table.add(t.thead?t.thead.parent():e()).css({width:Yo(dr(ir(t.columns)))}),t.refresh()},showColumn:function(t){var o,r,a,l,n,i,s,c,u,p,g,f,b,_=this,v=_.columns,C=_.virtualScroll||{},w=_.footer||_.wrapper.find(".k-grid-footer"),y=_.lockedHeader?kr(_.lockedHeader.find(">table>thead")).length:0;(Array.isArray(t)?t:[t]).forEach((t=>{if(b=m(hr(_.columns),(function(e){return e.groupHeaderColumnTemplate})),"number"==typeof t?(p=t,t=v[t]):h(t)?e.each(Ko(v),(function(e,o){if(o===t)return t=o,p=e,!1})):e.each(Ko(v),(function(e,o){if(o.field===t)return t=o,p=e,!1})),t&&!Mo(t)){if(_._isStackedMode())return _._stackedColumnVisibility(t,"show"),void _.trigger(ee,{column:t});var S=_._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(s=Go(t,v),g=Ko(_.options.columns)[p],S(t,!0),Rr(vo(e(">table>thead",_.lockedHeader),_.thead,">tr:eq("+s.row+")>th"),s.cell,!0),o=0;o<t.columns.length;o++)g.columns[o].hidden||this.showColumn(t.columns[o]);return _._ariaRemoveHiddenColIndex(),void _.trigger(ee,{column:t})}f=k(t,hr(v)),S(t,!0),_._setParentsVisibility(t,!0),_._templates(),_._updateCols(),_._updateLockedCols();var x=_.thead;if(i=f,_.lockedHeader&&y>f?x=_.lockedHeader.find(">table>thead"):i-=y,(a=kr(x).eq(i))[0].style.display="",a[0].classList.remove("k-hidden"),Rr(vo(e(">table>thead",_.lockedHeader),_.thead,">tr.k-filter-row>td"),f,!0),w[0]&&(_._updateCols(w.find(">.k-grid-footer-wrap>table")),_._updateLockedCols(w.find(">.k-grid-footer-locked>table")),Rr(w.find(".k-footer-template>td"),f,!0)),C.columns&&!t.locked)return _._updateContentWidth(),void _.trigger(ee,{column:t});if(_.lockedTable&&y>f?Er(_.lockedTable.find(">tbody>tr"),f):Er(_.tbody.children(),f-y),_.lockedTable)_._updateTablesWidth(),_._applyLockedContainersWidth(),_._syncLockedContentHeight(),_._syncLockedHeaderHeight();else if(l=_.wrapper.find(">.k-grid-header table").first().add(_.wrapper.find(">.k-grid-footer table").first()).add(_.table),t.width){for(n=0,u=_.thead.prev().find("col"),o=0,r=u.length;o<r;o+=1)if(c=u[o].style.width,u[o].className.indexOf("k-hierarchy-col")>-1)n+=d(u[o]);else if(u[o].className.indexOf("k-group-col")>-1)n+=d(u[o]);else{if(c.indexOf("%")>-1){n=0;break}n+=parseInt(c,10)}_._footerWidth=null,n&&(l.each((function(){this.style.width=n+_t})),_._footerWidth=n,_._setContentWidth())}else l.width("");_._updateFirstColumnClass(),_._updateStickyColumns(),b.length>0&&_._renderGroupRows(),_._ariaRemoveHiddenColIndex(),_.trigger(ee,{column:t})}}))},_columnVisibilitySetter:function(e){return Fo((e||{}).media)?xo:Ro},_buildSkeleton:function(){const e=this.virtualCols?this.virtualCols:dr(this.columns);const t=this.dataSource.pageSize()||this.dataSource.total();const o=this._groups();const r=this._isStackedMode();let a="";let l;let n=r?1:e.length+o;this._hasDetails()&&!r&&n++,this._hasVirtualColumns()&&(l=parseInt(this.content.find(vt).first().find("td").first().attr("colspan"),10));for(var i=0;i<t;i++){a+="<tr class='k-table-row' data-skeleton-row>";for(var s=0;s<n;s++)a+=l&&!s?"<td colspan='"+l+"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>":"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>";a+="</tr>"}return a},_progress:function(e){var t=this.element;var r=this.options.scrollable&&this.options.scrollable.endless;var a=this.options.loaderType;var l;if(this.options.scrollable&&this.options.scrollable.virtual?t=this.content:this._editContainer&&"popup"===this._editMode()?t=this._editContainer:this.lockedContent||r?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),"skeleton"!=a||this._isExport)this._isExport?this._loaderContainer(e,{message:this.options.messages.loader.exporting}):r&&e?o.ui.progress(t,e,{height:this.content.height(),top:this.content.parent()[0].offsetTop,opacity:!0}):o.ui.progress(t,e);else{const o=t.find("tbody");e?(l=this._buildSkeleton(),r&&(this._currentEndlessRows=o.children(":not([data-skeleton-row])")),o.empty().append(l)):r?(t.find("[data-skeleton-row]").remove(),o.prepend(this._currentEndlessRows)):t.find(".k-skeleton").closest("tbody").empty()}},_resize:function(e,t){this._syncLockedContentHeight(),this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.lockedTable&&this._syncLockedScroll(),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar()),this.pager&&this.pager.element&&this.pager.resize(t),this._anyStickyColumns()&&this._updateStickyColumns(!1)},_isActiveInTable:function(){var t=i();return!!t&&(this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)))},refresh:function(r){var a,l,n,i=this,s=i.dataSource.view(),d=i.options.navigatable,c=i.virtualScroll||{},u=e(i.current()),p=!1,h=i._groups(),g=h+dr(zo(i.columns)).length,f=m(i.columns,(function(e){return e.columns!==t})).length>0,b=0,_=i.dataSource.group()&&i.dataSource.group().length>0;const v=i._isStackedMode();if(r&&"itemchange"===r.action&&(i.editable||i.options.scrollable.endless)&&("popup"!=this._editMode()||"popup"===this._editMode()&&!i._editableIsClosing))return;if(i._shouldMapHights&&(i._mapCachedRowsHeight("get","uid"),i._shouldMapHights=!1),c.columns&&i._templates(),r&&"remove"===r.action&&i.editable&&i.editable.options.model&&k(i.editable.options.model,r.items)>-1&&i.editable.options.model.unbind(X,i._modelChangeHandler),r=r||{},i.trigger("dataBinding",{action:r.action||"rebind",index:r.index,items:r.items}))return;if(r.action===ce&&i._isVirtualEditable()&&(i._destroyEditable(),i._clearEditableState()),!i._endlessFetchInProgress){const e=i._isAdaptive()?"kendoActionSheet":"kendoWindow";d&&(i._isActiveInTable()||i._editContainer&&i._editContainer.data(e))&&(a=(p=u.is("th"))?u.parent().children(":not(.k-group-cell)").index(u[0]):Math.max(i.cellIndex(u),0),p&&f&&(b=u.parent().index())),i._destroyEditable()}i.options.scrollable&&i.options.scrollable.endless&&!i._pdfInitialized?(clearTimeout(i._progressTimeOut),i._progressTimeOut=setTimeout((function(){i._endlessFetchInProgress||(i._progress(!1),v&&i._toggleGroupableHeader(_))}),250)):i._isExport||(i._progress(!1),v&&i._toggleGroupableHeader(_)),u.length&&(i._currentRowIndex=u.parent().index()),i._hideResizeHandle(),i._data=[],i.columns.length||(i._autoColumns(i._firstDataItem(s[0],h)),g=h+i.columns.length),i._group=h>0||i._group,i._group&&(i._templates(),i._updateCols(),i._updateLockedCols(),i._virtualColScroll||v||i._updateHeader(h),i._group=h>0,i._groupRows=Ar(s)),i.content&&(l=o.scrollLeft(i.content));const C=i.dataSource.group()?.some((e=>e.aggregates))&&i.columns?.some((e=>e.groupFooterTemplate||e.groupHeaderTemplate));if("skeleton"!==i.options.loaderType&&r&&"sync"===r.action&&r.partialUpdate&&r.changedItems&&r.changedItems.length&&!C?(i._data=i.dataSource.flatView(),r.changedItems.forEach((e=>{const t=i.tbody.find("["+o.attr("uid")+"="+e.uid+"]");i._editMode()===ut&&i.dataSource.options.autoSync&&i.dataSource.isLocalTransport()&&i.trigger(Y,{type:"save",model:r.changedItems[0],container:t.find(".k-edit-cell")}),i._displayRow(t)})),i._progress(!1),v&&i._toggleGroupableHeader(_),i._destroyEditable()):(n=i._skipRerenderItemsCount,i._renderContent(s,g,h),i.options.scrollable&&i.options.scrollable.endless&&this.lockedContent&&(i._skipRerenderItemsCount=n),i._renderLockedContent(s,g,h)),i._virtualColScroll||(i._footer(),i._renderNoRecordsContent(),i._togglePagerVisibility(),i._setContentHeight(),i._setContentWidth(i.content&&l)),i.lockedTable&&(c.rows?i.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):i.touchScroller?i.touchScroller.movable.trigger("change"):(i.wrapper.one("scroll",(function(e){e.stopPropagation()})),i.content.trigger("scroll"))),!i._endlessFetchInProgress&&!i._rowDropping)if(v&&i.options.navigatable)i._setCurrentStackedCell();else{const e=i._isLocked()&&u.closest(".k-grid-header-locked").length&&p;i._restoreCurrent(a,p,b,e)}if(i.touchScroller&&i.touchScroller.contentResized(),i.selectable&&i.selectable.resetTouchEvents(),i._checkBoxSelection&&i._toggleHeaderCheckState(!1),i.options.persistSelection&&(i.selectable&&!o.ui.Selectable.parseOptions(i.options.selectable).cell||i._checkBoxSelection)&&(i.items().length||i.dataSource._isGroupPaged())&&i._restoreSelection(),i._restoreHighlight(),i._hasAIHighlight&&i._applyAIHighlight(i._hasAIHighlight),i.options.persistSelection||(i._selectedIds={}),i._hasReorderableRows()&&(i._draggableRows(),i._reorderableRows()),i.options.selectable&&i.options.selectable.cellAggregates&&i._calculateAggregatesForSelected(),v){const e=i._getStackedLayoutSettings();const t=i.tbody.find(".k-grid-stack-row");e.colClass?t.addClass(e.colClass):e.colsConfig&&t.css("grid-template-columns",e.colsConfig)}i._aria(),i.trigger(oe)},_getSchemaIdField:function(){const e=this.dataSource.options.schema.model;return v(e)?e.fn.idField:e&&e.id},_restoreCurrent:function(o,r,a,l){if(!(o===t||o<0)){if(this._removeCurrent(),r){const e=l?this.lockedHeader:this.thead;this._setCurrent(e.find(`tr:eq(${a}) th:not(.k-group-cell)`).eq(o),!1,this._hasVirtualColumns())}else{var n=0;var i=this.virtualScroll||{};this._rowVirtualIndex?n=i.rows?this.virtualScrollable.position(this._rowVirtualIndex):this._rowVirtualIndex:this._currentRowIndex?n=this._currentRowIndex:o=0;var s=e();var d;let t;this.lockedTable&&(s=this._shouldFocusInLastRow?this.lockedTable.find(">tbody>tr").last():this._shouldFocusInFirstRow?this.lockedTable.find(">tbody>tr").first():this.lockedTable.find(">tbody>tr").eq(n)),t=this._shouldFocusInLastRow?this.tbody.children().last():this._shouldFocusInFirstRow?this.tbody.children().first():this.tbody.children().eq(n),s=s.add(t),this._hasVirtualColumns()&&(d=parseInt(s.find("td").first().attr("colspan"),10),o=this._virtualCellIndex-(d>1?d-1:0));var c=s.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(o);if(!c.length||o<0)return;this._hasVirtualColumns()?this._setCurrent(c,!0,!0):this._setCurrent(c)}this._current&&Pr(this.table,!0)}},_restoreSelection:function(){var e,t=this,o=t.items(),r=t._getSchemaIdField();e=m(o,(function(e){var o=t.dataItem(e)[r];if(t._selectedIds[o])return e})),t.select(e)},_getSelectedRowUids:function(){var t,r,a=this.select(),l=[];for(let n=0;n<a.length;n++)t=e(a[n]),o.ui.Selectable.parseOptions(this.options.selectable).cell&&(t=t.closest(vt)),r=t.data("uid"),-1===l.indexOf(r)&&l.push(r);return l},_getSelectedColumnFields:function(){var t,r,a=this,l=a.select(),n=dr(a.columns).filter((e=>!e.selectable&&!e.draggable&!e.command)),i=[];if(!o.ui.Selectable.parseOptions(a.options.selectable).cell)return n.map((e=>e.field));for(let o=0;o<l.length;o++)r=e(l[o]).index(),t=a.thead.find("th:eq("+r+")").data("field"),-1===i.indexOf(t)&&i.push(t);return i},_cleanupDetailItems:function(){this._hasDetails()&&this.tbody.find(".k-detail-cell").empty()},_renderContent:function(e,t,r){var a,l,n,i,s,d=this,c="",u=null!=d.lockedContent,p=d.options.scrollable,h={rowTemplate:d.rowTemplate,altRowTemplate:d.altRowTemplate,groupFooterTemplate:d.groupFooterTemplate,groupHeaderColumnTemplate:d.groupHeaderColumnTemplate};const g=d._isStackedMode();if(p&&p.endless&&!d.dataSource.options.endless&&(d._skipRerenderItemsCount=0,d.content&&(d.content[0].scrollTop=0)),n=d._skipRerenderItemsCount>0,t=u?t-dr(sr(d.columns)).length:t,g&&(t=d.table.find("col").length),r>0)for(t=u?t-r:t,d.detailTemplate&&!g&&t++,d.groupFooterTemplate&&(d._groupAggregatesDefaultObject=d.dataSource.aggregates()),d.options.scrollable.endless&&(s=d.dataSource.flatView().length),a=0,l=e.length;a<l;a++)d._skippedGroups||(d._skippedGroups=[]),i=s&&a===e.length-1&&s!==d.dataSource.total(),c+=d._groupRowHtml(e[a],t,0,u?Kr:Ur,h,u,i,!1);else c+=d._rowsHtml(e,h);n?(d.tbody.append(c),o.applyStylesFromKendoAttributes(d.tbody,["display","left","right"]),clearTimeout(d._endlessFetchTimeOut),d._endlessFetchTimeOut=setTimeout((function(){d._groupToCollapse&&(d.collapseGroup(d._groupToCollapse),d._groupToCollapse=null)})),d._endlessFetchInProgress=null):d.tbody=Cr(d.tbody,d.table,c,this.options.size)},_renderGroupRows:function(){var t,r,a,l,n,i,s,d,c,u,p,h,f,b,k,_,v,C=this,w=C._groupRows,y=C.wrapper.find(x+Pe),S=C._groups(),T=null!=C.lockedContent;y.each((function(y,x){b=e(x),u=b.closest("table").parent(),p=u.is(".k-grid-content-locked"),r=dr(zo(p?ar(C.columns):lr(C.columns))),k=b.find(".k-group-cell").length,T?(t=p?Ur:Kr,a=p?r.length+S-k:r.length):(t=Ur,a=r.length+S-k),l=y>=w.length?w[y-w.length]:w[y],n=l.field,i=m(hr(C.columns),(function(e){return e.field==n}))[0]||{},v=!(i.groupHeaderTemplate||!zo(C.columns)[0].groupHeaderColumnTemplate)&&zo(C.columns)[0],s=i.groupHeaderTemplate?i.groupHeaderTemplate:zo(C.columns)[0].groupHeaderColumnTemplate,d=(i.title&&(C.options.encodeTitles?Qr(i.title,!0):i.title)||Qr(n,!0))+": "+Hr(l.value,i.format,i.values,i.encoded),c=C._groupData(l,!1,v),_=p?C.lockedGroupHeaderColumnTemplate:C.groupHeaderColumnTemplate,s&&(d=typeof s===lt?s(c):o.template(s)(c)),h=b.prev().length?b.prev():b.parent(),f=e(_?_(g({},c,{groupCells:k,colspan:S-k,text:d})):t(a,k,d,null,null,null,Ut,C._isStackedMode())),o.applyStylesFromKendoAttributes(f,["display","left","right"]),h.is("tbody")?h.prepend(f):h.after(f),b.remove()}))},_renderLockedContent:function(e,t,o){var r,a,l,n,i="",s=null,d={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};if(this.lockedContent){var c=this.lockedTable;if(s=this._skipRerenderItemsCount>0,o>0)for(t-=zo(hr(lr(this.columns))).length,this.options.scrollable.endless&&(n=this.dataSource.flatView().length),r=0,a=e.length;r<a;r++)l=n&&r===e.length-1&&n!==this.dataSource.total(),i+=this._groupRowHtml(e[r],t,0,Ur,d,!1,l,!0);else i=this._rowsHtml(e,d);s?c.children("tbody").append(i):Cr(c.children("tbody"),c,i,this.options.size),this._syncLockedContentHeight()}},_togglePagerVisibility:function(){!1===this.options.pageable.alwaysVisible&&this.wrapper.find(".k-grid-pager").toggle(this.dataSource.total()>=this.dataSource.pageSize())},_adjustRowsHeight:function(e,t){var o,r=e[0].rows,a=r.length,l=t[0].rows,n=e.add(t),i=n.length,s=[];for(o=0;o<a&&l[o];o++)r[o].style.height&&(r[o].style.height=l[o].style.height="");for(o=0;o<a&&l[o];o++){var d=r[o].getBoundingClientRect().height;var c=l[o].getBoundingClientRect().height;var u=0;d>c?u=d:d<c&&(u=c),s.push(u)}for(o=0;o<i;o++)n[o].style.display=Mt;for(o=0;o<a;o++)s[o]&&(r[o].style.height=l[o].style.height=s[o]+_t);for(o=0;o<i;o++)n[o].style.display=""}});function Fr(e,t){var o;var r=e.offsetHeight;var a=t.offsetHeight;r>a?o=r+_t:r<a&&(o=a+_t),o&&(e.style.height=t.style.height=o)}function Lr(e,t){var o,r,a;if(typeof e===nt&&e===t)return e;if(h(e)&&e.name===t)return e;if(b(e))for(o=0,r=e.length;o<r;o++)if(typeof(a=e[o])===nt&&a===t||a.name===t)return a;return null}function Pr(t,r){if(t&&0!==t.length)if(!0===r){t=e(t);var a=o.scrollLeft(t.parent());o.focusElement(t),o.scrollLeft(t.parent(),a)}else e(t).one("focusin",(function(e){e.preventDefault()})).trigger("focus")}function Br(e,o){return e.options.groupable&&(o.groupable||o.groupable===t)}function Or(t,o){return!!e.grep(t,(function(e){return e.field===o})).length}function qr(e,t){return!(!e.field||e.selectable)&&(!(t.editable&&!t.editable(e.field))&&!(e.editable&&!e.editable(t)))}function Vr(t){return e(t).is(":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-svg-icon>svg,span.k-svg-icon>svg>path,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on")}function Gr(t){var r=this,a=e(t.currentTarget),l=a.is("th"),n=this.table.add(this.lockedTable),i=this.thead&&this.thead.parent().add(e(">table",this.lockedHeader)),s=Vr(t.target),d=e(t.target).is(".k-checkbox"),c=e(t.target),u=a.closest("table")[0];!r._isStackedMode()&&s&&a.find(o.roleSelector("filtercell")).length?this._setCurrent(a,null,null,!0):u!==n[0]&&u!==n[1]&&u!==i[0]&&u!==i[1]||c.is(P+","+L+",[ref='expand-detail-button'], [ref='collapse-detail-button']")||(this.options.navigatable&&this._setCurrent(a,!1,d),!l&&s||setTimeout((function(){var t=e(o._activeElement());(t.hasClass("k-widget")||t.hasClass("k-dropdownlist")||t.is(".k-upload .k-upload-button"))&&!t.hasClass("k-grid-pager")||t.hasClass("k-select-checkbox")||!r.table||!t.is(we)&&Vr(o._activeElement())&&e.contains(u,o._activeElement())||Pr(r.table[0],!0)})),l&&!o.support.touch&&t.preventDefault())}function Wr(e,t){if(!t)return 0;var r=0;return o.support.browser.webkit&&(r=e.width()),r}function $r(t,o){var r;var a;return!!t&&!!((o=e(o))[0]&&y(t[0],o[0])&&(r=o.offset().top-t.offset().top,a=o.outerHeight()/2,(r>=0||S.abs(r)<=a)&&S.floor(r+a)<=t.height()))}function jr(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row")||e.hasClass("k-grid-stack-edit-cell"))}function Nr(t,r,a){return({colspan:l,text:n,expanded:i,isRtl:s})=>{let d=l+t>0?l+t:0;let c="caret-alt-"+(s?"left":"right");return`<td class="k-table-td" colspan="${l+t}"><p class="k-reset">`+o.ui.icon(e(`<a href="\\#" tabindex="-1" ${wt}="${i?mt:bt}"></a>`),{icon:i?"caret-alt-down":c})+n+`</p>${a||""}</td>${r?"":new Array(d).join("<td hidden group-header-spanned-hidden></td>")}`}}function Ur(t,r,a,l,n,i,s,d,c){return"<tr "+(i?'data-group-uid="'+n+'"':"")+'class="k-table-group-row k-grouping-row k-table-row">'+po(r)+'<td class="k-table-td" colspan="'+t+'" aria-expanded="'+!!l+'"><p class="k-reset">'+o.ui.icon(e('<a href="#" tabindex="-1" '+wt+'="'+(l?mt:bt)+'"></a>'),{icon:l?"caret-alt-down":"caret-alt-"+(s?"left":"right")})+a+`</p>${c||""}</td>${d?"":new Array(t).join("<td hidden group-header-spanned-hidden></td>")}</tr>`}function Kr(e){return'<tr class="k-table-group-row k-grouping-row k-table-row"><td class="k-table-td" colspan="'+e+'" aria-expanded="true">'+`<p class="k-reset">&nbsp;</p></td>${new Array(e).join("<td hidden group-header-spanned-hidden></td>")}</tr>`}function Qr(e,t){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,(function(e){return t?"\\"+e:"&quot;"})).replace(/'/g,"&#39;")}function Yr(e,t){return this.dataSource.indexOf(this.dataSource.getByUid(e.uid))-this.dataSource.indexOf(this.dataSource.getByUid(t.uid))}function Jr(e){return!(!1===e.exportable||e.exportable&&!1===e.exportable.excel)}o.ExcelMixin&&o.ExcelMixin.extend(Dr.prototype),o.PDFMixin&&(o.PDFMixin.extend(Dr.prototype),Dr.prototype._drawPDF_autoPageBreak=function(r){var a=this;var l=new e.Deferred;var n=a.dataSource;var i=a.options.pdf.allPages;var s=a.wrapper.find("> table > tbody, .k-grid-content > table > tbody").first();var d=e("<div>").css({position:"absolute",left:-1e4,top:-1e4});var c;a.toggleUnexportableColumns(a.columns),(c=a.wrapper.clone().css({height:rt,width:rt}).appendTo(d)).find(".k-grid-content").css({height:rt,width:rt,overflow:"visible"}),c.find("> table, .k-grid-header table, .k-grid-content > table, .k-grid-footer table").css({height:rt,width:"100%",overflow:"visible"}),c.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove(),c.find(".k-grid-header, .k-grid-footer, .k-auto-scrollable").css({paddingRight:0});var u=c.find("> table > tbody, .k-grid-content > table > tbody").first().empty();var p=n.page();function h(){d.appendTo(document.body);var t=e.extend({},a.options.pdf,{_destructive:!0,progress:function(e){r.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});o.drawing.drawDOM(c,t).always((function(){d.remove()})).then((function(e){l.resolve(e),a.toggleUnexportableColumns(a.columns,!0)})).fail((function(e){l.reject(e)}))}function g(){var e=n.page();var o=i?n.totalPages():1;u.append(s.children("tr:not(.k-detail-row)")),e<o?n.page(e+1):(n.unbind("change",g),i&&p!==t?(n.one("change",h),n.page(p)):(a.refresh(),h()))}return i?(n.bind("change",g),n.page(1)):g(),l.promise()},Dr.prototype.toggleUnexportableColumns=function(e,t){var o=e.length;var r;var a;var l;var n;for(var i=0;i<o;i++)a=(r=e[i]).exportable,t?r._toggledDuringExport?(r._toggledDuringExport=!1,r.hidden?this.showColumn(r):this.hideColumn(r)):r.columns&&this.toggleUnexportableColumns(r.columns,t):("object"==typeof r.exportable&&(a=r.exportable.pdf),l=!r.hidden&&!1!==a,n=r.hidden&&!0===a,(a=l||n)||r.hidden?a&&r.hidden?(r._toggledDuringExport=!0,this.showColumn(r)):a&&r.columns&&this.toggleUnexportableColumns(r.columns):(r._toggledDuringExport=!0,this.hideColumn(r)))},Dr.prototype._drawPDF=function(r){var a=this;if(a.options.pdf.paperSize&&a.options.pdf.paperSize!=rt)return a._drawPDF_autoPageBreak(r);var l=new e.Deferred;var n=a.dataSource;var i=a.options.pdf.allPages;var s=new o.drawing.Group;var d=n.page();function c(){a.toggleUnexportableColumns(a.columns),a._drawPDFShadow({width:a.wrapper.width()},{avoidLinks:a.options.pdf.avoidLinks}).done((function(e){var o=n.page();var u=i?n.totalPages():1;var p={page:e,pageNumber:o,progress:o/u,totalPages:u};a.toggleUnexportableColumns(a.columns,!0),r.notify(p),s.append(p.page),o<u?n.page(o+1):i&&d!==t?(n.unbind("change",c),n.one("change",(function(){l.resolve(s)})),n.page(d)):l.resolve(s)})).fail((function(e){l.reject(e)}))}return i?(n.bind("change",c),n.page(1)):c(),l.promise()}),r.plugin(Dr),r.plugin(no),g(o.ui.grid,{defaultBodyContextMenu:to,defaultHeadContextMenu:oo,defaultGroupsContextMenu:ro})}(window.kendo.jQuery);var E=kendo;e.__meta__={id:"grid",name:"Grid",category:"web",description:"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.",depends:["data","columnsorter","sortable","toolbar","html.button","icons","menu","loader","html.loadercontainer","badge","aiprompt","loaderContainer.chunk"],features:[{id:"grid-editing",name:"Editing",description:"Support for record editing",depends:["editable","window","textbox","form"]},{id:"grid-filtering",name:"Filtering",description:"Support for record filtering",depends:["filtermenu"]},{id:"grid-columnmenu",name:"Column menu",description:"Support for header column menu",depends:["columnmenu"]},{id:"grid-grouping",name:"Grouping",description:"Support for grid grouping",depends:["groupable"]},{id:"grid-filtercell",name:"Row filter",description:"Support for grid header filtering",depends:["filtercell"]},{id:"grid-paging",name:"Paging",description:"Support for grid paging",depends:["pager"]},{id:"grid-selection",name:"Selection",description:"Support for row selection",depends:["selectable"]},{id:"grid-column-reorder",name:"Column reordering",description:"Support for column reordering",depends:["reorderable"]},{id:"grid-column-resize",name:"Column resizing",description:"Support for column resizing",depends:["resizable"]},{id:"grid-mobile",name:"Grid adaptive rendering",description:"Support for adaptive rendering",depends:["dialog","pane","switch"]},{id:"grid-excel-export",name:"Excel export",description:"Export grid data as Excel spreadsheet",depends:["excel"]},{id:"grid-pdf-export",name:"PDF export",description:"Export grid data as PDF",depends:["pdf","drawing"]}]},e.default=E,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=kendo.grid.min.js.map
