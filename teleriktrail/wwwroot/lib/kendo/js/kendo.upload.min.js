/**
 * Kendo UI v2025.3.1002 (http://www.telerik.com/kendo-ui)
 * Copyright 2025 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("kendo.core.js"),require("kendo.progressbar.js"),require("kendo.icons.js"),require("kendo.html.button.js")):"function"==typeof define&&define.amd?define(["exports","kendo.core.min","kendo.progressbar.min","kendo.icons.min","kendo.html.button.min"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).kendo=e.kendo||{},e.kendo._globals=e.kendo._globals||{},e.kendo._globals.Upload={}))}(this,(function(e){!function(e){var t=window.kendo,a=t.ui.Widget,r=t.antiForgeryTokens,n=t.logToConsole,i=/\.([^\.]+)$/,o=".kendoUpload",s="select",l="upload",d="success",p="error",u="complete",c="cancel",f="clear",h="pause",v="resume",m="progress",k="remove",g="validationErrors",_="invalidMaxFileSize",y="invalidMinFileSize",F="invalidFileExtension",w="k-hover",b="k-focus",C="k-progressbar",E="."+C,S="tabindex";var U="upload",z="exclamation-circle",x="check";var A=a.extend({init:function(e,r){var n=this;n.progressbars=[],a.fn.init.call(n,e,r),n.name=e.name,n.multiple=n.options.multiple,n.directory=n.options.directory,n.localization=n.options.localization;var i=n.element;n.wrapper=i.closest(".k-upload"),0===n.wrapper.length&&(n.wrapper=n._wrapInput(i)),n._activeInput(i),n.element.addClass("k-hidden"),n.toggle(n.options.enabled);var s=n._ns=o+"-"+t.guid();i.closest("form").on("submit"+s,n._onParentFormSubmit.bind(n)).on("reset"+s,n._onParentFormReset.bind(n)),n._initUploadModule(),n._toggleDropZone(),n.wrapper.on("keydown",".k-upload-button",n._onUploadButtonKeydown.bind(n)).on("click",".k-upload-action",n._onFileAction.bind(n)).on("click",".k-clear-selected",n._onClearSelected.bind(n)).on("click",".k-upload-button",(function(e){e.preventDefault(),n.element.click()})).on("click",".k-upload-selected",n._onUploadSelected.bind(n)).on("keydown",n._onKeyDown.bind(n)).on("focusout",n._focusout.bind(n)),n.element.val()&&n._onInputChange({target:n.element})},events:[s,l,d,p,u,c,f,m,k,h,v],options:{name:"Upload",enabled:!0,multiple:!0,directory:!1,showFileList:!0,uniqueFileUids:!1,template:"",files:[],async:{autoRetryAfter:0,bufferChunkSize:1e7,maxAutoRetries:1,removeVerb:"POST",autoUpload:!0,withCredentials:!0,accept:"*/*; q=0.5, application/json",useArrayBuffer:!1},localization:{select:"Select files...",cancel:"Cancel",retry:"Retry",remove:"Remove",pause:"Pause",resume:"Resume",clearSelectedFiles:"Clear",uploadSelectedFiles:"Upload",dropFilesHere:"Drop files here to upload",invalidFiles:"Invalid file(s). Please check file upload requirements.",statusUploading:"uploading",statusUploaded:"uploaded",statusWarning:"warning",statusFailed:"failed",headerStatusUploading:"Uploading...",headerStatusPaused:"Paused",headerStatusUploaded:"Done",uploadSuccess:"File(s) uploaded successfully.",uploadFail:"File(s) failed to upload.",invalidMaxFileSize:"File size too large.",invalidMinFileSize:"File size too small.",invalidFileExtension:"File type not allowed."},validation:{allowedExtensions:[],maxFileSize:0,minFileSize:0},dropZone:""},_initUploadModule:function(){var e=this,t=e.options;if(t.async.saveUrl){e._module=e._supportsFormData()?new P(e):new R(e),e._async=!0;var a=t.files;a.length>0&&e._renderInitialFiles(a)}else e._module=new D(e)},setOptions:function(t){var r=this,n=r.element;e(r.options.dropZone).off(r._ns),a.fn.setOptions.call(r,t),r.multiple=r.options.multiple,r.directory=r.options.directory,n.attr("multiple",!!r._supportsMultiple()&&r.multiple),r.directory&&(n.attr("webkitdirectory",r.directory),n.attr("directory",r.directory)),r.toggle(r.options.enabled),r._initUploadModule(),r._toggleDropZone()},enable:function(e){e=void 0===e||e,this.toggle(e)},disable:function(){this.toggle(!1)},toggle:function(e){e=void 0===e?e:!e,this.wrapper.toggleClass("k-disabled",e),this.element.prop("disabled",e)},focus:function(){this.wrapper.find(".k-upload-button").trigger("focus")},destroy:function(){var t=this;var r=e(t.options.dropZone);e(document).add(e(".k-dropzone",t.wrapper)).add(t.wrapper.closest("form")).off(t._ns),r.length>0&&r.off(t._ns),e(t.element).off(o),t.progressbars&&t.progressbars.forEach((e=>{e.destroy()})),a.fn.destroy.call(t)},pause:function(a){this._module.onPause({target:e(a,this.wrapper)});var r=a.find(".k-i-pause-sm,.k-svg-i-pause-sm");var n=t.htmlEncode(this.localization.resume);t.ui.icon(r,{icon:"play-sm"}),r.attr("title",n),e(r).parent().attr("aria-label",n)},resume:function(a){this._module.onResume({target:e(a,this.wrapper)});var r=a.find(".k-i-play-sm,.k-svg-i-play-sm");var n=t.htmlEncode(this.localization.pause);t.ui.icon(r,{icon:"pause-sm"}),r.attr("title",n),e(r).parent().attr("aria-label",n)},upload:function(){this._module.onSaveSelected()},getFiles:function(){var t;var a=[];var r=this.wrapper.find(".k-file");for(var n=0;n<r.length;n++)if(t=e(r[n]).data("fileNames"))for(var i=0;i<t.length;i++)a.push(t[i]);return a},clearAllFiles:function(){var e=this;e.wrapper.find(".k-file").each((function(t,a){e._removeFileByDomElement(a,!1)}))},removeAllFiles:function(){var e=this;e.wrapper.find(".k-file").each((function(t,a){e._removeFileByDomElement(a,!0)}))},removeFileByUid:function(e){this._removeFileByUid(e,!0)},clearFileByUid:function(e){this._removeFileByUid(e,!1)},_removeFileByUid:function(a,r){var n;"string"==typeof a&&(n=e(".k-file["+t.attr("uid")+'="'+a+'"]',this.wrapper)).length>0&&this._removeFileByDomElement(n,r)},clearFile:function(e){this._removeFile(e,!1)},removeFile:function(e){this._removeFile(e,!0)},_removeFile:function(t,a){var r=this;var n=r.wrapper.find(".k-file");var i;"function"==typeof t&&n.each((function(n,o){i=e(o).data("fileNames"),t(i)&&r._removeFileByDomElement(o,a)}))},_removeFileByDomElement:function(t,a){var r=this;var n={target:e(t,r.wrapper)};r.options.async.saveUrl?(e(t).hasClass("k-file-progress")?r._module.onCancel(n):r._module.onRemove(n,{},a),0===e(".k-file",r.wrapper).length?r._hideHeaderUploadstatus():r._updateHeaderUploadStatus()):r._module.onRemove(n,{},a)},_addInput:function(t){if(t[0].nodeType){var a=this,r=t.clone().val("");r.insertAfter(a.element).data("kendo"+a.options.prefix+a.options.name,a),e(a.element).attr(S,"-1").removeAttr("id").off(o),a._activeInput(r),a.wrapper.find(".k-upload-button").trigger("focus")}},_activeInput:function(e){var t=this,a=t.wrapper;t.element=e,t.directory&&(e.attr("webkitdirectory",t.directory),e.attr("directory",t.directory)),e.attr("multiple",!!t._supportsMultiple()&&t.multiple).attr("autocomplete","off").on("click"+o,(function(e){a.hasClass("k-disabled")&&e.preventDefault()})).on("change"+o,t._onInputChange.bind(t))},_adjustFocusState:function(e,t){e.removeClass(b),e.attr(S,-1),t.addClass(b),t.attr(S,0)},_arrowKeyNavigation:function(e,a,r){var n,i=this,o=t.keys;a===o.DOWN?(e.preventDefault(),e.stopPropagation(),n=i.wrapper.find(".k-upload-files .k-file").first(),r.length>0&&(r.hasClass("k-upload-action")&&(r.removeClass(b),r=r.closest(".k-file")),n=r.next()),i._adjustFocusState(r,n),n&&0!==n.length||(n=i.wrapper.find(".k-clear-selected"))):a===o.UP?(e.preventDefault(),e.stopPropagation(),n=i.wrapper.find(".k-upload-files .k-file:last"),r.length>0&&(r.hasClass("k-upload-action")&&(r.removeClass(b),r=r.closest(".k-file")),n=r.prev()),i._adjustFocusState(r,n)):a===o.RIGHT?(r.hasClass("k-upload-action")?(n=r.next(".k-upload-action"))&&0!==n.length||(n=r.parent().find(".k-upload-action:first")):r.length>0&&(n=r.find(".k-upload-action:first")),n&&n.length>0&&(r.removeClass(b),n.addClass(b))):a===o.LEFT&&(r.hasClass("k-upload-action")?(n=r.prev(".k-upload-action"))&&0!==n.length||(n=r.parent().find(".k-upload-action:last")):r.length>0&&(n=r.find(".k-upload-action:last")),n&&n.length>0&&(r.removeClass(b),n.addClass(b))),n&&0!==n.length||a!==o.UP&&a!==o.DOWN||(n=i.wrapper.find(".k-upload-button")),n&&n.length>0&&(i._preventFocusRemove=!0,n.trigger("focus"))},_asyncCommandKeyNavigation:function(a,r,n){var i=this,o=t.keys,s=e(r,i.wrapper);if(i._retryClicked=!1,a===o.ESC&&r.find(".k-i-cancel,.k-svg-i-cancel").length>0)i.trigger(c,n),i._module.onCancel({target:s}),i._checkAllComplete(),i._updateHeaderUploadStatus(),i._preventFocusRemove=!0,i.wrapper.find(".k-upload-button").trigger("focus");else if(a===o.SPACEBAR)r.find(".k-i-pause-sm,.k-svg-i-pause-sm").length>0?(i.trigger(h,n),i.pause(r),i._updateHeaderUploadStatus()):r.find(".k-i-play-sm,.k-svg-i-play-sm").length>0&&(i.trigger(v,n),i.resume(r));else if(a===o.ENTER&&!r.is(".k-file-progress, .k-file-success, .k-file-invalid")){if(i.options.async.chunkSize&&!i.options.async.concurrent&&e(".k-file-progress",i.wrapper).length>0)return;e(".k-i-exclamation-circle,.k-svg-i-exclamation-circle",r).remove(),e(E,r).finish().show(),i._module.metaData[s.data("uid")]||i._module.prepareChunk(s),i._module.onRetry({target:s}),i._retryClicked=!0}},_commandKeyNavigation:function(a,r){var n=this,i=t.keys,o=r.data("fileNames"),s=n._filesContainValidationErrors(o),l={files:o,headers:{}};a===i.DELETE?n.trigger(k,l)||(n._module.onRemove({target:e(r,n.wrapper)},l,!s),n._preventFocusRemove=!0,n.wrapper.find(".k-upload-button").trigger("focus")):a===i.TAB?(r.removeClass(b),r.attr(S,-1)):n.options.async.saveUrl&&n._asyncCommandKeyNavigation(a,r,l)},_focusout:function(){var e=this.wrapper.find(".k-upload-files .k-file."+b);this._preventFocusRemove?this._preventFocusRemove=!1:(e.removeClass(b),e.attr(S,-1))},_onKeyDown:function(e){var a=this,r=a.wrapper.find(".k-upload-files .k-file."+b+",.k-upload-action."+b),n=t.keys,i=[n.DELETE,n.ESC,n.ENTER,n.SPACEBAR,n.TAB],o=e.keyCode;o===n.DOWN||o===n.UP||o===n.LEFT||o===n.RIGHT?a._arrowKeyNavigation(e,o,r):r.length>0&&r.hasClass("k-file")&&i.indexOf(o)>-1&&!a.wrapper.hasClass("k-disabled")&&(o===n.SPACEBAR&&(e.preventDefault(),e.stopPropagation()),a._commandKeyNavigation(o,r))},_onInputChange:function(t){var a=this;var r=e(t.target);var n=q(a._inputFiles(r),a._isAsyncNonBatch()||a.options.uniqueFileUids);H(n,a.options.validation),a.trigger(s,{files:n})?(a._addInput(r),r.remove()):a._module.onSelect({target:r},n),a.focus()},_onUploadButtonKeydown:function(e){var a=e.keyCode,r=t.keys;a!==r.ENTER&&a!==r.SPACEBAR||this.wrapper.find(".k-upload-button-wrap input").last().trigger("click")},_readDirectory:function(t){var a=new e.Deferred;var r=t.createReader();var n=[];var i=function(){r.readEntries((function(e){e.length?(n=n.concat(e),i()):a.resolve(n)}),a.reject)};return i(),a.promise()},_readFile:function(e){var t=this;var a=e.fullPath;e.file((function(e){e.relativePath=a.slice(1),t.droppedFolderFiles.push(e),t.droppedFolderCounter--,0===t.droppedFolderCounter&&setTimeout((function(){0===t.droppedFolderCounter&&t.droppedFolderFiles.length&&(t._proceedDroppedItems(t.droppedFolderFiles),t.droppedFolderFiles=[])}),0)}),(function(){n("File error.")}))},_traverseFileTree:function(e,t){var a=this;t||a.droppedFolderCounter--,this._readDirectory(e).then((function(e){a.droppedFolderCounter+=e.length;for(var t=0;t<e.length;t++)e[t].isFile?a._readFile(e[t]):e[t].isDirectory&&a._traverseFileTree(e[t])}))},_onDrop:function(e){var t=e.originalEvent.dataTransfer;var a=this;var r=t.files;var n;if(V(e),a.options.directoryDrop&&t.items){n=t.items.length,a.droppedFolderCounter=0,a.droppedFolderFiles=[];for(var i=0;i<n;i++)if(t.items[i].webkitGetAsEntry){var o=t.items[i].webkitGetAsEntry();o.isDirectory?a._traverseFileTree(o,!0):o.isFile&&a.droppedFolderFiles.push(t.files[i])}else a._proceedDroppedItems(r)}else a._proceedDroppedItems(r)},_proceedDroppedItems:function(t){var a=this;var r=q(B(t),a._isAsyncNonBatch()||a.options.uniqueFileUids);t.length>0&&!a.wrapper.hasClass("k-disabled")&&(!a.multiple&&r.length>1&&r.splice(1,r.length-1),H(r,a.options.validation),a.trigger(s,{files:r})||a._module.onSelect({target:e(".k-dropzone",a.wrapper)},r))},_filesContainValidationErrors:function(t){var a=!1;return e(t).each((function(e,t){if(t[g]&&t[g].length>0)return a=!0,!1})),a},_isAsyncNonBatch:function(){return this._async&&!this.options.async.batch||!1},_renderInitialFiles:function(e){var t=this;var a=0;for(e=q(e,!0),a=0;a<e.length;a++){var r=e[a];var n=t._enqueueFile(r.name,{fileNames:[r]});n.addClass("k-file-success").data("files",[e[a]]),t._supportsRemove()&&t._fileAction(n,k)}},_prepareTemplateData:function(e,t){var a=t.fileNames,r={},n=0,i=0;for(i=0;i<a.length;i++)n+=a[i].size;return r.name=e,r.size=n,r.files=t.fileNames,r},_createProgressbarWapper:function(){return"<div class='"+C+" k-hidden'></div>"},_createFileIconWrapper:function(e){return"<span class='k-file-icon-wrapper'>"+t.ui.icon({icon:e,iconClass:"k-file-icon",size:"xxlarge"})+"<span class='k-file-state'></span></span>"},_progressbarInit:function(e){let t=e.kendoProgressBar({animation:!1,showStatus:!1}).data("kendoProgressBar");this.progressbars.push(t)},_prepareDefaultSingleFileEntryTemplate:function(a){var r=a.fileNames[0];var n=O(a.fileNames);var i=t.getFileGroup(r.extension,!0);var o=r[g];var s=o&&o.length>0;var l=s?" k-file-invalid k-file-error":"";var d=s?"<span class='k-file-validation-message' aria-live='polite'>"+t.htmlEncode(this.localization[o[0]])+"</span>":"<span class='k-file-size'>"+n+"</span>";let p=t.htmlEncode(r.name,!0);var u="";return u+="<li class='k-file"+l+"'><div class='k-file-single'>"+this._createProgressbarWapper()+this._createFileIconWrapper(i)+"<span class='k-file-info'><span class='k-file-name' title='"+p+"'>"+p+"</span>"+d+"</span>",e(u+="<span class='k-upload-actions'></span></div>")},_prepareDefaultMultipleFileEntriesTemplate:function(a){var r=a.fileNames;var n=this._filesContainValidationErrors(r);var i=O(r);var o="";var s,l;for(o+="<li class='k-file"+(n?" k-file-invalid k-file-error":"")+"'><div class='k-file-multiple'>"+this._createProgressbarWapper()+this._createFileIconWrapper("copy"),r.sort((function(e,t){return e[g]?-1:t[g]?1:0})),o+="<span class='k-multiple-files-wrapper'>",s=0;s<r.length;s++){var d=O([l=r[s]]);let e=t.htmlEncode(l.name,!0);o+="<span class='k-file-info'>",l[g]&&l[g].length>0?o+="<span class='k-file-name k-file-name-invalid' title='"+e+"'>"+e+"</span>":o+="<span class='k-file-name' title='"+e+"'>"+e+"</span>",o+="<span class='k-file-size'>"+d+"</span></span>"}return o+=n?"<span class='k-file-validation-message' aria-live='polite'>"+t.htmlEncode(this.localization.invalidFiles)+"</span>":"<span class='k-file-summary'>Total: "+r.length+" files, "+i+"</span>",e(o+="</span><span class='k-upload-actions'></span></div>")},_enqueueFile:function(a,r){var n=this;var i;var o;var s=r.fileNames[0].uid;var l=e(".k-upload-files",n.wrapper);var d=n.options.template;var p;var u;var c=d?".k-progress":E;var f;var h;return 0===l.length&&(l=e("<ul class='k-upload-files'></ul>").appendTo(n.wrapper),n.options.showFileList||l.hide(),n.wrapper.removeClass("k-upload-empty")),i=e(".k-file",l),d?(p=n._prepareTemplateData(a,r),d=t.template(d),(o=e("<li class='k-file'>"+d(p)+"</li>")).find(".k-upload-action").addClass("k-button k-icon-button k-button-md k-rounded-md k-button-flat k-button-flat-base")):o=1===r.fileNames.length?n._prepareDefaultSingleFileEntryTemplate(r):n._prepareDefaultMultipleFileEntriesTemplate(r),(h=(f=e(c,o[0])).length>0)&&n._progressbarInit(f),o.attr(t.attr("uid"),s).appendTo(l).data(r),!n._async&&h&&f.data("kendoProgressBar").value(100),!n.multiple&&i.length>0&&(u={files:i.data("fileNames"),headers:{}},n.trigger(k,u)||n._module.onRemove({target:e(i,n.wrapper)},u)),o},_removeFileEntry:function(t){var a=this;var r=t.closest(".k-upload-files");var n;t.remove(),n=e(".k-file",r),e(".k-file-success, .k-file-error",r).length===n.length&&this._hideActionButtons(),0===n.length?(r.remove(),a.wrapper.addClass("k-upload-empty"),a._hideHeaderUploadstatus()):a._updateHeaderUploadStatus()},_fileAction:function(a,r,n){var i={remove:"x",cancel:"cancel",retry:"arrow-rotate-cw-small",pause:"pause-sm"};var o;let s=t.htmlEncode(this.localization[r]);if(i.hasOwnProperty(r))if(n||this._clearFileAction(a),this.options.template)if((o=a.find(".k-upload-action").first()).find(".k-icon,.k-svg-icon").length){if(o.next(".k-upload-action").length){let a=t.ui.icon(e(`<span title="${s}" aria-label="${s}"></span>`),{icon:i[r],iconClass:"k-button-icon"+("retry"==r?" k-i-retry":"")});o.next(".k-upload-action").addClass("k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button").append(a).show()}}else{let a=t.ui.icon(e(`<span title="${s}" aria-label="${s}"></span>`),{icon:i[r],iconClass:"k-button-icon"+("retry"==r?" k-i-retry":"")});o.addClass("k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button").append(a).show()}else n||a.find(".k-upload-action").remove(),a.find(".k-upload-actions").append(this._renderAction(i[r],s,"retry"==r?"k-i-retry":""))},_fileState:function(a,r){var n=this.localization,i={uploading:{text:n.statusUploading},uploaded:{text:n.statusUploaded},failed:{text:n.statusFailed}}[r];i&&e("span.k-file-state",a).text(t.htmlEncode(i.text))},_renderAction:function(a,r,n){return""!==a?e("<button type='button' class='k-button k-icon-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-upload-action' aria-hidden='true' aria-label='"+r+"' tabindex='-1'>"+t.ui.icon(e(`<span title="${r}"></span>`),{icon:a,iconClass:"k-button-icon"+(n?` ${n}`:"")})+"</button>").on("focus",(function(){e(this).addClass(b)})).on("blur",(function(){e(this).removeClass(b)})):e("<button type='button' class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base'><span class=\"k-button-text\">"+r+"</span></button>")},_clearFileAction:function(t){e(".k-upload-action",t).empty().hide()},_onFileAction:function(t){var a=this;if(!a.wrapper.hasClass("k-disabled")){var r=e(t.target).closest(".k-upload-action");var n=r.find(".k-icon,.k-svg-icon");var i=r.closest(".k-file");var o=i.data("fileNames");var s=a._filesContainValidationErrors(o);var l={files:o,headers:{}};a._retryClicked=!1,n.is(".k-i-x,.k-svg-i-x")?a.trigger(k,l)||(a._module.onRemove({target:e(i,a.wrapper)},l,!s),a.wrapper.find(".k-upload-button").trigger("focus")):n.is(".k-i-cancel,.k-svg-i-cancel")?(a.trigger(c,l),a._module.onCancel({target:e(i,a.wrapper)}),a._checkAllComplete(),a._updateHeaderUploadStatus(),a.wrapper.find(".k-upload-button").trigger("focus")):n.is(".k-i-pause-sm,.k-svg-i-pause-sm")?(a.trigger(h,l),a.pause(i),a._updateHeaderUploadStatus()):n.is(".k-i-play-sm,.k-svg-i-play-sm")?(a.trigger(v,l),a.resume(i)):n.hasClass("k-i-retry")&&(e(".k-i-exclamation-circle",i).remove(),e(E,i).finish().show(),a._module.onRetry({target:e(i,a.wrapper)}),a._retryClicked=!0),i.addClass(b)}return!1},_onUploadSelected:function(){return this.wrapper.hasClass("k-disabled")||this._module.onSaveSelected(),!1},_onClearSelected:function(){var e=this;return e.wrapper.hasClass("k-disabled")||e.trigger(f,{})||e.clearAllFiles(),!1},_onFileProgress:function(t,a){var r=e(E,t.target).data("kendoProgressBar");a>100&&(a=100),e(E,t.target).removeClass("k-hidden"),this.options.template||(0===e(".k-upload-pct",t.target).length&&e(".k-upload-actions",t.target).prepend("<span class='k-upload-pct'></span>"),100!==a?e(".k-upload-pct",t.target).text(a+"%"):e(".k-upload-pct",t.target).remove()),r&&r.value(a),this.trigger(m,{files:G(t).data("fileNames"),percentComplete:a})},_onUploadSuccess:function(e,a,r){var n=this;var i=G(e);var o=i.data("fileNames");var s=i.find(".k-file-summary");var l=i.find(".k-file-size");n.trigger(d,{files:i.data("fileNames"),response:a,operation:"upload",XMLHttpRequest:r})?n._setUploadErrorState(i):(n._fileState(i,"uploaded"),i.removeClass("k-file-progress").addClass("k-file-success"),s.length>0?s.addClass("k-hidden").after('<span class="k-file-validation-message" aria-live="polite">'+o.length+" "+t.htmlEncode(n.localization.uploadSuccess)+"</span>"):l.length>0&&l.addClass("k-hidden").after('<span class="k-file-validation-message" aria-live="polite">'+t.htmlEncode(n.localization.uploadSuccess)+"</span>"),n._updateHeaderUploadStatus(),n._supportsRemove()?n._fileAction(i,k):n._clearFileAction(i)),n._hideUploadProgress(i),n._checkAllComplete()},_onUploadError:function(e,t){var a=this;var r=a._module;var i=G(e);var o=i.data("uid");a._setUploadErrorState(i),a.trigger(p,{operation:"upload",files:i.data("fileNames"),XMLHttpRequest:t}),n("Server response: "+t.responseText),a.options.async.chunkSize?r._decreasePosition&&r._decreasePosition(o):a._hideUploadProgress(i),a._checkAllComplete(),this.options.async.autoRetryAfter&&this._autoRetryAfter(i)},_autoRetryAfter:function(e){var t=this;var a=this._module.retries;a&&(a[e.data("uid")]||(a[e.data("uid")]=1),a[e.data("uid")]<=this.options.async.maxAutoRetries&&(a[e.data("uid")]++,setTimeout((function(){t._module.performUpload(e)}),this.options.async.autoRetryAfter)))},_setUploadErrorState:function(a){var r,n=this,i=a.data("fileNames"),o=a.find(".k-file-summary"),s=a.find(".k-file-size");n._fileState(a,"failed"),a.removeClass("k-file-progress").addClass("k-file-error"),o.length>0?o.addClass("k-hidden").after('<span class="k-file-validation-message" aria-live="polite">'+i.length+" "+t.htmlEncode(n.localization.uploadFail)+"</span>"):s.length>0&&s.addClass("k-hidden").after('<span class="k-file-validation-message" aria-live="polite">'+t.htmlEncode(n.localization.uploadFail)+"</span>"),n._updateUploadProgress(a),(r=e(".k-upload-pct",a)).length>0&&r.remove(),this._updateHeaderUploadStatus(),this._fileAction(a,"retry"),this._fileAction(a,k,!0),n._retryClicked&&a.trigger("focus")},_updateUploadProgress:function(t){var a=this;var r=e(E,t);var n=r.length>0;if(!a.options.async.chunkSize&&n)r.data("kendoProgressBar").value(100);else{var i=t.data("uid");if(a._module.metaData){var o=a._module.metaData[i];if(o){var s=o.totalChunks?Math.round(o.chunkIndex/o.totalChunks*100):100;a._onFileProgress({target:e(t,a.wrapper)},s)}}}},_hideUploadProgress:function(t){e(E,t).delay(1e3).fadeOut(2e3,(function(){e(this).data("kendoProgressBar")&&e(this).data("kendoProgressBar").value(0)}))},_showActionButtons:function(){var a=this;var r=e(".k-actions",a.wrapper);var n=e(".k-upload-selected",a.wrapper);var i=e(".k-clear-selected",a.wrapper);0===n.length&&(n=e(t.html.renderButton(`<button class='k-upload-selected'>${t.htmlEncode(this.localization.uploadSelectedFiles)}</button>`,{icon:"upload",themeColor:"primary"})),i=e(t.html.renderButton(`<button class='k-clear-selected'>${t.htmlEncode(this.localization.clearSelectedFiles)}</button>`,{icon:"x"}))),r.length||(r=e("<div />").addClass("k-actions").append(n,i)),this.wrapper.append(r)},_hideActionButtons:function(){e(".k-actions",this.wrapper).remove()},_showHeaderUploadStatus:function(a){var r=this;var n=r.localization;var i=e(".k-dropzone",r.wrapper);var o=e(".k-upload-status",r.wrapper);0!==o.length&&o.remove(),e(".k-dropzone-hint",r.wrapper).addClass("k-hidden"),o='<span class="k-upload-status"><span class="k-icon"></span></span>',a?(o=e(o).append(t.htmlEncode(n.headerStatusUploading)),t.ui.icon(o.find(".k-icon,.k-svg-icon"),{icon:U})):(o=e(o).append(t.htmlEncode(n.headerStatusUploaded)),t.ui.icon(o.find(".k-icon,.k-svg-icon"),{icon:z})),i.length>0?i.append(o):e(".k-upload-button",r.wrapper).after(o)},_updateHeaderUploadStatus:function(){var a=this;var r=e(".k-upload-status",this.wrapper);var n=e(".k-file",a.wrapper).not(".k-file-success, .k-file-error");var i=e(".k-file-error",a.wrapper);var o=e(".k-file",a.wrapper).find(".k-i-play-sm,.k-svg-i-play-sm");var s;!o.length||o.length!==n.length&&a.options.async.concurrent?(0===n.length||i.length>0)&&(r=e(".k-upload-status",a.wrapper),(s=e(".k-icon,.k-svg-icon",r).removeClass()).length&&(t.ui.icon(s,{icon:0!==i.length?z:x}),r.html(s).append(t.htmlEncode(a.localization.headerStatusUploaded)))):(s=e(".k-icon,.k-svg-icon",r).removeClass()).length&&(t.ui.icon(s,{icon:"pause-sm"}),r.html(s).append(t.htmlEncode(a.localization.headerStatusPaused)))},_hideHeaderUploadstatus:function(){var t=this.options.dropZone;e(".k-upload-status",this.wrapper).remove(),""===t&&e(".k-dropzone-hint",this.wrapper).removeClass("k-hidden")},_onParentFormSubmit:function(){var t=this.element;if(void 0!==this._module.onAbort&&this._module.onAbort(),!t.value){var a=e(t);a.attr("disabled","disabled"),window.setTimeout((function(){a.prop("disabled",!1)}),0)}},_onParentFormReset:function(){e(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return"undefined"!=typeof FormData},_supportsMultiple:function(){var e=this._userAgent().indexOf("Windows")>-1;return!(t.support.browser.opera||t.support.browser.safari&&e)},_supportsDrop:function(){var e=this._userAgent().toLowerCase();return!(!/chrome/.test(e)&&/safari/.test(e)&&/windows/.test(e))&&this._supportsFormData()&&this.options.async.saveUrl},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){var a=this;var r=a._ns;var n=e(".k-dropzone",a.wrapper).on("dragenter"+r,V).on("dragover"+r,(function(e){e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),e.preventDefault()})).on("drop"+r,a._onDrop.bind(a));n.find(".k-dropzone-hint").length||n.append(e("<span class='k-dropzone-hint'>"+t.htmlEncode(a.localization.dropFilesHere)+"</span>")),$(n,r,(function(){n.closest(".k-upload").hasClass("k-disabled")||n.addClass(w)}),(function(){n.removeClass(w)})),a._bindDocumentDragEventWrappers(n)},_setupCustomDropZone:function(){var a=this;var r=e(a.options.dropZone);a.wrapper.find(".k-dropzone-hint").length?e(".k-dropzone-hint",a.wrapper).addClass("k-hidden"):e(".k-dropzone",a.wrapper).append(e("<span class='k-dropzone-hint k-hidden'>"+t.htmlEncode(a.localization.dropFilesHere)+"</span>"));var n=a._ns;r.on("dragenter"+n,V).on("dragover"+n,(function(e){e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),e.preventDefault()})).on("drop"+n,a._onDrop.bind(a)),$(r,n,(function(t){a.wrapper.hasClass("k-disabled")||(r.removeClass(w),r.addClass(w),e(t.target).addClass(w))}),(function(){r.removeClass(w)})),a._bindDocumentDragEventWrappers(r)},_bindDocumentDragEventWrappers:function(t){var a=this;var r=a._ns;$(e(document),r,(function(){a.wrapper.hasClass("k-disabled")||(t.addClass("k-dropzone-active"),t.closest(".k-upload").removeClass("k-upload-empty"),t.find(".k-dropzone-hint").removeClass("k-hidden"))}),(function(){t.removeClass("k-dropzone-active"),0===e("li.k-file",t.closest(".k-upload")).length&&t.closest(".k-upload").addClass("k-upload-empty")}))},_toggleDropZone:function(){var t=this,a=t.options.dropZone;t._supportsDrop()&&(e(a).off(t._ns),e(".k-dropzone",t.wrapper).off(t._ns),""!==a?t._setupCustomDropZone():t._setupDropZone())},_supportsRemove:function(){return!!this.options.async.removeUrl},_submitRemove:function(t,a,n,i){var o=this.options.async.removeField||"fileNames",s=e.extend(a.data,r());s[o]=t,jQuery.ajax({type:this.options.async.removeVerb,dataType:"json",dataFilter:K,url:this.options.async.removeUrl,traditional:!0,data:s,headers:a.headers,success:n,error:i,xhrFields:{withCredentials:this.options.async.withCredentials}})},_wrapInput:function(a){var r=this.options;var n=!!a.attr("id")&&e("[for='"+a.attr("id")+"']").length>0;var i=t.htmlEncode(this.localization.select);var o=e("<div class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-upload-button' tabindex='0' role='button'><span class='k-button-text'></span></div>");return o.find(".k-button-text").text(i),a.wrap("<div class='k-upload' role='application'><div class='k-dropzone k-upload-dropzone'><div class='k-upload-button-wrap'></div></div></div>"),o.prependTo(a.parent()),r.async.saveUrl?a.closest(".k-upload").addClass("k-upload-async"):a.closest(".k-upload").addClass("k-upload-sync"),a.closest(".k-upload").addClass("k-upload-empty"),n||a.attr("aria-label")||a.attr("aria-label",i),a.attr({tabindex:-1,"aria-hidden":!0}),a.closest(".k-upload")},_checkAllComplete:function(){0===e(".k-file.k-file-progress",this.wrapper).length&&this.trigger(u)},_inputFiles:function(e){return I(e)}});var D=function(e){this.name="syncUploadModule",this.element=e.wrapper,this.upload=e,this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};D.prototype={onSelect:function(t,a){var r=this.upload;var n=e(t.target);var i=r._filesContainValidationErrors(a);r._addInput(n);var o={fileNames:a};i?n.remove():o.relatedInput=n;var s=r._enqueueFile(T(n),o);i&&r._hideUploadProgress(s),r._fileAction(s,k)},onRemove:function(e){var t=G(e);var a=t.data("relatedInput");a&&a.remove(),this.upload._removeFileEntry(t)}};var R=function(e){this.name="iframeUploadModule",this.element=e.wrapper,this.upload=e,this.iframes=[]};A._frameId=0,R.prototype={onSelect:function(t,a){var r=this.upload;var n=e(t.target);var i=r._filesContainValidationErrors(a);var o=this.prepareUpload(n,a,i);r.options.async.autoUpload?i?(r._fileAction(o,k),r._showHeaderUploadStatus(!1)):this.performUpload(o):(r._fileAction(o,k),i?r._updateHeaderUploadStatus():r._showActionButtons()),i&&r._hideUploadProgress(o)},prepareUpload:function(t,a,r){var n=this.upload;var i=e(n.element);var o=n.options.async.saveField||t.attr("name");var s,l,d,p;return n._addInput(t),t.attr("name",o),r?(t.remove(),l={fileNames:a}):(d=this.createFrame(n.name+"_"+A._frameId++),this.registerFrame(d),p=this.createForm(n.options.async.saveUrl,d.attr("name")).append(i),l={frame:d,relatedInput:i,fileNames:a}),s=n._enqueueFile(T(t),l),d&&d.data({form:p,file:s}),s},performUpload:function(t){var a={files:t.data("fileNames")};var n=t.data("frame");var i=this.upload;var o=t.find(".k-file-validation-message");var s=t.find(".k-file-summary");var d=t.find(".k-file-size");if(i.trigger(l,a))i._removeFileEntry(n.data("file")),this.cleanupFrame(n),this.unregisterFrame(n);else{i._hideActionButtons(),i._showHeaderUploadStatus(!0),n.appendTo(document.body);var p=n.data("form").attr("action",i.options.async.saveUrl).appendTo(document.body);for(var u in a.data=e.extend({},a.data,r()),a.data){var f=p.find("input[name='"+u+"']");0===f.length&&(f=e("<input>",{type:"hidden",name:u}).prependTo(p)),f.val(a.data[u])}i._fileAction(t,c),i._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),o.length>0&&o.remove(),s.length>0?s.removeClass("k-hidden"):d.length>0&&d.removeClass("k-hidden"),n.one("load",this.onIframeLoad.bind(this)),p[0].submit()}},onSaveSelected:function(){var t=this;var a=t.upload;e(".k-file",this.element).each((function(){var r=e(this);var n=X(r);var i=a._filesContainValidationErrors(r.data("fileNames"));n||i||t.performUpload(r)}))},onIframeLoad:function(t){var a,r=e(t.target);try{a=r.contents().text()}catch(e){a="Error trying to get server response: "+e}this.processResponse(r,a)},processResponse:function(t,a){var r=t.data("file"),n=this,i={responseText:a};Z(a,(function(a){e.extend(i,{statusText:"OK",status:"200"}),n.upload._onFileProgress({target:e(r,n.upload.wrapper)},100),n.upload._onUploadSuccess({target:e(r,n.upload.wrapper)},a,i),n.cleanupFrame(t),n.unregisterFrame(t)}),(function(){e.extend(i,{statusText:"error",status:"500"}),n.upload._onUploadError({target:e(r,n.upload.wrapper)},i)}))},onCancel:function(t){var a=e(t.target).data("frame");this.stopFrameSubmit(a),this.cleanupFrame(a),this.unregisterFrame(a),this.upload._removeFileEntry(a.data("file"))},onRetry:function(e){var t=G(e);this.performUpload(t)},onRemove:function(e,t,a){var r=this;var n=r.upload;var i=G(e);var o=i.data("frame");o?(r.unregisterFrame(o),n._removeFileEntry(i),r.cleanupFrame(o)):i.hasClass("k-file-success")?W(i,n,t,a):n._removeFileEntry(i)},onAbort:function(){var t=this.element,a=this;e.each(this.iframes,(function(){e("input",this.data("form")).appendTo(t),a.stopFrameSubmit(this[0]),this.data("form").remove(),this.remove()})),this.iframes=[]},createFrame:function(t){return e("<iframe name='"+t+"' id='"+t+"' />").hide()},createForm:function(t,a){return e("<form enctype='multipart/form-data' method='POST' action='"+t+"' target='"+a+"'/>")},stopFrameSubmit:function(e){void 0!==e.stop?e.stop():e.document&&e.document.execCommand("Stop")},registerFrame:function(e){this.iframes.push(e)},unregisterFrame:function(t){this.iframes=e.grep(this.iframes,(function(e){return e.attr("name")!=t.attr("name")}))},cleanupFrame:function(e){var t=e.data("form");e.data("file").data("frame",null),setTimeout((function(){t.remove(),e.remove()}),1)}};var P=function(e){this.name="formDataUploadModule",this.element=e.wrapper,this.upload=e,this.position={},this.metaData={},this.cancelled={},this.resume={},this.paused={},this.retries={}};function T(t){return e.map(I(t),(function(e){return e.name})).join(", ")}function I(e){var t=e[0];return t.files?B(t.files):[{name:(a=t.value,r=a.lastIndexOf("\\"),-1!=r?a.substr(r+1):a),extension:N(t.value),size:null}];var a,r}function B(a){return e.map(a,(function(e){return r=(a=e).name||a.fileName,{name:t.htmlEncode(r),extension:N(r),size:"number"==typeof a.size?a.size:a.fileSize,rawFile:a};var a,r}))}function N(e){var t=e.match(i);return t?t[0]:""}function q(a,r){var n=t.guid();return e.map(a,(function(e){return e.uid=r?t.guid():n,e}))}function H(t,a){var r=function(t){var a=e.map(t,(function(e){return("."===e.substring(0,1)?e:"."+e).toLowerCase()}));return a}(a.allowedExtensions);var n=a.maxFileSize;var i=a.minFileSize;for(var o=0;o<t.length;o++)M(t[o],r),L(t[o],i,n)}function M(t,a){a.length>0&&a.indexOf(t.extension.toLowerCase())<0&&(t.validationErrors=t.validationErrors||[],-1===e.inArray(F,t.validationErrors)&&t.validationErrors.push(F))}function L(t,a,r){0!==a&&t.size<a&&(t.validationErrors=t.validationErrors||[],-1===e.inArray(y,t.validationErrors)&&t.validationErrors.push(y)),0!==r&&t.size>r&&(t.validationErrors=t.validationErrors||[],-1===e.inArray(_,t.validationErrors)&&t.validationErrors.push(_))}function O(e){var t=0;if("number"!=typeof e[0].size)return"";for(var a=0;a<e.length;a++)e[a].size&&(t+=e[a].size);return(t/=1024)<1024?t.toFixed(2)+" KB":(t/1024).toFixed(2)+" MB"}function j(t){return!t.multiple&&e(".k-file",t.wrapper).length>1}function W(t,a,r,i){if(a._supportsRemove()){var o=t.data("fileNames");var s=e.map(o,(function(e){return e.name}));!1!==i?a._submitRemove(s,r,(function(e,r,n){a.trigger(d,{operation:"remove",files:o,response:e,XMLHttpRequest:n})||a._removeFileEntry(t)}),(function(e){j(a)&&a._removeFileEntry(t),a.trigger(p,{operation:"remove",files:o,XMLHttpRequest:e}),n("Server response: "+e.responseText)})):a._removeFileEntry(t)}else!j(a)&&i||a._removeFileEntry(t)}function Z(e,t,a){var r=!1,n="";try{n=JSON.parse(K(e)),r=!0}catch(e){a()}r&&t(n)}function K(e){return void 0!==e&&""!==e||(e="{}"),e}function V(e){e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),e.stopPropagation(),e.preventDefault()}function $(e,t,a,r){var n,i;e.on("dragenter"+t,(function(e){a(e),i=new Date,n||(n=setInterval((function(){new Date-i>100&&(r(),clearInterval(n),n=null)}),100))})).on("dragover"+t,(function(){i=new Date}))}function X(e){return e.is(".k-file-progress, .k-file-success, .k-file-error:not(.k-file-invalid)")}function G(t){return e(t.target).closest(".k-file")}P.prototype={onSelect:function(t,a){var r=this.upload;var n=this;var i=e(t.target);var o=this.prepareUpload(i,a);var s;var l;e.each(o,(function(t){s=r._filesContainValidationErrors(e(this.data("fileNames"))),r.options.async.autoUpload?s?(r._fileAction(this,k),r._showHeaderUploadStatus(!1)):r.options.async.chunkSize?(n.prepareChunk(this),l=this.prev(),(r.options.async.concurrent||0===t&&!l.length||0===t&&l.hasClass("k-file-success"))&&n.performUpload(this)):n.performUpload(this):(r._fileAction(this,k),s?r._updateHeaderUploadStatus():(r._showActionButtons(),this.addClass("k-toupload"))),s&&r._hideUploadProgress(this)}))},prepareUpload:function(t,a){var r=this.enqueueFiles(a);return t.is("input")&&(e.each(r,(function(){e(this).data("relatedInput",t)})),t.data("relatedFileEntries",r),this.upload._addInput(t)),r},enqueueFiles:function(t){var a=this.upload;var r;var n;var i=t.length;var o;var s;var l=[];if(!0===a.options.async.batch)r=e.map(t,(function(e){return e.name})).join(", "),(a.directory||a.options.directoryDrop)&&e(t).each((function(){(this.rawFile.webkitRelativePath||this.rawFile.relativePath)&&(this.name=this.rawFile.webkitRelativePath||this.rawFile.relativePath)})),(s=a._enqueueFile(r,{fileNames:t})).data("files",t),l.push(s);else for(n=0;n<i;n++)r=(o=t[n]).name,(a.directory||a.options.directoryDrop)&&(o.rawFile.webkitRelativePath||o.rawFile.relativePath)&&(o.name=o.rawFile.webkitRelativePath||o.rawFile.relativePath),(s=a._enqueueFile(r,{fileNames:[o]})).data("files",[o]),l.push(s);return l},performUpload:function(t){var a,n=this.upload,i=this.createFormData(),o=this.createXHR(),s={files:t.data("fileNames"),XMLHttpRequest:o};var d=t.find(".k-file-validation-message");var p=t.find(".k-file-summary");var u=t.find(".k-file-size");if(n.trigger(l,s))this.removeFileEntry(t);else{if(0===t.find(".k-i-cancel,.k-svg-i-cancel").length&&(n.options.async.chunkSize&&n._fileAction(t,h),n._fileAction(t,c,n.options.async.chunkSize)),n.wrapper.find(".k-toupload").length||n._hideActionButtons(),n._showHeaderUploadStatus(!0),s.formData)i=s.formData;else{for(var f in s.data=e.extend({},s.data,r()),s.data)i.append(f,s.data[f]);(a=t.data("files"))&&this.populateFormData(i,a)}n._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),d.length>0&&d.remove(),p.length>0?p.removeClass("k-hidden"):u.length>0&&u.removeClass("k-hidden"),n.options.async.useArrayBuffer&&window.FileReader?this._readFile(n.options.async.saveUrl,i,t,o):this.postFormData(n.options.async.saveUrl,i,t,o)}},_readFile:function(t,a,r,n){var i=this;var o=i.upload;var s=r.data("files")[0];var l=new FileReader;l.onload=function(l){try{i.fileArrayBuffer?i.fileArrayBuffer=i._appendBuffer(i.fileArrayBuffer,l.target.result):i.fileArrayBuffer=l.target.result}catch(t){return void o._onUploadError({target:e(r,o.wrapper)},n)}i.position[s.uid]>s.size?(i.postFormData(o.options.async.saveUrl,i.fileArrayBuffer,r,n),i.fileArrayBuffer=null):i._readFile(t,a,r,n)},l.onerror=function(){o._onUploadError({target:e(r,o.wrapper)},n)},l.readAsArrayBuffer(i._getCurrentChunk(s.rawFile,s.uid))},_appendBuffer:function(e,t){var a=new Uint8Array(e.byteLength+t.byteLength);return a.set(new Uint8Array(e),0),a.set(new Uint8Array(t),e.byteLength),a.buffer},onSaveSelected:function(){var t=this;var a=t.upload;e(".k-toupload",this.element).filter((function(){var t=e(this);var r=X(t);var n=a._filesContainValidationErrors(t.data("fileNames"));return!r&&!n})).each((function(r){var n=e(this);var i=n.prev();n.removeClass("k-toupload"),a.options.async.chunkSize?(t.prepareChunk(n),(a.options.async.concurrent||0===r&&!i.length||0===r&&i.hasClass("k-file-success")||i.hasClass("k-file-error:not(k-file-invalid)"))&&t.performUpload(n)):t.performUpload(n)}))},onCancel:function(e){var t=G(e);this.upload.options.async.chunkSize&&(this.cancelled[t.data("uid")]=!0),this.stopUploadRequest(t),this.removeFileEntry(t)},onPause:function(e){var t=G(e).data("uid");var a=this.upload.options.async;a.chunkSize&&(this.retries[t]=a.maxAutoRetries+1,this.paused[t]=!0,this.resume[t]=!1)},onResume:function(e){var t=G(e);var a=t.data("uid");this.upload.options.async.chunkSize&&(delete this.paused[a],this.resume[a]=!0,this.retries[t.data("uid")]=1,this._increaseChunkIndex(a),this.performUpload(t))},onRetry:function(e){var t=G(e);var a=this.upload.options.async;a.chunkSize&&(this.retries[t.data("uid")]=a.maxAutoRetries+1,delete this.paused[t.data("uid")]),this.performUpload(t)},onRemove:function(e,t,a){var r=this.upload;var n=G(e);var i=this.upload.options.async;i.chunkSize&&(this.retries[n.data("uid")]=i.maxAutoRetries+1),n.hasClass("k-file-success")?W(n,r,t,a):this.removeFileEntry(n)},createXHR:function(){return new XMLHttpRequest},postFormData:function(e,t,a,r){var n=this;a.data("request",r),r.addEventListener("load",(function(e){n.onRequestSuccess.call(n,e,a)}),!1),r.addEventListener(p,(function(e){n.onRequestError.call(n,e,a)}),!1),r.upload.addEventListener("progress",(function(e){n.onRequestProgress.call(n,e,a)}),!1),r.open("POST",e,!0),r.withCredentials=this.upload.options.async.withCredentials;var i=this.upload.options.async.accept;i&&r.setRequestHeader("Accept",i),r.send(t)},createFormData:function(){return new FormData},populateFormData:function(e,t){var a;var r;var n=t.length;var i;var o=this.upload;if(o.options.async.chunkSize){i=t[0].uid,a=this._getCurrentChunk(t[0].rawFile,i),e.append(o.options.async.saveField||o.name,a);var s=JSON.stringify(this.metaData[i]);e.append("metadata",s)}else for(r=0;r<n;r++)e.append(o.options.async.saveField||o.name,t[r].rawFile);return e},onRequestSuccess:function(t,a){var r=t.target,n=this;function i(){n.upload._onUploadError({target:e(a,n.upload.wrapper)},r)}r.status>=200&&r.status<=299?Z(r.responseText,(function(t){var i=n.upload.options.async.batch;var o=n.upload.options.async.chunkSize;var s=n.upload.options.async.concurrent;var l=t.fileUid;n.paused[l]||n.cancelled[l]||(delete n.retries[l],!o||i||t.uploaded?!o||i||s||!a.next().length||a.next().hasClass("k-toupload")?(n.upload._onFileProgress({target:e(a,n.upload.wrapper)},100),n.upload._onUploadSuccess({target:e(a,n.upload.wrapper)},t,r),n.cleanupFileEntry(a)):(n.upload._onFileProgress({target:e(a,n.upload.wrapper)},100),n._resetChunkIndex(l),n.upload._onUploadSuccess({target:e(a,n.upload.wrapper)},t,r),n.performUpload(a.next())):(n._increaseChunkIndex(l),n.performUpload(a)))}),i):i()},onRequestError:function(t,a){var r=t.target;this.upload._onUploadError({target:e(a,this.upload.wrapper)},r)},cleanupFileEntry:function(t){var a=t.data("relatedInput"),r=!0;a&&(e.each(a.data("relatedFileEntries")||[],(function(){this.parent().length>0&&this[0]!=t[0]&&(r=r&&this.hasClass("k-file-success"))})),r&&a.remove())},removeFileEntry:function(e){var t=this.upload.options.async.chunkSize;var a=this.upload.options.async.concurrent;var r=this.upload.wrapper.find(".k-upload-selected").length>0;this.cleanupFileEntry(e),!t||a||r||e.next().length&&this.performUpload(e.next()),this.upload._removeFileEntry(e)},onRequestProgress:function(t,a){var r=Math.round(100*t.loaded/t.total);var n=a.data("uid");var i;this.upload.options.async.chunkSize&&(r=(i=this.metaData[n])&&i.totalChunks?Math.round(i.chunkIndex/i.totalChunks*100):100),this.upload._onFileProgress({target:e(a,this.upload.wrapper)},r)},stopUploadRequest:function(e){e.data("request")&&e.data("request").abort()},prepareChunk:function(e){var t=e.data("files")[0];var a=t.rawFile;var r=t.uid;var n=this.upload.options.async.chunkSize;this.position[r]=0,this.metaData[r]={chunkIndex:0,contentType:a.type,fileName:a.name,relativePath:t.name,totalFileSize:a.size,totalChunks:Math.ceil(a.size/n),uploadUid:r}},_decreaseChunkIndex:function(e){this.metaData[e].chunkIndex--},_increaseChunkIndex:function(e){this.metaData[e].chunkIndex++},_resetChunkIndex:function(e){this.metaData[e].chunkIndex=0},_decreasePosition:function(e){this.position[e]-=this.upload.options.async.chunkSize},_getCurrentChunk:function(e,t){var a=this.position[t];var r;var n=this.upload.options.async;var i=n.chunkSize||n.bufferChunkSize;return this.position[t]||(this.position[t]=0),this.position[t]+=i,(r=this._getChunker(e))?e[r](a,this.position[t]):e},_getChunker:function(e){return e.slice?"slice":e.mozSlice?"mozSlice":e.webkitSlice?"webkitSlice":null}},t.ui.plugin(A)}(window.kendo.jQuery);var t=kendo;e.__meta__={id:"upload",name:"Upload",category:"web",description:"The Upload widget uses progressive enhancement to deliver the best possible uploading experience to users.",depends:["core","progressbar","icons","html.button"]},e.default=t,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=kendo.upload.min.js.map
