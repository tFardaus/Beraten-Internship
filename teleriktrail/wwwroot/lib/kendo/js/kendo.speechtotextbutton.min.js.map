{"version":3,"sources":["raw-js/kendo.speechtotextbutton.js"],"names":["global","factory","exports","module","require","define","amd","globalThis","self","kendo","_globals","Speechtotextbutton","Core","Button","WebspeechCommonCmnChunk","this","kendo_core_js","kendo_button_js","kendo_webspeechCommon_cmn_chunk_js","$","window","ui","SpeechToTextButton","extend","init","element","options","fn","call","icon","addClass","attr","_isListening","_initSpeechRecognition","_updateIcon","integrationMode","K","enable","speechRecognition","lang","interimResults","maxAlternatives","continuous","events","start","_handleStart","end","_handleEnd","result","e","_handleResult","error","_handleError","isSupported","trigger","messages","unsupported","removeClass","results","lastResult","length","alternatives","i","push","transcript","confidence","isFinal","message","name","stopIcon","notInitialized","stop","iconElement","find","newIcon","isListening","newAriaLabel","_click","isDefaultPrevented","eventName","eventData","sender","startRecognition","stopRecognition","abortRecognition","abort","destroy","cssProperties","registerPrefix","registerValues","prop","values","roundedValues","concat","plugin","jQuery","kendo$1","__meta__","id","category","description","depends","default","Object","defineProperty","value"],"mappings":";;;;;;;;CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,oBAAAC,OAAAF,EAAAC,QAAAE,QAAA,iBAAAA,QAAA,mBAAAA,QAAA,wCACA,mBAAAC,QAAAA,OAAAC,IAAAD,OAAA,CAAA,UAAA,iBAAA,mBAAA,wCAAAJ,GACAA,IAAAD,EAAA,oBAAAO,WAAAA,WAAAP,GAAAQ,MAAAC,MAAAT,EAAAS,OAAA,CAAA,EAAAT,EAAAS,MAAAC,SAAAV,EAAAS,MAAAC,UAAA,CAAA,EAAAV,EAAAS,MAAAC,SAAAC,mBAAA,CAAA,GAAAX,EAAAS,MAAAC,SAAAE,KAAAZ,EAAAS,MAAAC,SAAAG,OAAAb,EAAAS,MAAAC,SAAAI,wBACA,CAJA,CAIAC,MAAA,SAAAb,EAAAc,EAAAC,EAAAC,IASA,SAAAC,GACA,MAAAV,EAAAW,OAAAX,MACAY,EAAAZ,EAAAY,GACAR,EAAAQ,EAAAR,OAEA,MAAAS,EAAAT,EAAAU,OAAA,CACAC,KAAA,SAAAC,EAAAC,GACAb,EAAAc,GAAAH,KAAAI,KAAAb,KAAAU,EAAAN,EAAAI,OAAA,CAAAM,KAAAd,KAAAW,QAAAG,MAAAH,IACAP,EAAAM,GAAAK,SAAA,2BAAAC,KAAA,YAAA,UACAhB,KAAAiB,cAAA,EACAjB,KAAAkB,yBACAlB,KAAAmB,aACA,EAEAD,uBAAA,WACA,GAAA,cAAAlB,KAAAW,QAAAS,gBACA,OAGA,IAAAjB,EAAAkB,EAEA,YADArB,KAAAsB,QAAA,GAIA,MAAA7B,EAAAO,KACAA,KAAAuB,kBAAA,IAAApB,EAAAkB,EAAA,CACAG,KAAAxB,KAAAW,QAAAa,KACAC,eAAAzB,KAAAW,QAAAc,eACAC,gBAAA1B,KAAAW,QAAAe,gBACAC,WAAA3B,KAAAW,QAAAgB,WACAC,OAAA,CACAC,MAAA,WAAApC,EAAAqC,cAAA,EACAC,IAAA,WAAAtC,EAAAuC,YAAA,EACAC,OAAA,SAAAC,GAAAzC,EAAA0C,cAAAD,EAAA,EACAE,MAAA,SAAAF,GAAAzC,EAAA4C,aAAAH,EAAA,KAIAlC,KAAAuB,kBAAAe,gBACAtC,KAAAsB,QAAA,GACAtB,KAAAuC,QAAA,QAAA,CAAAH,MAAApC,KAAAW,QAAA6B,SAAAC,cAEA,EAEAX,aAAA,WACA9B,KAAAiB,cAAA,EACAjB,KAAAU,QAAAK,SAAA,eACAf,KAAAmB,cACAnB,KAAAuC,QAAA,QACA,EACAP,WAAA,WACAhC,KAAAiB,cAAA,EACAjB,KAAAU,QAAAgC,YAAA,eACA1C,KAAAmB,cACAnB,KAAAuC,QAAA,MACA,EACAJ,cAAA,SAAAD,GACA,MAAAS,EAAAT,EAAAS,QACA,MAAAC,EAAAD,EAAAA,EAAAE,OAAA,GACA,MAAAC,EAAA,GACA,IAAA,IAAAC,EAAA,EAAAA,EAAAH,EAAAC,OAAAE,IACAD,EAAAE,KAAA,CACAC,WAAAL,EAAAG,GAAAE,WACAC,WAAAN,EAAAG,GAAAG,aAGAlD,KAAAuC,QAAA,SAAA,CACAY,QAAAP,EAAAO,QACAL,aAAAA,GAEA,EACAT,aAAA,SAAAH,GACAlC,KAAAiB,cAAA,EACAjB,KAAAU,QAAAgC,YAAA,eACA1C,KAAAmB,cACA,MAAAiB,EAAAF,IAAAA,EAAAE,OAAAF,EAAAkB,UAAA,gBACApD,KAAAuC,QAAA,QAAA,CAAAH,MAAAA,GACA,EAEAzB,QAAA,CACA0C,KAAA,qBACAvC,KAAA,qBACAwC,SAAA,UACAlC,gBAAA,YACAI,KAAA,QACAG,YAAA,EACAF,gBAAA,EACAC,gBAAA,EACAc,SAAA,CACAC,YAAA,uDACAc,eAAA,6CACA1B,MAAA,2BACA2B,KAAA,4BAIA5B,OAAA,CACA,QACA,MACA,SACA,QACA,SAGAT,YAAA,WACA,MAAAsC,EAAAzD,KAAAU,QAAAgD,KAAA,wBACA,MAAAC,EAAA3D,KAAA4D,cAAA5D,KAAAW,QAAA2C,SAAAtD,KAAAW,QAAAG,KACA,MAAA+C,EAAA7D,KAAA4D,cAAA5D,KAAAW,QAAA6B,SAAAgB,KAAAxD,KAAAW,QAAA6B,SAAAX,MAEA4B,EAAAZ,QACAnD,EAAAY,GAAAQ,KAAA2C,EAAA,CAAA3C,KAAA6C,IAGA3D,KAAAU,QAAAM,KAAA,aAAA6C,EACA,EACAD,YAAA,WACA,QAAA5D,KAAAiB,YACA,EAEA6C,OAAA,SAAA5B,GAGA,GAFApC,EAAAc,GAAAkD,OAAAjD,KAAAb,KAAAkC,IAEAA,EAAA6B,qBAIA,GAAA,cAAA/D,KAAAW,QAAAS,gBAAA,CACA,IAAApB,KAAAuB,oBAAAvB,KAAAuB,kBAAAe,cAEA,YADAtC,KAAAuC,QAAA,QAAA,CAAAH,MAAApC,KAAAW,QAAA6B,SAAAC,cAIAzC,KAAA4D,cACA5D,KAAAuB,kBAAAiC,OAEAxD,KAAAuB,kBAAAM,OAEA,MAAA,GAAA,SAAA7B,KAAAW,QAAAS,gBAAA,CACA,MAAA4C,EAAAhE,KAAA4D,cAAA,MAAA,QACA,MAAAK,EAAA,CACAC,OAAAlE,MAGAA,KAAAuC,QAAAyB,EAAAC,GAEAjE,KAAAiB,cAAAjB,KAAA4D,cACA5D,KAAAmB,aACA,CACA,EAEAgD,iBAAA,WACAnE,KAAAW,QAAAW,SACAtB,KAAAuB,kBAKAvB,KAAAuB,kBAAAe,cAKAtC,KAAA4D,eACA5D,KAAAuB,kBAAAM,QALA7B,KAAAuC,QAAA,QAAA,CAAAH,MAAApC,KAAAW,QAAA6B,SAAAC,cALAzC,KAAAuC,QAAA,QAAA,CAAAH,MAAApC,KAAAW,QAAA6B,SAAAe,iBAYA,EAEAa,gBAAA,WACApE,KAAAuB,mBAAAvB,KAAA4D,eACA5D,KAAAuB,kBAAAiC,MAEA,EAEAa,iBAAA,WACArE,KAAAuB,mBAAAvB,KAAA4D,eACA5D,KAAAuB,kBAAA+C,OAEA,EAEAC,QAAA,WACAvE,KAAAuB,oBACAvB,KAAAuB,kBAAAiC,OACA,mBAAAxD,KAAAuB,kBAAAgD,SACAvE,KAAAuB,kBAAAgD,UAEAvE,KAAAuB,kBAAA,MAGAnB,EAAAJ,KAAAU,SAAAgC,YAAA,2BACA5C,EAAAc,GAAA2D,QAAA1D,KAAAb,KACA,IAIAN,EAAA8E,cAAAC,eAAA,qBAAA,aACA/E,EAAA8E,cAAAE,eAAA,qBAAA,CAAA,CACAC,KAAA,UACAC,OAAAlF,EAAA8E,cAAAK,cAAAC,OAAA,CAAA,CAAA,OAAA,aAGAxE,EAAAyE,OAAAxE,EACA,CAzMA,CAyMAF,OAAAX,MAAAsF,QAEA,IAAAC,EAAAvF,MAEAP,EAAA+F,SArNA,CACAC,GAAA,qBACA9B,KAAA,qBACA+B,SAAA,MACAC,YAAA,6GACAC,QAAA,CAAA,OAAA,SAAA,+BAiNAnG,EAAAoG,QAAAN,EAEAO,OAAAC,eAAAtG,EAAA,aAAA,CAAAuG,OAAA,GAEA","file":"kendo.speechtotextbutton.min.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('kendo.core.js'), require('kendo.button.js'), require('kendo.webspeech-common.cmn.chunk.js')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'kendo.core', 'kendo.button', 'kendo.webspeech-common.cmn.chunk'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory((global.kendo = global.kendo || {}, global.kendo._globals = global.kendo._globals || {}, global.kendo._globals.Speechtotextbutton = {}), global.kendo._globals.Core, global.kendo._globals.Button, global.kendo._globals.WebspeechCommonCmnChunk));\n})(this, (function (exports, kendo_core_js, kendo_button_js, kendo_webspeechCommon_cmn_chunk_js) {\n    const __meta__ = {\n        id: \"speechtotextbutton\",\n        name: \"SpeechToTextButton\",\n        category: \"web\",\n        description: \"The SpeechToTextButton widget is an extension of the Kendo UI Button that allows for speech-to-text input.\",\n        depends: [\"core\", \"button\", \"webspeech-common.cmn.chunk\"]\n    };\n\n    (function($, undefined$1) {\n        const kendo = window.kendo,\n            ui = kendo.ui,\n            Button = ui.Button;\n\n        const SpeechToTextButton = Button.extend({\n            init: function(element, options) {\n                Button.fn.init.call(this, element, $.extend({ icon: this.options.icon }, options));\n                $(element).addClass(\"k-speech-to-text-button\").attr(\"aria-live\", \"polite\");\n                this._isListening = false;\n                this._initSpeechRecognition();\n                this._updateIcon();\n            },\n\n            _initSpeechRecognition: function() {\n                if (this.options.integrationMode !== 'webSpeech') {\n                    return;\n                }\n\n                if (!kendo_webspeechCommon_cmn_chunk_js.K) {\n                    this.enable(false);\n                    return;\n                }\n\n                const self = this;\n                this.speechRecognition = new kendo_webspeechCommon_cmn_chunk_js.K({\n                    lang: this.options.lang,\n                    interimResults: this.options.interimResults,\n                    maxAlternatives: this.options.maxAlternatives,\n                    continuous: this.options.continuous,\n                    events: {\n                        start: function() { self._handleStart(); },\n                        end: function() { self._handleEnd(); },\n                        result: function(e) { self._handleResult(e); },\n                        error: function(e) { self._handleError(e); }\n                    }\n                });\n\n                if (!this.speechRecognition.isSupported()) {\n                    this.enable(false);\n                    this.trigger(\"error\", { error: this.options.messages.unsupported });\n                }\n            },\n\n            _handleStart: function() {\n                this._isListening = true;\n                this.element.addClass(\"k-listening\");\n                this._updateIcon();\n                this.trigger(\"start\");\n            },\n            _handleEnd: function() {\n                this._isListening = false;\n                this.element.removeClass(\"k-listening\");\n                this._updateIcon();\n                this.trigger(\"end\");\n            },\n            _handleResult: function(e) {\n                const results = e.results;\n                const lastResult = results[results.length - 1];\n                const alternatives = [];\n                for (let i = 0; i < lastResult.length; i++) {\n                    alternatives.push({\n                        transcript: lastResult[i].transcript,\n                        confidence: lastResult[i].confidence\n                    });\n                }\n                this.trigger(\"result\", {\n                    isFinal: lastResult.isFinal,\n                    alternatives: alternatives\n                });\n            },\n            _handleError: function(e) {\n                this._isListening = false;\n                this.element.removeClass(\"k-listening\");\n                this._updateIcon();\n                const error = e && (e.error || e.message) || 'Unknown error';\n                this.trigger(\"error\", { error: error });\n            },\n\n            options: {\n                name: \"SpeechToTextButton\",\n                icon: \"microphone-outline\",\n                stopIcon: \"stop-sm\",\n                integrationMode: \"webSpeech\",\n                lang: 'en-US',\n                continuous: false,\n                interimResults: false,\n                maxAlternatives: 1,\n                messages: {\n                    unsupported: \"Speech recognition is not supported in this browser.\",\n                    notInitialized: \"Speech recognition engine not initialized.\",\n                    start: \"Start speech recognition\",\n                    stop: \"Stop speech recognition\"\n                }\n            },\n\n            events: [\n                \"start\",\n                \"end\",\n                \"result\",\n                \"error\",\n                \"click\"\n            ],\n\n            _updateIcon: function() {\n                const iconElement = this.element.find(\".k-icon, .k-svg-icon\");\n                const newIcon = this.isListening() ? this.options.stopIcon : this.options.icon;\n                const newAriaLabel = this.isListening() ? this.options.messages.stop : this.options.messages.start;\n\n                if (iconElement.length) {\n                    kendo.ui.icon(iconElement, { icon: newIcon });\n                }\n\n                this.element.attr(\"aria-label\", newAriaLabel);\n            },\n            isListening: function() {\n                return !!this._isListening;\n            },\n\n            _click: function(e) {\n                Button.fn._click.call(this, e);\n\n                if (e.isDefaultPrevented()) {\n                    return;\n                }\n\n                if (this.options.integrationMode === 'webSpeech') {\n                    if (!this.speechRecognition || !this.speechRecognition.isSupported()) {\n                        this.trigger(\"error\", { error: this.options.messages.unsupported });\n                        return;\n                    }\n\n                    if (this.isListening()) {\n                        this.speechRecognition.stop();\n                    } else {\n                        this.speechRecognition.start();\n                    }\n                } else if (this.options.integrationMode === 'none') {\n                    const eventName = this.isListening() ? \"end\" : \"start\";\n                    const eventData = {\n                        sender: this\n                    };\n\n                    this.trigger(eventName, eventData);\n\n                    this._isListening = !this.isListening();\n                    this._updateIcon();\n                }\n            },\n\n            startRecognition: function() {\n                if (!this.options.enable) { return; }\n                if (!this.speechRecognition) {\n                    this.trigger(\"error\", { error: this.options.messages.notInitialized });\n                    return;\n                }\n\n                if (!this.speechRecognition.isSupported()) {\n                    this.trigger(\"error\", { error: this.options.messages.unsupported });\n                    return;\n                }\n\n                if (!this.isListening()) {\n                    this.speechRecognition.start();\n                }\n            },\n\n            stopRecognition: function() {\n                if (this.speechRecognition && this.isListening()) {\n                    this.speechRecognition.stop();\n                }\n            },\n\n            abortRecognition: function() {\n                if (this.speechRecognition && this.isListening()) {\n                    this.speechRecognition.abort();\n                }\n            },\n\n            destroy: function() {\n                if (this.speechRecognition) {\n                    this.speechRecognition.stop();\n                    if (typeof this.speechRecognition.destroy === 'function') {\n                        this.speechRecognition.destroy();\n                    }\n                    this.speechRecognition = null;\n                }\n\n                $(this.element).removeClass(\"k-speech-to-text-button\");\n                Button.fn.destroy.call(this);\n            }\n        });\n\n\n        kendo.cssProperties.registerPrefix(\"SpeechToTextButton\", \"k-button-\");\n        kendo.cssProperties.registerValues(\"SpeechToTextButton\", [{\n            prop: \"rounded\",\n            values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n        }]);\n\n        ui.plugin(SpeechToTextButton);\n    })(window.kendo.jQuery);\n\n    var kendo$1 = kendo;\n\n    exports.__meta__ = __meta__;\n    exports.default = kendo$1;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]}